$.extend($.fn.datagrid.defaults,{rowHeight:50,maxDivHeight:1e7,maxVisibleHeight:15e6,deltaTopHeight:0,groupHeight:28,expanderWidth:30,onBeforeFetch:function(t){},onFetch:function(t,e){}}),$.extend($.fn.datagrid.methods,{fixDetailRowHeight:function(t,o){return t.each(function(){var t=$.data(this,"datagrid").options,e=$.data(this,"datagrid").dc,a=t.finder.getTr(this,o,"body",1).next(),i=t.finder.getTr(this,o,"body",2).next();i.is(":visible")&&(a.css("height",""),i.css("height",""),t=Math.max(a.height(),i.height()),a.css("height",t),i.css("height",t)),e.body2.triggerHandler("scroll")})},getExpander:function(t,e){return $.data(t[0],"datagrid").options.finder.getTr(t[0],e).find("span.datagrid-row-expander")},getRowDetail:function(t,e){return $.data(t[0],"datagrid").options.finder.getTr(t[0],e,"body",2).next().find("div.datagrid-row-detail")},expandRow:function(t,i){return t.each(function(){var t,e=$(this).datagrid("options"),a=($.data(this,"datagrid").dc,$(this).datagrid("getExpander",i));a.hasClass("datagrid-row-expand")&&(a.removeClass("datagrid-row-expand").addClass("datagrid-row-collapse"),t=e.finder.getTr(this,i,"body",1).next(),a=e.finder.getTr(this,i,"body",2).next(),t.show(),a.show(),$(this).datagrid("fixDetailRowHeight",i),e.onExpandRow&&(a=$(this).datagrid("getRows")[i],e.onExpandRow.call(this,i,a)))})},collapseRow:function(t,o){return t.each(function(){var t,e=$(this).datagrid("options"),a=$.data(this,"datagrid").dc,i=$(this).datagrid("getExpander",o);i.hasClass("datagrid-row-collapse")&&(i.removeClass("datagrid-row-collapse").addClass("datagrid-row-expand"),t=e.finder.getTr(this,o,"body",1).next(),i=e.finder.getTr(this,o,"body",2).next(),t.hide(),i.hide(),a.body2.triggerHandler("scroll"),e.onCollapseRow&&(a=$(this).datagrid("getRows")[o],e.onCollapseRow.call(this,o,a)))})}}),$.extend($.fn.datagrid.defaults.finder,{getRow:function(t,e){var a="object"==typeof e?e.attr("datagrid-row-index"):e,e=$.data(t,"datagrid").data,t=$(t).datagrid("options");if("scrollview"===t.view.type){if(a<e.firstRows.length)return e.firstRows[a];a-=t.view.index}return e.rows[a]}});var scrollview=$.extend({},$.fn.datagrid.defaults.view,{type:"scrollview",index:0,r1:[],r2:[],r3:[],rows_group_h:{},setEmptyMsg:"",load_status:!1,rows:[],render:function(t,e,a,i){var o=$.data(t,"datagrid").options,r=this.rows||[];if(r.length&&(!a||o.rownumbers||o.frozenColumns&&o.frozenColumns.length)){var d=this.index,s=[],n=[];if("new"===i){for(var l,g=['<div class="datagrid-btable-top"></div>'],h=0;h<r.length;h++)(l=u((p=r[h])[o.groupField]))?l.rows.push(p):(l={value:p[o.groupField],rows:[p]},s.push(l));for(h=0;h<s.length;h++)(l=s[h]).startIndex=d,d+=l.rows.length,n=n.concat(l.rows);for(h=0;h<s.length;h++)g.push(this.renderGroup.call(this,t,h,s[h],a,i));g.push('<div class="datagrid-btable-bottom"></div>'),$(e).html(g.join(""))}else{for(var p,h=0;h<r.length;h++)(l=u((p=r[h])[o.groupField]))?l.rows.push(p):(l={value:p[o.groupField],rows:[p]},s.push(l));for(h=0;h<s.length;h++)(l=s[h]).startIndex=d,d+=l.rows.length,n=n.concat(l.rows);for(var c="",h=0;h<s.length;h++)c+=this.renderGroup.call(this,t,h,s[h],a,i);o.groupActive?(console.log(s),console.log($(e)),console.log(c),$(e).find(".datagrid-btable-bottom").before(c)):$(e).find("table").append(c)}}function u(t){for(var e=0;e<s.length;e++){var a=s[e];if(a.value===t)return a}return null}},renderGroup:function(t,e,a,i,o){var r=$.data(t,"datagrid"),d=r.options,s=$(t).datagrid("getColumnFields",i),n=[],l=[];d.groupActive&&(l.push("<tr>"),(i&&(d.rownumbers||d.frozenColumns.length)||!i&&!d.rownumbers&&!d.frozenColumns.length)&&l.push('<td style="border:0;text-align:center;width:25px"><span class="datagrid-row-expander datagrid-row-collapse icon-uniF077" style="display:inline-block;margin-left: 8px;cursor:pointer">&nbsp;</span></td>'),l.push('<td style="border:0;">'),i?(l.push('<span class="datagrid-group-title frozen_gtitle text-ellipsis">'),d.frozenColumns[0]&&2<=d.frozenColumns[0].length&&l.push(d.groupFormatter.call(t,a.value,a.rows))):(l.push('<span class="datagrid-group-title unfrozen_gtitle text-ellipsis">'),d.frozenColumns[0]&&d.frozenColumns[0].length<2&&l.push(d.groupFormatter.call(t,a.value,a.rows))),l.push("</span>"),l.push("</td>"),l.push("</tr>"),n.push('<div class="datagrid-group" class="grid-r-g-'+this.page+'" group-index='+e+">"),n.push('<table cellspacing="0" cellpadding="0" border="0" style="height:100%"><tbody>'),n.push(l.join("")),n.push("</tbody></table>"),n.push("</div>"));for(var g=a.startIndex,h=[],p=0;p<a.rows.length;p++){var c=d.rowStyler?d.rowStyler.call(t,g,a.rows[p]):"",u="",f="";"string"==typeof c?f=c:c&&(u=c.class||"",f=c.style||"");c=[];f&&c.push(f);f='class="datagrid-row '+(g%2&&d.striped?"datagrid-row-alt ":" ")+u+'"',u=0<c.length?'style="'+c.join(";")+'"':"",c=r.rowIdPrefix+"-"+(i?1:2)+"-"+g;h.push('<tr id="'+c+'" datagrid-row-index="'+g+'" '+f+" "+u+">"),h.push(this.renderRow.call(this,t,s,i,g,a.rows[p])),h.push("</tr>"),g++}return n.push('<table class="datagrid-btable grid-r-g-'+this.page+'" cellspacing="0" cellpadding="0" border="0"><tbody>'),n.push(h.join("")),n.push("</tbody></table>"),"new"===o||d.groupActive?n.join(""):'<tbody class="grid-r-g-'+this.page+'">'+h.join("")+"</tbody>"},onBeforeRender:function(o,t){var r=$.data(o,"datagrid"),d=r.options,e=r.dc,s=this;d._emptyMsg=d.emptyMsg,d.emptyMsg="",r.data.firstRows=r.data.rows,r.data.rows=[],this.groups=[],e.body1.add(e.body2).empty(),this.rows=[],this.r1=this.r3=[],this.r2=t,function(){d.rowHeight=$(o).datagrid("getRowHeight");var a=$(o).datagrid("getPager");{var i;a.each(function(){$(this).pagination("options").onSelectPage=function(t,e){d.pageNumber=t||1,d.pageSize=e,a.pagination("refresh",{pageNumber:t,pageSize:e}),$(o).datagrid("gotoPage",d.pageNumber)}}),r.onLoadSuccess=d.onLoadSuccess,d.onLoadSuccess=function(){},d.remoteSort||(i=d.onBeforeSortColumn,d.onBeforeSortColumn=function(t,e){if(!1===i.call(this,t,e))return!1;r.data.rows=r.data.firstRows})}e.body2.unbind(".datagrid"),setTimeout(function(){e.body2.unbind(".datagrid").bind("scroll.datagrid",function(t){r.onLoadSuccess&&(d.onLoadSuccess=r.onLoadSuccess,r.onLoadSuccess=void 0,r.originalRows=$.extend(!0,[],r.data.firstRows)),s.scrollTimer&&clearTimeout(s.scrollTimer),s.scrollTimer=setTimeout(function(){s.scrolling.call(s,o)},50)}),e.body2.triggerHandler("scroll.datagrid")},0)}();var a=this;setTimeout(function(){a.bindEvents(o)},0)},onAfterRender:function(a){$.fn.datagrid.defaults.view.onAfterRender.call(this,a);var i=this,o=$.data(a,"datagrid"),t=o.options;o.onResizeColumn||(o.onResizeColumn=t.onResizeColumn),o.onResize||(o.onResize=t.onResize),t.onResizeColumn=function(t,e){i.resizeGroup(a),o.onResizeColumn.call(a,t,e)},t.onResize=function(t,e){i.resizeGroup(a),o.onResize.call($(a).datagrid("getPanel")[0],t,e)},i.resizeGroup(a);t=$.data(a,"datagrid").dc;t.footer1.add(t.footer2).find("span.datagrid-row-expander").css("visibility","hidden")},renderRow:function(t,e,a,i,o){var r=$.data(t,"datagrid").options,d=[];a&&r.rownumbers&&(a=i+1,r.pagination&&(a+=(r.pageNumber-1)*r.pageSize),d.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+a+"</div></td>"));for(var s=0;s<e.length;s++){var n,l,g,h,p,c=e[s],u=$(t).datagrid("getColumnOption",c);u&&(n=o[c],g=l="","string"==typeof(p=u.styler&&u.styler(n,o,i)||"")?g=p:d&&(l=p.class||"",g=p.style||""),h=[],p=[],l&&h.push(l),g&&p.push(g),u.cbd&&(h.push(u.cbd),p.push("border-color:#DDD #"+u.bdc)),u.editor&&h.push("item-hover"),u.hidden&&p.push("display:none"),h=0<h.length?'class="'+h.join(" ")+'"':"",p=0<p.length?p.join(";"):"",d.push('<td field="'+c+'" style="'+p+'" '+h+">"),u.editor&&d.push('<a href="javascript:;" class="aign-right icon-hide-min dg-hid-icon"><i class="icon-uniE684"></i></a>'),u.checkbox?p="":u.expander?p="text-align:center;height:16px;":(p=g,u.align&&(p+=";text-align:"+u.align+";"),r.nowrap?r.autoRowHeight&&(p+=";height:auto;"):p+=";white-space:normal;height:auto;"),d.push('<div style="'+p+'" '),u.checkbox?d.push('class="datagrid-cell-check '):d.push('class="datagrid-cell '+u.cellClass),d.push('">'),u.checkbox?d.push('<input type="checkbox" name="'+c+'" value="'+(void 0!==n?n:"")+'">'):u.expander?d.push('<span class="datagrid-row-expander datagrid-row-expand" style="display:inline-block;width:16px;height:16px;cursor:pointer;" />'):u.formatter?d.push(u.formatter(n,o,i)):d.push(n),d.push("</div>"),d.push("</td>"))}return d.join("")},bindEvents:function(i){var t=$.data(i,"datagrid").dc,t=t.body1.add(t.body2),o=($.data(t[0],"events")||$._data(t[0],"events")).click[0].handler;t.unbind("click").bind("click",function(t){var e,a=$(t.target).closest("span.datagrid-row-expander");a.length?(e=a.closest("div.datagrid-group").attr("group-index"),a.hasClass("datagrid-row-collapse")?$(i).datagrid("collapseGroup",e):$(i).datagrid("expandGroup",e)):o(t),t.stopPropagation()}),t.scrollLeft(0).scroll(function(t){$(".datagrid-group").css("width","calc(100% + "+this.scrollLeft+"px)")})},scrolling:function(t){var e,a,i,o=$.data(t,"datagrid"),r=o.options,d=o.dc;0===r.finder.getRows(t).length?(this.reload.call(this,t),this.getNextRows.call(this,t,1)):d.body2.is(":visible")&&(i=d.view2.children("div.datagrid-header").outerHeight(),e=d.body2.children("div.datagrid-btable-top"),a=d.body2.children("div.datagrid-btable-bottom"),e.length&&a.length&&(e=e.position().top+e._outerHeight()-i,a=a.position().top-i,e=Math.floor(e),a=Math.floor(a),i=this.page,1<this.page&&Math.abs(e)<=parseInt(a)?console.log("向上滚动"):(console.log("向下滚动"),o.data.rows.length+this.index>=o.data.total||(console.log(),console.log(a),a-350<d.body2.height()&&(this.page=++i,this.rows=this.r3,this.r1=this.r2,this.r2=this.r3,this.index+=r.pageSize,this.populate.call(this,t,"more"),console.log("page:"+i),this.getNextRows.call(this,t,i))))))},getNextRows:function(t,e){this.getRows.call(this,t,e+1,function(t){this.r3=t})},reload:function(e){var t=$.data(e,"datagrid"),a=t.options,i=t.dc,t=$(i.body2).scrollTop()+a.deltaTopHeight,t=Math.floor(t/a.rowHeight),o=Math.floor(t/a.pageSize)+1;this.getRows.call(this,e,o,function(t){this.page=o,this.index=(o-1)*a.pageSize,this.rows=t,this.r1=[],this.r2=t,this.r3=[],this.populate.call(this,e,"new"),i.body2.triggerHandler("scroll.datagrid")})},getRows:function(e,a,i){var t,o=$.data(e,"datagrid"),r=o.options,d=(a-1)*r.pageSize;r.emptyMsg=r._emptyMsg,this.setEmptyMsg&&this.setEmptyMsg(e),d<0||!1!==r.onBeforeFetch.call(e,a)&&(t=[],o.data.firstRows?t=o.data.firstRows.slice(d,d+r.pageSize):o.data.firstRows=[],!t.length||t.length!==r.pageSize&&d+t.length!==o.data.total?(d=$.extend({},r.queryParams,{page:a,rows:r.pageSize}),r.sortName&&$.extend(d,{sort:r.sortName,order:r.sortOrder}),!1!==r.onBeforeLoad.call(e,d)&&!1===r.loader.call(e,d,function(t){t=r.loadFilter.call(e,t);r.onFetch.call(e,a,t.rows),t.rows&&t.rows.length?i.call(r.view,t.rows):r.onLoadSuccess.call(e,t)},function(){r.onLoadError.apply(e,arguments)})&&(o.data.firstRows.length||(r.onFetch.call(e,a,o.data.firstRows),r.onLoadSuccess.call(e,o.data)))):(r.onFetch.call(e,a,t),i.call(this,t)))},populate:function(t,e){var a,i,o,r,d=$.data(t,"datagrid"),s=this.page,n=d.options,l=d.dc,g=n.rowHeight,h=n.maxDivHeight;function p(t,e){var a=Math.floor(e/h),i=e-h*a;e<0&&(i=0);for(var o=[],r=0;r<a;r++)o.push('<div style="height:'+h+'px"></div>');o.push('<div style="height:'+i+'px"></div>'),$(t).html(o.join(""))}this.rows.length&&(n.view.render.call(n.view,t,l.body2,!1,e),n.view.render.call(n.view,t,l.body1,!0,e),a=(o=l.body1.add(l.body2)).children("div.datagrid-btable-top"),i=o.children("div.datagrid-btable-bottom"),e=this.index*g,o=d.data.total*g-this.rows.length*g-e,this.rows_group_h["r_"+s]=function(t,e,a){var i=0,o=0;{var r;t.differhigh?(r=0,e.body2.find(".grid-r-g-"+a+" .datagrid-row").each(function(t){i=$(this).attr("datagrid-row-index"),r=$(this).height(),o+=r+1,e.body1.find("#datagrid-row-r1-1-"+i).css("height",r)})):(e.body1.find(".datagrid-row").css("height",t.rowheight),e.body2.find(".datagrid-row").css("height",t.rowheight))}return o}(n,l,s),console.log(this.rows_group_h),p(i,o),d.data.rows=this.rows,s=l.body2.scrollTop()+n.deltaTopHeight,e>n.maxVisibleHeight?(n.deltaTopHeight=e-n.maxVisibleHeight,p(a,e-n.deltaTopHeight)):n.deltaTopHeight=0,o>n.maxVisibleHeight?p(i,n.maxVisibleHeight):0!=o||(r=d.data.total%n.pageSize)&&p(i,l.body2.height()-r*g),$(t).datagrid("setSelectionState"),l.body2.scrollTop(s-n.deltaTopHeight),n.pageNumber=this.page,(r=$(t).datagrid("getPager")).length&&(s=(s=(l=(g=r.pagination("options")).displayMsg).replace(/{from}/,this.index+1)).replace(/{to}/,this.index+this.rows.length),r.pagination("refresh",{pageNumber:this.page,displayMsg:s}),g.displayMsg=l),this.setEmptyMsg&&this.setEmptyMsg(t),n.onLoadSuccess.call(t,{total:d.data.total,rows:this.rows}))},refreshGroupTitle:function(t,e){var a=$.data(t,"datagrid"),i=a.options,o=a.dc,a=this.groups[e];o.body1.add(o.body2).children("div.datagrid-group[group-index="+e+"]").find("span.datagrid-group-title").html(i.groupFormatter.call(t,a.value,a.rows))},resizeGroup:function(t,e){var a=$.data(t,"datagrid"),i=a.dc,o=i.header2.find("table").find("tr.datagrid-filter-row").hide(),t=i.body2.children("table.datagrid-btable:first").width(),e=void 0===e?i.body2.children("div.datagrid-group"):i.body2.children("div.datagrid-group[group-index="+e+"]");e._outerWidth(t);t=a.options;t.frozenColumns&&t.frozenColumns.length&&(a=i.view1.width()-t.expanderWidth,i="rtl"==i.view1.css("direction").toLowerCase(),e.find(".datagrid-group-title").css(i?"right":"left",-a+"px")),o.length&&t.showFilterBar&&o.show()},setGroupIndex:function(t){for(var e=0,a=0;a<this.groups.length;a++){var i=this.groups[a];i.startIndex=e,e+=i.rows.length}},updateRow:function(o,r,t){var d=$.data(o,"datagrid").options,s=($(o).datagrid("getRows"),d.finder.getRow(o,r)),e=a(r);$.extend(s,t);var t=a(r),n=e.c,l=t.s,g="datagrid-row "+(r%2&&d.striped?"datagrid-row-alt ":" ")+t.c;function a(t){var e=d.rowStyler?d.rowStyler.call(o,t,s):"",a="",t="";return"string"==typeof e?t=e:e&&(a=e.class||"",t=e.style||""),{c:a,s:t}}function i(t){var e=$(o).datagrid("getColumnFields",t),a=d.finder.getTr(o,r,"body",t?1:2),i=a.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");a.html(this.renderRow.call(this,o,e,t,r,s)),a.attr("style",l).removeClass(n).addClass(g),i&&a.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0)}i.call(this,!0),i.call(this,!1),$(o).datagrid("fixRowHeight",r)},insertRow:function(i,t,e){for(var a,o=$.data(i,"datagrid"),r=o.options,d=o.dc,s=null,n=0;n<this.groups.length;n++)if(this.groups[n].value==e[r.groupField]){s=this.groups[n],a=n;break}function l(t,e){var a=e?1:2,e=r.finder.getTr(i,t-1,"body",a);r.finder.getTr(i,t,"body",a).insertAfter(e)}s?((t=null==t?o.data.rows.length:t)<s.startIndex?t=s.startIndex:t>s.startIndex+s.rows.length&&(t=s.startIndex+s.rows.length),$.fn.datagrid.defaults.view.insertRow.call(this,i,t,e),t>=s.startIndex+s.rows.length&&(l(t,!0),l(t,!1)),s.rows.splice(t-s.startIndex,0,e)):(s={value:e[r.groupField],rows:[e],startIndex:o.data.rows.length},a=this.groups.length,d.body1.append(this.renderGroup.call(this,i,a,s,!0)),d.body2.append(this.renderGroup.call(this,i,a,s,!1)),this.groups.push(s),o.data.rows.push(e)),this.refreshGroupTitle(i,a)},deleteRow:function(t,e){var a=$.data(t,"datagrid"),i=a.options,a=a.dc,o=a.body1.add(a.body2),i=i.finder.getTr(t,e,"body",2).closest("table.datagrid-btable"),i=parseInt(i.prev().attr("group-index"));$.fn.datagrid.defaults.view.deleteRow.call(this,t,e);var r=this.groups[i];if(1<r.rows.length)r.rows.splice(e-r.startIndex,1),this.refreshGroupTitle(t,i);else{o.children("div.datagrid-group[group-index="+i+"]").remove();for(var d=i+1;d<this.groups.length;d++)o.children("div.datagrid-group[group-index="+d+"]").attr("group-index",d-1);this.groups.splice(i,1)}for(e=0,d=0;d<this.groups.length;d++)(r=this.groups[d]).startIndex=e,e+=r.rows.length}});$.fn.datagrid.methods.baseUpdateRow=$.fn.datagrid.methods.updateRow,$.fn.datagrid.methods.baseGetRowIndex=$.fn.datagrid.methods.getRowIndex,$.fn.datagrid.methods.baseScrollTo=$.fn.datagrid.methods.scrollTo,$.fn.datagrid.methods.baseGotoPage=$.fn.datagrid.methods.gotoPage,$.fn.datagrid.methods.baseSetSelectionState=$.fn.datagrid.methods.setSelectionState,$.extend($.fn.datagrid.methods,{getRowHeight:function(t){var e,a=t.datagrid("options");return a.rowHeight||(t=(e=$('<div style="position:absolute;top:-1000px;width:100px;height:100px;padding:5px"><table><tr class="datagrid-row"><td>cell</td></tr></table></div>').appendTo("body")).find("tr").outerHeight(),e.remove(),a.rowHeight=t),a.rowHeight},updateRow:function(t,e){return t.each(function(){var t;$(this).datagrid("options").finder.getRow(this,e.index)?$(this).datagrid("baseUpdateRow",e):(t=$(this).datagrid("getData").firstRows||[],e.index<t.length&&$.extend(t[e.index],e.row))})},getRowIndex:function(t,e){var a=t.datagrid("options");if("scrollview"!==a.view.type)return t.datagrid("baseGetRowIndex",e);var i=t.datagrid("getData"),o=0;return 0<=(o="object"==typeof e?$.easyui.indexOfArray(i.firstRows,e):$.easyui.indexOfArray(i.firstRows,a.idField,e))?o:-1===(o=t.datagrid("baseGetRowIndex",e))?-1:o+a.view.index},getRow:function(t,e){return t.datagrid("options").finder.getRow(t[0],e)},gotoPage:function(t,r){return t.each(function(){var e,a,i=this,o=$(i).datagrid("options");"scrollview"===o.view.type?("object"==typeof r?(e=r.page,a=r.callback):e=r,o.view.getRows.call(o.view,i,e,function(t){this.page=e,this.index=(e-1)*o.pageSize,this.rows=t,this.r1=[],this.r2=t,this.r3=[],this.populate.call(this,i,"new"),$(i).data("datagrid").dc.body2.scrollTop(this.index*o.rowHeight-o.deltaTopHeight),a&&a.call(i,e)})):$(i).datagrid("baseGotoPage",r)})},scrollTo:function(t,r){return t.each(function(){var t,e,a=this,i=$(a).datagrid("options");"object"==typeof r?(t=r.index,e=r.callback):t=r;var o=i.view;"scrollview"!==o.type||t>=o.index&&t<o.index+o.rows.length?($(a).datagrid("baseScrollTo",t),e&&e.call(a,t)):0<=t&&(i=Math.floor(t/i.pageSize)+1,$(a).datagrid("gotoPage",{page:i,callback:function(){setTimeout(function(){$(a).datagrid("baseScrollTo",t),e&&e.call(a,t)},0)}}))})},setSelectionState:function(t){return t.each(function(){var t;"scrollview"===$(this).datagrid("options").view.type?($(this).datagrid("baseSetSelectionState"),(t=$(this).data("datagrid")).data.firstRows.length!==t.checkedRows.length&&(t=t.dc).header1.add(t.header2).find("input[type=checkbox]")._propAttr("checked",!1)):$(this).datagrid("baseSetSelectionState")})},groups:function(t){return t.datagrid("options").view.groups},expandGroup:function(t,i){return t.each(function(){var t=$(this).datagrid("options"),e=$.data(this,"datagrid").dc.view.find(null!=i?'div.datagrid-group[group-index="'+i+'"]':"div.datagrid-group"),a=e.find("span.datagrid-row-expander");a.hasClass("datagrid-row-expand")&&(a.removeClass("datagrid-row-expand").removeClass(" icon-uniF078").addClass("datagrid-row-collapse").addClass(" icon-uniF077"),e.next("table").show()),t.onExpandGroup&&t.onExpandGroup.call(this,i)})},collapseGroup:function(t,i){return t.each(function(){var t=$(this).datagrid("options"),e=$.data(this,"datagrid").dc.view.find(null!=i?'div.datagrid-group[group-index="'+i+'"]':"div.datagrid-group"),a=e.find("span.datagrid-row-expander");a.hasClass("datagrid-row-collapse")&&(a.removeClass("datagrid-row-collapse").removeClass(" icon-uniF077").addClass("datagrid-row-expand").addClass(" icon-uniF078"),e.next("table").hide()),t.onCollapseGroup&&t.onCollapseGroup.call(this,i)})},scrollToGroup:function(t,r){return t.each(function(){var t,e,a,i=$.data(this,"datagrid").dc,o=i.body2.children('div.datagrid-group[group-index="'+r+'"]');o.length&&(t=o.outerHeight(),e=i.view2.children("div.datagrid-header")._outerHeight(),a=i.body2.outerHeight(!0)-i.body2.outerHeight(),(a=o.position().top-e-a)<0?i.body2.scrollTop(i.body2.scrollTop()+a):a+t>i.body2.height()-18&&i.body2.scrollTop(i.body2.scrollTop()+a+t-i.body2.height()+18))})}});
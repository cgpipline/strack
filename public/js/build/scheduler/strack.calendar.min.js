!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function f(){return Ut.apply(null,arguments)}function s(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){for(var n=[],i=0;i<t.length;++i)n.push(e(t[i],i));return n}function g(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t,e){for(var n in e)g(e,n)&&(t[n]=e[n]);return g(e,"toString")&&(t.toString=e.toString),g(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,n,i){return dt(t,e,n,i,!0).utc()}function m(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}),t._pf}function a(t){var e,n;return null==t._isValid&&(e=m(t),n=Zt.call(e.parsedDateParts,function(t){return null!=t}),t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)),t._isValid}function l(t){var e=d(NaN);return null!=t?o(m(e),t):m(e).userInvalidated=!0,e}function u(t){return void 0===t}function c(t,e){var n,i,s;if(u(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),u(e._i)||(t._i=e._i),u(e._f)||(t._f=e._f),u(e._l)||(t._l=e._l),u(e._strict)||(t._strict=e._strict),u(e._tzm)||(t._tzm=e._tzm),u(e._isUTC)||(t._isUTC=e._isUTC),u(e._offset)||(t._offset=e._offset),u(e._pf)||(t._pf=m(e)),u(e._locale)||(t._locale=e._locale),0<qt.length)for(n in qt)i=qt[n],s=e[i],u(s)||(t[i]=s);return t}function h(t){c(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),!1===$t&&($t=!0,f.updateOffset(this),$t=!1)}function p(t){return t instanceof h||null!=t&&null!=t._isAMomentObject}function v(t){return t<0?Math.ceil(t):Math.floor(t)}function y(t){var e=+t,t=0;return t=0!=e&&isFinite(e)?v(e):t}function S(t,e,n){for(var i=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),r=0,o=0;o<i;o++)(n&&t[o]!==e[o]||!n&&y(t[o])!==y(e[o]))&&r++;return r+s}function w(t){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function t(t,e){var n=!0;return o(function(){return null!=f.deprecationHandler&&f.deprecationHandler(null,t),n&&(w(t+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),e.apply(this,arguments)},e)}function _(t,e){null!=f.deprecationHandler&&f.deprecationHandler(t,e),Qt[t]||(w(e),Qt[t]=!0)}function D(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function b(t){return"[object Object]"===Object.prototype.toString.call(t)}function n(t,e){var n,i=o({},t);for(n in e)g(e,n)&&(b(t[n])&&b(e[n])?(i[n]={},o(i[n],t[n]),o(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);return i}function E(t){null!=t&&this.set(t)}function k(t){return t&&t.toLowerCase().replace("_","-")}function T(t){var e;if(!Jt[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Xt._abbr,require("./locale/"+t),C(e)}catch(t){}return Jt[t]}function C(t,e){return t&&((e=u(e)?x(t):H(t,e))&&(Xt=e)),Xt._abbr}function H(t,e){return null!==e?(e.abbr=t,null!=Jt[t]?(_("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),e=n(Jt[t]._config,e)):null!=e.parentLocale&&(null!=Jt[e.parentLocale]?e=n(Jt[e.parentLocale]._config,e):_("parentLocaleUndefined","specified parentLocale is not defined yet")),Jt[t]=new E(e),C(t),Jt[t]):(delete Jt[t],null)}function x(t){var e;if(!(t=t&&t._locale&&t._locale._abbr?t._locale._abbr:t))return Xt;if(!s(t)){if(e=T(t))return e;t=[t]}return function(t){for(var e,n,i,s,r=0;r<t.length;){for(e=(s=k(t[r]).split("-")).length,n=(n=k(t[r+1]))?n.split("-"):null;0<e;){if(i=T(s.slice(0,e).join("-")))return i;if(n&&n.length>=e&&S(s,n,!0)>=e-1)break;e--}r++}return null}(t)}function e(t,e){var n=t.toLowerCase();te[n]=te[n+"s"]=te[e]=t}function M(t){return"string"==typeof t?te[t]||te[t.toLowerCase()]:void 0}function R(t){var e,n,i={};for(n in t)g(t,n)&&(e=M(n),e&&(i[e]=t[n]));return i}function I(e,n){return function(t){return null!=t?(Y(this,e,t),f.updateOffset(this,n),this):L(this,e)}}function L(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Y(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function O(t,e){if("object"==typeof t)for(var n in t)this.set(n,t[n]);else if(D(this[t=M(t)]))return this[t](e);return this}function F(t,e,n){var i=""+Math.abs(t);return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,e-i.length)).toString().substr(1)+i}function G(t,e,n,i){var s="string"==typeof i?function(){return this[i]()}:i;t&&(se[t]=s),e&&(se[e[0]]=function(){return F(s.apply(this,arguments),e[1],e[2])}),n&&(se[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function P(t,e){return t.isValid()?(e=z(e,t.localeData()),ie[e]=ie[e]||function(i){for(var t,s=i.match(ee),e=0,r=s.length;e<r;e++)se[s[e]]?s[e]=se[s[e]]:s[e]=(t=s[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(t){for(var e="",n=0;n<r;n++)e+=s[n]instanceof Function?s[n].call(t,i):s[n];return e}}(e),ie[e](t)):t.localeData().invalidDate()}function z(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(ne.lastIndex=0;0<=i&&ne.test(t);)t=t.replace(ne,n),ne.lastIndex=0,--i;return t}function N(t,n,i){_e[t]=D(n)?n:function(t,e){return t&&i?i:n}}function B(t,e){return g(_e,t)?_e[t](e._strict,e._locale):new RegExp(A(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,s){return e||n||i||s})))}function A(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function W(t,n){var e,i=n;for("string"==typeof t&&(t=[t]),"number"==typeof n&&(i=function(t,e){e[n]=y(t)}),e=0;e<t.length;e++)De[t[e]]=i}function V(t,s){W(t,function(t,e,n,i){n._w=n._w||{},s(t,n._w,n,i)})}function j(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function U(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=y(e);else if("number"!=typeof(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),j(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Z(t){return null!=t?(U(this,t),f.updateOffset(this,!0),this):L(this,"Month")}function q(){function t(t,e){return e.length-t.length}for(var e,n=[],i=[],s=[],r=0;r<12;r++)e=d([2e3,r]),n.push(this.monthsShort(e,"")),i.push(this.months(e,"")),s.push(this.months(e,"")),s.push(this.monthsShort(e,""));for(n.sort(t),i.sort(t),s.sort(t),r=0;r<12;r++)n[r]=A(n[r]),i[r]=A(i[r]),s[r]=A(s[r]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function $(t){var e=t._a;return e&&-2===m(t).overflow&&(e=e[Ee]<0||11<e[Ee]?Ee:e[ke]<1||e[ke]>j(e[be],e[Ee])?ke:e[Te]<0||24<e[Te]||24===e[Te]&&(0!==e[Ce]||0!==e[He]||0!==e[xe])?Te:e[Ce]<0||59<e[Ce]?Ce:e[He]<0||59<e[He]?He:e[xe]<0||999<e[xe]?xe:-1,m(t)._overflowDayOfYear&&(e<be||ke<e)&&(e=ke),m(t)._overflowWeeks&&-1===e&&(e=Me),m(t)._overflowWeekday&&-1===e&&(e=Re),m(t).overflow=e),t}function Q(t){var e,n,i,s,r,o,a=t._i,l=Pe.exec(a)||ze.exec(a);if(l){for(m(t).iso=!0,e=0,n=Be.length;e<n;e++)if(Be[e][1].exec(l[1])){s=Be[e][0],i=!1!==Be[e][2];break}if(null!=s){if(l[3]){for(e=0,n=Ae.length;e<n;e++)if(Ae[e][1].exec(l[3])){r=(l[2]||" ")+Ae[e][0];break}if(null==r)return void(t._isValid=!1)}if(i||null==r){if(l[4]){if(!Ne.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=s+(r||"")+(o||""),at(t)}else t._isValid=!1}else t._isValid=!1}else t._isValid=!1}function X(t,e,n,i,s,r,o){o=new Date(t,e,n,i,s,r,o);return t<100&&0<=t&&isFinite(o.getFullYear())&&o.setFullYear(t),o}function K(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&0<=t&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function J(t){return tt(t)?366:365}function tt(t){return t%4==0&&t%100!=0||t%400==0}function et(t,e,n){n=7+e-n;return n-(7+K(t,0,n).getUTCDay()-e)%7-1}function nt(t,e,n,i,s){var r,s=1+7*(e-1)+(7+n-i)%7+et(t,i,s),s=s<=0?J(r=t-1)+s:s>J(t)?(r=t+1,s-J(t)):(r=t,s);return{year:r,dayOfYear:s}}function it(t,e,n){var i,s,r=et(t.year(),e,n),r=Math.floor((t.dayOfYear()-r-1)/7)+1;return r<1?i=r+st(s=t.year()-1,e,n):r>st(t.year(),e,n)?(i=r-st(t.year(),e,n),s=t.year()+1):(s=t.year(),i=r),{week:i,year:s}}function st(t,e,n){var i=et(t,e,n),n=et(t+1,e,n);return(J(t)-i+n)/7}function rt(t,e,n){return null!=t?t:null!=e?e:n}function ot(t){var e,n,i,s,r,o,a,l,d,u,c=[];if(!t._d){for(d=t,u=new Date(f.now()),n=d._useUTC?[u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()]:[u.getFullYear(),u.getMonth(),u.getDate()],t._w&&null==t._a[ke]&&null==t._a[Ee]&&(null!=(u=(d=t)._w).GG||null!=u.W||null!=u.E?(o=1,a=4,i=rt(u.GG,d._a[be],it(ut(),1,4).year),s=rt(u.W,1),((r=rt(u.E,1))<1||7<r)&&(l=!0)):(o=d._locale._week.dow,a=d._locale._week.doy,i=rt(u.gg,d._a[be],it(ut(),o,a).year),s=rt(u.w,1),null!=u.d?((r=u.d)<0||6<r)&&(l=!0):null!=u.e?(r=u.e+o,(u.e<0||6<u.e)&&(l=!0)):r=o),s<1||s>st(i,o,a)?m(d)._overflowWeeks=!0:null!=l?m(d)._overflowWeekday=!0:(a=nt(i,s,r,o,a),d._a[be]=a.year,d._dayOfYear=a.dayOfYear)),t._dayOfYear&&(a=rt(t._a[be],n[be]),t._dayOfYear>J(a)&&(m(t)._overflowDayOfYear=!0),a=K(a,0,t._dayOfYear),t._a[Ee]=a.getUTCMonth(),t._a[ke]=a.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=c[e]=n[e];for(;e<7;e++)t._a[e]=c[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Te]&&0===t._a[Ce]&&0===t._a[He]&&0===t._a[xe]&&(t._nextDay=!0,t._a[Te]=0),t._d=(t._useUTC?K:X).apply(null,c),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Te]=24)}}function at(t){if(t._f===f.ISO_8601)return Q(t),0;t._a=[],m(t).empty=!0;for(var e,n,i,s,r,o,a,l=""+t._i,d=l.length,u=0,c=z(t._f,t._locale).match(ee)||[],h=0;h<c.length;h++)n=c[h],(e=(l.match(B(n,t))||[])[0])&&(0<(s=l.substr(0,l.indexOf(e))).length&&m(t).unusedInput.push(s),l=l.slice(l.indexOf(e)+e.length),u+=e.length),se[n]?(e?m(t).empty=!1:m(t).unusedTokens.push(n),i=n,r=t,null!=(s=e)&&g(De,i)&&De[i](s,r._a,r,i)):t._strict&&!e&&m(t).unusedTokens.push(n);m(t).charsLeftOver=d-u,0<l.length&&m(t).unusedInput.push(l),!0===m(t).bigHour&&t._a[Te]<=12&&0<t._a[Te]&&(m(t).bigHour=void 0),m(t).parsedDateParts=t._a.slice(0),m(t).meridiem=t._meridiem,t._a[Te]=(o=t._locale,a=t._a[Te],null==(d=t._meridiem)?a:null!=o.meridiemHour?o.meridiemHour(a,d):null!=o.isPM?((d=o.isPM(d))&&a<12&&(a+=12),a=d||12!==a?a:0):a),ot(t),$(t)}function lt(t){var e=t._i,n=t._f;return t._locale=t._locale||x(t._l),null===e||void 0===n&&""===e?l({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),p(e)?new h($(e)):(s(n)?function(t){var e,n,i,s,r;if(0===t._f.length)return m(t).invalidFormat=!0,t._d=new Date(NaN);for(s=0;s<t._f.length;s++)r=0,e=c({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],at(e),a(e)&&(r+=m(e).charsLeftOver,r+=10*m(e).unusedTokens.length,m(e).score=r,(null==i||r<i)&&(i=r,n=e));o(t,n||e)}(t):n?at(t):i(e)?t._d=e:void 0===(e=(n=t)._i)?n._d=new Date(f.now()):i(e)?n._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=We.exec(t._i);null!==e?t._d=new Date(+e[1]):(Q(t),!1===t._isValid&&(delete t._isValid,f.createFromInputFallback(t)))}(n):s(e)?(n._a=r(e.slice(0),function(t){return parseInt(t,10)}),ot(n)):"object"==typeof e?function(t){var e;t._d||(e=R(t._i),t._a=r([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ot(t))}(n):"number"==typeof e?n._d=new Date(e):f.createFromInputFallback(n),a(t)||(t._d=null),t))}function dt(t,e,n,i,s){var r={};return"boolean"==typeof n&&(i=n,n=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=n,r._i=t,r._f=e,r._strict=i,(r=new h($(lt(r=r))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function ut(t,e,n,i){return dt(t,e,n,i,!1)}function ct(t,e){var n,i;if(!(e=1===e.length&&s(e[0])?e[0]:e).length)return ut();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}function ht(t){var e=R(t),n=e.year||0,i=e.quarter||0,s=e.month||0,r=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,t=e.second||0,e=e.millisecond||0;this._milliseconds=+e+1e3*t+6e4*l+1e3*a*60*60,this._days=+o+7*r,this._months=+s+3*i+12*n,this._data={},this._locale=x(),this._bubble()}function ft(t){return t instanceof ht}function gt(t,n){G(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+F(~~(t/60),2)+n+F(~~t%60,2)})}function mt(t,e){e=(e||"").match(t)||[],t=((e[e.length-1]||[])+"").match(Ze)||["-",0,0],e=60*t[1]+y(t[2]);return"+"===t[0]?e:-e}function pt(t,e){var n;return e._isUTC?(n=e.clone(),e=(p(t)||i(t)?t:ut(t)).valueOf()-n.valueOf(),n._d.setTime(n._d.valueOf()+e),f.updateOffset(n,!1),n):ut(t).local()}function vt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function yt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function St(t,e){var n,i,s=t,r=null;return ft(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(r=qe.exec(t))?(n="-"===r[1]?-1:1,s={y:0,d:y(r[ke])*n,h:y(r[Te])*n,m:y(r[Ce])*n,s:y(r[He])*n,ms:y(r[xe])*n}):(r=$e.exec(t))?(n="-"===r[1]?-1:1,s={y:wt(r[2],n),M:wt(r[3],n),w:wt(r[4],n),d:wt(r[5],n),h:wt(r[6],n),m:wt(r[7],n),s:wt(r[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=ut(s.from),n=ut(s.to),i=r.isValid()&&n.isValid()?(n=pt(n,r),r.isBefore(n)?i=_t(r,n):((i=_t(n,r)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0},(s={}).ms=i.milliseconds,s.M=i.months),s=new ht(s),ft(t)&&g(t,"_locale")&&(s._locale=t._locale),s}function wt(t,e){t=t&&parseFloat(t.replace(",","."));return(isNaN(t)?0:t)*e}function _t(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Dt(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function bt(i,s){return function(t,e){var n;return null===e||isNaN(+e)||(_(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period)."),n=t,t=e,e=n),Et(this,St(t="string"==typeof t?+t:t,e),i),this}}function Et(t,e,n,i){var s=e._milliseconds,r=Dt(e._days),e=Dt(e._months);t.isValid()&&(i=null==i||i,s&&t._d.setTime(t._d.valueOf()+s*n),r&&Y(t,"Date",L(t,"Date")+r*n),e&&U(t,L(t,"Month")+e*n),i&&f.updateOffset(t,r||e))}function kt(t){return void 0===t?this._locale._abbr:(null!=(t=x(t))&&(this._locale=t),this)}function Tt(){return this._locale}function Ct(t,e){G(0,[t,t.length],0,e)}function Ht(t,e,n,i,s){var r;return null==t?it(this,i,s).year:(r=st(t,i,s),function(t,e,n,i,s){s=nt(t,e,n,i,s),s=K(s.year,0,s.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,t,e=r<e?r:e,n,i,s))}function xt(){function t(t,e){return e.length-t.length}for(var e,n,i,s=[],r=[],o=[],a=[],l=0;l<7;l++)i=d([2e3,1]).day(l),e=this.weekdaysMin(i,""),n=this.weekdaysShort(i,""),i=this.weekdays(i,""),s.push(e),r.push(n),o.push(i),a.push(e),a.push(n),a.push(i);for(s.sort(t),r.sort(t),o.sort(t),a.sort(t),l=0;l<7;l++)r[l]=A(r[l]),o[l]=A(o[l]),a[l]=A(a[l]);this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Mt(){return this.hours()%24||24}function Rt(t,e){G(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function It(t,e){return e._meridiemParse}function Lt(t,e){e[xe]=y(1e3*("0."+t))}function Yt(t){return t}function Ot(t,e,n,i){var s=x(),e=d().set(i,e);return s[n](e,t)}function Ft(t,e,n){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Ot(t,e,n,"month");for(var i=[],s=0;s<12;s++)i[s]=Ot(t,s,n,"month");return i}function Gt(t,e,n,i){e=("boolean"==typeof t||(n=e=t,t=!1),"number"==typeof e&&(n=e,e=void 0),e||"");var s=x(),r=t?s._week.dow:0;if(null!=n)return Ot(e,(n+r)%7,i,"day");for(var o=[],a=0;a<7;a++)o[a]=Ot(e,(a+r)%7,i,"day");return o}function Pt(t,e,n,i){n=St(e,n);return t._milliseconds+=i*n._milliseconds,t._days+=i*n._days,t._months+=i*n._months,t._bubble()}function zt(t){return t<0?Math.floor(t):Math.ceil(t)}function Nt(t){return 4800*t/146097}function Bt(t){return 146097*t/4800}function At(t){return function(){return this.as(t)}}function Wt(t){return function(){return this._data[t]}}function Vt(t,e,n){var i=St(t).abs(),s=rn(i.as("s")),r=rn(i.as("m")),o=rn(i.as("h")),a=rn(i.as("d")),l=rn(i.as("M")),i=rn(i.as("y")),i=(s<on.s?["s",s]:r<=1&&["m"])||r<on.m&&["mm",r]||o<=1&&["h"]||o<on.h&&["hh",o]||a<=1&&["d"]||a<on.d&&["dd",a]||l<=1&&["M"]||l<on.M&&["MM",l]||i<=1&&["y"]||["yy",i];return i[2]=e,i[3]=0<+t,i[4]=n,function(t,e,n,i,s){return s.relativeTime(e||1,!!n,t,i)}.apply(null,i)}function jt(){var t=an(this._milliseconds)/1e3,e=an(this._days),n=an(this._months),i=v(t/60),s=v(i/60);t%=60,i%=60;var r=v(n/12),o=n%=12,n=e,e=s,s=i,i=t,t=this.asSeconds();return t?(t<0?"-":"")+"P"+(r?r+"Y":"")+(o?o+"M":"")+(n?n+"D":"")+(e||s||i?"T":"")+(e?e+"H":"")+(s?s+"M":"")+(i?i+"S":""):"P0D"}var Ut,Zt=Array.prototype.some||function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1},qt=f.momentProperties=[],$t=!1,Qt={};f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;var Xt,Kt=Object.keys||function(t){var e,n=[];for(e in t)g(t,e)&&n.push(e);return n},Jt={},te={},ee=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ne=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ie={},se={},re=/\d/,oe=/\d\d/,ae=/\d{3}/,le=/\d{4}/,de=/[+-]?\d{6}/,ue=/\d\d?/,ce=/\d\d\d\d?/,he=/\d\d\d\d\d\d?/,fe=/\d{1,3}/,ge=/\d{1,4}/,me=/[+-]?\d{1,6}/,pe=/\d+/,ve=/[+-]?\d+/,ye=/Z|[+-]\d\d:?\d\d/gi,Se=/Z|[+-]\d\d(?::?\d\d)?/gi,we=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,_e={},De={},be=0,Ee=1,ke=2,Te=3,Ce=4,He=5,xe=6,Me=7,Re=8,Ie=Array.prototype.indexOf||function(t){for(var e=0;e<this.length;++e)if(this[e]===t)return e;return-1};G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),G("MMMM",0,0,function(t){return this.localeData().months(this,t)}),e("month","M"),N("M",ue),N("MM",ue,oe),N("MMM",function(t,e){return e.monthsShortRegex(t)}),N("MMMM",function(t,e){return e.monthsRegex(t)}),W(["M","MM"],function(t,e){e[Ee]=y(t)-1}),W(["MMM","MMMM"],function(t,e,n,i){i=n._locale.monthsParse(t,i,n._strict);null!=i?e[Ee]=i:m(n).invalidMonth=t});var Le=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ye="1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),Oe="1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),Fe=we,Ge=we,Pe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ze=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ne=/Z|[+-]\d\d(?::?\d\d)?/,Be=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ae=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],We=/^\/?Date\((\-?\d+)/i;f.createFromInputFallback=t("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),G("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),e("year","y"),N("Y",ve),N("YY",ue,oe),N("YYYY",ge,le),N("YYYYY",me,de),N("YYYYYY",me,de),W(["YYYYY","YYYYYY"],be),W("YYYY",function(t,e){e[be]=2===t.length?f.parseTwoDigitYear(t):y(t)}),W("YY",function(t,e){e[be]=f.parseTwoDigitYear(t)}),W("Y",function(t,e){e[be]=parseInt(t,10)}),f.parseTwoDigitYear=function(t){return y(t)+(68<y(t)?1900:2e3)};var Ve=I("FullYear",!0);f.ISO_8601=function(){};var je=t("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=ut.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:l()}),Ue=t("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=ut.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:l()});gt("Z",":"),gt("ZZ",""),N("Z",Se),N("ZZ",Se),W(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=mt(Se,t)});var Ze=/([\+\-]|\d\d)/gi;f.updateOffset=function(){};var qe=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,$e=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;St.fn=ht.prototype;var Qe=bt(1,"add"),Xe=bt(-1,"subtract");f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ke=t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ct("gggg","weekYear"),Ct("ggggg","weekYear"),Ct("GGGG","isoWeekYear"),Ct("GGGGG","isoWeekYear"),e("weekYear","gg"),e("isoWeekYear","GG"),N("G",ve),N("g",ve),N("GG",ue,oe),N("gg",ue,oe),N("GGGG",ge,le),N("gggg",ge,le),N("GGGGG",me,de),N("ggggg",me,de),V(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=y(t)}),V(["gg","GG"],function(t,e,n,i){e[i]=f.parseTwoDigitYear(t)}),G("Q",0,"Qo","quarter"),e("quarter","Q"),N("Q",re),W("Q",function(t,e){e[Ee]=3*(y(t)-1)}),G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),e("week","w"),e("isoWeek","W"),N("w",ue),N("ww",ue,oe),N("W",ue),N("WW",ue,oe),V(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=y(t)});G("D",["DD",2],"Do","date"),e("date","D"),N("D",ue),N("DD",ue,oe),N("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),W(["D","DD"],ke),W("Do",function(t,e){e[ke]=y(t.match(ue)[0])});var Je=I("Date",!0);G("d",0,"do","day"),G("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),G("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),G("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),e("day","d"),e("weekday","e"),e("isoWeekday","E"),N("d",ue),N("e",ue),N("E",ue),N("dd",function(t,e){return e.weekdaysMinRegex(t)}),N("ddd",function(t,e){return e.weekdaysShortRegex(t)}),N("dddd",function(t,e){return e.weekdaysRegex(t)}),V(["dd","ddd","dddd"],function(t,e,n,i){i=n._locale.weekdaysParse(t,i,n._strict);null!=i?e.d=i:m(n).invalidWeekday=t}),V(["d","e","E"],function(t,e,n,i){e[i]=y(t)});var tn="周日_周一_周二_周三_周四_周五_周六".split("_"),en="周日_周一_周二_周三_周四_周五_周六".split("_"),ge="周日_周一_周二_周三_周四_周五_周六".split("_"),le=we,me=we,de=we;G("DDD",["DDDD",3],"DDDo","dayOfYear"),e("dayOfYear","DDD"),N("DDD",fe),N("DDDD",ae),W(["DDD","DDDD"],function(t,e,n){n._dayOfYear=y(t)}),G("H",["HH",2],0,"hour"),G("h",["hh",2],0,Mt),G("k",["kk",2],0,function(){return this.hours()||24}),G("hmm",0,0,function(){return""+Mt.apply(this)+F(this.minutes(),2)}),G("hmmss",0,0,function(){return""+Mt.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}),Rt("a",!0),Rt("A",!1),e("hour","h"),N("a",It),N("A",It),N("H",ue),N("h",ue),N("HH",ue,oe),N("hh",ue,oe),N("hmm",ce),N("hmmss",he),N("Hmm",ce),N("Hmmss",he),W(["H","HH"],Te),W(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),W(["h","hh"],function(t,e,n){e[Te]=y(t),m(n).bigHour=!0}),W("hmm",function(t,e,n){var i=t.length-2;e[Te]=y(t.substr(0,i)),e[Ce]=y(t.substr(i)),m(n).bigHour=!0}),W("hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[Te]=y(t.substr(0,i)),e[Ce]=y(t.substr(i,2)),e[He]=y(t.substr(s)),m(n).bigHour=!0}),W("Hmm",function(t,e,n){var i=t.length-2;e[Te]=y(t.substr(0,i)),e[Ce]=y(t.substr(i))}),W("Hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[Te]=y(t.substr(0,i)),e[Ce]=y(t.substr(i,2)),e[He]=y(t.substr(s))});we=I("Hours",!0);G("m",["mm",2],0,"minute"),e("minute","m"),N("m",ue),N("mm",ue,oe),W(["m","mm"],Ce);ce=I("Minutes",!1);G("s",["ss",2],0,"second"),e("second","s"),N("s",ue),N("ss",ue,oe),W(["s","ss"],He);var nn,he=I("Seconds",!1);for(G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),e("millisecond","ms"),N("S",fe,re),N("SS",fe,oe),N("SSS",fe,ae),nn="SSSS";nn.length<=9;nn+="S")N(nn,pe);for(nn="S";nn.length<=9;nn+="S")W(nn,Lt);fe=I("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");ae=h.prototype;ae.add=Qe,ae.calendar=function(t,e){var n=t||ut(),t=pt(n,this).startOf("day"),t=(t=this.diff(t,"days",!0))<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse",e=e&&(D(e[t])?e[t]():e[t]);return this.format(e||this.localeData().calendar(t,this,ut(n)))},ae.clone=function(){return new h(this)},ae.diff=function(t,e,n){var i,s,r,o,a,l;return this.isValid()?(s=pt(t,this)).isValid()?(i=6e4*(s.utcOffset()-this.utcOffset()),"year"===(e=M(e))||"month"===e||"quarter"===e?(r=this,t=12*((o=s).year()-r.year())+(o.month()-r.month()),l=r.clone().add(t,"months"),l=o-l<0?(a=r.clone().add(t-1,"months"),(o-l)/(l-a)):(a=r.clone().add(1+t,"months"),(o-l)/(a-l)),l=-(t+l)||0,"quarter"===e?l/=3:"year"===e&&(l/=12)):(s=this-s,l="second"===e?s/1e3:"minute"===e?s/6e4:"hour"===e?s/36e5:"day"===e?(s-i)/864e5:"week"===e?(s-i)/6048e5:s),n?l:v(l)):NaN:NaN},ae.endOf=function(t){return void 0===(t=M(t))||"millisecond"===t?this:this.startOf(t="date"===t?"day":t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},ae.format=function(t){return t=t||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat),t=P(this,t),this.localeData().postformat(t)},ae.from=function(t,e){return this.isValid()&&(p(t)&&t.isValid()||ut(t).isValid())?St({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},ae.fromNow=function(t){return this.from(ut(),t)},ae.to=function(t,e){return this.isValid()&&(p(t)&&t.isValid()||ut(t).isValid())?St({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},ae.toNow=function(t){return this.to(ut(),t)},ae.get=O,ae.invalidAt=function(){return m(this).overflow},ae.isAfter=function(t,e){return t=p(t)?t:ut(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=M(u(e)?"millisecond":e))?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf())},ae.isBefore=function(t,e){return t=p(t)?t:ut(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=M(u(e)?"millisecond":e))?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf())},ae.isBetween=function(t,e,n,i){return("("===(i=i||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===i[1]?this.isBefore(e,n):!this.isAfter(e,n))},ae.isSame=function(t,e){var t=p(t)?t:ut(t);return!(!this.isValid()||!t.isValid())&&("millisecond"===(e=M(e||"millisecond"))?this.valueOf()===t.valueOf():(t=t.valueOf(),this.clone().startOf(e).valueOf()<=t&&t<=this.clone().endOf(e).valueOf()))},ae.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},ae.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},ae.isValid=function(){return a(this)},ae.lang=Ke,ae.locale=kt,ae.localeData=Tt,ae.max=Ue,ae.min=je,ae.parsingFlags=function(){return o({},m(this))},ae.set=O,ae.startOf=function(t){switch(t=M(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},ae.subtract=Xe,ae.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},ae.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},ae.toDate=function(){return this._offset?new Date(this.valueOf()):this._d},ae.toISOString=function(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?D(Date.prototype.toISOString)?this.toDate().toISOString():P(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},ae.toJSON=function(){return this.isValid()?this.toISOString():null},ae.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ae.unix=function(){return Math.floor(this.valueOf()/1e3)},ae.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ae.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ae.year=Ve,ae.isLeapYear=function(){return tt(this.year())},ae.weekYear=function(t){return Ht.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ae.isoWeekYear=function(t){return Ht.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},ae.quarter=ae.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},ae.month=Z,ae.daysInMonth=function(){return j(this.year(),this.month())},ae.week=ae.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},ae.isoWeek=ae.isoWeeks=function(t){var e=it(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},ae.weeksInYear=function(){var t=this.localeData()._week;return st(this.year(),t.dow,t.doy)},ae.isoWeeksInYear=function(){return st(this.year(),1,4)},ae.date=Je,ae.day=ae.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,n,i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,n=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=n.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-i,"d")):i},ae.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},ae.isoWeekday=function(t){return this.isValid()?null==t?this.day()||7:this.day(this.day()%7?t:t-7):null!=t?this:NaN},ae.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},ae.hour=ae.hours=we,ae.minute=ae.minutes=ce,ae.second=ae.seconds=he,ae.millisecond=ae.milliseconds=fe,ae.utcOffset=function(t,e){var n,i=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=mt(Se,t):Math.abs(t)<16&&(t*=60),!this._isUTC&&e&&(n=vt(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==t&&(!e||this._changeInProgress?Et(this,St(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:vt(this):null!=t?this:NaN},ae.utc=function(t){return this.utcOffset(0,t)},ae.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(vt(this),"m")),this},ae.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(mt(ye,this._i)),this},ae.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?ut(t).utcOffset():0,(this.utcOffset()-t)%60==0)},ae.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ae.isDSTShifted=function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var t,e={};return c(e,this),(e=lt(e))._a?(t=(e._isUTC?d:ut)(e._a),this._isDSTShifted=this.isValid()&&0<S(e._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted},ae.isLocal=function(){return!!this.isValid()&&!this._isUTC},ae.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ae.isUtc=yt,ae.isUTC=yt,ae.zoneAbbr=function(){return this._isUTC?"UTC":""},ae.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ae.dates=t("dates accessor is deprecated. Use date instead.",Je),ae.months=t("months accessor is deprecated. Use month instead",Z),ae.years=t("years accessor is deprecated. Use year instead",Ve),ae.zone=t("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(t,e){return null!=t?(this.utcOffset(t="string"!=typeof t?-t:t,e),this):-this.utcOffset()});we=ae,ce=E.prototype;ce._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ce.calendar=function(t,e,n){return D(t=this._calendar[t])?t.call(e,n):t},ce._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ce.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},ce._invalidDate="Invalid date",ce.invalidDate=function(){return this._invalidDate},ce._ordinal="%d",ce.ordinal=function(t){return this._ordinal.replace("%d",t)},ce._ordinalParse=/\d{1,2}/,ce.preparse=Yt,ce.postformat=Yt,ce._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ce.relativeTime=function(t,e,n,i){var s=this._relativeTime[n];return D(s)?s(t,e,n,i):s.replace(/%d/i,t)},ce.pastFuture=function(t,e){return D(t=this._relativeTime[0<t?"future":"past"])?t(e):t.replace(/%s/i,e)},ce.set=function(t){var e,n;for(n in t)e=t[n],D(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},ce.months=function(t,e){return(s(this._months)?this._months:this._months[Le.test(e)?"format":"standalone"])[t.month()]},ce._months=Ye,ce.monthsShort=function(t,e){return(s(this._monthsShort)?this._monthsShort:this._monthsShort[Le.test(e)?"format":"standalone"])[t.month()]},ce._monthsShort=Oe,ce.monthsParse=function(t,e,n){var i,s;if(this._monthsParseExact)return function(t,e,n){var i,s,r,t=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=d([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?-1!==(s="MMM"===e?Ie.call(this._shortMonthsParse,t):Ie.call(this._longMonthsParse,t))?s:null:"MMM"===e?-1!==(s=Ie.call(this._shortMonthsParse,t))?s:-1!==(s=Ie.call(this._longMonthsParse,t))?s:null:-1!==(s=Ie.call(this._longMonthsParse,t))?s:-1!==(s=Ie.call(this._shortMonthsParse,t))?s:null}.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=d([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},ce._monthsRegex=Ge,ce.monthsRegex=function(t){return this._monthsParseExact?(g(this,"_monthsRegex")||q.call(this),t?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex},ce._monthsShortRegex=Fe,ce.monthsShortRegex=function(t){return this._monthsParseExact?(g(this,"_monthsRegex")||q.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex},ce.week=function(t){return it(t,this._week.dow,this._week.doy).week},ce._week={dow:0,doy:6},ce.firstDayOfYear=function(){return this._week.doy},ce.firstDayOfWeek=function(){return this._week.dow},ce.weekdays=function(t,e){return(s(this._weekdays)?this._weekdays:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"])[t.day()]},ce._weekdays=tn,ce.weekdaysMin=function(t){return this._weekdaysMin[t.day()]},ce._weekdaysMin=ge,ce.weekdaysShort=function(t){return this._weekdaysShort[t.day()]},ce._weekdaysShort=en,ce.weekdaysParse=function(t,e,n){var i,s;if(this._weekdaysParseExact)return function(t,e,n){var i,s,r,t=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=d([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?-1!==(s="dddd"===e?Ie.call(this._weekdaysParse,t):"ddd"===e?Ie.call(this._shortWeekdaysParse,t):Ie.call(this._minWeekdaysParse,t))?s:null:"dddd"===e?-1!==(s=Ie.call(this._weekdaysParse,t))?s:-1!==(s=Ie.call(this._shortWeekdaysParse,t))?s:-1!==(s=Ie.call(this._minWeekdaysParse,t))?s:null:"ddd"===e?-1!==(s=Ie.call(this._shortWeekdaysParse,t))?s:-1!==(s=Ie.call(this._weekdaysParse,t))?s:-1!==(s=Ie.call(this._minWeekdaysParse,t))?s:null:-1!==(s=Ie.call(this._minWeekdaysParse,t))?s:-1!==(s=Ie.call(this._weekdaysParse,t))?s:-1!==(s=Ie.call(this._shortWeekdaysParse,t))?s:null}.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=d([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},ce._weekdaysRegex=le,ce.weekdaysRegex=function(t){return this._weekdaysParseExact?(g(this,"_weekdaysRegex")||xt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex},ce._weekdaysShortRegex=me,ce.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(g(this,"_weekdaysRegex")||xt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex},ce._weekdaysMinRegex=de,ce.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(g(this,"_weekdaysRegex")||xt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex},ce.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},ce._meridiemParse=/[ap]\.?m?\.?/i,ce.meridiem=function(t,e,n){return"点"},C("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===y(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),f.lang=t("moment.lang is deprecated. Use moment.locale instead.",C),f.langData=t("moment.langData is deprecated. Use moment.localeData instead.",x);var sn=Math.abs,he=At("ms"),fe=At("s"),Je=At("m"),Ve=At("h"),ae=At("d"),Ye=At("w"),Oe=At("M"),Ge=At("y"),Fe=Wt("milliseconds"),tn=Wt("seconds"),ge=Wt("minutes"),en=Wt("hours"),le=Wt("days"),me=Wt("months"),de=Wt("years"),rn=Math.round,on={s:45,m:45,h:22,d:26,M:11},an=Math.abs,ce=ht.prototype;return ce.abs=function(){var t=this._data;return this._milliseconds=sn(this._milliseconds),this._days=sn(this._days),this._months=sn(this._months),t.milliseconds=sn(t.milliseconds),t.seconds=sn(t.seconds),t.minutes=sn(t.minutes),t.hours=sn(t.hours),t.months=sn(t.months),t.years=sn(t.years),this},ce.add=function(t,e){return Pt(this,t,e,1)},ce.subtract=function(t,e){return Pt(this,t,e,-1)},ce.as=function(t){var e,n,i=this._milliseconds;if("month"===(t=M(t))||"year"===t)return e=this._days+i/864e5,n=this._months+Nt(e),"month"===t?n:n/12;switch(e=this._days+Math.round(Bt(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},ce.asMilliseconds=he,ce.asSeconds=fe,ce.asMinutes=Je,ce.asHours=Ve,ce.asDays=ae,ce.asWeeks=Ye,ce.asMonths=Oe,ce.asYears=Ge,ce.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)},ce._bubble=function(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data;return 0<=t&&0<=e&&0<=n||t<=0&&e<=0&&n<=0||(t+=864e5*zt(Bt(n)+e),n=e=0),i.milliseconds=t%1e3,t=v(t/1e3),i.seconds=t%60,t=v(t/60),i.minutes=t%60,t=v(t/60),i.hours=t%24,e+=v(t/24),n+=t=v(Nt(e)),e-=zt(Bt(t)),t=v(n/12),n%=12,i.days=e,i.months=n,i.years=t,this},ce.get=function(t){return this[(t=M(t))+"s"]()},ce.milliseconds=Fe,ce.seconds=tn,ce.minutes=ge,ce.hours=en,ce.days=le,ce.weeks=function(){return v(this.days()/7)},ce.months=me,ce.years=de,ce.humanize=function(t){var e=this.localeData(),n=Vt(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},ce.toISOString=jt,ce.toString=jt,ce.toJSON=jt,ce.locale=kt,ce.localeData=Tt,ce.toIsoString=t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",jt),ce.lang=Ke,G("X",0,0,"unix"),G("x",0,0,"valueOf"),N("x",ve),N("X",/[+-]?\d+(\.\d{1,3})?/),W("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),W("x",function(t,e,n){n._d=new Date(y(t))}),f.version="2.13.0",Ut=ut,f.fn=we,f.min=function(){return ct("isBefore",[].slice.call(arguments,0))},f.max=function(){return ct("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=d,f.unix=function(t){return ut(1e3*t)},f.months=function(t,e){return Ft(t,e,"months")},f.isDate=i,f.locale=C,f.invalid=l,f.duration=St,f.isMoment=p,f.weekdays=function(t,e,n){return Gt(t,e,n,"weekdays")},f.parseZone=function(){return ut.apply(null,arguments).parseZone()},f.localeData=x,f.isDuration=ft,f.monthsShort=function(t,e){return Ft(t,e,"monthsShort")},f.weekdaysMin=function(t,e,n){return Gt(t,e,n,"weekdaysMin")},f.defineLocale=H,f.updateLocale=function(t,e){return null!=e?((e=new E(e=null!=Jt[t]?n(Jt[t]._config,e):e)).parentLocale=Jt[t],Jt[t]=e,C(t)):null!=Jt[t]&&(null!=Jt[t].parentLocale?Jt[t]=Jt[t].parentLocale:null!=Jt[t]&&delete Jt[t]),Jt[t]},f.locales=function(){return Kt(Jt)},f.weekdaysShort=function(t,e,n){return Gt(t,e,n,"weekdaysShort")},f.normalizeUnits=M,f.relativeTimeThreshold=function(t,e){return void 0!==on[t]&&(void 0===e?on[t]:(on[t]=e,!0))},f.prototype=we,f}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)}(function(G,P){function u(t){return H(t,vt)}function s(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function r(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function f(){G("body").addClass("fc-not-allowed")}function g(){G("body").removeClass("fc-not-allowed")}function n(i,t,e){var s=Math.floor(t/i.length),r=Math.floor(t-s*(i.length-1)),o=[],a=[],l=[],d=0;c(i),i.each(function(t,e){var n=t===i.length-1?r:s,t=G(e).outerHeight(!0);t<n?(o.push(e),a.push(t),l.push(G(e).height())):d+=t}),e&&(t-=d,s=Math.floor(t/o.length),r=Math.floor(t-s*(o.length-1))),G(o).each(function(t,e){var n=t===o.length-1?r:s,i=a[t],t=n-(i-l[t]);i<n&&G(e).height(t)})}function c(t){t.height("")}function t(t){var n=0;return t.find("> *").each(function(t,e){e=G(e).outerWidth();n<e&&(n=e)}),n++,t.width(n),n}function e(t,e){var n=t.add(e);return n.css({position:"relative",left:-1}),e=t.outerHeight()-e.outerHeight(),n.css({position:"",left:""}),e}function h(t){var e=t.css("position"),n=t.parents().filter(function(){var t=G(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&n.length?n:G(t[0].ownerDocument||document)}function a(t,e){var n=t.offset(),i=n.left-(e?e.left:0),e=n.top-(e?e.top:0);return{left:i,right:i+t.outerWidth(),top:e,bottom:e+t.outerHeight()}}function i(t,e){var n=t.offset(),i=o(t),s=n.left+l(t,"border-left-width")+i.left-(e?e.left:0),e=n.top+l(t,"border-top-width")+i.top-(e?e.top:0);return{left:s,right:s+t[0].clientWidth,top:e,bottom:e+t[0].clientHeight}}function o(t){var e=t.innerWidth()-t[0].clientWidth,n={left:0,right:0,top:0,bottom:t.innerHeight()-t[0].clientHeight};return(yt=null===yt?function(){var t=G("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),e=t.children().offset().left>t.offset().left;return t.remove(),e}():yt)&&"rtl"==t.css("direction")?n.left=e:n.right=e,n}function l(t,e){return parseFloat(t.css(e))||0}function d(t){return 1==t.which&&!t.ctrlKey}function m(t){if(void 0!==t.pageX)return t.pageX;t=t.originalEvent.touches;return t?t[0].pageX:void 0}function p(t){if(void 0!==t.pageY)return t.pageY;t=t.originalEvent.touches;return t?t[0].pageY:void 0}function v(t){return/^touch/.test(t.type)}function y(t){t.preventDefault()}function S(t,e){e={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return e.left<e.right&&e.top<e.bottom&&e}function w(t){var e,n,i=[],s=[];for("string"==typeof t?s=t.split(/\s*,\s*/):"function"==typeof t?s=[t]:G.isArray(t)&&(s=t),e=0;e<s.length;e++)"string"==typeof(n=s[e])?i.push("-"==n.charAt(0)?{field:n.substring(1),order:-1}:{field:n,order:1}):"function"==typeof n&&i.push({func:n});return i}function _(t,e,n){for(var i,s=0;s<n.length;s++)if(i=D(t,e,n[s]))return i;return 0}function D(t,e,n){return n.func?n.func(t,e):b(t[n.field],e[n.field])*(n.order||1)}function b(t,e){return t||e?null==e?-1:null==t?1:"string"===G.type(t)||"string"===G.type(e)?String(t).localeCompare(String(e)):t-e:0}function E(t,e){var n,i,s=t.start,r=t.end,t=e.start,e=e.end;if(t<r&&s<e)return t=t<=s?(n=s.clone(),!0):(n=t.clone(),!1),e=r<=e?(i=r.clone(),!0):(i=e.clone(),!1),{start:n,end:i,isStart:t,isEnd:e}}function z(t,e){return P.duration({days:t.clone().stripTime().diff(e.clone().stripTime(),"days"),ms:t.time()-e.time()})}function N(t,e,n){return P.duration(Math.round(t.diff(e,n,!0)),n)}function k(t,e){for(var n,i,s,r,o=0;o<wt.length&&(n=wt[o],i=n,s=t,!(1<=(i=null!=(r=e)?r.diff(s,i,!0):P.isDuration(s)?s.as(i):s.end.diff(s.start,i,!0))&&O(i)));o++);return n}function T(t,e){var n,i;return C(t)||C(e)?t/e:(n=t.asMonths(),i=e.asMonths(),1<=Math.abs(n)&&O(n)&&1<=Math.abs(i)&&O(i)?n/i:t.asDays()/e.asDays())}function C(t){return Boolean(t.hours()||t.minutes()||t.seconds()||t.milliseconds())}function B(t){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t)}function H(t,e){var n,i,s,r,o,a,l={};if(e)for(n=0;n<e.length;n++){for(i=e[n],s=[],r=t.length-1;0<=r;r--)if("object"==typeof(o=t[r][i]))s.unshift(o);else if(void 0!==o){l[i]=o;break}s.length&&(l[i]=H(s))}for(n=t.length-1;0<=n;n--)for(i in a=t[n])i in l||(l[i]=a[i]);return l}function A(t){function e(){}return e.prototype=t,new e}function x(t,e){for(var n in t)M(t,n)&&(e[n]=t[n])}function M(t,e){return _t.call(t,e)}function W(t,e,n){if(t=G.isFunction(t)?[t]:t){for(var i,s=0;s<t.length;s++)i=t[s].apply(e,n)||i;return i}}function V(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}function R(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function I(t){return t.replace(/&.*?;/g,"")}function L(t){var n=[];return G.each(t,function(t,e){null!=e&&n.push(t+":"+e)}),n.join(";")}function j(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Y(t,e){return t-e}function O(t){return t%1==0}function F(t,e){var n=t[e];return function(){return n.apply(t,arguments)}}function U(e,n,i){function s(){var t=+new Date-l;t<n?r=setTimeout(s,n-t):(r=null,i||(d=e.apply(a,o),a=o=null))}var r,o,a,l,d;return function(){a=this,o=arguments,l=+new Date;var t=i&&!r;return r=r||setTimeout(s,n),t&&(d=e.apply(a,o),a=o=null),d}}function Z(t,e){return t&&t.then&&"resolved"!==t.state()?e?t.then(e):void 0:G.when(e())}function q(t,e,n){var i,s,r,o,a=t[0],l=1==t.length&&"string"==typeof a;return P.isMoment(a)||(o=a,"[object Date]"===Object.prototype.toString.call(o)||o instanceof Date)||void 0===a?r=P.apply(null,t):(s=i=!1,l?Dt.test(a)?(t=[a+="-01"],s=i=!0):(o=bt.exec(a))&&(i=!o[5],s=!0):G.isArray(a)&&(s=!0),r=e||i?P.utc.apply(P,t):P.apply(null,t),i?(r._ambigTime=!0,r._ambigZone=!0):n&&(s?r._ambigZone=!0:l&&r.utcOffset(a))),r._fullCalendar=!0,r}function $(t,e){return kt.format.call(t,e)}function Q(t,e){for(var n="",i=0;i<e.length;i++)n+=X(t,e[i]);return n}function X(t,e){var n,i;return"string"==typeof e?e:(n=e.token)?Ct[n]?Ct[n](t):$(t,n):e.maybe&&(i=Q(t,e.maybe)).match(/[1-9]/)?i:""}function K(t,e,n,i,s){var r;return t=mt.moment.parseZone(t),e=mt.moment.parseZone(e),r=t.localeData(),i=i||" - ",function(t,e,n,i,s){var r,o,a,l,d=t.clone().stripZone(),u=e.clone().stripZone(),c="",h="",f="",g="",m="";for(o=0;o<n.length&&!1!==(r=J(t,0,d,u,n[o]));o++)c+=r;for(a=n.length-1;o<a&&!1!==(r=J(t,0,d,u,n[a]));a--)h=r+h;for(l=o;l<=a;l++)f+=X(t,n[l]),g+=X(e,n[l]);return c+(m=f||g?s?g+i+f:f+i+g:m)+h}(t,e,tt(n=r.longDateFormat(n)||n),i,s)}function J(t,e,n,i,s){var r;return"string"==typeof s?s:!!((r=s.token)&&((s=Ht[r.charAt(0)])&&n.isSame(i,s)))&&$(t,r)}function tt(t){return t in xt?xt[t]:xt[t]=function t(e){for(var n,i=[],s=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;n=s.exec(e);)n[1]?i.push(n[1]):n[2]?i.push({maybe:t(n[2])}):n[3]?i.push({token:n[3]}):n[5]&&i.push(n[5]);return i}(t)}function et(){}function nt(t,e){x(e,t.prototype)}function it(t,e){return!t&&!e||!(!t||!e)&&t.component===e.component&&st(t,e)&&st(e,t)}function st(t,e){for(var n in t)if(!/^(component|left|right|top|bottom)$/.test(n)&&t[n]!==e[n])return!1;return!0}function rt(t){return{start:t.start.clone(),end:t.end?t.end.clone():null,allDay:t.allDay}}function ot(t){t=at(t);return"background"===t||"inverse-background"===t}function at(t){return V((t.source||{}).rendering,t.rendering)}function lt(t,e){return t.start-e.start}function dt(t,e){return t.leftCol-e.leftCol}function ut(t,e,n){n=n||[];for(var i,s,r=0;r<e.length;r++)i=t,s=e[r],i.bottom>s.top&&i.top<s.bottom&&n.push(e[r]);return n}function ct(n){G.each(Ut,function(t,e){null==n[t]&&(n[t]=e(n))})}function ht(t){return P.localeData(t)||P.localeData("en")}function ft(h){function n(){s&&(s.remove(),s=t.el=null)}function i(t){var n=G('<div class="fc-'+t+'"/>'),c=h.options,t=c.header[t];return t&&G.each(t.split(" "),function(t){var e,d=G(),u=!0;G.each(this.split(","),function(t,e){var n,i,s,r,o,a,l;"title"==e?(d=d.add(G("")),u=!1):((n=(c.customButtons||{})[e])?(i=function(t){n.click&&n.click.call(l[0],t)},s="",a=n.text):(o=h.getViewSpec(e))?(i=function(){h.changeView(e)},g.push(e),s=o.buttonTextOverride,a=o.buttonTextDefault):h[e]&&(i=function(){h[e]()},s=(h.overrides.buttonText||{})[e],a=c.buttonText[e]),i&&(r=n?n.themeIcon:c.themeButtonIcons[e],o=n?n.icon:c.buttonIcons[e],a=s?R(s):r&&c.theme?"<span class='ui-icon ui-icon-"+r+"'></span>":o&&!c.theme?"<span class='fc-icon fc-icon-"+o+"'></span>":R(a),l=G('<button type="button" class="'+["fc-"+e+"-button",f+"-button",f+"-state-default"].join(" ")+'">'+a+"</button>").click(function(t){l.hasClass(f+"-state-disabled")||(i(t),(l.hasClass(f+"-state-active")||l.hasClass(f+"-state-disabled"))&&l.removeClass(f+"-state-hover"))}).mousedown(function(){var t=jQuery(".fc-lock-plan");switch(e){case"agendaDay":t.show(),t.attr("data-view",e);break;case"agendaWeek":case"agendaMonth":case"month":case"listWeek":t.hide(),t.attr("data-view",e)}l.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){l.removeClass(f+"-state-down")}).hover(function(){l.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){l.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),d=d.add(l)))}),u&&d.first().addClass(f+"-corner-left").end().last().addClass(f+"-corner-right").end(),1<d.length?(e=G("<div/>"),u&&e.addClass("fc-button-group"),e.append(d),n.append(e)):n.append(d)}),n}var t=this;t.render=function(){var t=h.options,e=t.header;f=t.theme?"ui":"fc",e?s?s.empty():((s=this.el=G("<div class='fc-toolbar'/>")).append(i("left")).append(i("right")).append((e="",e+='<div id="fc_filter_wrap" class="fc-filter"></div>')),"yes"===t.param.rule_create&&s.append((e="",e+='<div class="fc-add-task"><a href="javascript:;" class="ui button blue" onclick="Strack.common_add_task(this)" data-page="my_scheduler"><i class="icon-uniE672 icon-left"></i>'+StrackLang.Add_Task+"</a></div>")),"yes"===t.param.rule_lock_task_plan&&s.append((t="",t+='<div class="fc-lock-plan"><a href="javascript:;" class="ui button blue" onclick="Strack.calendar_lock_plan(this)" data-mode="" data-view="agendaDay" style="display: none"><i class="icon-uniE9B8 icon-left"></i>'+StrackLang.Lock_Task_Plan+"</a></div>")),s.append(i("center")).append('<div class="fc-clear"/>')):n()},t.removeElement=n,t.updateTitle=function(t){s&&s.find(".fc-center").text(t)},t.activateButton=function(t){s&&s.find(".fc-"+t+"-button").addClass(f+"-state-active")},t.deactivateButton=function(t){s&&s.find(".fc-"+t+"-button").removeClass(f+"-state-active")},t.disableButton=function(t){s&&s.find(".fc-"+t+"-button").prop("disabled",!0).addClass(f+"-state-disabled")},t.enableButton=function(t){s&&s.find(".fc-"+t+"-button").prop("disabled",!1).removeClass(f+"-state-disabled")},t.getViewsWithButtons=function(){return g},t.el=null;var s,f,g=[]}function gt(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}var mt=G.fullCalendar={version:"3.0.1",internalApiVersion:6},pt=mt.views={};G.fn.fullCalendar=function(s){var r=Array.prototype.slice.call(arguments,1),o=this;return this.each(function(t,e){var n=G(e),i=n.data("fullCalendar");"string"==typeof s?i&&G.isFunction(i[s])&&(e=i[s].apply(i,r),t||(o=e),"destroy"===s&&n.removeData("fullCalendar")):i||(i=new At(n,s),n.data("fullCalendar",i),i.render())}),o};var vt=["header","buttonText","buttonIcons","themeButtonIcons"];mt.intersectRanges=E,mt.applyAll=W,mt.debounce=U,mt.isInt=O,mt.htmlEscape=R,mt.cssToStr=L,mt.proxy=F,mt.capitaliseFirstLetter=j,mt.getOuterRect=a,mt.getClientRect=i,mt.getContentRect=function(t,e){var n=t.offset(),i=n.left+l(t,"border-left-width")+l(t,"padding-left")-(e?e.left:0),e=n.top+l(t,"border-top-width")+l(t,"padding-top")-(e?e.top:0);return{left:i,right:i+t.width(),top:e,bottom:e+t.height()}},mt.getScrollbarWidths=o;var yt=null;mt.preventDefault=y,mt.intersectRects=S,mt.parseFieldSpecs=w,mt.compareByFieldSpecs=_,mt.compareByFieldSpec=D,mt.flexibleCompare=b,mt.computeIntervalUnit=k,mt.divideRangeByDuration=function(t,e,n){var i;return C(n)?(e-t)/n:(i=n.asMonths(),1<=Math.abs(i)&&O(i)?e.diff(t,"months",!0)/i:e.diff(t,"days",!0)/n.asDays())},mt.divideDurationByDuration=T,mt.multiplyDuration=function(t,e){var n;return C(t)?P.duration(t*e):(n=t.asMonths(),1<=Math.abs(n)&&O(n)?P.duration({months:n*e}):P.duration({days:t.asDays()*e}))},mt.durationHasTime=C;var St=["sun","mon","tue","wed","thu","fri","sat"],wt=["year","month","week","day","hour","minute","second","millisecond"];mt.log=function(){var t=window.console;if(t&&t.log)return t.log.apply(t,arguments)},mt.warn=function(){var t=window.console;return t&&t.warn?t.warn.apply(t,arguments):mt.log.apply(mt,arguments)};var _t={}.hasOwnProperty,Dt=/^\s*\d{4}-\d\d$/,bt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Et=P.fn,kt=G.extend({},Et),Tt=P.momentProperties;Tt.push("_fullCalendar"),Tt.push("_ambigTime"),Tt.push("_ambigZone"),mt.moment=function(){return q(arguments)},mt.moment.utc=function(){var t=q(arguments,!0);return t.hasTime()&&t.utc(),t},mt.moment.parseZone=function(){return q(arguments,!0,!0)},Et.week=Et.weeks=function(t){var e=this._locale._fullCalendar_weekCalc;return null==t&&"function"==typeof e?e(this):("ISO"===e?kt.isoWeek:kt.week).apply(this,arguments)},Et.time=function(t){if(!this._fullCalendar)return kt.time.apply(this,arguments);if(null==t)return P.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,P.isDuration(t)||P.isMoment(t)||(t=P.duration(t));var e=0;return P.isDuration(t)&&(e=24*Math.floor(t.asDays())),this.hours(e+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},Et.stripTime=function(){return this._ambigTime||(this.utc(!0),this.set({hours:0,minutes:0,seconds:0,ms:0}),this._ambigTime=!0,this._ambigZone=!0),this},Et.hasTime=function(){return!this._ambigTime},Et.stripZone=function(){var t;return this._ambigZone||(t=this._ambigTime,this.utc(!0),this._ambigTime=t||!1,this._ambigZone=!0),this},Et.hasZone=function(){return!this._ambigZone},Et.local=function(t){return kt.local.call(this,this._ambigZone||t),this._ambigTime=!1,this._ambigZone=!1,this},Et.utc=function(t){return kt.utc.call(this,t),this._ambigTime=!1,this._ambigZone=!1,this},Et.utcOffset=function(t){return null!=t&&(this._ambigTime=!1,this._ambigZone=!1),kt.utcOffset.apply(this,arguments)},Et.format=function(){return this._fullCalendar&&arguments[0]?Q(this,tt(arguments[0])):this._ambigTime?$(this,"YYYY-MM-DD"):this._ambigZone?$(this,"YYYY-MM-DD[T]HH:mm:ss"):kt.format.apply(this,arguments)},Et.toISOString=function(){return this._ambigTime?$(this,"YYYY-MM-DD"):this._ambigZone?$(this,"YYYY-MM-DD[T]HH:mm:ss"):kt.toISOString.apply(this,arguments)};var Ct={t:function(t){return $(t,"a").charAt(0)},T:function(t){return $(t,"A").charAt(0)}};mt.formatRange=K;var Ht={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},xt={},Mt={Y:{value:1,unit:"year"},M:{value:2,unit:"month"},W:{value:3,unit:"week"},w:{value:3,unit:"week"},D:{value:4,unit:"day"},d:{value:4,unit:"day"}};mt.queryMostGranularFormatUnit=function(t){for(var e,n,i=tt(t),s=0;s<i.length;s++)(e=i[s]).token&&((e=Mt[e.token.charAt(0)])&&(!n||e.value>n.value)&&(n=e));return n?n.unit:null},(mt.Class=et).extend=function(){for(var t,e,n,i,s=arguments.length,r=0;r<s;r++)t=arguments[r],r<s-1&&nt(this,t);return e=this,(i="function"!=typeof(i=M(n=t||{},"constructor")?n.constructor:i)?n.constructor=function(){e.apply(this,arguments)}:i).prototype=A(e.prototype),x(n,i.prototype),x(e,i),i},et.mixin=function(t){nt(this,t)};var Rt,It=mt.EmitterMixin={on:function(t,n){function e(t,e){return n.apply(e.context||this,e.args||[])}return n.guid||(n.guid=G.guid++),e.guid=n.guid,G(this).on(t,e),this},off:function(t,e){return G(this).off(t,e),this},trigger:function(t){var e=Array.prototype.slice.call(arguments,1);return G(this).triggerHandler(t,{args:e}),this},triggerWith:function(t,e,n){return G(this).triggerHandler(t,{context:e,args:n}),this}},Lt=mt.ListenerMixin=(Rt=0,{listenerId:null,listenTo:function(t,e,n){if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&this.listenTo(t,i,e[i]);else"string"==typeof e&&t.on(e+"."+this.getListenerNamespace(),G.proxy(n,this))},stopListeningTo:function(t,e){t.off((e||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){return null==this.listenerId&&(this.listenerId=Rt++),"_listener"+this.listenerId}}),Tt={isIgnoringMouse:!1,delayUnignoreMouse:null,initMouseIgnoring:function(t){this.delayUnignoreMouse=U(F(this,"unignoreMouse"),t||1e3)},tempIgnoreMouse:function(){this.isIgnoringMouse=!0,this.delayUnignoreMouse()},unignoreMouse:function(){this.isIgnoringMouse=!1}},Yt=et.extend(Lt,{isHidden:!0,options:null,el:null,margin:10,constructor:function(t){this.options=t||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var t=this,e=this.options;this.options.parentEl.hasClass("fc-agendaDay-view")?this.el=G('<div class="fc-popover"/>').addClass(e.className||"").css({top:0,left:0,right:0,width:"calc(100% - 2px)",bottom:"360px",overflow:"auto"}).append(e.content).appendTo(e.parentEl):this.el=G('<div class="fc-popover"/>').addClass(e.className||"").css({top:0,left:0}).append(e.content).appendTo(e.parentEl),this.el.on("click",".fc-close",function(){t.hide()}),e.autoHide&&this.listenTo(G(document),"mousedown",this.documentMousedown)},documentMousedown:function(t){this.el&&!G(t.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(G(document),"mousedown")},position:function(){var t,e=this.options,n=this.el.offsetParent().offset(),i=this.el.outerWidth(),s=this.el.outerHeight(),r=G(window),o=h(this.el),a=e.top||0,l=void 0!==e.left?e.left:void 0!==e.right?e.right-i:0,d=o.is(window)||o.is(document)?(o=r,t=0):(t=(d=o.offset()).top,d.left);t+=r.scrollTop(),d+=r.scrollLeft(),!1!==e.viewportConstrain&&(a=Math.min(a,t+o.outerHeight()-s-this.margin),a=Math.max(a,t+this.margin),l=Math.min(l,d+o.outerWidth()-i-this.margin),l=Math.max(l,d+this.margin)),this.options.parentEl.hasClass("fc-agendaDay-view")||this.el.css({top:a-n.top,left:l-n.left})},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))}}),Ot=mt.CoordCache=et.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(t){this.els=G(t.els),this.isHorizontal=t.isHorizontal,this.isVertical=t.isVertical,this.forcedOffsetParentEl=t.offsetParent?G(t.offsetParent):null},build:function(){var t=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=t.offset(),this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},buildElHorizontals:function(){var i=[],s=[];this.els.each(function(t,e){var n=G(e),e=n.offset().left,n=n.outerWidth();i.push(e),s.push(e+n)}),this.lefts=i,this.rights=s},buildElVerticals:function(){var i=[],s=[];this.els.each(function(t,e){var n=G(e),e=n.offset().top,n=n.outerHeight();i.push(e),s.push(e+n)}),this.tops=i,this.bottoms=s},getHorizontalIndex:function(t){this.ensureBuilt();for(var e=this.lefts,n=this.rights,i=e.length,s=0;s<i;s++)if(t>=e[s]&&t<n[s])return s},getVerticalIndex:function(t){this.ensureBuilt();for(var e=this.tops,n=this.bottoms,i=e.length,s=0;s<i;s++)if(t>=e[s]&&t<n[s])return s},getLeftOffset:function(t){return this.ensureBuilt(),this.lefts[t]},getLeftPosition:function(t){return this.ensureBuilt(),this.lefts[t]-this.origin.left},getRightOffset:function(t){return this.ensureBuilt(),this.rights[t]},getRightPosition:function(t){return this.ensureBuilt(),this.rights[t]-this.origin.left},getWidth:function(t){return this.ensureBuilt(),this.rights[t]-this.lefts[t]},getTopOffset:function(t){return this.ensureBuilt(),this.tops[t]},getTopPosition:function(t){return this.ensureBuilt(),this.tops[t]-this.origin.top},getBottomOffset:function(t){return this.ensureBuilt(),this.bottoms[t]},getBottomPosition:function(t){return this.ensureBuilt(),this.bottoms[t]-this.origin.top},getHeight:function(t){return this.ensureBuilt(),this.bottoms[t]-this.tops[t]},queryBoundingRect:function(){var t=h(this.els.eq(0));if(!t.is(document))return i(t)},isPointInBounds:function(t,e){return this.isLeftInBounds(t)&&this.isTopInBounds(e)},isLeftInBounds:function(t){return!this.boundingRect||t>=this.boundingRect.left&&t<this.boundingRect.right},isTopInBounds:function(t){return!this.boundingRect||t>=this.boundingRect.top&&t<this.boundingRect.bottom}}),Ft=mt.DragListener=et.extend(Lt,Tt,{options:null,subjectEl:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,delay:null,delayTimeoutId:null,minDistance:null,handleTouchScrollProxy:null,constructor:function(t){this.options=t||{},this.handleTouchScrollProxy=F(this,"handleTouchScroll"),this.initMouseIgnoring(500)},startInteraction:function(t,e){var n=v(t);if("mousedown"===t.type){if(this.isIgnoringMouse)return;if(!d(t))return;t.preventDefault()}this.isInteracting||(this.delay=V((e=e||{}).delay,this.options.delay,0),this.minDistance=V(e.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,this.isInteracting=!0,this.isTouch=n,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=m(t),this.originY=p(t),this.scrollEl=h(G(t.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(t),this.startDelay(t),this.minDistance||this.handleDistanceSurpassed(t))},handleInteractionStart:function(t){this.trigger("interactionStart",t)},endInteraction:function(t,e){this.isInteracting&&(this.endDrag(t),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(t,e),this.isTouch&&this.tempIgnoreMouse())},handleInteractionEnd:function(t,e){this.trigger("interactionEnd",t,e||!1)},bindHandlers:function(){var t,e=this,n=1;this.isTouch?(this.listenTo(G(document),{touchmove:this.handleTouchMove,touchend:this.endInteraction,touchcancel:this.endInteraction,touchstart:function(t){n?n--:e.endInteraction(t,!0)}}),t=this.handleTouchScrollProxy,(window.addEventListener?(window.addEventListener("scroll",t,!0),0):this.scrollEl)&&this.listenTo(this.scrollEl,"scroll",this.handleTouchScroll)):this.listenTo(G(document),{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(G(document),{selectstart:y,contextmenu:y})},unbindHandlers:function(){var t;this.stopListeningTo(G(document)),t=this.handleTouchScrollProxy,window.removeEventListener&&window.removeEventListener("scroll",t,!0),this.scrollEl&&this.stopListeningTo(this.scrollEl,"scroll")},startDrag:function(t,e){this.startInteraction(t,e),this.isDragging||(this.isDragging=!0,this.handleDragStart(t))},handleDragStart:function(t){this.trigger("dragStart",t)},handleMove:function(t){var e=m(t)-this.originX,n=p(t)-this.originY,i=this.minDistance;this.isDistanceSurpassed||i*i<=e*e+n*n&&this.handleDistanceSurpassed(t),this.isDragging&&this.handleDrag(e,n,t)},handleDrag:function(t,e,n){this.trigger("drag",t,e,n),this.updateAutoScroll(n)},endDrag:function(t){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(t))},handleDragEnd:function(t){this.trigger("dragEnd",t)},startDelay:function(t){var e=this;this.delay?this.delayTimeoutId=setTimeout(function(){e.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)},handleDelayEnd:function(t){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(t)},handleDistanceSurpassed:function(t){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(t)},handleTouchMove:function(t){this.isDragging&&t.preventDefault(),this.handleMove(t)},handleMouseMove:function(t){this.handleMove(t)},handleTouchScroll:function(t){this.isDragging||this.endInteraction(t,!0)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1)),this["_"+t]&&this["_"+t].apply(this,Array.prototype.slice.call(arguments,1))}});Ft.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var t=this.scrollEl;this.isAutoScroll=this.options.scroll&&t&&!t.is(window)&&!t.is(document),this.isAutoScroll&&this.listenTo(t,"scroll",U(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=a(this.scrollEl))},updateAutoScroll:function(t){var e,n,i,s=this.scrollSensitivity,r=this.scrollBounds,o=0,a=0;r&&(e=(s-(p(t)-r.top))/s,n=(s-(r.bottom-p(t)))/s,i=(s-(m(t)-r.left))/s,s=(s-(r.right-m(t)))/s,0<=e&&e<=1?o=e*this.scrollSpeed*-1:0<=n&&n<=1&&(o=n*this.scrollSpeed),0<=i&&i<=1?a=i*this.scrollSpeed*-1:0<=s&&s<=1&&(a=s*this.scrollSpeed)),this.setScrollVel(o,a)},setScrollVel:function(t,e){this.scrollTopVel=t,this.scrollLeftVel=e,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(F(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var t=this.scrollEl;this.scrollTopVel<0?t.scrollTop()<=0&&(this.scrollTopVel=0):0<this.scrollTopVel&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?t.scrollLeft()<=0&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var Gt=Ft.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(t,e){Ft.call(this,e),this.component=t},handleInteractionStart:function(t){var e,n,i,s,r,o=this.subjectEl;this.computeCoords(),t?(e=n={left:m(t),top:p(t)},o&&(i=a(o),s=e,r=i,e={left:Math.min(Math.max(s.left,r.left),r.right),top:Math.min(Math.max(s.top,r.top),r.bottom)}),this.origHit=this.queryHit(e.left,e.top),o&&this.options.subjectCenter&&(this.origHit&&(i=S(this.origHit,i)||i),e={left:((i=i).left+i.right)/2,top:(i.top+i.bottom)/2}),this.coordAdjust=(n=n,{left:(e=e).left-n.left,top:e.top-n.top})):(this.origHit=null,this.coordAdjust=null),Ft.prototype.handleInteractionStart.apply(this,arguments)},computeCoords:function(){this.component.prepareHits(),this.computeScrollBounds()},handleDragStart:function(t){var e;Ft.prototype.handleDragStart.apply(this,arguments),(e=this.queryHit(m(t),p(t)))&&this.handleHitOver(e)},handleDrag:function(t,e,n){var i;Ft.prototype.handleDrag.apply(this,arguments),it(i=this.queryHit(m(n),p(n)),this.hit)||(this.hit&&this.handleHitOut(),i&&this.handleHitOver(i))},handleDragEnd:function(){this.handleHitDone(),Ft.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(t){var e=it(t,this.origHit);this.hit=t,this.trigger("hitOver",this.hit,e,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},handleInteractionEnd:function(){Ft.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.releaseHits()},handleScrollEnd:function(){Ft.prototype.handleScrollEnd.apply(this,arguments),this.computeCoords()},queryHit:function(t,e){return this.coordAdjust&&(t+=this.coordAdjust.left,e+=this.coordAdjust.top),this.component.queryHit(t,e)}}),Pt=et.extend(Lt,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(t,e){this.options=e=e||{},this.sourceEl=t,this.parentEl=e.parentEl?G(e.parentEl):t.parent()},start:function(t){this.isFollowing||(this.isFollowing=!0,this.y0=p(t),this.x0=m(t),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),v(t)?this.listenTo(G(document),"touchmove",this.handleMove):this.listenTo(G(document),"mousemove",this.handleMove))},stop:function(t,e){function n(){i.isAnimating=!1,i.removeElement(),i.top0=i.left0=null,e&&e()}var i=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(G(document)),t&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:n})):n())},getEl:function(){var t=this.el;return t||((t=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex})).addClass("fc-unselectable"),t.appendTo(this.parentEl)),t},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(t){this.topDelta=p(t)-this.y0,this.leftDelta=m(t)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),zt=mt.Grid=et.extend(Lt,Tt,{hasDayInteractions:!0,view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayDragListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(t){this.view=t,this.isRTL=t.opt("isRTL"),this.elsByFill={},this.dayDragListener=this.buildDayDragListener(),this.initMouseIgnoring()},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(t){this.start=t.start.clone(),this.end=t.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var t,e=this.view;this.eventTimeFormat=e.opt("eventTimeFormat")||e.opt("timeFormat")||this.computeEventTimeFormat(),null==(t=e.opt("displayEventTime"))&&(t=this.computeDisplayEventTime()),null==(e=e.opt("displayEventEnd"))&&(e=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=e},spanToSegs:function(t){},diffDates:function(t,e){return this.largeUnit?N(t,e,this.largeUnit):z(t,e)},prepareHits:function(){},releaseHits:function(){},queryHit:function(t,e){},getHitSpan:function(t){},getHitEl:function(t){},setElement:function(t){this.el=t,this.hasDayInteractions&&(t.addClass("fc-unselectable").on("selectstart",y),this.bindDayHandler("touchstart",this.dayTouchStart),this.bindDayHandler("mousedown",this.dayMousedown)),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(t,e){var n=this;this.el.on(t,function(t){if(!G(t.target).is(n.segSelector+","+n.segSelector+" *,.fc-more,a[data-goto]"))return e.call(n,t)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo(G(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo(G(document))},dayMousedown:function(t){this.isIgnoringMouse||this.dayDragListener.startInteraction(t,{})},dayTouchStart:function(t){var e=this.view;(e.isSelected||e.selectedEvent)&&this.tempIgnoreMouse(),this.dayDragListener.startInteraction(t,{delay:this.view.opt("longPressDelay")})},buildDayDragListener:function(){var i,s,r=this,n=this.view,o=n.opt("selectable"),t=new Gt(this,{scroll:n.opt("dragScroll"),interactionStart:function(){i=t.origHit,s=null},dragStart:function(){n.unselect()},hitOver:function(t,e,n){n&&(e||(i=null),o&&((s=r.computeSelection(r.getHitSpan(n),r.getHitSpan(t)))?r.renderSelection(s):!1===s&&f()))},hitOut:function(){s=i=null,r.unrenderSelection()},hitDone:function(){g()},interactionEnd:function(t,e){e||(i&&!r.isIgnoringMouse&&n.triggerDayClick(r.getHitSpan(i),r.getHitEl(i),t),s&&n.reportSelection(s,t))}});return t},clearDragListeners:function(){this.dayDragListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(t,e){t=this.fabricateHelperEvent(t,e);return this.renderHelper(t,e)},fabricateHelperEvent:function(t,e){var n=e?A(e.event):{};return n.start=t.start.clone(),n.end=t.end?t.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventDates(n),n.className=(n.className||[]).concat("fc-helper"),e||(n.editable=!1),n},renderHelper:function(t,e){},unrenderHelper:function(){},renderSelection:function(t){this.renderHighlight(t)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(t,e){e=this.computeSelectionSpan(t,e);return!(e&&!this.view.calendar.isSelectionSpanAllowed(e))&&e},computeSelectionSpan:function(t,e){e=[t.start,t.end,e.start,e.end];return e.sort(Y),{start:e[0].clone(),end:e[3].clone()}},renderHighlight:function(t){this.renderFill("highlight",this.spanToSegs(t))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(t){},unrenderNowIndicator:function(){},renderFill:function(t,e){},unrenderFill:function(t){var e=this.elsByFill[t];e&&(e.remove(),delete this.elsByFill[t])},renderFillSegEls:function(t,n){var e,i=this,s=this[t+"SegEl"],r="",o=[];if(n.length){for(e=0;e<n.length;e++)r+=this.fillSegHtml(t,n[e]);G(r).each(function(t,e){t=n[t],e=G(e);!(e=s?s.call(i,t,e):e)||(e=G(e)).is(i.fillSegTag)&&(t.el=e,o.push(t))})}return o},fillSegTag:"div",fillSegHtml:function(t,e){var n=this[t+"SegClasses"],t=this[t+"SegCss"],n=n?n.call(this,e):[],e=L(t?t.call(this,e):{});return"<"+this.fillSegTag+(n.length?' class="'+n.join(" ")+'"':"")+(e?' style="'+e+'"':"")+" />"},getDayClasses:function(t){var e=this.view,n=e.calendar.getNow(),i=["fc-"+St[t.day()]];return 1==e.intervalDuration.as("months")&&t.month()!=e.intervalStart.month()&&i.push("fc-other-month"),t.isSame(n,"day")?i.push("fc-today",e.highlightStateClass):t<n?i.push("fc-past"):i.push("fc-future"),i}});zt.mixin({segSelector:".fc-event-container > *",mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(t){for(var e=[],n=[],i=0;i<t.length;i++)(ot(t[i])?e:n).push(t[i]);this.segs=[].concat(this.renderBgEvents(e),this.renderFgEvents(n))},renderBgEvents:function(t){t=this.eventsToSegs(t);return this.renderBgSegs(t)||t},renderFgEvents:function(t){t=this.eventsToSegs(t);return this.renderFgSegs(t)||t},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(t){},unrenderFgSegs:function(){},renderFgSegEls:function(n,t){var e,i=this.view,s="",r=[];if(n.length){for(e=0;e<n.length;e++)s+=this.fgSegHtml(n[e],t);G(s).each(function(t,e){t=n[t],e=i.resolveEventEl(t.event,G(e));e&&(e.data("fc-seg",t),t.el=e,"agendaDay"!==i.name&&"no"!==t.event.is_repeated_settlement||r.push(t))})}return r},fgSegHtml:function(t,e){},renderBgSegs:function(t){return this.renderFill("bgEvent",t)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(t,e){return this.view.resolveEventEl(t.event,e)},bgEventSegClasses:function(t){var e=t.event,t=e.source||{};return["fc-bgevent"].concat(e.className,t.className||[])},bgEventSegCss:function(t){return{"background-color":this.getSegSkinCss(t)["background-color"]}},businessHoursSegClasses:function(t){return["fc-nonbusiness","fc-bgevent"]},buildBusinessHourSegs:function(t){t=this.view.calendar.getCurrentBusinessHourEvents(t);return!t.length&&this.view.calendar.options.businessHours&&(t=[G.extend({},$t,{start:this.view.end,end:this.view.end,dow:null})]),this.eventsToSegs(t)},bindSegHandlers:function(){this.bindSegHandlersToEl(this.el)},bindSegHandlersToEl:function(t){this.bindSegHandlerToEl(t,"touchstart",this.handleSegTouchStart),this.bindSegHandlerToEl(t,"touchend",this.handleSegTouchEnd),this.bindSegHandlerToEl(t,"mouseenter",this.handleSegMouseover),this.bindSegHandlerToEl(t,"mouseleave",this.handleSegMouseout),this.bindSegHandlerToEl(t,"mousedown",this.handleSegMousedown),this.bindSegHandlerToEl(t,"click",this.handleSegClick),this.bindSegHandlerToEl(t,"dblclick",this.handleSegDBClick),this.bindSegHandlerToEl(t,"contextmenu",this.handleSegContextmenu)},bindSegHandlerToEl:function(t,e,n){var i=this;t.on(e,this.segSelector,function(t){var e=G(this).data("fc-seg");if(e&&!i.isDraggingSeg&&!i.isResizingSeg)return n.call(i,e,t)})},handleSegClick:function(t,e){!1===this.view.trigger("eventClick",t.el[0],t.event,e)&&e.preventDefault()},handleSegContextmenu:function(t,e){this.view.trigger("contextmenu",t.el[0],t.event,e);e.preventDefault()},handleSegDBClick:function(t,e){!1===this.view.trigger("eventDBClick",t.el[0],t.event,e)&&e.preventDefault()},handleSegMouseover:function(t,e){this.isIgnoringMouse||this.mousedOverSeg||(this.mousedOverSeg=t,this.view.isEventResizable(t.event)&&t.el.addClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseover",t.el[0],t.event,e))},handleSegMouseout:function(t,e){e=e||{},this.mousedOverSeg&&(t=t||this.mousedOverSeg,this.mousedOverSeg=null,this.view.isEventResizable(t.event)&&t.el.removeClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseout",t.el[0],t.event,e))},handleSegMousedown:function(t,e){0===jQuery(e.target).closest(".widget_input").length&&!this.startSegResize(t,e,{distance:5})&&this.view.isEventDraggable(t.event)&&this.buildSegDragListener(t).startInteraction(e,{distance:5})},handleSegTouchStart:function(t,e){var n=this.view,i=t.event,s=n.isEventSelected(i),r=n.isEventDraggable(i),n=n.isEventResizable(i),i=!1;(i=s&&n?this.startSegResize(t,e):i)||!r&&!n||(r?this.buildSegDragListener(t):this.buildSegSelectListener(t)).startInteraction(e,{delay:s?0:this.view.opt("longPressDelay")}),this.tempIgnoreMouse()},handleSegTouchEnd:function(t,e){this.tempIgnoreMouse()},startSegResize:function(t,e,n){return!!G(e.target).is(".fc-resizer")&&(this.buildSegResizeListener(t,G(e.target).is(".fc-start-resizer")).startInteraction(e,n),!0)},buildSegDragListener:function(s){var e,r,o,a=this,l=this.view,d=l.calendar,n=s.el,u=s.event;if(this.segDragListener)return this.segDragListener;var c=this.segDragListener=new Gt(l,{scroll:l.opt("dragScroll"),subjectEl:n,subjectCenter:!0,interactionStart:function(t){s.component=a,e=!1,(r=new Pt(s.el,{additionalClass:"fc-dragging",parentEl:l.el,opacity:c.isTouch?null:l.opt("dragOpacity"),revertDuration:l.opt("dragRevertDuration"),zIndex:2})).hide(),r.start(t)},dragStart:function(t){c.isTouch&&!l.isEventSelected(u)&&l.selectEvent(u),e=!0,a.handleSegMouseout(s,t),a.segDragStart(s,t),l.hideEvent(u)},hitOver:function(t,e,n){var i;s.hit&&(n=s.hit),(o=a.computeEventDrop(n.component.getHitSpan(n),t.component.getHitSpan(t),u))&&!d.isEventSpanAllowed(a.eventToSpan(o),u)&&(f(),o=null),o&&(i=l.renderDrag(o,s))?(i.addClass("fc-dragging"),c.isTouch||a.applyDragOpacity(i),r.hide()):r.show(),e&&(o=null)},hitOut:function(){l.unrenderDrag(),r.show(),o=null},hitDone:function(){g()},interactionEnd:function(t){delete s.component,r.stop(!o,function(){e&&(l.unrenderDrag(),l.showEvent(u),a.segDragStop(s,t)),o&&l.reportEventDrop(u,o,this.largeUnit,n,t)}),a.segDragListener=null}});return c},buildSegSelectListener:function(t){var e=this,n=this.view,i=t.event;if(this.segDragListener)return this.segDragListener;var s=this.segDragListener=new Ft({dragStart:function(t){s.isTouch&&!n.isEventSelected(i)&&n.selectEvent(i)},interactionEnd:function(t){e.segDragListener=null}});return s},segDragStart:function(t,e){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",t.el[0],t.event,e,{})},segDragStop:function(t,e){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",t.el[0],t.event,e,{})},computeEventDrop:function(t,e,n){var i,s=this.view.calendar,r=t.start,o=e.start,t=0,t="base"===n.event_type?n.item_id:n.link_id,e=Strack.current_time();if(Strack.G.calendarTaskRemainderLime.task_remainder_end_time[t]<e)return layer.msg("当前任务已经超期，请联系负责人!",{icon:2,time:1200,anim:6}),!1;if(!o.hasTime())return!1;if(r.hasTime()===o.hasTime()){if(r=this.diffDates(o,r),n.allDay&&C(r)){if(i={start:n.start.clone(),end:s.getEventEnd(n),allDay:!1},Strack.date_to_unix(s.getEventEnd(n).format())/1e3>Strack.G.calendarTaskRemainderLime.task_remainder_end_time[t])return layer.msg("计划排期不能超过任务截止时间!",{icon:2,time:1200,anim:6}),!1;s.normalizeEventTimes(i)}else if((i=rt(n)).start.add(r),i.end&&i.end.add(r),Strack.date_to_unix(i.end.format())/1e3>Strack.G.calendarTaskRemainderLime.task_remainder_end_time[t])return layer.msg("计划排期不能超过任务截止时间!",{icon:2,time:1200,anim:6}),!1;if(0<=jQuery.inArray(i.start.format("YYYY-MM-DD"),Strack.G.calendarLockDateList))return layer.msg("当前为锁定区域, 禁止编辑!",{icon:2,time:1200,anim:6}),!1}else{if(0<=jQuery.inArray(o.clone().format("YYYY-MM-DD"),Strack.G.calendarLockDateList))return layer.msg("当前为锁定区域, 禁止编辑!",{icon:2,time:1200,anim:6}),!1;if(Strack.date_to_unix(o.clone().format())/1e3+600>Strack.G.calendarTaskRemainderLime.task_remainder_end_time[t])return layer.msg("计划排期不能超过任务截止时间!",{icon:2,time:1200,anim:6}),!1;Strack.G.calendarTaskRemainderLime.plan_available_time[t]-=2,i={start:o.clone(),end:null,allDay:!o.hasTime()}}return i},applyDragOpacity:function(t){var e=this.view.opt("dragOpacity");null!=e&&t.css("opacity",e)},externalDragStart:function(t,e){var n,i=this.view;i.opt("droppable")&&(n=G((e?e.item:null)||t.target),i=i.opt("dropAccept"),(G.isFunction(i)?i.call(n[0],n):n.is(i))&&(this.isDraggingExternal||this.listenToExternalDrag(n,t,e)))},listenToExternalDrag:function(e,t,n){var i,s,r,o,a,l,d,u=this,c=this.view.calendar,h=(s=e,(d=mt.dataAttrPrefix)&&(d+="-"),(r=s.data(d+"event")||null)&&(null==(o=(r="object"==typeof r?G.extend({},r):{}).start)&&(o=r.time),a=r.duration,l=r.stick,delete r.start,delete r.time,delete r.duration,delete r.stick),null==(o=null==o?s.data(d+"start"):o)&&(o=s.data(d+"time")),null==a&&(a=s.data(d+"duration")),null==l&&(l=s.data(d+"stick")),{eventProps:r,startTime:o=null!=o?P.duration(o):null,duration:a=null!=a?P.duration(a):null,stick:l=Boolean(l)});(u.externalDragListener=new Gt(this,{interactionStart:function(){u.isDraggingExternal=!0},hitOver:function(t){(i=u.computeExternalDrop(t.component.getHitSpan(t),h))&&!c.isExternalSpanAllowed(u.eventToSpan(i),i,h.eventProps)&&(f(),i=null),i&&u.renderDrag(i)},hitOut:function(){i=null},hitDone:function(){g(),u.unrenderDrag()},interactionEnd:function(t){i&&u.view.reportExternalDrop(h,i,e,t,n),u.isDraggingExternal=!1,u.externalDragListener=null}})).startDrag(t)},computeExternalDrop:function(t,e){t={start:this.view.calendar.applyTimezone(t.start),end:null};return e.startTime&&!t.start.hasTime()&&t.start.time(e.startTime),e.duration&&(t.end=t.start.clone().add(e.duration)),t},renderDrag:function(t,e){},unrenderDrag:function(){},buildSegResizeListener:function(i,s){var e,r,o=this,a=this.view,l=a.calendar,n=i.el,d=i.event,u=l.getEventEnd(d);return this.segResizeListener=new Gt(this,{scroll:a.opt("dragScroll"),subjectEl:n,interactionStart:function(){e=!1},dragStart:function(t){e=!0,o.handleSegMouseout(i,t),o.segResizeStart(i,t)},hitOver:function(t,e,n){n=o.getHitSpan(n),t=o.getHitSpan(t);(r=s?o.computeEventStartResize(n,t,d):o.computeEventEndResize(n,t,d))&&(l.isEventSpanAllowed(o.eventToSpan(r),d)?r.start.isSame(d.start.clone().stripZone())&&r.end.isSame(u.clone().stripZone())&&(r=null):(f(),r=null)),r&&(a.hideEvent(d),o.renderEventResize(r,i))},hitOut:function(){r=null},hitDone:function(t){o.unrenderEventResize(),a.showEvent(d),g()},interactionEnd:function(t){e&&o.segResizeStop(i,t),r&&a.reportEventResize(d,r,this.largeUnit,n,t),o.segResizeListener=null}})},segResizeStart:function(t,e){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",t.el[0],t.event,e,{})},segResizeStop:function(t,e){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",t.el[0],t.event,e,{})},computeEventStartResize:function(t,e,n){return this.computeEventResize("start",t,e,n)},computeEventEndResize:function(t,e,n){var i=Strack.current_time();if(Strack.G.calendarTaskRemainderLime.task_remainder_end_time[n.link_id]<i)return layer.msg("当前任务已经超期，请联系负责人!",{icon:2,time:1200,anim:6}),!1;if(Strack.date_to_unix(e.end.format())/1e3>Strack.G.calendarTaskRemainderLime.task_remainder_end_time[n.link_id])return layer.msg("计划排期不能超过任务截止时间!",{icon:2,time:1200,anim:6}),!1;i=(e.end.unix()-e.start.unix())/60;return 0<i?(e.end.unix()>=n.end.unix()?Strack.G.calendarTaskRemainderLime.plan_available_time[n.link_id]-=i:Strack.G.calendarTaskRemainderLime.plan_available_time[n.link_id]+=i,this.computeEventResize("end",t,e,n)):void 0},computeEventResize:function(t,e,n,i){var s=this.view.calendar,n=this.diffDates(n[t],e[t]),e={start:i.start.clone(),end:s.getEventEnd(i),allDay:i.allDay};return e.allDay&&C(n)&&(e.allDay=!1,s.normalizeEventTimes(e)),e[t].add(n),e.start.isBefore(e.end)||(s=this.minResizeDuration||(i.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration),"start"==t?e.start=e.end.clone().subtract(s):e.end=e.start.clone().add(s)),e},renderEventResize:function(t,e){},unrenderEventResize:function(){},getEventTimeText:function(t,e,n){if(null==e&&(e=this.eventTimeFormat,null==n&&(n=this.displayEventEnd,this.displayEventTime&&t.start.hasTime())))return n&&t.end?this.view.formatRange(t,e):t.start.format(e)},getSegClasses:function(t,e,n){var i=this.view,s=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(this.getSegCustomClasses(t));return e&&s.push("fc-draggable"),n&&s.push("fc-resizable"),i.isEventSelected(t.event)&&s.push("fc-selected"),s},getSegCustomClasses:function(t){t=t.event;return[].concat(t.className,t.source?t.source.className:[])},getSegSkinCss:function(t){return{"background-color":this.getSegBackgroundColor(t),"border-color":this.getSegBorderColor(t),color:this.getSegTextColor(t)}},getSegBackgroundColor:function(t){return t.event.backgroundColor||t.event.color||this.getSegDefaultBackgroundColor(t)},getSegDefaultBackgroundColor:function(t){t=t.event.source||{};return t.backgroundColor||t.color||this.view.opt("eventBackgroundColor")||this.view.opt("eventColor")},getSegBorderColor:function(t){return t.event.borderColor||t.event.color||this.getSegDefaultBorderColor(t)},getSegDefaultBorderColor:function(t){t=t.event.source||{};return t.borderColor||t.color||this.view.opt("eventBorderColor")||this.view.opt("eventColor")},getSegTextColor:function(t){return t.event.textColor||this.getSegDefaultTextColor(t)},getSegDefaultTextColor:function(t){return(t.event.source||{}).textColor||this.view.opt("eventTextColor")},eventToSegs:function(t){return this.eventsToSegs([t])},eventToSpan:function(t){return this.eventToSpans(t)[0]},eventToSpans:function(t){var e=this.eventToRange(t);return this.eventRangeToSpans(e,t)},eventsToSegs:function(t,s){var r=this,t=function(t){for(var e,n={},i=0;i<t.length;i++)(n[(e=t[i])._id]||(n[e._id]=[])).push(e);return n}(t),o=[];return G.each(t,function(t,e){for(var n=[],i=0;i<e.length;i++)n.push(r.eventToRange(e[i]));if("inverse-background"===at(e[0]))for(n=r.invertRanges(n),i=0;i<n.length;i++)o.push.apply(o,r.eventRangeToSegs(n[i],e[0],s));else for(i=0;i<n.length;i++)o.push.apply(o,r.eventRangeToSegs(n[i],e[i],s))}),o},eventToRange:function(t){var e=this.view.calendar,n=t.start.clone().stripZone(),t=(t.end?t.end.clone():e.getDefaultEventEnd(null!=t.allDay?t.allDay:!t.start.hasTime(),t.start)).stripZone();return e.localizeMoment(n),e.localizeMoment(t),{start:n,end:t}},eventRangeToSegs:function(t,e,n){for(var i=this.eventRangeToSpans(t,e),s=[],r=0;r<i.length;r++)s.push.apply(s,this.eventSpanToSegs(i[r],e,n));return s},eventRangeToSpans:function(t,e){return[G.extend({},t)]},eventSpanToSegs:function(t,e,n){for(var i,s=n?n(t):this.spanToSegs(t),r=0;r<s.length;r++)(i=s[r]).event=e,i.eventStartMS=+t.start,i.eventDurationMS=t.end-t.start;return s},invertRanges:function(t){var e,n,i=this.view,s=i.start.clone(),i=i.end.clone(),r=[],o=s;for(t.sort(lt),e=0;e<t.length;e++)(n=t[e]).start>o&&r.push({start:o,end:n.start}),o=n.end;return o<i&&r.push({start:o,end:i}),r},sortEventSegs:function(t){t.sort(F(this,"compareEventSegs"))},compareEventSegs:function(t,e){return t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||_(t.event,e.event,this.view.eventOrderSpecs)}}),mt.pluckEventDateProps=rt,mt.isBgEvent=ot,mt.dataAttrPrefix="";Et=mt.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var t,e,n,i=this.view,s=this.start.clone(),r=-1,o=[],a=[];s.isBefore(this.end);)i.isHiddenDay(s)?o.push(r+.5):(o.push(++r),a.push(s.clone())),s.add(1,"days");if(this.breakOnWeeks){for(e=a[0].day(),t=1;t<a.length&&a[t].day()!=e;t++);n=Math.ceil(a.length/t)}else n=1,t=a.length;this.dayDates=a,this.dayIndices=o,this.daysPerRow=t,this.rowCnt=n,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(t,e){return this.dayDates[this.getCellDayIndex(t,e)].clone()},getCellRange:function(t,e){t=this.getCellDate(t,e),e=t.clone().add(1,"days");return{start:t,end:e}},getCellDayIndex:function(t,e){return t*this.daysPerRow+this.getColDayIndex(e)},getColDayIndex:function(t){return this.isRTL?this.colCnt-1-t:t},getDateDayIndex:function(t){var e=this.dayIndices,t=t.diff(this.start,"days");return t<0?e[0]-1:t>=e.length?e[e.length-1]+1:e[t]},computeColHeadFormat:function(){return 1<this.rowCnt||10<this.colCnt?"ddd":1<this.colCnt?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(t){for(var e,n,i,s=this.daysPerRow,t=this.view.computeDayRange(t),r=this.getDateDayIndex(t.start),o=this.getDateDayIndex(t.end.clone().subtract(1,"days")),a=[],l=0;l<this.rowCnt;l++)i=(e=l*s)+s-1,n=Math.max(r,e),i=Math.min(o,i),(n=Math.ceil(n))<=(i=Math.floor(i))&&a.push({row:l,firstRowDayIndex:n-e,lastRowDayIndex:i-e,isStart:n===r,isEnd:i===o});return a},sliceRangeByDay:function(t){for(var e,n,i,s,r,o=this.daysPerRow,t=this.view.computeDayRange(t),a=this.getDateDayIndex(t.start),l=this.getDateDayIndex(t.end.clone().subtract(1,"days")),d=[],u=0;u<this.rowCnt;u++)for(n=(e=u*o)+o-1,i=e;i<=n;i++)s=Math.max(a,i),r=Math.min(l,i),(s=Math.ceil(s))<=(r=Math.floor(r))&&d.push({row:u,firstRowDayIndex:s-e,lastRowDayIndex:r-e,isStart:s===a,isEnd:r===l});return d},renderHeadHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'" style="height: 24px;line-height: 24px"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){for(var t,e=[],n=0;n<this.colCnt;n++)t=this.getCellDate(0,n),e.push(this.renderHeadDateCellHtml(t));return e.join("")},renderHeadDateCellHtml:function(t,e,n){var i=this.view;return'<th class="fc-day-header '+i.widgetHeaderClass+" fc-"+St[t.day()]+'"'+(1===this.rowCnt?' data-date="'+t.format("YYYY-MM-DD")+'"':"")+(1<e?' colspan="'+e+'"':"")+(n?" "+n:"")+">"+i.buildGotoAnchorHtml({date:t,forceOff:1<this.rowCnt||1===this.colCnt},R(t.format(this.colHeadFormat)))+"</th>"},renderBgTrHtml:function(t){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(t))+this.renderBgCellsHtml(t)+(this.isRTL?this.renderBgIntroHtml(t):"")+"</tr>"},renderBgIntroHtml:function(t){return this.renderIntroHtml()},renderBgCellsHtml:function(t){for(var e,n=[],i=0;i<this.colCnt;i++)e=this.getCellDate(t,i),n.push(this.renderBgCellHtml(e));return n.join("")},renderBgCellHtml:function(t,e){var n=this.view,i=this.getDayClasses(t);return i.unshift("fc-day",n.widgetContentClass),'<td class="'+i.join(" ")+'" data-date="'+t.format("YYYY-MM-DD")+'"'+(e?" "+e:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(t){var e=this.renderIntroHtml();e&&(this.isRTL?t.append(e):t.prepend(e))}},Tt=mt.DayGrid=zt.extend(Et,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(t){for(var e,n=this.view,i=this.rowCnt,s=this.colCnt,r="",o=0;o<i;o++)r+=this.renderDayRowHtml(o,t);for(this.el.html(r),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new Ot({els:this.rowEls,isVertical:!0}),this.colCoordCache=new Ot({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),o=0;o<i;o++)for(e=0;e<s;e++)n.trigger("dayRender",null,this.getCellDate(o,e),this.getCellEl(o,e))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var t=this.buildBusinessHourSegs(!0);this.renderFill("businessHours",t,"bgevent")},unrenderBusinessHours:function(){this.unrenderFill("businessHours")},renderDayRowHtml:function(t,e){var n=["fc-row","fc-week",this.view.widgetContentClass];return e&&n.push("fc-rigid"),'<div class="'+n.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(t)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(t)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(t){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(t))+this.renderNumberCellsHtml(t)+(this.isRTL?this.renderNumberIntroHtml(t):"")+"</tr>"},renderNumberIntroHtml:function(t){return this.renderIntroHtml()},renderNumberCellsHtml:function(t){for(var e,n=[],i=0;i<this.colCnt;i++)e=this.getCellDate(t,i),n.push(this.renderNumberCellHtml(e));return n.join("")},renderNumberCellHtml:function(t){var e,n,i="";return this.view.dayNumbersVisible||this.view.cellWeekNumbersVisible?((e=this.getDayClasses(t)).unshift("fc-day-top"),this.view.cellWeekNumbersVisible&&(n="ISO"===t._locale._fullCalendar_weekCalc?1:t._locale.firstDayOfWeek()),i+='<td class="'+e.join(" ")+'" data-date="'+t.format()+'">',this.view.cellWeekNumbersVisible&&t.day()==n&&(i+=this.view.buildGotoAnchorHtml({date:t,type:"week"},{class:"fc-week-number"},t.format("w"))),this.view.dayNumbersVisible&&(i+=this.view.buildGotoAnchorHtml(t,{class:"fc-day-number"},t.date())),i+"</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(t){for(var e,n=this.sliceRangeByRow(t),i=0;i<n.length;i++)e=n[i],this.isRTL?(e.leftCol=this.daysPerRow-1-e.lastRowDayIndex,e.rightCol=this.daysPerRow-1-e.firstRowDayIndex):(e.leftCol=e.firstRowDayIndex,e.rightCol=e.lastRowDayIndex);return n},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(t,e){if(this.colCoordCache.isLeftInBounds(t)&&this.rowCoordCache.isTopInBounds(e)){t=this.colCoordCache.getHorizontalIndex(t),e=this.rowCoordCache.getVerticalIndex(e);if(null!=e&&null!=t)return this.getCellHit(e,t)}},getHitSpan:function(t){return this.getCellRange(t.row,t.col)},getHitEl:function(t){return this.getCellEl(t.row,t.col)},getCellHit:function(t,e){return{row:t,col:e,component:this,left:this.colCoordCache.getLeftOffset(e),right:this.colCoordCache.getRightOffset(e),top:this.rowCoordCache.getTopOffset(t),bottom:this.rowCoordCache.getBottomOffset(t)}},getCellEl:function(t,e){return this.cellEls.eq(t*this.colCnt+e)},renderDrag:function(t,e){if(this.renderHighlight(this.eventToSpan(t)),e&&e.component!==this)return this.renderEventLocationHelper(t,e)},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(t,e){return this.renderHighlight(this.eventToSpan(t)),this.renderEventLocationHelper(t,e)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(t,s){var r=[],t=this.eventToSegs(t),t=this.renderFgSegEls(t),o=this.renderSegRows(t);return this.rowEls.each(function(t,e){var n=G(e),i=G('<div class="fc-helper-skeleton"><table/></div>'),e=(s&&s.row===t?s.el:n.find(".fc-content-skeleton tbody")).position().top;i.css("top",e).find("table").append(o[t].tbodyEl),n.append(i),r.push(i[0])}),this.helperEls=G(r)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(t,e,n){var i,s,r,o=[];for(e=this.renderFillSegEls(t,e),i=0;i<e.length;i++)s=e[i],r=this.renderFillRow(t,s,n),this.rowEls.eq(s.row).append(r),o.push(r[0]);return this.elsByFill[t]=G(o),e},renderFillRow:function(t,e,n){var i=this.colCnt,s=e.leftCol,r=e.rightCol+1;return n=n||t.toLowerCase(),n=(t=G('<div class="fc-'+n+'-skeleton"><table><tr/></table></div>')).find("tr"),0<s&&n.append('<td colspan="'+s+'"/>'),n.append(e.el.attr("colspan",r-s)),r<i&&n.append('<td colspan="'+(i-r)+'"/>'),this.bookendCells(n),t}});Tt.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),zt.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return zt.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){t=G.grep(t,function(t){return t.event.allDay});return zt.prototype.renderBgSegs.call(this,t)},renderFgSegs:function(t){var n;return t=this.renderFgSegEls(t),n=this.rowStructs=this.renderSegRows(t),this.rowEls.each(function(t,e){G(e).find(".fc-content-skeleton > table").append(n[t].tbodyEl)}),t},unrenderFgSegs:function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(t){for(var e=[],n=this.groupSegRows(t),i=0;i<n.length;i++)e.push(this.renderSegRow(i,n[i]));return e},generateAllDayEventDom:function(t){var e="",n="",i=Math.floor(1e6*Math.random()+1);"yes"===t.is_my_task.status?n+=Strack.init_timelog_bnt_dom(t,"schedule_slider_tg_bnt_"+i,"schedule"):n+='<a href="javascript:;" class="aign-left fc-h-event-all-day-tg">-</a>';var s="display-hide-important",r="display-hide-important",o="display-hide-important";"yes"===t.af_settlement_bnt&&(s=""),"yes"===t.jj_settlement_bnt&&(r=""),"yes"===t.cf_settlement_bnt&&(o="");t.status_color&&t.status_color;return e+='<div class="fc-day-grid-event fc-h-event fc-h-event-all-day" style="border-left: 2px solid '+t.event_border_color+'">'+n+'<div class="aign-left fc-h-event-all-day-col"><strong>'+StrackLang.Project_Name+"：</strong>"+t.project_name+'</div><div class="aign-left fc-h-event-all-day-col"><strong>'+StrackLang.Task_Name+"：</strong>"+t.name+'</div><div class="aign-left fc-h-event-all-day-col" style="text-align: center"><bottun class="ui button basic" style="box-shadow: 0 0 0 1px #'+t.status_color+" inset !important;color: #"+t.status_color+' !important;">'+t.status_name+'</bottun></div><div class="aign-left fc-h-event-all-day-col"><div><strong>'+StrackLang.Distributive_Person+"：</strong>"+t.reviewed_by_user_name+"</div><div><strong>"+StrackLang.Executor+"：</strong>"+t.assignee_user_name+'</div></div><div class="aign-left fc-h-event-all-day-col"><strong>'+StrackLang.Cutoff_Time+"：</strong>"+t.end_time+'</div><div class="aign-left fc-h-event-all-day-col"><strong>'+StrackLang.Remaining_Time+"：</strong>"+t.remaining_time+'</div><div class="aign-left fc-h-event-all-day-col"><strong>'+StrackLang.Actual_T_Consuming+"：</strong>"+t.actual_time_consuming+'</div><div class="aign-left fc-h-event-all-day-calculate"><div class="item-list-ptn aign-left"><strong>'+StrackLang.Settlement_Time_Consuming+'：</strong></div><div class="item-list-pt overflow-hide"></div>'+Strack.widget_input_dom(t.settlement_time_consuming.config,t.settlement_time_consuming.primary,t.settlement_time_consuming.val,"schedule",!1,t.settlement_time_consuming.param)+'</div><div class="aign-left fc-h-event-all-day-bnt"><a href="javascript:;" id="'+i+'_slider_af_settlement_bnt" class="ui button orange '+s+" settlement_bnt_af_"+t.item_id+'" onclick="Strack.application_for_settlement(this, event)" data-linkid="'+t.item_id+'" data-moduleid="'+t.module_id+'" data-projectid="'+t.project_id+'" data-from="'+i+'" data-eq="'+t.assignee_eq_reviewed+'" data-calculate="'+t.calculate_auto+'" title="">'+Strack.show_application_for_settlement_lang(t.reviewed_by_user_name,t.assignee_user_name)+'</a><a href="javascript:;" id="'+i+'_slider_jj_settlement_bnt" class="ui button red '+r+" settlement_bnt_jj_"+t.item_id+'" onclick="Strack.reject_for_settlement(this, event)" data-linkid="'+t.item_id+'"  data-moduleid="'+t.module_id+'" data-projectid="'+t.project_id+'" data-from="'+i+'" data-eq="'+t.assignee_eq_reviewed+'" title="">'+StrackLang.Reject_For_Settlement+'</a><a href="javascript:;" id="'+i+'_slider_cf_settlement_bnt" class="ui button green '+o+" settlement_bnt_cf_"+t.item_id+'" onclick="Strack.confirmation_for_settlement(this, event)" data-linkid="'+t.item_id+'" data-moduleid="'+t.module_id+'" data-projectid="'+t.project_id+'" data-from="'+i+'" data-eq="'+t.assignee_eq_reviewed+'" title="">'+StrackLang.Confirmation_For_Settlement+"</a></div></div>"},fgSegHtml:function(t,e){var n=this.view,i=t.event,s=n.isEventDraggable(i),r=!e&&i.allDay&&t.isStart&&n.isEventResizableFromStart(i),o=!e&&t.isEnd&&n.isEventResizableFromEnd(i),e=this.getSegClasses(t,s,r||o),n=L(this.getSegSkinCss(t)),s="";if(e.unshift("fc-day-grid-event","fc-h-event"),"agendaDay"===this.view.name)return this.generateAllDayEventDom(i);if("no"===i.is_repeated_settlement&&("no"===i.is_all_day||0<=jQuery.inArray(this.view.name,["agendaWeek","agendaMonth"]))){t.isStart&&((a=this.getEventTimeText(i))&&(s='<span class="fc-time">'+R(a)+"</span>"));var a='<span class="fc-title">'+(R(i.title||"")||"&nbsp;")+"</span>";return'<div class="'+e.join(" ")+'"'+(i.url?' href="'+R(i.url)+'"':"")+(n?' style="'+n+'"':"")+'><div class="fc-content">'+(this.isRTL?a+" "+s:s+" "+a)+"</div>"+(r?'<div class="fc-resizer fc-start-resizer" />':"")+(o?'<div class="fc-resizer fc-end-resizer" />':"")+"</div>"}return""},renderSegRow:function(t,e){function n(t){for(;s<t;)(l=(m[p-1]||[])[s])?l.attr("rowspan",parseInt(l.attr("rowspan")||1,10)+1):(l=G("<td/>"),r.append(l)),g[p][s]=l,m[p][s]=l,s++}for(var i,s,r,o,a,l,d=this.colCnt,u=this.buildSegLevels(e),c=Math.max(1,u.length),h=G("<tbody/>"),f=[],g=[],m=[],p=0;p<c;p++){if(i=u[p],s=0,r=G("<tr/>"),f.push([]),g.push([]),m.push([]),i)for(o=0;o<i.length;o++){for(n((a=i[o]).leftCol),l=G('<td class="fc-event-container"/>').append(a.el),a.leftCol!=a.rightCol?l.attr("colspan",a.rightCol-a.leftCol+1):m[p][s]=l;s<=a.rightCol;)g[p][s]=l,f[p][s]=a,s++;r.append(l)}n(d),this.bookendCells(r),h.append(r)}return{row:t,tbodyEl:h,cellMatrix:g,segMatrix:f,segLevels:u,segs:e}},buildSegLevels:function(t){var e,n,i,s=[];for(this.sortEventSegs(t),e=0;e<t.length;e++){for(n=t[e],i=0;i<s.length&&function(t,e){for(var n,i=0;i<e.length;i++)if((n=e[i]).leftCol<=t.rightCol&&n.rightCol>=t.leftCol)return 1}(n,s[i]);i++);(s[n.level=i]||(s[i]=[])).push(n)}for(i=0;i<s.length;i++)s[i].sort(dt);return s},groupSegRows:function(t){for(var e=[],n=0;n<this.rowCnt;n++)e.push([]);for(n=0;n<t.length;n++)e[t[n].row].push(t[n]);return e}}),Tt.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){},limitRows:function(t){for(var e,n=this.rowStructs||[],i=0;i<n.length;i++)this.unlimitRow(i),!1!==(e=!!t&&("number"==typeof t?t:this.computeRowLevelLimit(i)))&&this.limitRow(i,e)},computeRowLevelLimit:function(t){function e(t,e){i=Math.max(i,G(e).outerHeight())}for(var n,i,s=this.rowEls.eq(t).height(),r=this.rowStructs[t].tbodyEl.children(),o=0;o<r.length;o++)if(n=r.eq(o).removeClass("fc-limited"),i=0,n.find("> td > :first-child").each(e),n.position().top+i>s)return o;return!1},limitRow:function(e,n){function t(t){for(;_<t;)(l=y.getCellSegs(e,_,n)).length&&(c=s[n-1][_],v=y.renderMoreLink(e,_,l),p=G("<div/>").append(v),c.append(p),w.push(p[0])),_++}var i,s,r,o,a,l,d,u,c,h,f,g,m,p,v,y=this,S=this.rowStructs[e],w=[],_=0;if(n&&n<S.segLevels.length){for(i=S.segLevels[n-1],s=S.cellMatrix,r=S.tbodyEl.children().slice(n).addClass("fc-limited").get(),o=0;o<i.length;o++){for(t((a=i[o]).leftCol),u=[],d=0;_<=a.rightCol;)l=this.getCellSegs(e,_,n),u.push(l),d+=l.length,_++;if(d){for(h=(c=s[n-1][a.leftCol]).attr("rowspan")||1,f=[],g=0;g<u.length;g++)m=G('<td class="fc-more-cell"/>').attr("rowspan",h),l=u[g],v=this.renderMoreLink(e,a.leftCol+g,[a].concat(l)),p=G("<div/>").append(v),m.append(p),f.push(m[0]),w.push(m[0]);c.addClass("fc-limited").after(G(f)),r.push(c[0])}}t(this.colCnt),S.moreEls=G(w),S.limitedEls=G(r)}},unlimitRow:function(t){t=this.rowStructs[t];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(a,l,d){var u=this,c=this.view;return G('<a class="fc-more"/>').text(this.getMoreLinkText(d.length)).on("click",function(t){var e=c.opt("eventLimitClick"),n=u.getCellDate(a,l),i=G(this),s=u.getCellEl(a,l),r=u.getCellSegs(a,l),o=u.resliceDaySegs(r,n),r=u.resliceDaySegs(d,n);"popover"===(e="function"==typeof e?c.trigger("eventLimitClick",null,{date:n,dayEl:s,moreEl:i,segs:o,hiddenSegs:r},t):e)?u.showSegPopover(a,l,i,o):"string"==typeof e&&c.calendar.zoomTo(n,e)})},showSegPopover:function(t,e,n,i){var s=this,r=this.view,n=n.parent(),r=(1==this.rowCnt?r.el:this.rowEls.eq(t),{className:"fc-more-popover",content:this.renderSegPopoverContent(t,e,i),parentEl:this.view.el,top:top,allDay:i[0].event.allDay,autoHide:!0,viewportConstrain:r.opt("popoverViewportConstrain"),hide:function(){s.segPopover.removeElement(),s.segPopover=null,s.popoverSegs=null}});this.isRTL?r.right=n.offset().left+n.outerWidth()+1:r.left=n.offset().left-1,this.segPopover=new Yt(r),this.segPopover.show(),this.bindSegHandlersToEl(this.segPopover.el)},renderSegPopoverContent:function(t,e,n){var i,s=this.view,r=s.opt("theme"),o=this.getCellDate(t,e).format(s.opt("dayPopoverFormat")),s=G('<div class="fc-header '+s.widgetHeaderClass+'"><span class="fc-close '+(r?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+R(o)+'</span><div class="fc-clear"/></div><div class="fc-body '+s.widgetContentClass+'"><div class="fc-event-container"></div></div>'),a=s.find(".fc-event-container");for(n=this.renderFgSegEls(n,!0),this.popoverSegs=n,i=0;i<n.length;i++)this.prepareHits(),n[i].hit=this.getCellHit(t,e),this.releaseHits(),a.append(n[i].el);return s},resliceDaySegs:function(t,e){var n=G.map(t,function(t){return t.event}),i=e.clone(),e=i.clone().add(1,"days"),s={start:i,end:e};return t=this.eventsToSegs(n,function(t){t=E(t,s);return t?[t]:[]}),this.sortEventSegs(t),t},getMoreLinkText:function(t){var e=this.view.opt("eventLimitText");return"function"==typeof e?e(t):"+"+t+" "+e},getCellSegs:function(t,e,n){for(var i,s=this.rowStructs[t].segMatrix,r=n||0,o=[];r<s.length;)(i=s[r][e])&&o.push(i),r++;return o}});Et=mt.TimeGrid=zt.extend(Et,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){zt.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatContainerEl=this.el.find(".fc-slats"),this.slatEls=this.slatContainerEl.find("tr"),this.colCoordCache=new Ot({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new Ot({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var t,e,n,i=this.view,s=this.isRTL,r="",o=P.duration(+this.minTime);o<this.maxTime;)t=this.start.clone().time(o),e=O(T(o,this.labelInterval)),n='<td class="fc-axis fc-time '+i.widgetContentClass+'" '+i.axisStyleAttr()+">"+(e?"<span>"+R(t.format(this.labelFormat))+"</span>":"")+"</td>",r+='<tr data-time="'+t.format("HH:mm:ss")+'"'+(e?"":' class="fc-minor"')+">"+(s?"":n)+'<td class="'+i.widgetContentClass+'"/>'+(s?n:"")+"</tr>",o.add(this.slotDuration);return r},processOptions:function(){var t=this.view,e=t.opt("slotDuration"),n=t.opt("snapDuration"),e=P.duration(e),n=n?P.duration(n):e;this.slotDuration=e,this.snapDuration=n,this.snapsPerSlot=e/n,this.minResizeDuration=n,this.minTime=P.duration(t.opt("minTime")),this.maxTime=P.duration(t.opt("maxTime")),n=t.opt("slotLabelFormat"),G.isArray(n)&&(n=n[n.length-1]),this.labelFormat=n||t.opt("smallTimeFormat"),n=t.opt("slotLabelInterval"),this.labelInterval=n?P.duration(n):this.computeLabelInterval(e)},computeLabelInterval:function(t){for(var e,n,i=ee.length-1;0<=i;i--)if(O(n=T(e=P.duration(ee[i]),t))&&1<n)return e;return P.duration(t)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(t,e){var n=this.snapsPerSlot,i=this.colCoordCache,s=this.slatCoordCache;if(i.isLeftInBounds(t)&&s.isTopInBounds(e)){var r=i.getHorizontalIndex(t),o=s.getVerticalIndex(e);if(null!=r&&null!=o){var a=s.getTopOffset(o),t=s.getHeight(o),s=Math.floor((e-a)/t*n),e=a+s/n*t,t=a+(s+1)/n*t;return{col:r,snap:o*n+s,component:this,left:i.getLeftOffset(r),right:i.getRightOffset(r),top:e,bottom:t}}}},getHitSpan:function(t){var e=this.getCellDate(0,t.col),t=this.computeSnapTime(t.snap);return e.time(t),t=e.clone().add(this.snapDuration),{start:e,end:t}},getHitEl:function(t){return this.colEls.eq(t.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(t){return P.duration(this.minTime+this.snapDuration*t)},spanToSegs:function(t){for(var e=this.sliceRangeByTimes(t),n=0;n<e.length;n++)this.isRTL?e[n].col=this.daysPerRow-1-e[n].dayIndex:e[n].col=e[n].dayIndex;return e},sliceRangeByTimes:function(t){for(var e,n=[],i=0;i<this.daysPerRow;i++)(e=E(t,{start:(e=this.dayDates[i].clone()).clone().time(this.minTime),end:e.clone().time(this.maxTime)}))&&(e.dayIndex=i,n.push(e));return n},updateSize:function(t){this.slatCoordCache.build(),t&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(t,e){return this.computeTimeTop(P.duration(t-e.clone().stripTime()))},computeTimeTop:function(t){var e=this.slatEls.length,n=(t-this.minTime)/this.slotDuration,n=Math.max(0,n);return n=Math.min(e,n),t=Math.floor(n),e=n-(t=Math.min(t,e-1)),this.slatCoordCache.getTopPosition(t)+this.slatCoordCache.getHeight(t)*e},renderDrag:function(t,e){return e?this.renderEventLocationHelper(t,e):void this.renderHighlight(this.eventToSpan(t))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(t,e){return this.renderEventLocationHelper(t,e)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(t,e){return this.renderHelperSegs(this.eventToSegs(t),e)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){this.renderBusinessSegs(this.buildBusinessHourSegs())},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(t){for(var e=this.spanToSegs({start:t,end:t}),n=this.computeDateTop(t,t),i=[],s=0;s<e.length;s++)i.push(G('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",n).appendTo(this.colContainerEls.eq(e[s].col))[0]);0<e.length&&i.push(G('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",n).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=G(i)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(t){this.view.opt("selectHelper")?this.renderEventLocationHelper(t):this.renderHighlight(t)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(t){this.renderHighlightSegs(this.spanToSegs(t))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});Et.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){for(var t,e="",n=0;n<this.colCnt;n++)e+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';t=G('<div class="fc-content-skeleton"><table><tr>'+e+"</tr></table></div>"),this.colContainerEls=t.find(".fc-content-col"),this.helperContainerEls=t.find(".fc-helper-container"),this.fgContainerEls=t.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=t.find(".fc-bgevent-container"),this.highlightContainerEls=t.find(".fc-highlight-container"),this.businessContainerEls=t.find(".fc-business-container"),this.bookendCells(t.find("tr")),this.el.append(t)},renderFgSegs:function(t){return t=this.renderFgSegsIntoContainers(t,this.fgContainerEls),this.fgSegs=t},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(t,e){var n,i,s,r=[];for(t=this.renderFgSegsIntoContainers(t,this.helperContainerEls),n=0;n<t.length;n++)i=t[n],e&&e.col===i.col&&(s=e.el,i.el.css({left:s.css("left"),right:s.css("right"),"margin-left":s.css("margin-left"),"margin-right":s.css("margin-right")})),r.push(i.el[0]);return this.helperSegs=t,G(r)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(t){return t=this.renderFillSegEls("bgEvent",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.bgContainerEls),this.bgSegs=t},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(t){t=this.renderFillSegEls("highlight",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.highlightContainerEls),this.highlightSegs=t},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(t){t=this.renderFillSegEls("businessHours",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.businessContainerEls),this.businessSegs=t},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(t){for(var e=[],n=0;n<this.colCnt;n++)e.push([]);for(n=0;n<t.length;n++)e[t[n].col].push(t[n]);return e},attachSegsByCol:function(t,e){for(var n,i,s=0;s<this.colCnt;s++)for(n=t[s],i=0;i<n.length;i++)e.eq(s).append(n[i].el)},unrenderNamedSegs:function(t){var e,n=this[t];if(n){for(e=0;e<n.length;e++)n[e].el.remove();this[t]=null}},renderFgSegsIntoContainers:function(t,e){var n,i;for(t=this.renderFgSegEls(t),n=this.groupSegsByCol(t),i=0;i<this.colCnt;i++)this.updateFgSegCoords(n[i]);return this.attachSegsByCol(n,e),t},fgSegHtml:function(t,e){var n,i,s,r=this.view,o=t.event,a=r.isEventDraggable(o),l=!e&&t.isStart&&r.isEventResizableFromStart(o),d=!e&&t.isEnd&&r.isEventResizableFromEnd(o),u=this.getSegClasses(t,a,l||d);L(this.getSegSkinCss(t));u.unshift("fc-time-grid-event","fc-v-event"),r.isMultiDayEvent(o)?(t.isStart||t.isEnd)&&(n=this.getEventTimeText(t),i=this.getEventTimeText(t,"LT"),s=this.getEventTimeText(t,null,!1)):(n=this.getEventTimeText(o),i=this.getEventTimeText(o,"LT"),s=this.getEventTimeText(o,null,!1));o.status_color&&o.status_color;var c="",h=Math.floor(1e6*Math.random()+1);"yes"===o.is_my_task.status?(0<=jQuery.inArray(parseInt(o.link_id),Strack.G.tempStartTimelogids.ids)&&(o.timelog=Strack.G.tempStartTimelogids.status[parseInt(o.link_id)]),"event"===o.event_type?c+=Strack.init_timelog_bnt_dom({timelog:o.timelog,item_id:o.link_id,module_id:o.base_module_id},"schedule_slider_tg_bnt_"+h,"schedule"):c+=Strack.init_timelog_bnt_dom(o,"schedule_slider_tg_bnt_"+h,"schedule")):c+='<a href="javascript:;" class="aign-left fc-h-event-all-day-tg">-</a>';var f="";"yes"===r.options.param.rule_update_widget&&"no"===o.lock_status&&(f+='<a href="javascript:;" class="aign-left fc-h-event-copy" data-id="'+o.id+'"><i class="icon-uniE665 icon-left"></i>复制</a>');e="";"yes"===r.options.param.rule_delete_task_plan&&"no"===o.lock_status&&(e+='<a href="javascript:;" class="aign-left fc-h-event-del" data-id="'+o.item_id+'"><i class="icon-uniE6DB icon-left"></i></a>'),u.push("fc-h-event-normal"),"yes"===o.complete&&u.push("fc-card-complate");a="display-hide-important",l="display-hide-important",t="display-hide-important";"yes"===o.af_settlement_bnt&&(a=""),"yes"===o.jj_settlement_bnt&&(l=""),"yes"===o.cf_settlement_bnt&&(t="");r="";r+='<a href="javascript:;" id="'+h+'_slider_af_settlement_bnt" class="ui button orange '+a+'" onclick="Strack.application_for_settlement(this, event)" data-linkid="'+o.link_id+'" data-moduleid="'+o.base_module_id+'" data-projectid="'+o.project_id+'" data-from="'+h+'" data-eq="'+o.assignee_eq_reviewed+'" data-calculate="'+o.calculate_auto+'" title="">'+StrackLang.Application_For_Settlement+'</a><a href="javascript:;" id="'+h+'_slider_jj_settlement_bnt" class="ui button red '+l+'" onclick="Strack.reject_for_settlement(this, event)" data-linkid="'+o.link_id+'"  data-moduleid="'+o.base_module_id+'" data-projectid="'+o.project_id+'" data-from="'+h+'" data-eq="'+o.assignee_eq_reviewed+'" title="">'+StrackLang.Reject_For_Settlement+'</a><a href="javascript:;" id="'+h+'_slider_cf_settlement_bnt" class="ui button green '+t+'" onclick="Strack.confirmation_for_settlement(this, event)" data-linkid="'+o.link_id+'" data-moduleid="'+o.base_module_id+'" data-projectid="'+o.project_id+'" data-from="'+h+'" data-eq="'+o.assignee_eq_reviewed+'" title="">'+StrackLang.Confirmation_For_Settlement+"</a>";h="event"===o.event_type?o.base_end_time:o.end_time;return'<div class="'+u.join(" ")+'"'+(o.url?' href="'+R(o.url)+'"':"")+' style="background-color: #FFFFFF;color: #555;border: none;box-shadow: 0 1px 3px 0 #D4D4D5, 0 0 0 1px #D4D4D5;padding: 5px; border-style: solid;border-width: 0 0 0 2px;border-color: '+o.event_border_color+';"><div class="fc-content"><div class="fc-card-top fc-card-head" style="overflow: hidden;margin-bottom: 10px"><div class="fc-card-remaind aign-left" style="background-color: '+o.event_border_color+';">'+o.remaining_time+"</div>"+c+'<div class="fc-card-bnt aign-left">'+r+"</div>"+(n?'<div class="fc-time aign-left" style="margin-left: 10px" data-start="'+R(s)+'" data-full="'+R(i)+'"><span>'+R(n)+"</span></div>":"")+f+e+'</div><div class="fc-card-body" style="overflow: hidden;">'+(o.project_name?'<div class="fc-title aign-left" style="margin-right: 10px"><strong>'+StrackLang.Project_Name+"：</strong>"+R(o.project_name)+"</div>":"")+(o.title?'<div class="fc-title aign-left" style="margin-right: 10px"><strong>'+StrackLang.Task_Name+"：</strong>"+R(o.title)+"</div>":"")+(o.end_time?'<div class="fc-title aign-left" style="margin-right: 10px"><strong>'+StrackLang.Cutoff_Time+"：</strong>"+R(h)+"</div>":"")+(o.reviewed_by_user_name?'<div class="fc-title aign-left" style="margin-right: 10px"><strong>'+StrackLang.Distributive_Person+"：</strong>"+R(o.reviewed_by_user_name)+"</div>":"")+(o.assignee_user_name?'<div class="fc-title aign-left"><strong>'+StrackLang.Executor+"：</strong>"+R(o.assignee_user_name)+"</div>":"")+'</div></div><div class="fc-bg"/>'+(d?'<div class="fc-resizer fc-end-resizer" />':"")+"</div>"},updateSegVerticals:function(t){this.computeSegVerticals(t),this.assignSegVerticals(t)},computeSegVerticals:function(t){for(var e,n=0;n<t.length;n++)(e=t[n]).top=this.computeDateTop(e.start,e.start),e.bottom=this.computeDateTop(e.end,e.start)},assignSegVerticals:function(t){for(var e,n=0;n<t.length;n++)(e=t[n]).el.css(this.generateSegVerticalCss(e))},generateSegVerticalCss:function(t){return{top:t.top,bottom:-t.bottom}},updateFgSegCoords:function(t){this.computeSegVerticals(t),this.assignSegVerticals(t),this.computeFgSegHorizontals(t),this.assignFgSegHorizontals(t)},computeFgSegHorizontals:function(t){var e,n;if(this.sortEventSegs(t),function(t){for(var e,n,i,s,r=0;r<t.length;r++)for(e=t[r],n=0;n<e.length;n++)for((i=e[n]).forwardSegs=[],s=r+1;s<t.length;s++)ut(i,t[s],i.forwardSegs)}(t=function(t){for(var e,n,i=[],s=0;s<t.length;s++){for(e=t[s],n=0;n<i.length&&ut(e,i[n]).length;n++);(i[e.level=n]||(i[n]=[])).push(e)}return i}(t)),e=t[0]){for(n=0;n<e.length;n++)!function t(e){var n,i,s=e.forwardSegs,r=0;if(void 0===e.forwardPressure){for(n=0;n<s.length;n++)t(i=s[n]),r=Math.max(r,1+i.forwardPressure);e.forwardPressure=r}}(e[n]);for(n=0;n<e.length;n++)this.computeFgSegForwardBack(e[n],0,0)}},computeFgSegForwardBack:function(t,e,n){var i,s=t.forwardSegs;if(void 0===t.forwardCoord)for(s.length?(this.sortForwardSegs(s),this.computeFgSegForwardBack(s[0],e+1,n),t.forwardCoord=s[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),i=0;i<s.length;i++)this.computeFgSegForwardBack(s[i],0,t.forwardCoord)},sortForwardSegs:function(t){t.sort(F(this,"compareForwardSegs"))},compareForwardSegs:function(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||this.compareEventSegs(t,e)},assignFgSegHorizontals:function(t){for(var e,n=0;n<t.length;n++)(e=t[n]).el.css(this.generateFgSegHorizontalCss(e)),e.bottom-e.top<30&&e.el.addClass("fc-short")},generateFgSegHorizontalCss:function(t){var e,n,i=this.view.opt("slotEventOverlap"),s=t.backwardCoord,r=t.forwardCoord,o=this.generateSegVerticalCss(t);i&&(r=Math.min(1,s+2*(r-s)));var a="",a=this.isRTL?(e=1-r,n=s,"marginLeft"):(e=s,n=1-r,"marginRight");return o.zIndex=t.level+1,o.left=100*e+"%",o.right=100*n+"%",i&&t.forwardPressure&&(o[a]=0),o}});var Nt=mt.View=et.extend(It,Lt,{type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(t,e,n,i){this.calendar=t,this.type=this.name=e,this.options=n,this.intervalDuration=i||P.duration(1,"day"),this.nextDayThreshold=P.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=w(this.opt("eventOrder")),this.initialize()},initialize:function(){},opt:function(t){return this.options[t]},trigger:function(t,e){var n=this.calendar;return n.trigger.apply(n,[t,e||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(t){this.setRange(this.computeRange(t))},setRange:function(t){G.extend(this,t),this.updateTitle()},computeRange:function(t){var e,n=k(this.intervalDuration),i=t.clone().startOf(n),s=i.clone().add(this.intervalDuration);return/year|month|week|day/.test(n)?(i.stripTime(),s.stripTime()):(i.hasTime()||(i=this.calendar.time(0)),s.hasTime()||(s=this.calendar.time(0))),e=i.clone(),e=this.skipHiddenDays(e),t=s.clone(),{intervalUnit:n,intervalStart:i,intervalEnd:s,start:e,end:t=this.skipHiddenDays(t,-1,!0)}},computePrevDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(t,e){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(t)&&(t=this.skipHiddenDays(t,e)).startOf("day"),t},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):1<this.intervalDuration.as("days")?"ll":"LL"},formatRange:function(t,e,n){var i=t.end;return i.hasTime()||(i=i.clone().subtract(1)),K(t.start,i,e,n,this.opt("isRTL"))},getAllDayHtml:function(){return this.opt("allDayHtml")||R(this.opt("allDayText"))},buildGotoAnchorHtml:function(t,e,n){var i,s,r,o;return G.isPlainObject(t)?(s=t.date,r=t.type,i=t.forceOff):s=t,s={date:(s=mt.moment(s)).format("YYYY-MM-DD"),type:r||"day"},"string"==typeof e&&(n=e,e=null),e=e?" "+(r=e,o=[],G.each(r,function(t,e){null!=e&&o.push(t+'="'+R(e)+'"')}),o.join(" ")):"",n=n||"",!i&&this.opt("navLinks")?"<a"+e+' data-goto="'+R(JSON.stringify(s))+'">'+n+"</a>":"<span"+e+">"+n+"</span>"},setElement:function(t){this.el=t,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(t,e){var n=this,i=null;return null!=e&&this.displaying&&(i=this.queryScroll()),this.calendar.freezeContentHeight(),Z(this.clear(),function(){return n.displaying=Z(n.displayView(t),function(){null!=e?n.setScroll(e):n.forceScroll(n.computeInitialScroll(i)),n.calendar.unfreezeContentHeight(),n.triggerRender()})})},clear:function(){var t=this,e=this.displaying;return e?Z(e,function(){return t.displaying=null,t.clearEvents(),t.clearView()}):G.when()},displayView:function(t){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),t&&this.setDate(t),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator()},clearView:function(){this.unselect(),this.stopNowIndicator(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo(G(document),"mousedown",this.handleDocumentMousedown),this.listenTo(G(document),"touchstart",this.processUnselect)},unbindGlobalHandlers:function(){this.stopListeningTo(G(document))},initThemingProps:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header",this.widgetContentClass=t+"-widget-content",this.highlightStateClass=t+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var t,e,n,i=this;!this.opt("nowIndicator")||(t=this.getNowIndicatorUnit())&&(e=F(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,n=this.initialNowDate.clone().startOf(t).add(1,t)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){i.nowIndicatorTimeoutID=null,e(),n=+P.duration(1,t),n=Math.max(100,n),i.nowIndicatorIntervalID=setInterval(e,n)},n))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(t){},unrenderNowIndicator:function(){},updateSize:function(t){var e;t&&(e=this.queryScroll()),this.updateHeight(t),this.updateWidth(t),this.updateNowIndicator(),t&&this.setScroll(e)},updateWidth:function(t){},updateHeight:function(t){var e=this.calendar;this.setHeight(e.getSuggestedViewHeight(),e.isHeightAuto())},setHeight:function(t,e){},computeInitialScroll:function(t){return 0},queryScroll:function(){},setScroll:function(t){},forceScroll:function(t){var e=this;this.setScroll(t),setTimeout(function(){e.setScroll(t)},0)},displayEvents:function(t){var e=this.queryScroll();this.clearEvents(),this.renderEvents(t),this.isEventsRendered=!0,this.setScroll(e),this.triggerEventRender()},clearEvents:function(){var t;this.isEventsRendered&&(t=this.queryScroll(),this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.setScroll(t),this.isEventsRendered=!1)},renderEvents:function(t){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)})},resolveEventEl:function(t,e){t=this.trigger("eventRender",t,t,e);return!1===t?e=null:t&&!0!==t&&(e=G(t)),e},showEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","hidden")},t)},renderedEventSegEach:function(t,e){for(var n=this.getEventSegs(),i=0;i<n.length;i++)e&&n[i].event._id!==e._id||n[i].el&&t.call(this,n[i])},getEventSegs:function(){return[]},isEventDraggable:function(t){return this.isEventStartEditable(t)},isEventStartEditable:function(t){return V(t.startEditable,(t.source||{}).startEditable,this.opt("eventStartEditable"),this.isEventGenerallyEditable(t))},isEventGenerallyEditable:function(t){return V(t.editable,(t.source||{}).editable,this.opt("editable"))},reportEventDrop:function(t,e,n,i,s){var r=this.calendar,o=r.mutateEvent(t,e,n);this.triggerEventDrop(t,o.dateDelta,function(){o.undo(),r.reportEventChange()},i,s),r.reportEventChange()},triggerEventDrop:function(t,e,n,i,s){this.trigger("eventDrop",i[0],t,e,n,s,{})},reportExternalDrop:function(t,e,n,i,s){var r,o=t.eventProps;o&&(r=G.extend({},o,e),r=this.calendar.renderEvent(r,t.stick)[0]),this.triggerExternalDrop(r,e,n,i,s)},triggerExternalDrop:function(t,e,n,i,s){this.trigger("drop",n[0],e.start,i,s),t&&this.trigger("eventReceive",null,t)},renderDrag:function(t,e){},unrenderDrag:function(){},isEventResizableFromStart:function(t){return this.opt("eventResizableFromStart")&&this.isEventResizable(t)},isEventResizableFromEnd:function(t){return this.isEventResizable(t)},isEventResizable:function(t){var e=t.source||{};return V(t.durationEditable,e.durationEditable,this.opt("eventDurationEditable"),t.editable,e.editable,this.opt("editable"))},reportEventResize:function(t,e,n,i,s){var r=this.calendar,o=r.mutateEvent(t,e,n);this.triggerEventResize(t,o.durationDelta,function(){o.undo(),r.reportEventChange()},i,s),r.reportEventChange()},triggerEventResize:function(t,e,n,i,s){this.trigger("eventResize",i[0],t,e,n,s,{})},select:function(t,e){this.unselect(e),this.renderSelection(t),this.reportSelection(t,e)},renderSelection:function(t){},reportSelection:function(t,e){this.isSelected=!0,this.triggerSelect(t,e)},triggerSelect:function(t,e){this.trigger("select",null,this.calendar.applyTimezone(t.start),this.calendar.applyTimezone(t.end),e)},unselect:function(t){t&&(t.target.classList.contains("ste_mode")||0<jQuery(t.target).closest(".ste_mode").length||t.target.classList.contains("panel")||0<jQuery(t.target).closest(".panel").length)||this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,t))},unrenderSelection:function(){},selectEvent:function(t){this.selectedEvent&&this.selectedEvent===t||(this.unselectEvent(),this.renderedEventSegEach(function(t){t.el.addClass("fc-selected")},t),this.selectedEvent=t)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(t){t.el.removeClass("fc-selected")},this.selectedEvent),this.selectedEvent=null)},isEventSelected:function(t){return this.selectedEvent&&this.selectedEvent._id===t._id},handleDocumentMousedown:function(t){d(t)&&this.processUnselect(t)},processUnselect:function(t){this.processRangeUnselect(t),this.processEventUnselect(t)},processRangeUnselect:function(t){var e;this.isSelected&&this.opt("unselectAuto")&&((e=this.opt("unselectCancel"))&&G(t.target).closest(e).length||this.unselect(t))},processEventUnselect:function(t){this.selectedEvent&&(G(t.target).closest(".fc-selected").length||this.unselectEvent())},triggerDayClick:function(t,e,n){this.trigger("dayClick",e,this.calendar.applyTimezone(t.start),n)},initHiddenDays:function(){var t,e=this.opt("hiddenDays")||[],n=[],i=0;for(!1===this.opt("weekends")&&e.push(0,6),t=0;t<7;t++)(n[t]=-1!==G.inArray(t,e))||i++;if(!i)throw"invalid hiddenDays";this.isHiddenDayHash=n},isHiddenDay:function(t){return P.isMoment(t)&&(t=t.day()),this.isHiddenDayHash[t]},skipHiddenDays:function(t,e,n){var i=t.clone();for(e=e||1;this.isHiddenDayHash[(i.day()+(n?e:0)+7)%7];)i.add(e,"days");return i},computeDayRange:function(t){var e=t.start.clone().stripTime(),n=t.end,i=null;return n&&(i=n.clone().stripTime(),(t=+n.time())&&t>=this.nextDayThreshold&&i.add(1,"days")),(!n||i<=e)&&(i=e.clone().add(1,"days")),{start:e,end:i}},isMultiDayEvent:function(t){t=this.computeDayRange(t);return 1<t.end.diff(t.start,"days")}}),Bt=mt.Scroller=et.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(t){this.overflowX=(t=t||{}).overflowX||t.overflow||"auto",this.overflowY=t.overflowY||t.overflow||"auto"},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=G('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto"),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(t){var e=this.overflowX,n=this.overflowY;t=t||this.getScrollbarWidths(),"auto"===e&&(e=t.top||t.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===n&&(n=t.left||t.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":e,"overflow-y":n})},setHeight:function(t){this.scrollEl.height(t)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(t){this.scrollEl.scrollTop(t)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return o(this.scrollEl)}}),At=mt.Calendar=et.extend({dirDefaults:null,localeDefaults:null,overrides:null,dynamicOverrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:function(n,t){function a(t){t._locale=D}function c(t){var e="";return e+='<a href="javascript:;" class="clear" onclick="Strack.calendar_click_filter(event,this);" data-type="'+t+'" data-value="all">'+StrackLang.Clear_Selected+"</a>"}function h(t,e){var n="";return n+='<a href="javascript:;" class="item" onclick="Strack.calendar_click_filter(event,this);" data-type="'+t+'" data-value="'+e.id+'"><i class="icon-left icon-unchecked"></i>'+e.name+"</a>"}function f(t,e,n,i){var s="",r=[];return i&&r.push("display: none"),s+='<div id="'+("fc_filter_wrap_"+t)+'" class="ui multiple dropdown fc-filter-d" style="'+r.join(";")+'">  <input type="hidden" name="filters">  <span class="text">'+e+'</span><i class="dropdown icon"></i>  <div class="menu">    <div class="ui icon search input">      <i class="search icon"></i>      <input type="text" placeholder="Search...">    </div>    <div class="divider"></div>    <div class="header">'+c(t)+'    </div>    <div class="scrolling menu">'+n+"    </div>  </div></div>"}function i(){E.render(),E.el&&n.prepend(E.el)}function s(){return n.is(":visible")}function r(t,e){Y++,T&&t&&T.type!==t&&(S(),o()),!T&&t&&((T=b.view=L[t]||(L[t]=b.instantiateView(t))).setElement(G("<div class='fc-view fc-"+t+"-view' />").appendTo(k)),E.activateButton(t)),T&&(F=T.massageCurrentDate(F),T.displaying&&F>=T.intervalStart&&F<T.intervalEnd||s()&&(T.display(F,e),w(),E.updateTitle(T.title),(e=b.getNow())>=T.intervalStart&&e<T.intervalEnd?E.disableButton("today"):E.enableButton("today"),(!b.options.lazyFetching||x(T.start,T.end)?v:p)())),w(),Y--}function o(){E.deactivateButton(T.type),T.removeElement(),T=b.view=null}function l(t){if(s())return t&&d(),Y++,T.updateSize(!0),Y--,!0}function e(){s()&&d()}function d(){var t=Strack.panel_height("#"+b.options.domParam.dom,b.options.domParam.min_h),e=b.options.height;C="number"==typeof t?t:"function"==typeof t?t():"number"==typeof e?e-u():"function"==typeof e?e()-u():"parent"===e?n.parent().height()-u():Math.round(k.width()/Math.max(b.options.aspectRatio,.5))}function u(){return E.el?E.el.outerHeight(!0):0}function g(t){!Y&&t.target===window&&T.start&&l(!0)&&T.trigger("windowResize",I)}function m(t){v()}function p(){s()&&(S(),T.displayEvents(O),w())}function v(){M(T.start,T.end)}function y(t,e){e=b.getViewSpec(e=e||"day")||b.getUnitViewSpec(e);F=t.clone(),r(e?e.type:null)}function S(){k.css({width:"100%",height:k.height(),overflow:"hidden"})}function w(){k.css({width:"",height:"",overflow:""})}function _(t){var e,n=0;for(e in t)b.dynamicOverrides[e]=t[e];for(e in b.viewSpecCache={},b.populateOptionsHash(),t)b.triggerOptionHandlers(e),n++;if(1===n){if("height"===e||"contentHeight"===e||"aspectRatio"===e)return l(!0),0;if("defaultDate"===e)return;if("businessHours"===e)return T&&(T.unrenderBusinessHours(),T.renderBusinessHours()),0;if("timezone"===e)return b.rezoneArrayEventSources(),v(),0}i(),L={},function(){Y++,S();var t=T.type,e=T.queryScroll();o(),r(t,e),w(),Y--}()}var D,b=this;b.render=function(){k?s()&&(e(),r()):(n.addClass("fc"),n.on("click.fc","a[data-goto]",function(t){var e=G(this).data("goto"),n=b.moment(e.date),i=e.type,e=T.opt("navLink"+j(i)+"Click");"function"==typeof e?e(n,t):y(n,i="string"==typeof e?e:i)}),b.bindOption("theme",function(t){n.toggleClass("ui-widget",t),n.toggleClass("fc-unthemed",!t)}),b.bindOptions(["isRTL","locale"],function(t){n.toggleClass("fc-ltr",!t),n.toggleClass("fc-rtl",t)}),k=G("<div class='fc-view-container'/>").prependTo(n),E=b.header=new ft(b),i(),r(b.options.defaultView),b.options.handleWindowResize&&(H=U(g,b.options.windowResizeDelay),G(window).resize(H)),jQuery.ajax({type:"POST",url:StrackPHP.getCalendarFilterConfig,dataType:"json",beforeSend:function(){jQuery("#fc_filter_wrap").append(Strack.loading_dom("white","","c_filter"))},success:function(t){jQuery("#st-load_c_filter").remove();var e="",n="";t.department_members.forEach(function(t){n+=h("department_members",t)});var i=!1;0===t.department_members.length&&(i=!0),e+=f("department_members","团队成员",n,i);var s="";t.project_list.forEach(function(t){s+=h("project",t)}),e+=f("project",StrackLang.Project_Name,s);var r,o,a,l="";t.status_list.forEach(function(t){l+=h("status",t)}),e+=f("status",StrackLang.Status,l),e+=(o="",i=[{id:"my_receive",name:StrackLang.Tasks_I_Accept},{id:"my_sent",name:StrackLang.Tasks_I_Assignment},{id:"my_create",name:StrackLang.Tasks_I_Create}],r=c("task_type"),i.forEach(function(t){r+=h("task_type",t)}),o+='<div class="ui dropdown fc-filter-d">'+StrackLang.Type+' <i class="dropdown icon"></i><div class="menu">'+r+"</div></div>"),e+=(i="",o=[{id:"today",name:StrackLang.Today},{id:"yesterday",name:StrackLang.Yesterday},{id:"tomorrow",name:StrackLang.Tomorrow}],a=c("end_time"),o.forEach(function(t){a+=h("end_time",t)}),i+='<div class="ui dropdown fc-filter-d">'+StrackLang.Cutoff_Time+' <i class="dropdown icon"></i><div class="menu">'+a+'<div class="fc-endtime-bw"><div class="from aign-left"><input id="fc_endtime_from" /></div><div class="symbol aign-left"> - </div><div class="to aign-left"><input id="fc_endtime_to" /></div></div></div></div>');var d="",u="";t.user_list.forEach(function(t){d+=h("user_receive",t),u+=h("user_sent",t)}),e+=f("user_receive",StrackLang.Executor,d,!0),e+=f("user_sent",StrackLang.Distributive_Person,u,!0),jQuery("#fc_filter_wrap").append(e),Strack.init_dropdown(".fc-toolbar .ui.menu , .ui.dropdown"),jQuery("#fc_endtime_from").datebox({width:100,height:25,end_limit:"fc_endtime_to",onSelect:function(t){Strack.handle_calendar_check_icon(this,"date_all","end_time");var e=jQuery("#fc_endtime_to").datebox("getValue");e&&Strack.handle_calendar_filter(this,"end_time",{type:"between",value:{start:Strack.date_format(t,"yyyy-MM-dd"),end:e}},!0)}}),jQuery("#fc_endtime_to").datebox({width:100,height:25,start_limit:"fc_endtime_from",onSelect:function(t){Strack.handle_calendar_check_icon(this,"date_all","end_time");var e=jQuery("#fc_endtime_from").datebox("getValue");e&&Strack.handle_calendar_filter(this,"end_time",{type:"between",value:{start:e,end:Strack.date_format(t,"yyyy-MM-dd")}},!0)}})}}))},b.destroy=function(){T&&T.removeElement(),E.removeElement(),k.remove(),n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),n.off(".fc"),H&&G(window).unbind("resize",H)},b.refetchEvents=m,b.refetchEventSources=function(t){R(b.getEventSourcesByMatchArray(t))},b.reportEvents=function(t){O=t,p()},b.reportEventChange=function(){p()},b.rerenderEvents=p,b.changeView=r,b.select=function(t,e){T.select(b.buildSelectSpan.apply(b,arguments))},b.unselect=function(){T&&T.unselect()},b.prev=function(){F=T.computePrevDate(F),r()},b.next=function(){F=T.computeNextDate(F),r()},b.prevYear=function(){F.add(-1,"years"),r()},b.nextYear=function(){F.add(1,"years"),r()},b.today=function(){F=b.getNow(),r()},b.gotoDate=function(t){F=b.moment(t).stripZone(),r()},b.incrementDate=function(t){F.add(P.duration(t)),r()},b.zoomTo=y,b.getDate=function(){return b.applyTimezone(F)},b.getCalendar=function(){return b},b.getView=function(){return T},b.option=function(t,e){var n;if("string"==typeof t){if(void 0===e)return b.options[t];(n={})[t]=e,_(n)}else"object"==typeof t&&_(t)},b.trigger=function(t,e){var n=Array.prototype.slice.call(arguments,2);if(this.triggerWith(t,e=e||I,n),b.options[t])return b.options[t].apply(e,n)},b.dynamicOverrides={},b.viewSpecCache={},b.optionHandlers={},b.overrides=G.extend({},t),b.populateOptionsHash(),b.bindOptions(["locale","monthNames","monthNamesShort","dayNames","dayNamesShort","firstDay","weekNumberCalculation"],function(t,e,n,i,s,r,o){"iso"===o&&(o="ISO"),D=A(ht(t)),e&&(D._months=e),n&&(D._monthsShort=n),i&&(D._weekdays=i),s&&(D._weekdaysShort=s),null!=(r=null==r&&"ISO"===o?1:r)&&((s=A(D._week)).dow=r,D._week=s),"ISO"!==o&&"local"!==o&&"function"!=typeof o||(D._fullCalendar_weekCalc=o),F&&a(F)}),b.defaultAllDayEventDuration=P.duration(b.options.defaultAllDayEventDuration),b.defaultTimedEventDuration=P.duration(b.options.defaultTimedEventDuration),b.moment=function(){var t;return"local"===b.options.timezone?(t=mt.moment.apply(null,arguments)).hasTime()&&t.local():t=("UTC"===b.options.timezone?mt.moment.utc:mt.moment.parseZone).apply(null,arguments),a(t),t},b.localizeMoment=a,b.getIsAmbigTimezone=function(){return"local"!==b.options.timezone&&"UTC"!==b.options.timezone},b.applyTimezone=function(t){if(!t.hasTime())return t.clone();var e=b.moment(t.toArray()),n=t.time()-e.time();return n&&(n=e.clone().add(n),t.time()-n.time()==0&&(e=n)),e},b.getNow=function(){var t=b.options.now;return"function"==typeof t&&(t=t()),b.moment(t).stripZone()},b.getEventEnd=function(t){return t.end?t.end.clone():b.getDefaultEventEnd(t.allDay,t.start)},b.getDefaultEventEnd=function(t,e){e=e.clone();return t?e.stripTime().add(b.defaultAllDayEventDuration):e.add(b.defaultTimedEventDuration),b.getIsAmbigTimezone()&&e.stripZone(),e},b.humanizeDuration=function(t){return t.locale(b.options.locale).humanize()},function(){function n(t,e){var n,i;for("reset"===e?k=[]:"add"!==e&&(k=d(k,t)),n=0;n<t.length;n++)"pending"!==(i=t[n])._status&&E++,i._fetchId=(i._fetchId||0)+1,i._status="pending";for(n=0;n<t.length;n++)(function(s,r){!function t(e,n){var i,s,r=mt.sourceFetchers;for(i=0;i<r.length;i++){if(!0===(s=r[i].call(y,e,S.clone(),w.clone(),y.options.timezone,n)))return;if("object"==typeof s)return void t(s,n)}var o=e.events;{var a,l,d,u,c,h;o?G.isFunction(o)?(y.pushLoading(),o.call(y,S.clone(),w.clone(),y.options.timezone,function(t){n(t),y.popLoading()})):G.isArray(o)?n(o):n():e.url?(a=e.success,l=e.error,d=e.complete,h=G.isFunction(e.data)?e.data():e.data,u=G.extend({},h||{}),c=V(e.startParam,y.options.startParam),o=V(e.endParam,y.options.endParam),h=V(e.timezoneParam,y.options.timezoneParam),c&&(u[c]=S.format()),o&&(u[o]=w.format()),y.options.timezone&&"local"!=y.options.timezone&&(u[h]=y.options.timezone),y.pushLoading(),G.ajax(G.extend({},Zt,e,{data:u,success:function(t){t=t||[];var e=W(a,this,arguments);G.isArray(e)&&(t=e),n(t)},error:function(){W(l,this,arguments),n()},complete:function(){W(d,this,arguments),y.popLoading()}}))):n()}}(s,function(t){var e,n,i=G.isArray(s.events);if(r===s._fetchId&&"rejected"!==s._status){if(s._status="resolved",t)for(e=0;e<t.length;e++)n=t[e],(n=i?n:u(n,s))&&k.push.apply(k,f(n));o()}})})(i=t[n],i._fetchId)}function o(){--E||_(k)}function i(t){var e,n,i=mt.sourceNormalizers;if(G.isFunction(t)||G.isArray(t)?e={events:t}:"string"==typeof t?e={url:t}:"object"==typeof t&&(e=G.extend({},t)),e){for(e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[],G.isArray(e.events)&&(e.origArray=e.events,e.events=G.map(e.events,function(t){return u(t,e)})),n=0;n<i.length;n++)i[n].call(y,e);return e}}function e(e,t){for(var n,i,s=0;s<e.length;s++)n=e[s],i=void 0,i="pending"===n._status,n._status="rejected",i&&o();k=t?(b=[],[]):(b=G.grep(b,function(t){for(s=0;s<e.length;s++)if(t===e[s])return!1;return!0}),d(k,e)),_(k)}function s(e){return G.grep(b,function(t){return t.id&&t.id===e})[0]}function r(t){t?G.isArray(t)||(t=[t]):t=[];for(var e=[],n=0;n<t.length;n++)e.push.apply(e,a(t[n]));return e}function a(n){for(var t,e=0;e<b.length;e++)if((t=b[e])===n)return[t];return(t=s(n))?[t]:G.grep(b,function(t){return e=t,(t=n)&&e&&l(t)==l(e);var e})}function l(t){return("object"==typeof t?t.origArray||t.googleCalendarId||t.url||t.events:null)||t}function d(t,n){return G.grep(t,function(t){for(var e=0;e<n.length;e++)if(t.source===n[e])return!1;return!0})}function m(t){return!/^_|^(id|allDay|start|end)$/.test(t)}function p(e){return G.isFunction(e)?G.grep(k,e):null!=e?(e+="",G.grep(k,function(t){return t._id==e})):k}function u(t,e){var n,i,s={};if(y.options.eventDataTransform&&(t=y.options.eventDataTransform(t)),e&&e.eventDataTransform&&(t=e.eventDataTransform(t)),G.extend(s,t),e&&(s.source=e),s._id=t._id||(void 0===t.id?"_fc"+qt++:t.id+""),t.className?"string"==typeof t.className?s.className=t.className.split(/\s+/):s.className=t.className:s.className=[],n=t.start||t.date,i=t.end,B(n)&&(n=P.duration(n)),B(i)&&(i=P.duration(i)),t.dow||P.isDuration(n)||P.isDuration(i))s.start=n?P.duration(n):null,s.end=i?P.duration(i):null,s._recurring=!0;else{if(n&&!(n=y.moment(n)).isValid())return!1;i&&((i=y.moment(i)).isValid()||(i=null)),h(n,i,t=void 0===(t=t.allDay)?V(e?e.allDayDefault:void 0,y.options.allDayDefault):t,s)}return y.normalizeEvent(s),s}function h(t,e,n,i){i.start=t,i.end=e,i.allDay=n,v(i),gt(i)}function v(t){c(t),t.end&&!t.end.isAfter(t.start)&&(t.end=null),t.end||(y.options.forceEventDuration?t.end=y.getDefaultEventEnd(t.allDay,t.start):t.end=null)}function c(t){null==t.allDay&&(t.allDay=!(t.start.hasTime()||t.end&&t.end.hasTime())),t.allDay?(t.start.stripTime(),t.end&&t.end.stripTime()):(t.start.hasTime()||(t.start=y.applyTimezone(t.start.time(0))),t.end&&!t.end.hasTime()&&(t.end=y.applyTimezone(t.end.time(0))))}function f(t,e,n){var i,s,r,o,a,l,d,u,c=[];if(e=e||S,n=n||w,t)if(t._recurring){if(s=t.dow)for(i={},r=0;r<s.length;r++)i[s[r]]=!0;for(o=e.clone().stripTime();o.isBefore(n);)i&&!i[o.day()]||(a=t.start,u=t.end,l=o.clone(),d=null,h(l=a?l.time(a):l,d=u?o.clone().time(u):d,!a&&!u,u=G.extend({},t)),c.push(u)),o.add(1,"days")}else c.push(t);return c}function g(t,i,s){function e(t,e){return s?N(t,e,s):i.allDay?(n=e,P.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days")})):z(t,e);var n}var n,r,o,a,l,d,u,c,h,f,g={};return(i=i||{}).start||(i.start=t.start.clone()),void 0===i.end&&(i.end=t.end?t.end.clone():null),null==i.allDay&&(i.allDay=t.allDay),v(i),v(o={start:t._start.clone(),end:t._end?t._end.clone():y.getDefaultEventEnd(t._allDay,t._start),allDay:i.allDay}),n=null!==t._end&&null===i.end,r=e(i.start,o.start),o=i.end?e(i.end,o.end).subtract(r):null,G.each(i,function(t,e){m(t)&&void 0!==e&&(g[t]=e)}),t=p(t._id),a=n,l=i.allDay,d=r,u=o,c=g,h=y.getIsAmbigTimezone(),f=[],d&&!d.valueOf()&&(d=null),u&&!u.valueOf()&&(u=null),G.each(t,function(t,e){var n,i={start:e.start.clone(),end:e.end?e.end.clone():null,allDay:e.allDay};G.each(c,function(t){i[t]=e[t]}),v(n={start:e._start,end:e._end,allDay:l}),a?n.end=null:u&&!n.end&&(n.end=y.getDefaultEventEnd(n.allDay,n.start)),d&&(n.start.add(d),n.end&&n.end.add(d)),u&&n.end.add(u),h&&!n.allDay&&(d||u)&&(n.start.stripZone(),n.end&&n.end.stripZone()),G.extend(e,c,n),gt(e),f.push(function(){G.extend(e,i),gt(e)})}),{dateDelta:r,durationDelta:o,undo:function(){for(var t=0;t<f.length;t++)f[t]()}}}var y=this;y.isFetchNeeded=function(t,e){return!S||t<S||w<e},y.fetchEvents=function(t,e){S=t,w=e,n(b,"reset")},y.fetchEventSources=n,y.getEventSources=function(){return b.slice(1)},y.getEventSourceById=s,y.getEventSourcesByMatchArray=r,y.getEventSourcesByMatch=a,y.addEventSource=function(t){(t=i(t))&&(b.push(t),n([t],"add"))},y.removeEventSource=function(t){e(a(t))},y.removeEventSources=function(t){null==t?e(b,!0):e(r(t))},y.updateEvent=function(t){var n;t.start=y.moment(t.start),t.end?t.end=y.moment(t.end):t.end=null,g(t,(n={},G.each(t,function(t,e){m(t)&&void 0!==e&&/undefined|null|boolean|number|string/.test(G.type(e))&&(n[t]=e)}),n)),_(k)},y.renderEvent=function(t,e){var n,i,s;if(t=u(t)){for(n=f(t),i=0;i<n.length;i++)(s=n[i]).source||(e&&(D.events.push(s),s.source=D),k.push(s));return _(k),n}return[]},y.removeEvents=function(t){var e,n;for(null==t?t=function(){return!0}:G.isFunction(t)||(e=t+"",t=function(t){return t._id==e}),k=G.grep(k,t,!0),n=0;n<b.length;n++)G.isArray(b[n].events)&&(b[n].events=G.grep(b[n].events,t,!0));_(k)},y.clientEvents=p,y.mutateEvent=g,y.normalizeEventDates=v,y.normalizeEventTimes=c;var S,w,_=y.reportEvents,D={events:[]},b=[D],E=0,k=[];G.each((y.options.events?[y.options.events]:[]).concat(y.options.eventSources||[]),function(t,e){e=i(e);e&&b.push(e)}),y.rezoneArrayEventSources=function(){for(var t,e,n,i=0;i<b.length;i++)if(t=b[i].events,G.isArray(t))for(e=0;e<t.length;e++)(n=t[e]).start=y.moment(n.start),n.end&&(n.end=y.moment(n.end)),gt(n)},y.buildEventFromInput=u,y.expandEvent=f,y.getEventCache=function(){return k}}.call(b);var E,k,T,C,H,x=b.isFetchNeeded,M=b.fetchEvents,R=b.fetchEventSources,I=n[0],L={},Y=0,O=[],F=null!=b.options.defaultDate?b.moment(b.options.defaultDate).stripZone():b.getNow();b.getSuggestedViewHeight=function(){return void 0===C&&e(),C},b.isHeightAuto=function(){return"auto"===b.options.contentHeight||"auto"===b.options.height},b.freezeContentHeight=S,b.unfreezeContentHeight=w,b.initialize()},initialize:function(){},populateOptionsHash:function(){var t=V(this.dynamicOverrides.locale,this.overrides.locale),e=Wt[t];e||(t=At.defaults.locale,e=Wt[t]||{}),t=V(this.dynamicOverrides.isRTL,this.overrides.isRTL,e.isRTL,At.defaults.isRTL)?At.rtlDefaults:{},this.dirDefaults=t,this.localeDefaults=e,this.options=u([At.defaults,t,e,this.overrides,this.dynamicOverrides]),ct(this.options)},getViewSpec:function(t){var e=this.viewSpecCache;return e[t]||(e[t]=this.buildViewSpec(t))},getUnitViewSpec:function(t){var e,n,i;if(-1!=G.inArray(t,wt))for(e=this.header.getViewsWithButtons(),G.each(mt.views,function(t){e.push(t)}),n=0;n<e.length;n++)if((i=this.getViewSpec(e[n]))&&i.singleUnit==t)return i},buildViewSpec:function(t){for(var e,n,i,s,r=this.overrides.views||{},o=[],a=[],l=[],d=t;d;)e=pt[d],n=r[d],d=null,(e="function"==typeof e?{class:e}:e)&&(o.unshift(e),a.unshift(e.defaults||{}),i=i||e.duration,d=d||e.type),n&&(l.unshift(n),i=i||n.duration,d=d||n.type);return(e=H(o)).type=t,!!e.class&&(i&&((i=P.duration(i)).valueOf()&&(s=k(e.duration=i),1===i.as(s)&&(e.singleUnit=s,l.unshift(r[s]||{})))),e.defaults=u(a),e.overrides=u(l),this.buildViewSpecOptions(e),this.buildViewSpecButtonText(e,t),e)},buildViewSpecOptions:function(t){t.options=u([At.defaults,t.defaults,this.dirDefaults,this.localeDefaults,this.overrides,t.overrides,this.dynamicOverrides]),ct(t.options)},buildViewSpecButtonText:function(e,n){function t(t){t=t.buttonText||{};return t[n]||(e.buttonTextKey?t[e.buttonTextKey]:null)||(e.singleUnit?t[e.singleUnit]:null)}e.buttonTextOverride=t(this.dynamicOverrides)||t(this.overrides)||e.overrides.buttonText,e.buttonTextDefault=t(this.localeDefaults)||t(this.dirDefaults)||e.defaults.buttonText||t(At.defaults)||(e.duration?this.humanizeDuration(e.duration):null)||n},instantiateView:function(t){var e=this.getViewSpec(t);return new e.class(this,t,e.options,e.duration)},isValidViewType:function(t){return Boolean(this.getViewSpec(t))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectSpan:function(t,e){t=this.moment(t).stripZone(),e=e?this.moment(e).stripZone():t.hasTime()?t.clone().add(this.defaultTimedEventDuration):t.clone().add(this.defaultAllDayEventDuration);return{start:t,end:e}}});At.mixin(It),At.mixin({optionHandlers:null,bindOption:function(t,e){this.bindOptions([t],e)},bindOptions:function(t,e){for(var n={func:e,names:t},i=0;i<t.length;i++)this.registerOptionHandlerObj(t[i],n);this.triggerOptionHandlerObj(n)},registerOptionHandlerObj:function(t,e){(this.optionHandlers[t]||(this.optionHandlers[t]=[])).push(e)},triggerOptionHandlers:function(t){for(var e=this.optionHandlers[t]||[],n=0;n<e.length;n++)this.triggerOptionHandlerObj(e[n])},triggerOptionHandlerObj:function(t){for(var e=t.names,n=[],i=0;i<e.length;i++)n.push(this.options[e[i]]);t.func.apply(this,n)}}),At.defaults={titleRangeSeparator:" – ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:StrackLang.Year,today:StrackLang.Today,month:StrackLang.Month,week:StrackLang.Week,day:StrackLang.Days},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},allDayText:StrackLang.Tasks_To_Be_Planned,theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,param:{},eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3},At.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},At.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var Wt=mt.locales={};mt.datepickerLocale=function(t,e,n){var i=Wt[t]||(Wt[t]={});i.isRTL=n.isRTL,i.weekNumberTitle=n.weekHeader,G.each(Vt,function(t,e){i[t]=e(n)}),G.datepicker&&(G.datepicker.regional[e]=G.datepicker.regional[t]=n,G.datepicker.regional.en=G.datepicker.regional[""],G.datepicker.setDefaults(n))},mt.locale=function(t,e){var n,i=Wt[t]||(Wt[t]={});e&&(i=Wt[t]=u([i,e])),n=ht(t),G.each(jt,function(t,e){null==i[t]&&(i[t]=e(n,i))}),At.defaults.locale=t};var Vt={buttonText:function(t){return{prev:I(t.prevText),next:I(t.nextText),today:I(t.currentText)}},monthYearFormat:function(t){return t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"}},jt={dayOfMonthFormat:function(t,e){t=(t=t.longDateFormat("l")).replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");return e.isRTL?t+=" ddd":t="ddd "+t,t},mediumTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(t){return t.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}},Ut={smallDayDateFormat:function(t){return t.isRTL?"D dd":"dd D"},weekFormat:function(t){return t.isRTL?"w[ "+t.weekNumberTitle+"]":"["+t.weekNumberTitle+" ]w"},smallWeekFormat:function(t){return t.isRTL?"w["+t.weekNumberTitle+"]":"["+t.weekNumberTitle+"]w"}};mt.locale("en",At.englishDefaults),mt.sourceNormalizers=[];var Zt={dataType:"json",cache:!(mt.sourceFetchers=[])},qt=1;At.prototype.normalizeEvent=function(t){},At.prototype.spanContainsSpan=function(t,e){var n=t.start.clone().stripZone(),t=this.getEventEnd(t).stripZone();return e.start>=n&&e.end<=t},At.prototype.getPeerEvents=function(t,e){for(var n,i=this.getEventCache(),s=[],r=0;r<i.length;r++)n=i[r],e&&e._id===n._id||s.push(n);return s},At.prototype.isEventSpanAllowed=function(t,e){var n=e.source||{},i=V(e.constraint,n.constraint,this.options.eventConstraint),n=V(e.overlap,n.overlap,this.options.eventOverlap);return this.isSpanAllowed(t,i,n,e)&&(!this.options.eventAllow||!1!==this.options.eventAllow(t,e))},At.prototype.isExternalSpanAllowed=function(t,e,n){var i;return n&&(i=G.extend({},n,e),i=this.expandEvent(this.buildEventFromInput(i))[0]),i?this.isEventSpanAllowed(t,i):this.isSelectionSpanAllowed(t)},At.prototype.isSelectionSpanAllowed=function(t){return this.isSpanAllowed(t,this.options.selectConstraint,this.options.selectOverlap)&&(!this.options.selectAllow||!1!==this.options.selectAllow(t))},At.prototype.isSpanAllowed=function(t,e,n,i){var s,r,o,a,l,d;if(null!=e&&(s=this.constraintToEvents(e))){for(r=!1,a=0;a<s.length;a++)if(this.spanContainsSpan(s[a],t)){r=!0;break}if(!r)return!1}for(o=this.getPeerEvents(t,i),a=0;a<o.length;a++)if(l=o[a],this.eventIntersectsRange(l,t)){if(!1===n)return!1;if("function"==typeof n&&!n(l,i))return!1;if(i){if(!1===(d=V(l.overlap,(l.source||{}).overlap)))return!1;if("function"==typeof d&&!d(i,l))return!1}}return!0},At.prototype.constraintToEvents=function(t){return"businessHours"===t?this.getCurrentBusinessHourEvents():"object"==typeof t?null!=t.start?this.expandEvent(this.buildEventFromInput(t)):null:this.clientEvents(t)},At.prototype.eventIntersectsRange=function(t,e){var n=t.start.clone().stripZone(),t=this.getEventEnd(t).stripZone();return e.start<t&&e.end>n};var $t={id:"_fcBusinessHours",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};At.prototype.getCurrentBusinessHourEvents=function(t){return this.computeBusinessHourEvents(t,this.options.businessHours)},At.prototype.computeBusinessHourEvents=function(t,e){return!0===e?this.expandBusinessHourEvents(t,[{}]):G.isPlainObject(e)?this.expandBusinessHourEvents(t,[e]):G.isArray(e)?this.expandBusinessHourEvents(t,e,!0):[]},At.prototype.expandBusinessHourEvents=function(t,e,n){for(var i,s=this.getView(),r=[],o=0;o<e.length;o++)i=e[o],n&&!i.dow||(i=G.extend({},$t,i),t&&(i.start=null,i.end=null),r.push.apply(r,this.expandEvent(this.buildEventFromInput(i),s.start,s.end)));return r};var Qt=mt.BasicView=Nt.extend({scroller:null,dayGridClass:Tt,dayGrid:null,dayNumbersVisible:!1,colWeekNumbersVisible:!1,cellWeekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new Bt({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){return new(this.dayGridClass.extend(Xt))(this)},setRange:function(t){Nt.prototype.setRange.call(this,t),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(t)},computeRange:function(t){t=Nt.prototype.computeRange.call(this,t);return/year|month/.test(t.intervalUnit)&&(t.start.startOf("week"),t.start=this.skipHiddenDays(t.start),t.end.weekday()&&(t.end.add(1,"week").startOf("week"),t.end=this.skipHiddenDays(t.end,-1,!0))),t},renderDates:function(){this.dayNumbersVisible=1<this.dayGrid.rowCnt,this.opt("weekNumbers")&&(this.opt("weekNumbersWithinDays")?(this.cellWeekNumbersVisible=!0,this.colWeekNumbersVisible=!1):(this.cellWeekNumbersVisible=!1,this.colWeekNumbersVisible=!0)),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.cellWeekNumbersVisible||this.colWeekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var t=this.scroller.el.addClass("fc-day-grid-container"),e=G('<div class="fc-day-grid" />').appendTo(t);this.el.find(".fc-body > tr > td").append(t),this.dayGrid.setElement(e),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.dayGrid.unrenderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},updateWidth:function(){this.colWeekNumbersVisible&&(this.weekNumberWidth=t(this.el.find(".fc-week-number")))},setHeight:function(t,e){var n,i=this.opt("eventLimit");this.scroller.clear(),r(this.headRowEl),this.dayGrid.removeSegPopover(),i&&"number"==typeof i&&this.dayGrid.limitRows(i),n=this.computeScrollerHeight(t),this.setGridHeight(n,e),i&&"number"!=typeof i&&this.dayGrid.limitRows(i),e||(this.scroller.setHeight(n),((e=this.scroller.getScrollbarWidths()).left||e.right)&&(s(this.headRowEl,e),n=this.computeScrollerHeight(t),this.scroller.setHeight(n)),this.scroller.lockOverflow(e))},computeScrollerHeight:function(t){return t-e(this.el,this.scroller.el)},setGridHeight:function(t,e){e?c(this.dayGrid.rowEls):n(this.dayGrid.rowEls,t,!0)},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(t){this.scroller.setScrollTop(t)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(t,e){return this.dayGrid.queryHit(t,e)},getHitSpan:function(t){return this.dayGrid.getHitSpan(t)},getHitEl:function(t){return this.dayGrid.getHitEl(t)},renderEvents:function(t){this.dayGrid.renderEvents(t),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(t,e){return this.dayGrid.renderDrag(t,e)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(t){this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),Xt={renderHeadIntroHtml:function(){var t=this.view;return t.colWeekNumbersVisible?'<th class="fc-week-number '+t.widgetHeaderClass+'" '+t.weekNumberStyleAttr()+"><span>"+R(t.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(t){var e=this.view,t=this.getCellDate(t,0);return e.colWeekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+">"+e.buildGotoAnchorHtml({date:t,type:"week",forceOff:1===this.colCnt},t.format("w"))+"</td>":""},renderBgIntroHtml:function(){var t=this.view;return t.colWeekNumbersVisible?'<td class="fc-week-number '+t.widgetContentClass+'" '+t.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var t=this.view;return t.colWeekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+"></td>":""}},It=mt.MonthView=Qt.extend({computeRange:function(t){var e=Qt.prototype.computeRange.call(this,t);return this.isFixedWeeks()&&(t=Math.ceil(e.end.diff(e.start,"weeks",!0)),e.end.add(6-t,"weeks")),e},setGridHeight:function(t,e){e&&(t*=this.rowCnt/6),n(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){return this.opt("fixedWeekCount")}});pt.basic={class:Qt},pt.basicDay={type:"basic",duration:{days:1}},pt.basicWeek={type:"basic",duration:{weeks:1}},pt.month={class:It,duration:{months:1},defaults:{fixedWeekCount:!0}};var Tt=mt.AgendaView=Nt.extend({scroller:null,timeGridClass:Et,timeGrid:null,dayGridClass:Tt,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new Bt({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){return new(this.timeGridClass.extend(Kt))(this)},instantiateDayGrid:function(){return new(this.dayGridClass.extend(Jt))(this)},setRange:function(t){Nt.prototype.setRange.call(this,t),this.timeGrid.setRange(t),this.dayGrid&&this.dayGrid.setRange(t)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var t=this.scroller.el.addClass("fc-time-grid-container"),e=G('<div class="fc-time-grid" />').appendTo(t);this.el.find(".fc-body > tr > td").append(t),this.timeGrid.setElement(e),this.timeGrid.renderDates(),this.bottomRuleEl=G('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td></tr></tbody></table>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(t){this.timeGrid.renderNowIndicator(t)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(t){this.timeGrid.updateSize(t),Nt.prototype.updateSize.call(this,t)},updateWidth:function(){this.axisWidth=t(this.el.find(".fc-axis"))},setHeight:function(t,e){var n;this.bottomRuleEl.hide(),this.scroller.clear(),r(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),(n=(n=this.opt("eventLimit"))&&"number"!=typeof n?te:n)&&this.dayGrid.limitRows(n)),e||(n=this.computeScrollerHeight(t),this.scroller.setHeight(n),((e=this.scroller.getScrollbarWidths()).left||e.right)&&(s(this.noScrollRowEls,e),n=this.computeScrollerHeight(t),this.scroller.setHeight(n)),this.scroller.lockOverflow(e),this.timeGrid.getTotalSlatHeight()<n&&this.bottomRuleEl.show())},computeScrollerHeight:function(t){return t-e(this.el,this.scroller.el)},computeInitialScroll:function(){var t=P.duration(this.opt("scrollTime")),t=this.timeGrid.computeTimeTop(t);return(t=Math.ceil(t))&&t++,t},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(t){this.scroller.setScrollTop(t)},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(t,e){var n=this.timeGrid.queryHit(t,e);return n=!n&&this.dayGrid?this.dayGrid.queryHit(t,e):n},getHitSpan:function(t){return t.component.getHitSpan(t)},getHitEl:function(t){return t.component.getHitEl(t)},renderEvents:function(t){for(var e=[],n=[],i=0;i<t.length;i++)(t[i].allDay?e:n).push(t[i]);this.timeGrid.renderEvents(n),this.dayGrid&&this.dayGrid.renderEvents(e),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(t,e){return t.start.hasTime()?this.timeGrid.renderDrag(t,e):this.dayGrid?this.dayGrid.renderDrag(t,e):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(t){t.start.hasTime()||t.end.hasTime()?this.timeGrid.renderSelection(t):this.dayGrid&&this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Kt={renderHeadIntroHtml:function(){var t,e=this.view;return e.opt("weekNumbers")?(t=this.start.format(e.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+">"+e.buildGotoAnchorHtml({date:this.start,type:"week",forceOff:1<this.colCnt},R(t))+"</th>"):'<th class="fc-axis '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.widgetContentClass+'" '+t.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},Jt={renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.widgetContentClass+'" '+t.axisStyleAttr()+"><span>"+t.getAllDayHtml()+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},te=5,ee=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];pt.agenda={class:Tt,defaults:{allDaySlot:!0,slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!1}},pt.agendaDay={type:"agenda",duration:{days:1}},pt.agendaWeek={type:"agenda",duration:{weeks:1}},pt.agendaMonth={type:"agenda",duration:{month:1}};var Tt=Nt.extend({grid:null,scroller:null,initialize:function(){this.grid=new ne(this),this.scroller=new Bt({overflowX:"hidden",overflowY:"auto"})},setRange:function(t){Nt.prototype.setRange.call(this,t),this.grid.setRange(t)},renderSkeleton:function(){this.el.addClass("fc-list-view "+this.widgetContentClass),this.scroller.render(),this.scroller.el.appendTo(this.el),this.grid.setElement(this.scroller.scrollEl)},unrenderSkeleton:function(){this.scroller.destroy()},setHeight:function(t,e){this.scroller.setHeight(this.computeScrollerHeight(t))},computeScrollerHeight:function(t){return t-e(this.el,this.scroller.el)},renderEvents:function(t){this.grid.renderEvents(t)},unrenderEvents:function(){this.grid.unrenderEvents()},isEventResizable:function(t){return!1},isEventDraggable:function(t){return!1}}),ne=zt.extend({segSelector:".fc-list-item",hasDayInteractions:!1,spanToSegs:function(t){for(var e,n=this.view,i=n.start.clone().time(0),s=0,r=[];i<n.end;)if((e=E(t,{start:i,end:i.clone().add(1,"day")}))&&(e.dayIndex=s,r.push(e)),i.add(1,"day"),s++,e&&!e.isEnd&&t.end.hasTime()&&t.end<i.clone().add(this.view.nextDayThreshold)){e.end=t.end.clone(),e.isEnd=!0;break}return r},computeEventTimeFormat:function(){return this.view.opt("mediumTimeFormat")},handleSegClick:function(t,e){var n;zt.prototype.handleSegClick.apply(this,arguments),G(e.target).closest("a[href]").length||(n=t.event.url)&&!e.isDefaultPrevented()&&(window.location.href=n)},renderFgSegs:function(t){return(t=this.renderFgSegEls(t)).length?this.renderSegList(t):this.renderEmptyMessage(),t},renderEmptyMessage:function(){this.el.html('<div class="fc-list-empty-wrap2"><div class="fc-list-empty-wrap1"><div class="fc-list-empty">'+R(this.view.opt("noEventsMessage"))+"</div></div></div>")},renderSegList:function(t){for(var e,n,i=this.groupSegsByDay(t),t=G('<table class="fc-list-table"><tbody/></table>'),s=t.find("tbody"),r=0;r<i.length;r++)if(e=i[r])for(s.append(this.dayHeaderHtml(this.view.start.clone().add(r,"days"))),this.sortEventSegs(e),n=0;n<e.length;n++)s.append(e[n].el);this.el.empty().append(t)},groupSegsByDay:function(t){for(var e,n=[],i=0;i<t.length;i++)(n[(e=t[i]).dayIndex]||(n[e.dayIndex]=[])).push(e);return n},dayHeaderHtml:function(t){var e=this.view,n=e.opt("listDayFormat"),i=e.opt("listDayAltFormat");return'<tr class="fc-list-heading" data-date="'+t.format("YYYY-MM-DD")+'"><td class="'+e.widgetHeaderClass+'" colspan="3">'+(n?e.buildGotoAnchorHtml(t,{class:"fc-list-heading-main"},R(t.format(n))):"")+(i?e.buildGotoAnchorHtml(t,{class:"fc-list-heading-alt"},R(t.format(i))):"")+"</td></tr>"},fgSegHtml:function(t){var e=this.view,n=["fc-list-item"].concat(this.getSegCustomClasses(t)),i=this.getSegBackgroundColor(t),s=t.event,r=s.url,s=s.allDay?e.getAllDayHtml():e.isMultiDayEvent(s)?t.isStart||t.isEnd?R(this.getEventTimeText(t)):e.getAllDayHtml():R(this.getEventTimeText(s));return r&&n.push("fc-has-url"),'<tr class="'+n.join(" ")+'">'+(this.displayEventTime?'<td class="fc-list-item-time '+e.widgetContentClass+'">'+(s||"")+"</td>":"")+'<td class="fc-list-item-marker '+e.widgetContentClass+'"><span class="fc-event-dot"'+(i?' style="background-color:'+i+'"':"")+'></span></td><td class="fc-list-item-title '+e.widgetContentClass+'"><a'+(r?' href="'+R(r)+'"':"")+">"+R(t.event.title||"")+"</a></td></tr>"}});return pt.list={class:Tt,buttonTextKey:"list",defaults:{buttonText:"list",listDayFormat:"LL",No_Events_Need_ShowMessage:StrackLang.No_Events_Need_Show}},pt.listDay={type:"list",duration:{days:1},defaults:{buttonText:"list day",listDayFormat:"dddd"}},pt.listWeek={type:"list",duration:{weeks:1},defaults:{buttonText:StrackLang.ListWeek,listDayFormat:"dddd",listDayAltFormat:"LL"}},pt.listMonth={type:"list",duration:{month:1},defaults:{listDayAltFormat:"dddd"}},pt.listYear={type:"list",duration:{year:1},defaults:{listDayAltFormat:"dddd"}},mt});
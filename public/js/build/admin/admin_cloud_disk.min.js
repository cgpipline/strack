$(function(){obj={cloud_disk_update:function(){var t=Strack.validate_form("cloud_disk_setting");if(200===parseInt(t.status)){var e,i,n={};for(e in t.data)-1!=e.indexOf("endpoint_")&&(i=e.split("-"),n.hasOwnProperty(i[0])||(n[i[0]]={}),n[i[0]][i[1]]=t.data[e]);!1===$.isEmptyObject(n)&&$.ajax({type:"POST",url:CloudDiskPHP.updateCloudDiskConfig,data:JSON.stringify({type:t.data.type,open_cloud_disk:t.data.open_cloud_disk,endpoints:n}),dataType:"json",contentType:"application/json",beforeSend:function(){$.messager.progress({title:StrackLang.Waiting,msg:StrackLang.loading})},success:function(t){$.messager.progress("close"),200===parseInt(t.status)?Strack.top_message({bg:"g",msg:t.message}):layer.msg(t.message,{icon:7,time:1200,anim:6})}})}},add_endpoint:function(t){$("#cloud_disk_list").append(o(a,{base_url:"",check_url:"",login_name:"",password:""}))},delete_cloud_item:function(t){$(t).closest(".cloud-e-item").remove(),obj.cloud_disk_update()}};var a=$("#rules_submit").val();function o(t,e){var i,n="",a=Math.floor(1e4*Math.random()+1);for(i in n+='<div class="cloud-e-item">',"yes"===t&&(n+='<a href="javascript:;" class="e-del-bnt" onclick="obj.delete_cloud_item(this)"><i class="icon-uniE6752"></i></a>'),e)n+=function(t,e,i,n,a,o){var s="";s+="yes"===e?'<input id="endpoint_val_'+i+"_"+t+'" class="form-control form-input" wiget-type="input" wiget-need="yes" wiget-field="endpoint_'+t+"-"+i+'" wiget-name="'+StrackLang[a]+'" autocomplete="off" placeholder="'+StrackLang[o]+'" value="'+n+'">':'<input class="form-control form-input input-disabled" disabled="disabled" placeholder="'+StrackLang[o]+'" value="'+n+'">';return'<div class="e-item-input stcol-lg-2">'+s+"</div>"}(a,t,i,e[i],"Cloud_Disk_"+Strack.string_ucwords(i),"Cloud_Disk_Notice_"+Strack.string_ucwords(i));return n+="</div>"}$.ajax({type:"POST",url:CloudDiskPHP.getCloudDiskConfig,dataType:"json",success:function(t){var e=t.open_cloud_disk||0;for(n in Strack.init_open_switch({dom:"#open_cloud_disk",value:e,onText:StrackLang.Switch_ON,offText:StrackLang.Switch_OFF,width:100}),t)$.inArray(n,["open_cloud_disk","endpoints"])<0&&$("#set_"+n).val(t[n]);var i=[];if(!1===$.isEmptyObject(t.endpoints))for(var n in t.endpoints)i.push(o(a,t.endpoints[n]));$("#cloud_disk_list").append(i.join(""))}})});
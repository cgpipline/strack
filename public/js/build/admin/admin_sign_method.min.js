$(function(){obj={switch_ldap_item:function(t){var a=$(t).attr("data-ldapid"),t=$(t).hasClass("on")?($(t).removeClass("on").addClass("off"),$(t).find("i").removeClass("icon-uniF205").addClass("icon-uniF204"),"off"):($(t).removeClass("off").addClass("on"),$(t).find("i").removeClass("icon-uniF204").addClass("icon-uniF205"),"on");s({type:"ldap_server_list",ldap_id:parseInt(a),status:t})}};var i=Strack.generate_hidden_param();function s(t){$.ajax({type:"POST",url:SignMethodPHP.saveLdapSetting,data:JSON.stringify(t),dataType:"json",contentType:"application/json",beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(t){$.messager.progress("close"),200===parseInt(t.status)?Strack.top_message({bg:"g",msg:t.message}):layer.msg(t.message,{icon:7,time:1200,anim:6})}})}function o(t){$.ajax({type:"POST",url:SignMethodPHP.saveLoginMethodSetting,data:JSON.stringify(t),dataType:"json",contentType:"application/json",beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(t){$.messager.progress("close"),200===parseInt(t.status)?Strack.top_message({bg:"g",msg:t.message}):layer.msg(t.message,{icon:7,time:1200,anim:6})}})}$("#ldap_server_list").datagrid({url:SignMethodPHP.getLdapServerSettingList,fitColumns:!0,singleSelect:!0,columns:[[{field:"id",title:StrackLang.Switch,align:"center",width:100,formatter:function(t,a,n){var e="on"===a.ldap_switch?"icon-uniF205":"icon-uniF204";return"yes"===i.rule_switch?'<a href="javascript:;" class="swicth-gird-font '+a.ldap_switch+'" onclick="obj.switch_ldap_item(this)" data-ldapid="'+t+'"><i class="'+e+'"></i></a>':'<a href="javascript:;" class="swicth-gird-font"><i class="'+e+'"></i></a>'}},{field:"name",title:StrackLang.Ldap_Name,align:"center",width:300}]],onLoadSuccess:function(t){var a=0,n=0,e=0;t.ldap_open&&(a=1),t.qq_login_open&&(n=1),t.strack_union_open&&(e=1),Strack.init_open_switch({dom:"#open_ldap_login",value:a,onText:StrackLang.Switch_ON,offText:StrackLang.Switch_OFF,width:100},function(t){s({type:"ldap_open",status:t})}),Strack.init_open_switch({dom:"#open_strack_union_login",value:e,onText:StrackLang.Switch_ON,offText:StrackLang.Switch_OFF,width:100},function(t){o({type:"strack_union_open",status:t})}),Strack.init_open_switch({dom:"#open_qq_login",value:n,onText:StrackLang.Switch_ON,offText:StrackLang.Switch_OFF,width:100},function(t){o({type:"qq_login_open",status:t})})}})});
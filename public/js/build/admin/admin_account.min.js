$(function(){obj={user_add:function(e){e=$(e).data("lang");Strack.item_operate_dialog(e,{mode:"create",field_list_type:["edit"],module_id:t.module_id,project_id:0,page:"admin_account",schema_page:"admin_account",type:"add_panel",keep_panel:!0},function(){obj.user_reset()})},user_modify:function(e){var a=$(e).data("lang");Strack.get_datagrid_select_data("#main_datagrid_box",function(e){Strack.item_operate_dialog(a,{mode:"modify",field_list_type:["edit"],module_id:t.module_id,project_id:0,page:"admin_account",schema_page:"admin_account",type:"update_panel",primary_id:e.join(",")},function(){obj.user_reset()})})},user_delete:function(e){Strack.ajax_grid_delete("main_datagrid_box","id",StrackLang.Delete_User_Notice,AccountPHP.deleteAccount,t)},user_cancel:function(e){Strack.get_datagrid_select_data("#main_datagrid_box",function(e){$.ajax({type:"POST",url:AccountPHP.cancelAccount,data:{ids:e.join(",")},dataType:"json",beforeSend:function(){$.messager.progress({title:StrackLang.Waiting,msg:StrackLang.loading})},success:function(e){$.messager.progress("close"),200===parseInt(e.status)?(Strack.top_message({bg:"g",msg:e.message}),obj.user_reset()):layer.msg(e.message,{icon:7,time:1200,anim:6})}})})},user_reset_default_pass:function(e){Strack.get_datagrid_select_data("#main_datagrid_box",function(e){$.ajax({type:"POST",url:AccountPHP.resetAccountPassword,data:{ids:e.join(",")},dataType:"json",beforeSend:function(){$.messager.progress({title:StrackLang.Waiting,msg:StrackLang.loading})},success:function(e){$.messager.progress("close"),200===parseInt(e.status)?(Strack.top_message({bg:"g",msg:e.message}),obj.user_reset()):layer.msg(e.message,{icon:7,time:1200,anim:6})}})})},user_reset:function(){$("#main_datagrid_box").datagrid("reload")}};var t=Strack.generate_hidden_param();Strack.load_grid_columns("#active_account",{page:"admin_account",schema_page:"admin_account",view_type:"grid",module_id:t.module_id,project_id:0,grid_id:"main_datagrid_box",temp_fields:{add:{},cut:{}}},function(e){var a={filter:{group:[],sort:{},request:[],temp_fields:{add:{},cut:{}},filter_input:[],filter_panel:[],filter_advance:[]},page:"admin_account",schema_page:"admin_account",view_type:"grid",module_id:t.module_id,module_type:t.module_type,project_id:0},a={url:AccountPHP.getAccountGridData,height:Strack.panel_height(".account-list",0),rowheight:50,view:scrollview,adaptive:{dom:".account-list",min_width:1736,exth:0,domresize:1},ctrlSelect:!0,multiSort:!0,DragSelect:!0,queryParams:{filter_data:JSON.stringify(a)},panelConfig:{active_filter_id:e.grid.filter_config.filter_id},sortConfig:e.grid.sort_config,sortData:e.grid.sort_config.sort_data,moduleId:t.module_id,toolbarConfig:{id:"grid_datagrid_main",page:"admin_account",sortAllow:!0,groupAllow:!0,fieldAllow:!0,viewAllow:!0,actionAllow:!0},searchConfig:{id:"main_grid_search",bar_show:e.grid.filter_bar_show,filterBar:{main_dom:"grid_datagrid_main",bar_dom:"grid_filter_main"}},filterConfig:{id:"grid_filter_main",schema_page:"admin_account",barParam:{}},authorityRules:{filter:{show:t.rule_panel_filter,edit:t.rule_modify_filter},sort:t.rule_sort,group:t.rule_group},contextMenuData:{id:"st_menu_task",copy_id:"ac_copy_cell",edit_id:"#grid_datagrid_main .edit-menu",data:[]},columnsFieldConfig:e.grid.columnsFieldConfig,frozenColumns:e.grid.frozenColumns,columns:e.grid.columns,toolbar:"#tb_grid",pagination:!0,pageNumber:1,pageSize:200,pageList:[100,200,300,400,500],pagePosition:"bottom",remoteSort:!1,onDblClickRow:function(e,a){}};$.isEmptyObject(e.grid.group_name)||(a.groupActive=!0,a.groupField=Strack.get_grid_group_field(e.grid.group_name).field,a.groupFormatter=function(e,a){return'<span class="">'+e+"( "+a.length+" )</span>"}),$("#main_datagrid_box").datagrid(a).datagrid("enableCellEditing").datagrid("disableCellSelecting").datagrid("gotoCell",{index:0,field:"id"}).datagrid("columnMoving")})});
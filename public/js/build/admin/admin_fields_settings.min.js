$(function(){obj={save_setting:function(){var e,t,i,s,o,a,l,u,d,g,n,m,r,_,f=Strack.validate_form("save_setting");200===f.status&&(e={formula_data:{},fields:{}},t=$("#formula_assignee_field").combobox("getValue"),i=$("#formula_reviewed_by").combobox("getValue"),s=$("#formula_no_start_status").combobox("getValue"),o=$("#formula_reviewed_by_status").combobox("getValue"),a=$("#formula_end_by_status").combobox("getValue"),l=$("#formula_in_progress_status").combobox("getValue"),u=$("#formula_actual_time_consuming").combobox("getValue"),d=$("#estimate_working_hours").combobox("getValue"),g=$("#examine_working_hours").combobox("getValue"),n=$("#settlement_time_consuming").combobox("getValue"),m=$("#grouping_of_persons").combobox("getValue"),r=$("#grouping_of_stage").combobox("getValue"),_=$("#sub_task").combobox("getValue"),e.fields.assignee_field=t,e.fields.reviewed_by=i,e.fields.reviewed_by_status=o,e.fields.no_start_status=s,e.fields.end_by_status=a,e.fields.in_progress_status=l,e.fields.actual_time_consuming=u,e.fields.estimate_working_hours=d,e.fields.grouping_of_stage=r,e.fields.examine_working_hours=g,e.fields.sub_task=_,e.fields.settlement_time_consuming=n,f.data.view={},f.data.view.grouping_of_persons=m,f.data.view.grouping_of_stage=r,f.data.formula=e,$.ajax({type:"POST",url:FieldsSettingsPHP.updateFieldSettings,contentType:"application/json",data:JSON.stringify(f.data),dataType:"json",beforeSend:function(){$.messager.progress({title:StrackLang.Waiting,msg:StrackLang.loading})},success:function(e){$.messager.progress("close"),200===parseInt(e.status)?Strack.top_message({bg:"g",msg:e.message}):layer.msg(e.message,{icon:7,time:1200,anim:6})}}))}},$.ajax({type:"POST",url:FieldsSettingsPHP.getFieldSettings,dataType:"json",success:function(e){var t="",i="",s="",o="",a="",l="",u="",d="",g="",n="",m="",r="",_="",f="";e.hasOwnProperty("formula")&&(t=e.formula.fields.assignee_field,i=e.formula.fields.reviewed_by,s=e.formula.fields.no_start_status,o=e.formula.fields.reviewed_by_status,l=e.formula.fields.in_progress_status,a=e.formula.fields.end_by_status,u=e.formula.fields.actual_time_consuming,d=e.formula.fields.estimate_working_hours,g=e.formula.fields.examine_working_hours,n=e.formula.fields.grade_time_consuming,m=e.formula.fields.settlement_time_consuming,f=e.formula.fields.sub_task),e.hasOwnProperty("view")&&(r=e.view.grouping_of_persons,_=e.view.grouping_of_stage),$("#formula_reviewed_by").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:i}),$("#formula_reviewed_by_status").combobox({url:FieldsSettingsPHP.getStatusList,height:30,width:170,valueField:"id",textField:"name",value:o}),$("#formula_no_start_status").combobox({url:FieldsSettingsPHP.getStatusList,height:30,width:170,valueField:"id",textField:"name",value:s}),$("#formula_in_progress_status").combobox({url:FieldsSettingsPHP.getStatusList,height:30,width:170,valueField:"id",textField:"name",value:l}),$("#formula_end_by_status").combobox({url:FieldsSettingsPHP.getStatusList,height:30,width:170,valueField:"id",textField:"name",value:a}),$("#grouping_of_persons").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:r}),$("#grouping_of_stage").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:_}),$("#settlement_time_consuming").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:m}),$("#formula_actual_time_consuming").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:u}),$("#estimate_working_hours").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:d}),$("#examine_working_hours").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:g}),$("#sub_task").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:f}),$("#formula_assignee_field").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:t}),$("#formula_grade_time_consuming").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:n})}})});
window.onload=function(){obj={login_verify:function(){var t={};$("#login_form").find("input").each(function(){var e=$(this).val();if(!e)return layer.tips($(this).attr("data-notice"),this,{tips:[2,"#FF4949"],time:1e3}),!(t={});t[$(this).attr("name")]=e}),$.isEmptyObject(t)||(t.from="web",t.method="",function(e){$.isEmptyObject(r)||(e.method=r.type,e.server_id=r.id);$.ajax({type:"POST",url:LoginPHP.verifyLogin,dataType:"json",data:e,success:function(e){200===parseInt(e.status)?($("head").append(e.data.uc_script),e.url?location.href=e.url:location.href=StrackLogin.INDEX):Strack_Check.login_top_notice(".login-error-show",e.message)}})}(t))},login_with_ldap:function(e){$(".login-third-party").show()},back_to_login:function(e){var t;0<(t=$(".server-wrap.active")).length&&(t=t.find(".server-core"),r={id:t.attr("data-id"),type:t.attr("data-type"),name:t.attr("data-name")},$(".login-server-name").html(r.name),$(".login-server-show").show()),$(".login-third-party").hide()},select_server:function(e){$(".server-wrap").removeClass("active"),$(e).parent().addClass("active")},close_login_server:function(e){$(".server-wrap").removeClass("active"),$(".login-server-show").hide(),r={}}};var r={};function d(e){var t="";return t+='<div class="third-party-row">'+e+"</div>"}function l(e,t){var r="";return r+='<div class="third-party-item"><div class="server-wrap">'+("url"===t?'<a href="'+e.url+'" class="server-core" onclick="obj.select_server(this)" data-type="'+e.type+'" data-id="'+e.id+'" data-name="'+e.name+'">':'<a href="javascript:;" class="server-core" onclick="obj.select_server(this)" data-type="'+e.type+'" data-id="'+e.id+'" data-name="'+e.name+'">')+'<div class="server-name-wrap"><p class="server-name">'+e.name+"</p></div></a></div></div>"}Strack_Check.check_browser_version(function(){Strack_Check.get_oss_status(function(){$.ajax({type:"POST",url:LoginPHP.getThirdServerList,dataType:"json",success:function(r){var a,i,n,s,o,c;"on"===r.third_server_status&&($("#third_party_open").show(),a=0,n=i="",r.third_server_list.third.forEach(function(e,t){5===++a?(a=0,i+=d(n),n=""):n+=l(e,"url"),6!==a&&parseInt(r.third_server_total)===t+1&&(i+=d(n),n="")}),$(".third-party-list .main-list").empty().append(i),s=0,c=o="",r.third_server_list.ldap.forEach(function(e,t){5===++s?(s=0,o+=d(c),c=""):c+=l(e,"bnt"),6!==s&&parseInt(r.third_server_total)===t+1&&(o+=d(c),c="")}),$(".third-party-list .ldap-list").empty().append(o))}}),$(document).keydown(function(e){13===e.keyCode&&(e.preventDefault(),obj.login_verify())})})})};
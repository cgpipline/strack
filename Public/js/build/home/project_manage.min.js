$(function(){obj={search_project:function(t){r.name=$("#proj_search_box").val(),a(r)},click_down_item:function(t){var e=$(t).attr("from"),o=$(t).attr("options");if(Strack.toggle_item_icon(t,e),"all"!==o)switch(e){case"project_status":r.project_status=[],$("#project_toolbar_status").find(".view-g-item").each(function(){$(this).find("i").hasClass("icon-checked")&&r.project_status.push($(this).attr("options"))});break;case"project_time":r.project_time=o;break;case"project_belong":r.project_belong=o,Strack.save_local_storage("project_belong",o)}else r.project_status=[],r.project_time="",r.project_belong="",Strack.save_local_storage("project_belong","");a(r)},toggle_group:function(t){var e=$(t).attr("data-groupid"),o=$("#proj_group_"+e);o.hasClass("hidden")?(o.show().removeClass("hidden"),$(t).find("i").removeClass("down").addClass("up")):(o.hide().addClass("hidden"),$(t).find("i").removeClass("up").addClass("down"))}};var t=Strack.read_local_storage("project_belong"),e=null===t?"my":t,r={project_status:[],project_time:"",project_belong:e,name:""};function a(t){var e=$(".add-project-main"),c=$("#project_list");$.ajax({type:"POST",url:ProjectPHP.getProjectList,dataType:"json",contentType:"application/json",data:JSON.stringify(t),beforeSend:function(){e.append(Strack.loading_dom("white","","project")).css("overflow","hidden")},success:function(o){$("#st-load_project").remove(),e.css("overflow","auto");var r=0,a="",s="";o.rows.forEach(function(t,e){6===++r?(r=0,s+=n(t),a+=i(s),s=""):s+=n(t),6!==r&&parseInt(o.total)===e+1&&(a+=i(s),s="")}),a?c.empty().append(a):c.empty().append('<div id="pactive_notice" class="project-empty-no">'+StrackLang.No_Filter_Project+"</div>")}})}function s(t,e){var o="";return o+=' <a href="javascript:;" class="item view-g-item view-g-active" onclick="obj.click_down_item(this);" from="'+t+'" options="'+e.id+'"><i class="icon-left icon-unchecked"></i>'+e.name+"</a>"}function i(t){var e="";return e+=' <div class="proj-search-rows"><div class="ui six column doubling grid">'+t+"</div></div>"}function n(t){var e="",o=t.thumb?t.thumb:StrackPHP.IMG+"/project_thumb_default2.jpg";return e+='<div class="column"><a href="'+(Strack.remove_html_ext(ProjectPHP.project_base)+"/"+t.id+".html")+'" class="proj-list-card"><div class="card"><div class="image"><img src="'+o+'"></div><div class="content"><div class="header text-ellipsis"><div><span class="project-menu-icon ui empty circular label" style="background-color: #'+t.status_color+'; margin-right: 10px" title="'+["status_name"]+'"></span><strong>'+t.name+'</strong></div></div><div class="status text-ellipsis">'+t.status_name+'</div><div class="controller text-ellipsis">'+t.created_by+'</div></div><div class="progress"><div class="progress-base" title="'+StrackLang.Progress+" : "+t.progress+'%"></div><div class="progress-current" title="'+StrackLang.Progress+" : "+t.progress+'%" style="width: '+t.progress+'%;"></div></div></div></a></div>'}"my"===e?Strack.toggle_item_icon($("#project_filter_my")[0],"project_belong"):Strack.toggle_item_icon($("#project_filter_all")[0],"project_belong"),$.ajax({type:"POST",url:ProjectPHP.getProjectToolbarSettings,dataType:"json",beforeSend:function(){$(".add-project-header").append(Strack.loading_dom("white","","project_toolbar"))},success:function(t){var e="",o="";t.status_corresponds_list.forEach(function(t){e+=s("project_status",t)}),$("#project_toolbar_status").empty().append(e),t.time_data_list.forEach(function(t){o+=s("project_time",t)}),$("#project_toolbar_time").empty().append(o),$("#st-load_project_toolbar").remove()}}),a(r),Strack.listen_keyboard_event(function(t,e){"enter"===e.code&&!0===$("#proj_search_box").is(":focus")&&(t.preventDefault(),obj.search_project())})});
!function(f){f.parser={auto:!0,onComplete:function(e){},plugins:["draggable","droppable","resizable","pagination","tooltip","linkbutton","menu","menubutton","splitbutton","switchbutton","progressbar","tree","textbox","filebox","combo","combobox","combotree","combogrid","tagbox","numberbox","validatebox","searchbox","spinner","numberspinner","timespinner","datetimespinner","calendar","datebox","datetimebox","slider","layout","panel","datagrid","propertygrid","treegrid","datalist","tabs","accordion","window","dialog","form"],parse:function(a){for(var n=[],e=0;e<f.parser.plugins.length;e++){var t=f.parser.plugins[e],i=f(".easyui-"+t,a);i.length&&(i[t]?i[t]():n.push({name:t,jq:i}))}if(n.length&&window.easyloader){var o=[];for(e=0;e<n.length;e++)o.push(n[e].name);easyloader.load(o,function(){for(var e=0;e<n.length;e++){var t=n[e].name;n[e].jq[t]()}f.parser.onComplete.call(f.parser,a)})}else f.parser.onComplete.call(f.parser,a)},parseValue:function(e,t,a,n){n=n||0;var i=f.trim(String(t||""));return i="%"==i.substr(i.length-1,1)?(i=parseInt(i.substr(0,i.length-1)),0<=e.toLowerCase().indexOf("width")?Math.floor((a.width()-n)*i/100):Math.floor((a.height()-n)*i/100)):parseInt(i)||void 0},parseOptions:function(a,e){var t=f(a),n={},i=f.trim(t.attr("data-options"));if(i&&("{"!=i.substring(0,1)&&(i="{"+i+"}"),n=new Function("return "+i)()),f.map(["width","height","left","top","minWidth","maxWidth","minHeight","maxHeight"],function(e){var t=f.trim(a.style[e]||"");t&&(-1==t.indexOf("%")&&(t=parseInt(t)||void 0),n[e]=t)}),e){for(var o={},r=0;r<e.length;r++){var d=e[r];if("string"==typeof d)o[d]=t.attr(d);else for(var s in d){var l=d[s];"boolean"==l?o[s]=t.attr(s)?"true"==t.attr(s):void 0:"number"==l&&(o[s]="0"==t.attr(s)?0:parseFloat(t.attr(s))||void 0)}}f.extend(n,o)}return n}},f(function(){var e=f('<div style="position:absolute;top:-1000px;width:100px;height:100px;padding:5px"></div>').appendTo("body");f._boxModel=100!=e.outerWidth(),e.remove(),e=f('<div style="position:fixed"></div>').appendTo("body"),f._positionFixed="fixed"==e.css("position"),e.remove(),!window.easyloader&&f.parser.auto&&f.parser.parse()}),f.fn._outerWidth=function(e){return null==e?this[0]==window?this.width()||document.body.clientWidth:this.outerWidth()||0:this._size("width",e)},f.fn._outerHeight=function(e){return null==e?this[0]==window?this.height()||document.body.clientHeight:this.outerHeight()||0:this._size("height",e)},f.fn._scrollLeft=function(e){return null==e?this.scrollLeft():this.each(function(){f(this).scrollLeft(e)})},f.fn._propAttr=f.fn.prop||f.fn.attr,f.fn._size=function(a,n){return"string"==typeof a?"clear"==a?this.each(function(){f(this).css({width:"",minWidth:"",maxWidth:"",height:"",minHeight:"",maxHeight:""})}):"fit"==a?this.each(function(){i(this,"BODY"==this.tagName?f("body"):f(this).parent(),!0)}):"unfit"==a?this.each(function(){i(this,f(this).parent(),!1)}):null==n?e(this[0],a):this.each(function(){e(this,a,n)}):this.each(function(){n=n||f(this).parent(),f.extend(a,i(this,n,a.fit)||{});var e=o(this,"width",n,a),t=o(this,"height",n,a);e||t?f(this).addClass("easyui-fluid"):f(this).removeClass("easyui-fluid")});function i(e,t,a){if(!t.length)return!1;var n=f(e)[0],i=t[0],o=i.fcount||0;return a?(n.fitted||(n.fitted=!0,i.fcount=o+1,f(i).addClass("panel-noscroll"),"BODY"==i.tagName&&f("html").addClass("panel-fit")),{width:f(i).width()||1,height:f(i).height()||1}):(n.fitted&&(n.fitted=!1,i.fcount=o-1,0==i.fcount&&(f(i).removeClass("panel-noscroll"),"BODY"==i.tagName&&f("html").removeClass("panel-fit"))),!1)}function o(e,t,a,n){var i=f(e),o=t,r=o.substr(0,1).toUpperCase()+o.substr(1),d=f.parser.parseValue("min"+r,n["min"+r],a),s=f.parser.parseValue("max"+r,n["max"+r],a),l=f.parser.parseValue(o,n[o],a),c=0<=String(n[o]||"").indexOf("%");if(isNaN(l))i._size(o,""),i._size("min"+r,d),i._size("max"+r,s);else{var u=Math.min(Math.max(l,d||0),s||99999);c||(n[o]=u),i._size("min"+r,""),i._size("max"+r,""),i._size(o,u)}return c||n.fit}function e(e,t,a){var n=f(e);if(null==a){if(a=parseInt(e.style[t]),isNaN(a))return;return f._boxModel&&(a+=i()),a}function i(){return 0<=t.toLowerCase().indexOf("width")?n.outerWidth()-n.width():n.outerHeight()-n.height()}""===a?n.css(t,""):(f._boxModel&&(a-=i())<0&&(a=0),n.css(t,a+"px"))}}}(jQuery),function(i){var t=null,a=!1;function n(e,t,a){var n=new i.Event(t);n.pageX=e.changedTouches[0].pageX,n.pageY=e.changedTouches[0].pageY,n.which=a||1,i(e.target).trigger(n)}document.addEventListener&&(document.addEventListener("touchstart",function(e){1==e.touches.length&&(a?(clearTimeout(dblClickTimer),a=!1,n(e,"dblclick")):(a=!0,dblClickTimer=setTimeout(function(){a=!1},500)),t=setTimeout(function(){n(e,"contextmenu",3)},1e3),n(e,"mousedown"),(i.fn.draggable.isDragging||i.fn.resizable.isResizing)&&e.preventDefault())},!0),document.addEventListener("touchmove",function(e){1==e.touches.length&&(t&&clearTimeout(t),n(e,"mousemove"),(i.fn.draggable.isDragging||i.fn.resizable.isResizing)&&e.preventDefault())},!0),document.addEventListener("touchend",function(e){t&&clearTimeout(t),n(e,"mouseup"),(i.fn.draggable.isDragging||i.fn.resizable.isResizing)&&e.preventDefault()},!0))}(jQuery),function(c){function o(e){var t=c.data(e.data.target,"draggable"),a=t.options,n=t.proxy,i=e.data,o=i.startLeft+e.pageX-i.startX,r=i.startTop+e.pageY-i.startY;n&&(n.parent()[0]==document.body?(o=null!=a.deltaX&&null!=a.deltaX?e.pageX+a.deltaX:e.pageX-e.data.offsetWidth,r=null!=a.deltaY&&null!=a.deltaY?e.pageY+a.deltaY:e.pageY-e.data.offsetHeight):(null!=a.deltaX&&null!=a.deltaX&&(o+=e.data.offsetWidth+a.deltaX),null!=a.deltaY&&null!=a.deltaY&&(r+=e.data.offsetHeight+a.deltaY))),e.data.parent!=document.body&&(o+=c(e.data.parent).scrollLeft(),r+=c(e.data.parent).scrollTop()),"h"==a.axis?i.left=o:("v"==a.axis||(i.left=o),i.top=r)}function r(e){var t=c.data(e.data.target,"draggable"),a=t.options,n=t.proxy;(n=n||c(e.data.target)).css({left:e.data.left,top:e.data.top-c(n.parent()[0]).scrollTop()}),c("body").css("cursor",a.cursor)}function d(t){if(!c.fn.draggable.isDragging)return!1;var e=c.data(t.data.target,"draggable"),a=e.options,n=c(".droppable").filter(function(){return t.data.target!=this}).filter(function(){var e=c.data(this,"droppable").options.accept;return!e||0<c(e).filter(function(){return this==t.data.target}).length});e.droppables=n;var i=e.proxy;return i||(a.proxy?(i="clone"==a.proxy?c(t.data.target).clone().insertAfter(t.data.target):a.proxy.call(t.data.target,t.data.target),e.proxy=i):i=c(t.data.target)),i.css("position","absolute"),o(t),r(t),a.onStartDrag.call(t.data.target,t),!1}function s(a){if(!c.fn.draggable.isDragging)return!1;var e=c.data(a.data.target,"draggable");o(a),0!=e.options.onDrag.call(a.data.target,a)&&r(a);var n=a.data.target;return e.droppables.each(function(){var e=c(this);if(!e.droppable("options").disabled){var t=e.offset();a.pageX>t.left&&a.pageX<t.left+e.outerWidth()&&a.pageY>t.top&&a.pageY<t.top+e.outerHeight()?(this.entered||(c(this).trigger("_dragenter",[n]),this.entered=!0),c(this).trigger("_dragover",[n])):this.entered&&(c(this).trigger("_dragleave",[n]),this.entered=!1)}}),!1}function l(n){if(!c.fn.draggable.isDragging)return u(),!1;s(n);var e,t,i=c.data(n.data.target,"draggable"),a=i.proxy,o=i.options;o.revert?1==d()?c(n.data.target).css({position:n.data.startPosition,left:n.data.startLeft,top:n.data.startTop}):a?(t=a.parent()[0]==document.body?(e=n.data.startX-n.data.offsetWidth,n.data.startY-n.data.offsetHeight):(e=n.data.startLeft,n.data.startTop),a.animate({left:e,top:t},function(){r()})):c(n.data.target).animate({left:n.data.startLeft,top:n.data.startTop},function(){c(n.data.target).css("position",n.data.startPosition)}):(c(n.data.target).css({position:"absolute",left:n.data.left,top:n.data.top}),d());function r(){a&&a.remove(),i.proxy=null}function d(){var a=!1;return i.droppables.each(function(){var e=c(this);if(!e.droppable("options").disabled){var t=e.offset();return n.pageX>t.left&&n.pageX<t.left+e.outerWidth()&&n.pageY>t.top&&n.pageY<t.top+e.outerHeight()?(o.revert&&c(n.data.target).css({position:n.data.startPosition,left:n.data.startLeft,top:n.data.startTop}),c(this).trigger("_drop",[n.data.target]),r(),a=!0,this.entered=!1):void 0}}),a||o.revert||r(),a}return o.onStopDrag.call(n.data.target,n),u(),!1}function u(){c.fn.draggable.timer&&(clearTimeout(c.fn.draggable.timer),c.fn.draggable.timer=void 0),c(document).unbind(".draggable"),c.fn.draggable.isDragging=!1,setTimeout(function(){c("body").css("cursor","")},100)}c.fn.draggable=function(n,e){return"string"==typeof n?c.fn.draggable.methods[n](this,e):this.each(function(){var e,t=c.data(this,"draggable"),a=(e=t?(t.handle.unbind(".draggable"),c.extend(t.options,n)):c.extend({},c.fn.draggable.defaults,c.fn.draggable.parseOptions(this),n||{})).handle?"string"==typeof e.handle?c(e.handle,this):e.handle:c(this);function o(e){var t=c.data(e.data.target,"draggable"),a=t.handle,n=c(a).offset(),i=c(a).outerWidth(),o=c(a).outerHeight(),r=e.pageY-n.top,d=n.left+i-e.pageX,s=n.top+o-e.pageY,l=e.pageX-n.left;return Math.min(r,d,s,l)>t.options.edge}c.data(this,"draggable",{options:e,handle:a}),e.disabled?c(this).css("cursor",""):a.unbind(".draggable").bind("mousemove.draggable",{target:this},function(e){if(!c.fn.draggable.isDragging){var t=c.data(e.data.target,"draggable").options;o(e)?c(this).css("cursor",t.cursor):c(this).css("cursor","")}}).bind("mouseleave.draggable",{target:this},function(e){c(this).css("cursor","")}).bind("mousedown.draggable",{target:this},function(e){if(0!=o(e)){c(this).css("cursor","");var t=c(e.data.target).position(),a=c(e.data.target).offset(),n={startPosition:c(e.data.target).css("position"),startLeft:t.left,startTop:t.top,left:t.left,top:t.top,startX:e.pageX,startY:e.pageY,offsetWidth:e.pageX-a.left,offsetHeight:e.pageY-a.top,target:e.data.target,parent:c(e.data.target).parent()[0]};c.extend(e.data,n);var i=c.data(e.data.target,"draggable").options;if(0!=i.onBeforeDrag.call(e.data.target,e))return c(document).bind("mousedown.draggable",e.data,d),c(document).bind("mousemove.draggable",e.data,s),c(document).bind("mouseup.draggable",e.data,l),c.fn.draggable.timer=setTimeout(function(){c.fn.draggable.isDragging=!0,d(e)},i.delay),!1}})})},c.fn.draggable.methods={options:function(e){return c.data(e[0],"draggable").options},proxy:function(e){return c.data(e[0],"draggable").proxy},enable:function(e){return e.each(function(){c(this).draggable({disabled:!1})})},disable:function(e){return e.each(function(){c(this).draggable({disabled:!0})})}},c.fn.draggable.parseOptions=function(e){var t=c(e);return c.extend({},c.parser.parseOptions(e,["cursor","handle","axis",{revert:"boolean",deltaX:"number",deltaY:"number",edge:"number",delay:"number"}]),{disabled:!!t.attr("disabled")||void 0})},c.fn.draggable.defaults={proxy:null,revert:!1,cursor:"move",deltaX:null,deltaY:null,handle:null,disabled:!1,edge:0,axis:null,delay:100,onBeforeDrag:function(e){},onStartDrag:function(e){},onDrag:function(e){},onStopDrag:function(e){}},c.fn.draggable.isDragging=!1}(jQuery),function(n){n.fn.droppable=function(t,e){return"string"==typeof t?n.fn.droppable.methods[t](this,e):(t=t||{},this.each(function(){var a,e=n.data(this,"droppable");e?n.extend(e.options,t):(n(a=this).addClass("droppable"),n(a).bind("_dragenter",function(e,t){n.data(a,"droppable").options.onDragEnter.apply(a,[e,t])}),n(a).bind("_dragleave",function(e,t){n.data(a,"droppable").options.onDragLeave.apply(a,[e,t])}),n(a).bind("_dragover",function(e,t){n.data(a,"droppable").options.onDragOver.apply(a,[e,t])}),n(a).bind("_drop",function(e,t){n.data(a,"droppable").options.onDrop.apply(a,[e,t])}),n.data(this,"droppable",{options:n.extend({},n.fn.droppable.defaults,n.fn.droppable.parseOptions(this),t)}))}))},n.fn.droppable.methods={options:function(e){return n.data(e[0],"droppable").options},enable:function(e){return e.each(function(){n(this).droppable({disabled:!1})})},disable:function(e){return e.each(function(){n(this).droppable({disabled:!0})})}},n.fn.droppable.parseOptions=function(e){var t=n(e);return n.extend({},n.parser.parseOptions(e,["accept"]),{disabled:!!t.attr("disabled")||void 0})},n.fn.droppable.defaults={accept:null,disabled:!1,onDragEnter:function(e,t){},onDragOver:function(e,t){},onDragLeave:function(e,t){},onDrop:function(e,t){}}}(jQuery),function(u){u.fn.resizable=function(t,e){if("string"==typeof t)return u.fn.resizable.methods[t](this,e);function a(e){var t=e.data,a=u.data(t.target,"resizable").options;if(-1!=t.dir.indexOf("e")){var n=t.startWidth+e.pageX-t.startX;n=Math.min(Math.max(n,a.minWidth),a.maxWidth),t.width=n}if(-1!=t.dir.indexOf("s")){var i=t.startHeight+e.pageY-t.startY;i=Math.min(Math.max(i,a.minHeight),a.maxHeight),t.height=i}if(-1!=t.dir.indexOf("w")){n=t.startWidth-e.pageX+t.startX;n=Math.min(Math.max(n,a.minWidth),a.maxWidth),t.width=n,t.left=t.startLeft+t.startWidth-t.width}if(-1!=t.dir.indexOf("n")){i=t.startHeight-e.pageY+t.startY;i=Math.min(Math.max(i,a.minHeight),a.maxHeight),t.height=i,t.top=t.startTop+t.startHeight-t.height}}function n(e){var t=e.data,a=u(t.target);a.css({left:t.left,top:t.top}),a.outerWidth()!=t.width&&a._outerWidth(t.width),a.outerHeight()!=t.height&&a._outerHeight(t.height)}function o(e){return u.fn.resizable.isResizing=!0,u.data(e.data.target,"resizable").options.onStartResize.call(e.data.target,e),!1}function r(e){return a(e),0!=u.data(e.data.target,"resizable").options.onResize.call(e.data.target,e)&&n(e),!1}function d(e){return u.fn.resizable.isResizing=!1,a(e),n(e),u.data(e.data.target,"resizable").options.onStopResize.call(e.data.target,e),u(document).unbind(".resizable"),u("body").css("cursor",""),!1}return this.each(function(){var c=null,e=u.data(this,"resizable");function i(e){var t=u(e.data.target),a="",n=t.offset(),i=t.outerWidth(),o=t.outerHeight(),r=c.edge;e.pageY>n.top&&e.pageY<n.top+r?a+="n":e.pageY<n.top+o&&e.pageY>n.top+o-r&&(a+="s"),e.pageX>n.left&&e.pageX<n.left+r?a+="w":e.pageX<n.left+i&&e.pageX>n.left+i-r&&(a+="e");for(var d=c.handles.split(","),s=0;s<d.length;s++){var l=d[s].replace(/(^\s*)|(\s*$)/g,"");if("all"==l||l==a)return a}return""}e?(u(this).unbind(".resizable"),c=u.extend(e.options,t||{})):(c=u.extend({},u.fn.resizable.defaults,u.fn.resizable.parseOptions(this),t||{}),u.data(this,"resizable",{options:c})),1!=c.disabled&&u(this).bind("mousemove.resizable",{target:this},function(e){if(!u.fn.resizable.isResizing){var t=i(e);""==t?u(e.data.target).css("cursor",""):u(e.data.target).css("cursor",t+"-resize")}}).bind("mouseleave.resizable",{target:this},function(e){u(e.data.target).css("cursor","")}).bind("mousedown.resizable",{target:this},function(a){var e=i(a);if(""!=e){var t={target:a.data.target,dir:e,startLeft:n("left"),startTop:n("top"),left:n("left"),top:n("top"),startX:a.pageX,startY:a.pageY,startWidth:u(a.data.target).outerWidth(),startHeight:u(a.data.target).outerHeight(),width:u(a.data.target).outerWidth(),height:u(a.data.target).outerHeight(),deltaWidth:u(a.data.target).outerWidth()-u(a.data.target).width(),deltaHeight:u(a.data.target).outerHeight()-u(a.data.target).height()};u(document).bind("mousedown.resizable",t,o),u(document).bind("mousemove.resizable",t,r),u(document).bind("mouseup.resizable",t,d),u("body").css("cursor",e+"-resize")}function n(e){var t=parseInt(u(a.data.target).css(e));return isNaN(t)?0:t}})})},u.fn.resizable.methods={options:function(e){return u.data(e[0],"resizable").options},enable:function(e){return e.each(function(){u(this).resizable({disabled:!1})})},disable:function(e){return e.each(function(){u(this).resizable({disabled:!0})})}},u.fn.resizable.parseOptions=function(e){var t=u(e);return u.extend({},u.parser.parseOptions(e,["handles",{minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number",edge:"number"}]),{disabled:!!t.attr("disabled")||void 0})},u.fn.resizable.defaults={disabled:!1,handles:"n, e, s, w, ne, se, sw, nw, all",minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4,edge:5,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){}},u.fn.resizable.isResizing=!1}(jQuery),function(l){function a(e,t){var a=l.data(e,"linkbutton").options;if(t&&l.extend(a,t),a.width||a.height||a.fit){var n=l(e),i=n.parent(),o=n.is(":visible");if(!o){var r=l('<div style="display:none"></div>').insertBefore(e),d={position:n.css("position"),display:n.css("display"),left:n.css("left")};n.appendTo("body"),n.css({position:"absolute",display:"inline-block",left:-2e4})}n._size(a,i);var s=n.find(".l-btn-left");s.css("margin-top",0),s.css("margin-top",parseInt((n.height()-s.height())/2)+"px"),o||(n.insertAfter(r),n.css(d),r.remove())}}function i(e,t){var a=l.data(e,"linkbutton").options;t?(a.group&&l('a.l-btn[group="'+a.group+'"]').each(function(){var e=l(this).linkbutton("options");e.toggle&&(l(this).removeClass("l-btn-selected l-btn-plain-selected"),e.selected=!1)}),l(e).addClass(a.plain?"l-btn-selected l-btn-plain-selected":"l-btn-selected"),a.selected=!0):a.group||(l(e).removeClass("l-btn-selected l-btn-plain-selected"),a.selected=!1)}function o(e,t){var a=l.data(e,"linkbutton"),n=a.options;if(l(e).removeClass("l-btn-disabled l-btn-plain-disabled"),t){n.disabled=!0;var i=l(e).attr("href");i&&(a.href=i,l(e).attr("href","javascript:void(0)")),e.onclick&&(a.onclick=e.onclick,e.onclick=null),n.plain?l(e).addClass("l-btn-disabled l-btn-plain-disabled"):l(e).addClass("l-btn-disabled")}else n.disabled=!1,a.href&&l(e).attr("href",a.href),a.onclick&&(e.onclick=a.onclick)}l.fn.linkbutton=function(t,e){return"string"==typeof t?l.fn.linkbutton.methods[t](this,e):(t=t||{},this.each(function(){var e=l.data(this,"linkbutton");e?l.extend(e.options,t):(l.data(this,"linkbutton",{options:l.extend({},l.fn.linkbutton.defaults,l.fn.linkbutton.parseOptions(this),t)}),l(this).removeAttr("disabled"),l(this).bind("_resize",function(e,t){return(l(this).hasClass("easyui-fluid")||t)&&a(this),!1})),function(e){var t=l.data(e,"linkbutton").options,a=l(e).empty();a.addClass("l-btn").removeClass("l-btn-plain l-btn-selected l-btn-plain-selected l-btn-outline"),a.removeClass("l-btn-small l-btn-medium l-btn-large").addClass("l-btn-"+t.size),t.plain&&a.addClass("l-btn-plain"),t.outline&&a.addClass("l-btn-outline"),t.selected&&a.addClass(t.plain?"l-btn-selected l-btn-plain-selected":"l-btn-selected"),a.attr("group",t.group||""),a.attr("id",t.id||"");var n=l('<span class="l-btn-left"></span>').appendTo(a);t.text?l('<span class="l-btn-text"></span>').html(t.text).appendTo(n):l('<span class="l-btn-text l-btn-empty">&nbsp;</span>').appendTo(n),t.iconCls&&(l('<span class="l-btn-icon">&nbsp;</span>').addClass(t.iconCls).appendTo(n),n.addClass("l-btn-icon-"+t.iconAlign)),a.unbind(".linkbutton").bind("focus.linkbutton",function(){t.disabled||l(this).addClass("l-btn-focus")}).bind("blur.linkbutton",function(){l(this).removeClass("l-btn-focus")}).bind("click.linkbutton",function(){t.disabled||(t.toggle&&(t.selected?l(this).linkbutton("unselect"):l(this).linkbutton("select")),t.onClick.call(this))}),i(e,t.selected),o(e,t.disabled)}(this),a(this)}))},l.fn.linkbutton.methods={options:function(e){return l.data(e[0],"linkbutton").options},resize:function(e,t){return e.each(function(){a(this,t)})},enable:function(e){return e.each(function(){o(this,!1)})},disable:function(e){return e.each(function(){o(this,!0)})},select:function(e){return e.each(function(){i(this,!0)})},unselect:function(e){return e.each(function(){i(this,!1)})}},l.fn.linkbutton.parseOptions=function(e){var t=l(e);return l.extend({},l.parser.parseOptions(e,["id","iconCls","iconAlign","group","size","text",{plain:"boolean",toggle:"boolean",selected:"boolean",outline:"boolean"}]),{disabled:!!t.attr("disabled")||void 0,text:l.trim(t.html())||void 0,iconCls:t.attr("icon")||t.attr("iconCls")})},l.fn.linkbutton.defaults={id:null,disabled:!1,toggle:!1,selected:!1,outline:!1,group:null,plain:!1,text:"",iconCls:null,iconAlign:"left",size:"small",onClick:function(){}}}(jQuery),function($){function _a1(_a2){var _a3=$.data(_a2,"pagination"),_a4=_a3.options,bb=_a3.bb={},_a5=$(_a2).addClass("pagination").html('<table cellspacing="0" cellpadding="0" border="0"><tr></tr></table>'),tr=_a5.find("tr"),aa=$.extend([],_a4.layout);_a4.showPageList||_a6(aa,"list"),_a4.showRefresh||_a6(aa,"refresh"),"sep"==aa[0]&&aa.shift(),"sep"==aa[aa.length-1]&&aa.pop();for(var _a7=0;_a7<aa.length;_a7++){var _a8=aa[_a7];if("list"==_a8){var ps=$('<select class="pagination-page-list"></select>');ps.bind("change",function(){_a4.pageSize=parseInt($(this).val()),_a4.onChangePageSize.call(_a2,_a4.pageSize),_ae(_a2,_a4.pageNumber)});for(var i=0;i<_a4.pageList.length;i++)$("<option></option>").text(_a4.pageList[i]).appendTo(ps);$("<td></td>").append(ps).appendTo(tr)}else"sep"==_a8?$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr):"first"==_a8?bb.first=_a9("first"):"prev"==_a8?bb.prev=_a9("prev"):"next"==_a8?bb.next=_a9("next"):"last"==_a8?bb.last=_a9("last"):"manual"==_a8?($('<span style="padding-left:6px;"></span>').html(_a4.beforePageText).appendTo(tr).wrap("<td></td>"),bb.num=$('<input class="pagination-num" type="text" value="1" size="2">').appendTo(tr).wrap("<td></td>"),bb.num.unbind(".pagination").bind("keydown.pagination",function(e){if(13==e.keyCode){var t=parseInt($(this).val())||1;return _ae(_a2,t),!1}}),bb.after=$('<span style="padding-right:6px;"></span>').appendTo(tr).wrap("<td></td>")):"refresh"==_a8?bb.refresh=_a9("refresh"):"links"==_a8&&$('<td class="pagination-links"></td>').appendTo(tr)}if(_a4.buttons)if($('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr),$.isArray(_a4.buttons))for(var i=0;i<_a4.buttons.length;i++){var btn=_a4.buttons[i];if("-"==btn)$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr);else{var td=$("<td></td>").appendTo(tr),a=$('<a href="javascript:void(0)"></a>').appendTo(td);a[0].onclick=eval(btn.handler||function(){}),a.linkbutton($.extend({},btn,{plain:!0}))}}else{var td=$("<td></td>").appendTo(tr);$(_a4.buttons).appendTo(td).show()}function _a9(e){var t=_a4.nav[e],a=$('<a href="javascript:void(0)"></a>').appendTo(tr);return a.wrap("<td></td>"),a.linkbutton({iconCls:t.iconCls,plain:!0}).unbind(".pagination").bind("click.pagination",function(){t.handler.call(_a2)}),a}function _a6(e,t){var a=$.inArray(t,e);return 0<=a&&e.splice(a,1),e}$('<div class="pagination-info"></div>').appendTo(_a5),$('<div class="pagination-selected"></div>').appendTo(_a5),$('<div style="clear:both;"></div>').appendTo(_a5)}function _ae(e,t){var a=$.data(e,"pagination").options;_b2(e,{pageNumber:t}),a.onSelectPage.call(e,a.pageNumber,a.pageSize)}function _b2(t,e){var a=$.data(t,"pagination"),n=a.options,i=a.bb;$.extend(n,e||{});var o=$(t).find("select.pagination-page-list");o.length&&(o.val(n.pageSize+""),n.pageSize=parseInt(o.val()));var r=Math.ceil(n.total/n.pageSize)||1;n.pageNumber<1&&(n.pageNumber=1),n.pageNumber>r&&(n.pageNumber=r),0==n.total&&(r=n.pageNumber=0),i.num&&i.num.val(n.pageNumber),i.after&&i.after.html(n.afterPageText.replace(/{pages}/,r));var d=$(t).find("td.pagination-links");if(d.length){d.empty();var s=n.pageNumber-Math.floor(n.links/2);s<1&&(s=1);var l=s+n.links-1;r<l&&(l=r),(s=l-n.links+1)<1&&(s=1);for(var c=s;c<=l;c++){var u=$('<a class="pagination-link" href="javascript:void(0)"></a>').appendTo(d);u.linkbutton({plain:!0,text:c}),c==n.pageNumber?u.linkbutton("select"):u.unbind(".pagination").bind("click.pagination",{pageNumber:c},function(e){_ae(t,e.data.pageNumber)})}}var f=n.displayMsg,h=isNaN(n.pageSize)?n.total:n.pageSize;f=(f=(f=f.replace(/{from}/,0==n.total?0:h*(n.pageNumber-1)+1)).replace(/{to}/,Math.min(h*n.pageNumber,n.total))).replace(/{total}/,n.total),$(t).find("div.pagination-info").html(f),i.first&&i.first.linkbutton({disabled:!n.total||1==n.pageNumber}),i.prev&&i.prev.linkbutton({disabled:!n.total||1==n.pageNumber}),i.next&&i.next.linkbutton({disabled:n.pageNumber==r}),i.last&&i.last.linkbutton({disabled:n.pageNumber==r}),_bb(t,n.loading)}function _bb(e,t){var a=$.data(e,"pagination"),n=a.options;n.loading=t,n.showRefresh&&a.bb.refresh&&a.bb.refresh.linkbutton({iconCls:n.loading?"pagination-loading":"pagination-load"})}$.fn.pagination=function(a,e){return"string"==typeof a?$.fn.pagination.methods[a](this,e):(a=a||{},this.each(function(){var e,t=$.data(this,"pagination");t?e=$.extend(t.options,a):(e=$.extend({},$.fn.pagination.defaults,$.fn.pagination.parseOptions(this),a),$.data(this,"pagination",{options:e})),_a1(this),_b2(this)}))},$.fn.pagination.methods={options:function(e){return $.data(e[0],"pagination").options},loading:function(e){return e.each(function(){_bb(this,!0)})},loaded:function(e){return e.each(function(){_bb(this,!1)})},refresh:function(e,t){return e.each(function(){_b2(this,t)})},select:function(e,t){return e.each(function(){_ae(this,t)})}},$.fn.pagination.parseOptions=function(_c6){var t=$(_c6);return $.extend({},$.parser.parseOptions(_c6,[{total:"number",pageSize:"number",pageNumber:"number",links:"number"},{loading:"boolean",showPageList:"boolean",showRefresh:"boolean"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0})},$.fn.pagination.defaults={total:1,pageSize:10,pageNumber:1,pageList:[10,20,30,50],loading:!1,buttons:null,showPageList:!0,showRefresh:!0,links:10,layout:["list","sep","first","prev","sep","manual","sep","next","last","sep","refresh"],onSelectPage:function(e,t){},onBeforeRefresh:function(e,t){},onRefresh:function(e,t){},onChangePageSize:function(e){},beforePageText:"Page",afterPageText:"of {pages}",displayMsg:"Displaying {from} to {to} of {total} items",nav:{first:{iconCls:"pagination-first",handler:function(){1<$(this).pagination("options").pageNumber&&$(this).pagination("select",1)}},prev:{iconCls:"pagination-prev",handler:function(){var e=$(this).pagination("options");1<e.pageNumber&&$(this).pagination("select",e.pageNumber-1)}},next:{iconCls:"pagination-next",handler:function(){var e=$(this).pagination("options"),t=Math.ceil(e.total/e.pageSize);e.pageNumber<t&&$(this).pagination("select",e.pageNumber+1)}},last:{iconCls:"pagination-last",handler:function(){var e=$(this).pagination("options"),t=Math.ceil(e.total/e.pageSize);e.pageNumber<t&&$(this).pagination("select",t)}},refresh:{iconCls:"pagination-refresh",handler:function(){var e=$(this).pagination("options");0!=e.onBeforeRefresh.call(this,e.pageNumber,e.pageSize)&&($(this).pagination("select",e.pageNumber),e.onRefresh.call(this,e.pageNumber,e.pageSize))}}}}}(jQuery),function(h){function p(o){var r=h.data(o,"tree"),d=r.options,e=r.tree;function s(e,t){return h(e).closest("ul.tree").tree(t?"pop":"getData",e)}function l(e,t){h(e).draggable("proxy").find("span.tree-dnd-icon").removeClass("tree-dnd-yes tree-dnd-no").addClass(t?"tree-dnd-yes":"tree-dnd-no")}function i(t,a){function e(){var e=s(t,!0);h(o).tree("append",{parent:a,data:[e]}),d.onDrop.call(o,a,e,"append")}"closed"==_(o,a).state?u(o,a,function(){e()}):e()}function c(e,t,a){var n={};"top"==a?n.before=t:n.after=t;var i=s(e,!0);n.data=i,h(o).tree("insert",n),d.onDrop.call(o,t,i,a)}r.disabledNodes=[],d.dnd=!0,e.find("div.tree-node").draggable({disabled:!1,revert:!0,cursor:"pointer",proxy:function(e){var t=h('<div class="tree-node-proxy"></div>').appendTo("body");return opts.showFolderIcon&&t.html('<span class="tree-dnd-icon tree-dnd-no">&nbsp;</span>'+h(e).find(".tree-title").html()),t.hide(),t},deltaX:15,deltaY:15,onBeforeDrag:function(e){if(0==d.onBeforeDrag.call(o,_(o,this)))return!1;if(h(e.target).hasClass("tree-hit")||h(e.target).hasClass("tree-checkbox"))return!1;if(1!=e.which)return!1;var t=h(this).find("span.tree-indent");t.length&&(e.data.offsetWidth-=t.length*t.width())},onStartDrag:function(e){h(this).next("ul").find("div.tree-node").each(function(){h(this).droppable("disable"),r.disabledNodes.push(this)}),h(this).draggable("proxy").css({left:-1e4,top:-1e4}),d.onStartDrag.call(o,_(o,this));var t=_(o,this);null==t.id&&(t.id="easyui_tree_node_id_temp",v(o,t)),r.draggingNodeId=t.id},onDrag:function(e){var t=e.pageX,a=e.pageY,n=e.data.startX,i=e.data.startY;3<Math.sqrt((t-n)*(t-n)+(a-i)*(a-i))&&h(this).draggable("proxy").show(),this.pageY=e.pageY},onStopDrag:function(){for(var e=0;e<r.disabledNodes.length;e++)h(r.disabledNodes[e]).droppable("enable");r.disabledNodes=[];var t=n(o,r.draggingNodeId);t&&"easyui_tree_node_id_temp"==t.id&&(t.id="",v(o,t)),d.onStopDrag.call(o,t)}}).droppable({accept:"div.tree-node",onDragEnter:function(e,t){0==d.onDragEnter.call(o,this,s(t))&&(l(t,!1),h(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),h(this).droppable("disable"),r.disabledNodes.push(this))},onDragOver:function(e,t){if(!h(this).droppable("options").disabled){var a=t.pageY,n=h(this).offset().top,i=n+h(this).outerHeight();l(t,!0),h(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),n+(i-n)/2<a?i-a<5?h(this).addClass("tree-node-bottom"):h(this).addClass("tree-node-append"):a-n<5?h(this).addClass("tree-node-top"):h(this).addClass("tree-node-append"),0==d.onDragOver.call(o,this,s(t))&&(l(t,!1),h(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),h(this).droppable("disable"),r.disabledNodes.push(this))}},onDragLeave:function(e,t){l(t,!1),h(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),d.onDragLeave.call(o,this,s(t))},onDrop:function(e,t){var a,n;n=h(this).hasClass("tree-node-append")?(a=i,"append"):(a=c,h(this).hasClass("tree-node-top")?"top":"bottom"),0!=d.onBeforeDrop.call(o,this,s(t),n)&&a(t,this,n),h(this).removeClass("tree-node-append tree-node-top tree-node-bottom")}})}function g(r,e,t){var i=h.data(r,"tree").options;if(i.checkbox){var a=_(r,e);if(null==t){var n=h(e).find(".tree-checkbox");t=!n.hasClass("tree-checkbox1")&&(!!n.hasClass("tree-checkbox0")||(null==a._checked&&(a._checked=h(e).find(".tree-checkbox").hasClass("tree-checkbox1")),!a._checked))}a._checked=t,0!=i.onBeforeCheck.call(r,a,t)&&(i.cascadeCheck?(function(e,t){if(i.deepCheck){var a=h("#"+e.domId),n=t?"1":"0";d(a,n),d(a.next(),n)}else o(e,t),y(e.children||[],function(e){o(e,t)})}(a,t),function e(t,a){var n=h("#"+t.domId);var i=x(r,n[0]);if(i){var o="";o=s(n,!0)?"1":s(n,!1)?"0":"2",d(h(i.target),o),e(i,a)}}(a,t)):d(h(a.target),t?"1":"0"),i.onCheck.call(r,a,t))}function d(e,t){var a=e.find(".tree-checkbox");a.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),a.addClass("tree-checkbox"+t)}function o(e,t){if(!e.hidden){var a="tree-checkbox"+(t?"1":"0"),n=h("#"+e.domId);if(d(n,t?"1":"0"),e.children)for(var i=0;i<e.children.length;i++)if(e.children[i].hidden&&!h("#"+e.children[i].domId).find("."+a).length){d(n,"2");for(var o=x(r,n[0]);o;)d(h(o.target),"2"),o=x(r,o[0]);return}}}function s(e,t){var a="tree-checkbox"+(t?"1":"0");if(e.find(".tree-checkbox").hasClass(a)){var n=!0;return e.parent().siblings().each(function(){var e=h(this).children("div.tree-node").children(".tree-checkbox");if(e.length&&!e.hasClass(a))return n=!1}),n}}}function d(e,t){var a=h.data(e,"tree").options;if(a.checkbox){var n=h(t);if($(0,t)){(i=n.find(".tree-checkbox")).length?i.hasClass("tree-checkbox1")?g(e,t,!0):g(e,t,!1):a.onlyLeafCheck&&h('<span class="tree-checkbox tree-checkbox0"></span>').insertBefore(n.find(".tree-title"))}else{var i=n.find(".tree-checkbox");if(a.onlyLeafCheck)i.remove();else if(i.hasClass("tree-checkbox1"))g(e,t,!0);else if(i.hasClass("tree-checkbox2")){for(var o=!0,r=!0,d=m(e,t),s=0;s<d.length;s++)d[s].checked?r=!1:o=!1;o&&g(e,t,!0),r&&g(e,t,!1)}}}}function s(e,t,a,n){var i=h.data(e,"tree"),o=i.options,r=h(t).prevAll("div.tree-node:first");a=o.loadFilter.call(e,a,r[0]);var d=w(e,"domId",r.attr("id"));n?d?d.children?d.children=d.children.concat(a):d.children=a:i.data=i.data.concat(a):(d?d.children=a:i.data=a,h(t).empty()),o.view.render.call(o.view,e,t,a),o.dnd&&p(e),d&&v(e,d);for(var s=[],l=[],c=0;c<a.length;c++){var u=a[c];u.checked||s.push(u)}y(a,function(e){e.checked&&l.push(e)});var f=o.onCheck;o.onCheck=function(){},s.length&&g(e,h("#"+s[0].domId)[0],!1);for(c=0;c<l.length;c++)g(e,h("#"+l[c].domId)[0],!0);o.onCheck=f,setTimeout(function(){b(e,e)},0),o.onLoadSuccess.call(e,d,a)}function b(i,e,o){if(h.data(i,"tree").options.lines){if(h(i).addClass("tree-lines"),!o){o=!0,h(i).find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),h(i).find("div.tree-node").removeClass("tree-node-last tree-root-first tree-root-one");var t=h(i).tree("getRoots");1<t.length?h(t[0].target).addClass("tree-root-first"):1==t.length&&h(t[0].target).addClass("tree-root-one")}h(e).children("li").each(function(){var e,t,a=h(this).children("div.tree-node"),n=a.next("ul");n.length?(h(this).next().length&&(t=(e=a).find("span.tree-indent, span.tree-hit").length,e.next().find("div.tree-node").each(function(){h(this).children("span:eq("+(t-1)+")").addClass("tree-line")})),b(i,n,o)):a.find("span.tree-icon").prev("span.tree-indent").addClass("tree-join")}),h(e).children("li:last").children("div.tree-node").addClass("tree-node-last").children("span.tree-join").removeClass("tree-join").addClass("tree-joinbottom")}else h(i).removeClass("tree-lines")}function l(t,a,e,n){var i=h.data(t,"tree").options;e=h.extend({},i.queryParams,e||{});var o=null;if(t!=a){var r=h(a).prev();o=_(t,r[0])}if(0!=i.onBeforeLoad.call(t,o,e)){var d=h(a).prev().children("span.tree-folder");d.addClass("tree-loading"),0==i.loader.call(t,e,function(e){d.removeClass("tree-loading"),s(t,a,e),n&&n()},function(){d.removeClass("tree-loading"),i.onLoadError.apply(t,arguments),n&&n()})&&d.removeClass("tree-loading")}}function u(e,t,a){var n=h.data(e,"tree").options,i=h(t).children("span.tree-hit");if(0!=i.length&&!i.hasClass("tree-expanded")){var o=_(e,t);if(0!=n.onBeforeExpand.call(e,o)){i.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),n.showFolderIcon&&i.next().addClass("tree-folder-open");var r=h(t).next();if(r.length)n.animate?r.slideDown("normal",function(){o.state="open",n.onExpand.call(e,o),a&&a()}):(r.css("display","block"),o.state="open",n.onExpand.call(e,o),a&&a());else{var d=h('<ul style="display:none"></ul>').insertAfter(t);l(e,d[0],{id:o.id},function(){d.is(":empty")&&d.remove(),n.animate?d.slideDown("normal",function(){o.state="open",n.onExpand.call(e,o),a&&a()}):(d.css("display","block"),o.state="open",n.onExpand.call(e,o),a&&a())})}}}}function i(e,t){var a=h.data(e,"tree").options,n=h(t).children("span.tree-hit");if(0!=n.length&&!n.hasClass("tree-collapsed")){var i=_(e,t);if(0!=a.onBeforeCollapse.call(e,i)){n.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),n.next().removeClass("tree-folder-open");var o=h(t).next();a.animate?o.slideUp("normal",function(){i.state="closed",a.onCollapse.call(e,i)}):(o.css("display","none"),i.state="closed",a.onCollapse.call(e,i))}}}function c(e,t){var a=h(t).children("span.tree-hit");0!=a.length&&(a.hasClass("tree-expanded")?i:u)(e,t)}function f(e,t){var a=h(t.parent),n=t.data;if(n&&(n=h.isArray(n)?n:[n]).length){var i;if(0==a.length)i=h(e);else{if($(0,a[0])){var o=a.find("span.tree-icon");o.removeClass("tree-file").addClass("tree-folder tree-folder-open");var r=h('<span class="tree-hit tree-expanded"></span>').insertBefore(o);r.prev().length&&r.prev().remove()}(i=a.next()).length||(i=h("<ul></ul>").insertAfter(a))}s(e,i[0],n,!0),d(e,i.prev())}}function a(o,e){var t=function(e){for(var t=h(e).attr("id"),a=x(o,e),n=a?a.children:h.data(o,"tree").data,i=0;i<n.length;i++)if(n[i].domId==t){n.splice(i,1);break}return a}(e);if(h(e).parent().remove(),t){if(!t.children||!t.children.length){var a=h(t.target);a.find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),a.find(".tree-hit").remove(),h('<span class="tree-indent"></span>').prependTo(a),a.next().remove()}v(o,t),d(o,t.target)}b(o,o)}function v(e,t){var a=h.data(e,"tree").options,n=h(t.target),i=_(e,t.target),o=i.checked;i.iconCls&&n.find(".tree-icon").removeClass(i.iconCls),h.extend(i,t),n.find(".tree-title").html(a.formatter.call(e,i)),i.iconCls&&n.find(".tree-icon").addClass(i.iconCls),o!=i.checked&&g(e,t.target,i.checked)}function o(e){for(var t=h.data(e,"tree").data,a=0;a<t.length;a++)r(t[a]);return t}function m(e,t){var a=[],n=_(e,t);return y(n?n.children||[]:h.data(e,"tree").data,function(e){a.push(r(e))}),a}function x(e,t){return _(e,h(t).closest("ul").prevAll("div.tree-node:first")[0])}function _(e,t){return w(e,"domId",h(t).attr("id"))}function n(e,t){return w(e,"id",t)}function w(e,t,a){var n=h.data(e,"tree").data,i=null;return y(n,function(e){if(e[t]==a)return i=r(e),!1}),i}function r(e){var t=h("#"+e.domId);return e.target=t[0],e.checked=t.find(".tree-checkbox").hasClass("tree-checkbox1"),e}function y(e,t){for(var a=[],n=0;n<e.length;n++)a.push(e[n]);for(;a.length;){var i=a.shift();if(0==t(i))return;if(i.children)for(n=i.children.length-1;0<=n;n--)a.unshift(i.children[n])}}function C(e,t){var a=h.data(e,"tree").options,n=_(e,t);0!=a.onBeforeSelect.call(e,n)&&(h(e).find("div.tree-node-selected").removeClass("tree-node-selected"),h(t).addClass("tree-node-selected"),a.onSelect.call(e,n))}function $(e,t){return 0==h(t).children("span.tree-hit").length}function k(e,t){var a=h.data(e,"tree").options;h(t).css("position","");var n=h(t).find("input.tree-editor"),i=n.val();n.remove();var o=_(e,t);o.text=i,v(e,o),a.onAfterEdit.call(e,o)}function F(e,t){var a=h.data(e,"tree").options;h(t).css("position",""),h(t).find("input.tree-editor").remove();var n=_(e,t);v(e,n),a.onCancelEdit.call(e,n)}h.fn.tree=function(r,e){if("string"==typeof r)return h.fn.tree.methods[r](this,e);r=r||{};return this.each(function(){var e,t,n,i,a=h.data(this,"tree");if(a)e=h.extend(a.options,r),a.options=e;else{e=h.extend({},h.fn.tree.defaults,h.fn.tree.parseOptions(this),r),h.data(this,"tree",{options:e,tree:((t=h(this)).addClass("tree"),t),data:[]});var o=h.fn.tree.parseData(this);o.length&&s(this,this,o)}n=this,i=h.data(n,"tree").options,h(n).unbind().bind("mouseover",function(e){var t=h(e.target),a=t.closest("div.tree-node");a.length&&(a.addClass("tree-node-hover"),t.hasClass("tree-hit")&&(t.hasClass("tree-expanded")?t.addClass("tree-expanded-hover"):t.addClass("tree-collapsed-hover")),e.stopPropagation())}).bind("mouseout",function(e){var t=h(e.target),a=t.closest("div.tree-node");a.length&&(a.removeClass("tree-node-hover"),t.hasClass("tree-hit")&&(t.hasClass("tree-expanded")?t.removeClass("tree-expanded-hover"):t.removeClass("tree-collapsed-hover")),e.stopPropagation())}).bind("click",function(e){var t=h(e.target),a=t.closest("div.tree-node");if(a.length){if(t.hasClass("tree-hit"))return c(n,a[0]),!1;if(t.hasClass("tree-checkbox"))return g(n,a[0]),!1;C(n,a[0]),i.onClick.call(n,_(n,a[0])),e.stopPropagation()}}).bind("dblclick",function(e){var t=h(e.target).closest("div.tree-node");t.length&&(C(n,t[0]),i.onDblClick.call(n,_(n,t[0])),e.stopPropagation())}).bind("contextmenu",function(e){var t=h(e.target).closest("div.tree-node");t.length&&(i.onContextMenu.call(n,e,_(n,t[0])),e.stopPropagation())}),e.data&&s(this,this,h.extend(!0,[],e.data)),l(this,this)})},h.fn.tree.methods={options:function(e){return h.data(e[0],"tree").options},loadData:function(e,t){return e.each(function(){s(this,this,t)})},getNode:function(e,t){return _(e[0],t)},getData:function(e,t){return a=e[0],(n=_(a,t))&&n.children&&y(n.children,function(e){r(e)}),n;var a,n},reload:function(e,t){return e.each(function(){if(t){var e=h(t);e.children("span.tree-hit").removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),e.next().remove(),u(this,t)}else h(this).empty(),l(this,this)})},getRoot:function(e,t){return function(e,t){if(t){for(var a=x(e,t);a;)a=x(e,t=a.target);return _(e,t)}var n=o(e);return n.length?n[0]:null}(e[0],t)},getRoots:function(e){return o(e[0])},getParent:function(e,t){return x(e[0],t)},getChildren:function(e,t){return m(e[0],t)},getChecked:function(e,t){return function(t,e){e=e||"checked",h.isArray(e)||(e=[e]);for(var a=[],n=0;n<e.length;n++){var i=e[n];"checked"==i?a.push("span.tree-checkbox1"):"unchecked"==i?a.push("span.tree-checkbox0"):"indeterminate"==i&&a.push("span.tree-checkbox2")}var o=[];return h(t).find(a.join(",")).each(function(){var e=h(this).parent();o.push(_(t,e[0]))}),o}(e[0],t)},getSelected:function(e){return t=e[0],(a=h(t).find("div.tree-node-selected")).length?_(t,a[0]):null;var t,a},isLeaf:function(e,t){return $(e[0],t)},find:function(e,t){return n(e[0],t)},select:function(e,t){return e.each(function(){C(this,t)})},check:function(e,t){return e.each(function(){g(this,t,!0)})},uncheck:function(e,t){return e.each(function(){g(this,t,!1)})},collapse:function(e,t){return e.each(function(){i(this,t)})},expand:function(e,t){return e.each(function(){u(this,t)})},collapseAll:function(e,t){return e.each(function(){!function(e,t){var a=m(e,t);t&&a.unshift(_(e,t));for(var n=0;n<a.length;n++)i(e,a[n].target)}(this,t)})},expandAll:function(e,t){return e.each(function(){!function(e,t){var a=m(e,t);t&&a.unshift(_(e,t));for(var n=0;n<a.length;n++)u(e,a[n].target)}(this,t)})},expandTo:function(e,t){return e.each(function(){!function(e,t){for(var a=[],n=x(e,t);n;)a.unshift(n),n=x(e,n.target);for(var i=0;i<a.length;i++)u(e,a[i].target)}(this,t)})},scrollTo:function(e,t){return e.each(function(){!function(e,t){for(var a=h(e).parent();"BODY"!=a[0].tagName&&"auto"!=a.css("overflow-y");)a=a.parent();var n=h(t),i=n.offset().top;if("BODY"!=a[0].tagName){var o=a.offset().top;i<o?a.scrollTop(a.scrollTop()+i-o):i+n.outerHeight()>o+a.outerHeight()-18&&a.scrollTop(a.scrollTop()+i+n.outerHeight()-o-a.outerHeight()+18)}else a.scrollTop(i)}(this,t)})},toggle:function(e,t){return e.each(function(){c(this,t)})},append:function(e,t){return e.each(function(){f(this,t)})},insert:function(e,t){return e.each(function(){!function(e,t){var a=t.before||t.after,n=x(e,a),i=t.data;if(i&&(i=h.isArray(i)?i:[i]).length){f(e,{parent:n?n.target:null,data:i});for(var o=n?n.children:h(e).tree("getRoots"),r=0;r<o.length;r++)if(o[r].domId==h(a).attr("id")){for(var d=i.length-1;0<=d;d--)o.splice(t.before?r:r+1,0,i[d]);o.splice(o.length-i.length,i.length);break}var s=h();for(r=0;r<i.length;r++)s=s.add(h("#"+i[r].domId).parent());t.before?s.insertBefore(h(a).parent()):s.insertAfter(h(a).parent())}}(this,t)})},remove:function(e,t){return e.each(function(){a(this,t)})},pop:function(e,t){var a=e.tree("getData",t);return e.tree("remove",t),a},update:function(e,t){return e.each(function(){v(this,t)})},enableDnd:function(e){return e.each(function(){p(this)})},disableDnd:function(e){return e.each(function(){!function(e){h.data(e,"tree").options.dnd=!1;var t=h(e).find("div.tree-node");t.draggable("disable"),t.css("cursor","pointer")}(this)})},beginEdit:function(e,t){return e.each(function(){!function(t,a){var e=h.data(t,"tree").options,n=_(t,a);if(0!=e.onBeforeEdit.call(t,n)){h(a).css("position","relative");var i=h(a).find(".tree-title"),o=i.outerWidth();i.empty();var r=h('<input class="tree-editor">').appendTo(i);r.val(n.text).focus(),r.width(o+20),r.height("CSS1Compat"==document.compatMode?18-(r.outerHeight()-r.height()):18),r.bind("click",function(e){return!1}).bind("mousedown",function(e){e.stopPropagation()}).bind("mousemove",function(e){e.stopPropagation()}).bind("keydown",function(e){return 13==e.keyCode?(k(t,a),!1):27==e.keyCode?(F(t,a),!1):void 0}).bind("blur",function(e){e.stopPropagation(),k(t,a)})}}(this,t)})},endEdit:function(e,t){return e.each(function(){k(this,t)})},cancelEdit:function(e,t){return e.each(function(){F(this,t)})},doFilter:function(e,t){return e.each(function(){!function(a,t){var e=h.data(a,"tree"),n=e.options,i={};for(var o in y(e.data,function(e){n.filter.call(a,t,e)?(h("#"+e.domId).removeClass("tree-node-hidden"),i[e.domId]=1,e.hidden=!1):(h("#"+e.domId).addClass("tree-node-hidden"),e.hidden=!0)}),i)r(o);function r(e){for(var t=h(a).tree("getParent",h("#"+e)[0]);t;)h(t.target).removeClass("tree-node-hidden"),t.hidden=!1,t=h(a).tree("getParent",t.target)}}(this,t)})}},h.fn.tree.parseOptions=function(e){h(e);return h.extend({},h.parser.parseOptions(e,["url","method",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean",lines:"boolean",dnd:"boolean"}]))},h.fn.tree.parseData=function(e){var t=[];return function n(i,e){e.children("li").each(function(){var e=h(this),t=h.extend({},h.parser.parseOptions(this,["id","iconCls","state"]),{checked:!!e.attr("checked")||void 0});t.text=e.children("span").html(),t.text||(t.text=e.html());var a=e.children("ul");a.length&&(t.children=[],n(t.children,a)),i.push(t)})}(t,h(e)),t};var S=1,e={render:function(l,e,t){var c=h.data(l,"tree").options,a=function e(t,a){var n=[];for(var i=0;i<a.length;i++){var o=a[i];"open"!=o.state&&"closed"!=o.state&&(o.state="open"),o.domId="_easyui_tree_"+S++,n.push("<li>"),n.push('<div id="'+o.domId+'" class="tree-node">');for(var r=0;r<t;r++)n.push('<span class="tree-indent"></span>');var d=!1;if("closed"==o.state?(n.push('<span class="tree-hit tree-collapsed"></span>'),c.showFolderIcon&&n.push('<span class="tree-icon tree-folder '+(o.iconCls?o.iconCls:"")+'"></span>')):o.children&&o.children.length?(n.push('<span class="tree-hit tree-expanded"></span>'),c.showFolderIcon&&n.push('<span class="tree-icon tree-folder tree-folder-open '+(o.iconCls?o.iconCls:"")+'"></span>')):(n.push('<span class="tree-indent"></span>'),c.showFolderIcon&&n.push('<span class="tree-icon tree-file '+(o.iconCls?o.iconCls:"")+'"></span>'),d=!0),c.checkbox&&(c.onlyLeafCheck&&!d||n.push('<span class="tree-checkbox tree-checkbox0"></span>')),n.push('<span class="tree-title">'+c.formatter.call(l,o)+"</span>"),n.push("</div>"),o.children&&o.children.length){var s=e(t+1,o.children);n.push('<ul style="display:'+("closed"==o.state?"none":"block")+'">'),(n=n.concat(s)).push("</ul>")}n.push("</li>")}return n}(h(e).prev("div.tree-node").find("span.tree-indent, span.tree-hit").length,t);h(e).append(a.join(""))}};h.fn.tree.defaults={url:null,method:"post",animate:!1,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,showFolderIcon:!1,lines:!1,dnd:!1,data:null,queryParams:{},formatter:function(e){return e.text},filter:function(e,t){return 0<=t.text.toLowerCase().indexOf(e.toLowerCase())},loader:function(e,t,a){var n=h(this).tree("options");if(!n.url)return!1;h.ajax({type:n.method,url:n.url,data:e,dataType:"json",success:function(e){t(e)},error:function(){a.apply(this,arguments)}})},loadFilter:function(e,t){return e},view:e,onBeforeLoad:function(e,t){},onLoadSuccess:function(e,t){},onLoadError:function(){},onClick:function(e){},onDblClick:function(e){},onBeforeExpand:function(e){},onExpand:function(e){},onBeforeCollapse:function(e){},onCollapse:function(e){},onBeforeCheck:function(e,t){},onCheck:function(e,t){},onBeforeSelect:function(e){},onSelect:function(e){},onContextMenu:function(e,t){},onBeforeDrag:function(e){},onStartDrag:function(e){},onStopDrag:function(e){},onDragEnter:function(e,t){},onDragOver:function(e,t){},onDragLeave:function(e,t){},onBeforeDrop:function(e,t,a){},onDrop:function(e,t,a){},onBeforeEdit:function(e){},onAfterEdit:function(e){},onCancelEdit:function(e){}}}(jQuery),function(i){function n(e,t){var a=i.data(e,"progressbar").options,n=i.data(e,"progressbar").bar;t&&(a.width=t),n._size(a),n.find("div.progressbar-text").css("width",n.width()),n.find("div.progressbar-text,div.progressbar-value").css({height:n.height()+"px",lineHeight:n.height()+"px"})}i.fn.progressbar=function(t,e){if("string"==typeof t){var a=i.fn.progressbar.methods[t];if(a)return a(this,e)}return t=t||{},this.each(function(){var a,e=i.data(this,"progressbar");e?i.extend(e.options,t):e=i.data(this,"progressbar",{options:i.extend({},i.fn.progressbar.defaults,i.fn.progressbar.parseOptions(this),t),bar:(i(a=this).addClass("progressbar"),i(a).html('<div class="progressbar-text"></div><div class="progressbar-value"><div class="progressbar-text"></div></div>'),i(a).bind("_resize",function(e,t){return(i(this).hasClass("easyui-fluid")||t)&&n(a),!1}),i(a))}),i(this).progressbar("setValue",e.options.value),n(this)})},i.fn.progressbar.methods={options:function(e){return i.data(e[0],"progressbar").options},resize:function(e,t){return e.each(function(){n(this,t)})},getValue:function(e){return i.data(e[0],"progressbar").options.value},setValue:function(e,n){return n<0&&(n=0),100<n&&(n=100),e.each(function(){var e=i.data(this,"progressbar").options,t=e.text.replace(/{value}/,n),a=e.value;e.value=n,i(this).find("div.progressbar-value").width(n+"%"),i(this).find("div.progressbar-text").html(t),a!=n&&e.onChange.call(this,n,a)})}},i.fn.progressbar.parseOptions=function(e){return i.extend({},i.parser.parseOptions(e,["width","height","text",{value:"number"}]))},i.fn.progressbar.defaults={width:"auto",height:22,value:0,text:"{value}%",onChange:function(e,t){}}}(jQuery),function(d){function s(e){var t=d.data(e,"tooltip");t.showTimer&&(clearTimeout(t.showTimer),t.showTimer=null),t.hideTimer&&(clearTimeout(t.hideTimer),t.hideTimer=null)}function l(e,t){var a=d.data(e,"tooltip"),n=a.options;if(t&&(n.content=t),a.tip){var i="function"==typeof n.content?n.content.call(e):n.content;a.tip.children(".tooltip-content").html(i),n.onUpdate.call(e,i)}}d.fn.tooltip=function(n,e){return"string"==typeof n?d.fn.tooltip.methods[n](this,e):(n=n||{},this.each(function(){var t,a,e=d.data(this,"tooltip");e?d.extend(e.options,n):(d.data(this,"tooltip",{options:d.extend({},d.fn.tooltip.defaults,d.fn.tooltip.parseOptions(this),n)}),d(this).addClass("tooltip-f")),t=this,a=d.data(t,"tooltip").options,d(t).unbind(".tooltip").bind(a.showEvent+".tooltip",function(e){d(t).tooltip("show",e)}).bind(a.hideEvent+".tooltip",function(e){d(t).tooltip("hide",e)}).bind("mousemove.tooltip",function(e){a.trackMouse&&(a.trackMouseX=e.pageX,a.trackMouseY=e.pageY,d(t).tooltip("reposition"))}),l(this)}))},d.fn.tooltip.methods={options:function(e){return d.data(e[0],"tooltip").options},tip:function(e){return d.data(e[0],"tooltip").tip},arrow:function(e){return e.tooltip("tip").children(".tooltip-arrow-outer,.tooltip-arrow")},show:function(e,t){return e.each(function(){var n,i,e,o,r;n=this,i=t,e=d.data(n,"tooltip"),o=e.options,(r=e.tip)||(r=d('<div tabindex="-1" class="tooltip"><div class="tooltip-content"></div><div class="tooltip-arrow-outer"></div><div class="tooltip-arrow"></div></div>').appendTo("body"),e.tip=r,l(n)),s(n),e.showTimer=setTimeout(function(){d(n).tooltip("reposition"),r.show(),o.onShow.call(n,i);var e=r.children(".tooltip-arrow-outer"),t=r.children(".tooltip-arrow"),a="border-"+o.position+"-color";e.add(t).css({borderTopColor:"",borderBottomColor:"",borderLeftColor:"",borderRightColor:""}),e.css(a,r.css(a)),t.css(a,r.css("backgroundColor"))},o.showDelay)})},hide:function(e,n){return e.each(function(){var e,t,a;e=this,t=n,(a=d.data(e,"tooltip"))&&a.tip&&(s(e),a.hideTimer=setTimeout(function(){a.tip.hide(),a.options.onHide.call(e,t)},a.options.hideDelay))})},update:function(e,t){return e.each(function(){l(this,t)})},reposition:function(e){return e.each(function(){!function(i){var e=d.data(i,"tooltip");if(e&&e.tip){var o=e.options,r=e.tip,t={left:-1e5,top:-1e5};if(d(i).is(":visible"))if(t=n(o.position),"top"==o.position&&t.top<0?t=n("bottom"):"bottom"==o.position&&t.top+r._outerHeight()>d(window)._outerHeight()+d(document).scrollTop()&&(t=n("top")),t.left<0)"left"==o.position?t=n("right"):(d(i).tooltip("arrow").css("left",r._outerWidth()/2+t.left),t.left=0);else if(t.left+r._outerWidth()>d(window)._outerWidth()+d(document)._scrollLeft())if("right"==o.position)t=n("left");else{var a=t.left;t.left=d(window)._outerWidth()+d(document)._scrollLeft()-r._outerWidth(),d(i).tooltip("arrow").css("left",r._outerWidth()/2-(t.left-a))}r.css({left:t.left,top:t.top,zIndex:null!=o.zIndex?o.zIndex:d.fn.window?d.fn.window.defaults.zIndex++:""}),o.onPosition.call(i,t.left,t.top)}function n(e){var t,a;if(o.position=e||"bottom",r.removeClass("tooltip-top tooltip-bottom tooltip-left tooltip-right").addClass("tooltip-"+o.position),o.trackMouse)n=d(),t=o.trackMouseX+o.deltaX,a=o.trackMouseY+o.deltaY;else{var n=d(i);t=n.offset().left+o.deltaX,a=n.offset().top+o.deltaY}switch(o.position){case"right":t+=n._outerWidth()+12+(o.trackMouse?12:0),a-=(r._outerHeight()-n._outerHeight())/2;break;case"left":t-=r._outerWidth()+12+(o.trackMouse?12:0),a-=(r._outerHeight()-n._outerHeight())/2;break;case"top":t-=(r._outerWidth()-n._outerWidth())/2,a-=r._outerHeight()+12+(o.trackMouse?12:0);break;case"bottom":t-=(r._outerWidth()-n._outerWidth())/2,a+=n._outerHeight()+12+(o.trackMouse?12:0)}return{left:t,top:a}}}(this)})},destroy:function(e){return e.each(function(){!function(e){var t=d.data(e,"tooltip");if(t){s(e);var a=t.options;t.tip&&t.tip.remove(),a._title&&d(e).attr("title",a._title),d.removeData(e,"tooltip"),d(e).unbind(".tooltip").removeClass("tooltip-f"),a.onDestroy.call(e)}}(this)})}},d.fn.tooltip.parseOptions=function(e){var t=d(e),a=d.extend({},d.parser.parseOptions(e,["position","showEvent","hideEvent","content",{trackMouse:"boolean",deltaX:"number",deltaY:"number",showDelay:"number",hideDelay:"number"}]),{_title:t.attr("title")});return t.attr("title",""),a.content||(a.content=a._title),a},d.fn.tooltip.defaults={position:"bottom",content:null,trackMouse:!1,deltaX:0,deltaY:0,showEvent:"mouseenter",hideEvent:"mouseleave",showDelay:200,hideDelay:100,onShow:function(e){},onHide:function(e){},onUpdate:function(e){},onPosition:function(e,t){},onDestroy:function(){}}}(jQuery),function($){function _20b(e){e._remove()}function _20c(e,t){var a=$.data(e,"panel"),n=a.options,i=a.panel,o=i.children(".panel-header"),r=i.children(".panel-body"),d=i.children(".panel-footer");if(t&&$.extend(n,{width:t.width,height:t.height,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,left:t.left,top:t.top}),i._size(n),o.add(r)._outerWidth(i.width()),isNaN(parseInt(n.height))){r.css("height","");var s=$.parser.parseValue("minHeight",n.minHeight,i.parent()),l=$.parser.parseValue("maxHeight",n.maxHeight,i.parent()),c=o._outerHeight()+d._outerHeight()+i._outerHeight()-i.height();r._size("minHeight",s?s-c:""),r._size("maxHeight",l?l-c:"")}else r._outerHeight(i.height()-o._outerHeight()-d._outerHeight());i.css({height:"",minHeight:"",maxHeight:"",left:n.left,top:n.top}),n.onResize.apply(e,[n.width,n.height]),$(e).panel("doLayout")}function _215(e,t){var a=$.data(e,"panel").options,n=$.data(e,"panel").panel;t&&(null!=t.left&&(a.left=t.left),null!=t.top&&(a.top=t.top)),n.css({left:a.left,top:a.top}),a.onMove.apply(e,[a.left,a.top])}function _219(a){$(a).addClass("panel-body")._size("clear");var e=$('<div class="panel"></div>').insertBefore(a);return e[0].appendChild(a),e.bind("_resize",function(e,t){return($(this).hasClass("easyui-fluid")||t)&&_20c(a),!1}),e}function _21d(_21e){var _21f=$.data(_21e,"panel"),opts=_21f.options,_220=_21f.panel;_220.css(opts.style),_220.addClass(opts.cls),_221(),_222();var _223=$(_21e).panel("header"),body=$(_21e).panel("body"),_224=$(_21e).siblings(".panel-footer");function _221(){if(opts.noheader||!opts.title&&!opts.header)_20b(_220.children(".panel-header")),_220.children(".panel-body").addClass("panel-body-noheader");else{if(opts.header)$(opts.header).addClass("panel-header").prependTo(_220);else{var _225=_220.children(".panel-header");_225.length||(_225=$('<div class="panel-header"></div>').prependTo(_220)),$.isArray(opts.tools)||_225.find("div.panel-tool .panel-tool-a").appendTo(opts.tools),_225.empty();var _226=$('<div class="panel-title"></div>').html(opts.title).appendTo(_225);opts.iconCls&&(_226.addClass("panel-with-icon"),$('<div class="panel-icon"></div>').addClass(opts.iconCls).appendTo(_225));var tool=$('<div class="panel-tool"></div>').appendTo(_225);tool.bind("click",function(e){e.stopPropagation()}),opts.tools&&($.isArray(opts.tools)?$.map(opts.tools,function(t){_227(tool,t.iconCls,eval(t.handler))}):$(opts.tools).children().each(function(){$(this).addClass($(this).attr("iconCls")).addClass("panel-tool-a").appendTo(tool)})),opts.collapsible&&_227(tool,"panel-tool-collapse",function(){(1==opts.collapsed?_245:_238)(_21e,!0)}),opts.minimizable&&_227(tool,"panel-tool-min",function(){_24b(_21e)}),opts.maximizable&&_227(tool,"panel-tool-max",function(){(1==opts.maximized?_24e:_237)(_21e)}),opts.closable&&_227(tool,"panel-tool-close",function(){Strack.remove_task_repeat_editor(),_239(_21e)})}_220.children("div.panel-body").removeClass("panel-body-noheader")}}function _227(e,t,a){$('<a href="javascript:void(0)"></a>').addClass(t).appendTo(e).bind("click",a)}function _222(){opts.footer?($(opts.footer).addClass("panel-footer").appendTo(_220),$(_21e).addClass("panel-body-nobottom")):(_220.children(".panel-footer").remove(),$(_21e).removeClass("panel-body-nobottom"))}opts.border?(_223.removeClass("panel-header-noborder"),body.removeClass("panel-body-noborder"),_224.removeClass("panel-footer-noborder")):(_223.addClass("panel-header-noborder"),body.addClass("panel-body-noborder"),_224.addClass("panel-footer-noborder")),_223.addClass(opts.headerCls),body.addClass(opts.bodyCls),$(_21e).attr("id",opts.id||""),opts.content&&($(_21e).panel("clear"),$(_21e).html(opts.content),$.parser.parse($(_21e)))}function _229(a,e){var n=$.data(a,"panel"),i=n.options;if(t&&(i.queryParams=e),i.href&&(!n.isLoaded||!i.cache)){var t=$.extend({},i.queryParams);if(0==i.onBeforeLoad.call(a,t))return;n.isLoaded=!1,$(a).panel("clear"),i.loadingMessage&&$(a).html($('<div class="panel-loading"></div>').html(i.loadingMessage)),i.loader.call(a,t,function(e){var t=i.extractor.call(a,e);$(a).html(t),$.parser.parse($(a)),i.onLoad.apply(a,arguments),n.isLoaded=!0},function(){i.onLoadError.apply(a,arguments)})}}function _22f(e){var t=$(e);t.find(".combo-f").each(function(){$(this).combo("destroy")}),t.find(".m-btn").each(function(){$(this).menubutton("destroy")}),t.find(".s-btn").each(function(){$(this).splitbutton("destroy")}),t.find(".tooltip-f").each(function(){$(this).tooltip("destroy")}),t.children("div").each(function(){$(this)._size("unfit")}),t.empty()}function _231(e){$(e).panel("doLayout",!0)}function _233(e,t){var a=$.data(e,"panel").options,n=$.data(e,"panel").panel;if(1==t||0!=a.onBeforeOpen.call(e))if(n.stop(!0,!0),$.isFunction(a.openAnimation))a.openAnimation.call(e,i);else switch(a.openAnimation){case"slide":n.slideDown(a.openDuration,i);break;case"fade":n.fadeIn(a.openDuration,i);break;case"show":n.show(a.openDuration,i);break;default:n.show(),i()}function i(){a.closed=!1,a.minimized=!1,n.children(".panel-header").find("a.panel-tool-restore").length&&(a.maximized=!0),a.onOpen.call(e),1==a.maximized&&(a.maximized=!1,_237(e)),1==a.collapsed&&(a.collapsed=!1,_238(e)),a.collapsed||(_229(e),_231(e))}}function _239(e,t){var a=$.data(e,"panel").options,n=$.data(e,"panel").panel;if(1==t||0!=a.onBeforeClose.call(e))if(n.stop(!0,!0),n._size("unfit"),$.isFunction(a.closeAnimation))a.closeAnimation.call(e,i);else switch(a.closeAnimation){case"slide":n.slideUp(a.closeDuration,i);break;case"fade":n.fadeOut(a.closeDuration,i);break;case"hide":n.hide(a.closeDuration,i);break;default:n.hide(),i()}function i(){a.closed=!0,a.onClose.call(e)}}function _23d(e,t){var a=$.data(e,"panel"),n=a.options,i=a.panel;1!=t&&0==n.onBeforeDestroy.call(e)||($(e).panel("clear").panel("clear","footer"),_20b(i),n.onDestroy.call(e))}function _238(e,t){var a=$.data(e,"panel").options,n=$.data(e,"panel").panel,i=n.children(".panel-body"),o=n.children(".panel-header").find("a.panel-tool-collapse");1!=a.collapsed&&(i.stop(!0,!0),0!=a.onBeforeCollapse.call(e)&&(o.addClass("panel-tool-expand"),1==t?i.slideUp("normal",function(){a.collapsed=!0,a.onCollapse.call(e)}):(i.hide(),a.collapsed=!0,a.onCollapse.call(e))))}function _245(e,t){var a=$.data(e,"panel").options,n=$.data(e,"panel").panel,i=n.children(".panel-body"),o=n.children(".panel-header").find("a.panel-tool-collapse");0!=a.collapsed&&(i.stop(!0,!0),0!=a.onBeforeExpand.call(e)&&(o.removeClass("panel-tool-expand"),1==t?i.slideDown("normal",function(){a.collapsed=!1,a.onExpand.call(e),_229(e),_231(e)}):(i.show(),a.collapsed=!1,a.onExpand.call(e),_229(e),_231(e))))}function _237(e){var t=$.data(e,"panel").options,a=$.data(e,"panel").panel.children(".panel-header").find("a.panel-tool-max");1!=t.maximized&&(a.addClass("panel-tool-restore"),$.data(e,"panel").original||($.data(e,"panel").original={width:t.width,height:t.height,left:t.left,top:t.top,fit:t.fit}),t.left=0,t.top=0,t.fit=!0,_20c(e),t.minimized=!1,t.maximized=!0,t.onMaximize.call(e))}function _24b(e){var t=$.data(e,"panel").options,a=$.data(e,"panel").panel;a._size("unfit"),a.hide(),t.minimized=!0,t.maximized=!1,t.onMinimize.call(e)}function _24e(e){var t=$.data(e,"panel").options,a=$.data(e,"panel").panel,n=a.children(".panel-header").find("a.panel-tool-max");0!=t.maximized&&(a.show(),n.removeClass("panel-tool-restore"),$.extend(t,$.data(e,"panel").original),_20c(e),t.minimized=!1,t.maximized=!1,$.data(e,"panel").original=null,t.onRestore.call(e))}function _251(e,t){$.data(e,"panel").options.title=t,$(e).panel("header").find("div.panel-title").html(t)}$.fn._remove=function(){return this.each(function(){$(this).remove();try{this.outerHTML=""}catch(e){}})};var _254=null;$(window).unbind(".panel").bind("resize.panel",function(){_254&&clearTimeout(_254),_254=setTimeout(function(){var e=$("body.layout");e.length?(e.layout("resize"),$("body").children(".easyui-fluid:visible").each(function(){$(this).triggerHandler("_resize")})):$("body").panel("doLayout"),_254=null},100)}),$.fn.panel=function(a,e){return"string"==typeof a?$.fn.panel.methods[a](this,e):(a=a||{},this.each(function(){var e,t=$.data(this,"panel");t?(e=$.extend(t.options,a),t.isLoaded=!1):(e=$.extend({},$.fn.panel.defaults,$.fn.panel.parseOptions(this),a),$(this).attr("title",""),t=$.data(this,"panel",{options:e,panel:_219(this),isLoaded:!1})),_21d(this),1==e.doSize&&(t.panel.css("display","block"),_20c(this)),1==e.closed||1==e.minimized?t.panel.hide():_233(this)}))},$.fn.panel.methods={options:function(e){return $.data(e[0],"panel").options},panel:function(e){return $.data(e[0],"panel").panel},header:function(e){return $.data(e[0],"panel").panel.children(".panel-header")},footer:function(e){return e.panel("panel").children(".panel-footer")},body:function(e){return $.data(e[0],"panel").panel.children(".panel-body")},setTitle:function(e,t){return e.each(function(){_251(this,t)})},open:function(e,t){return e.each(function(){_233(this,t)})},close:function(e,t){return e.each(function(){_239(this,t)})},destroy:function(e,t){return e.each(function(){_23d(this,t)})},clear:function(e,t){return e.each(function(){_22f("footer"==t?$(this).panel("footer"):this)})},refresh:function(e,t){return e.each(function(){var e=$.data(this,"panel");e.isLoaded=!1,t&&("string"==typeof t?e.options.href=t:e.options.queryParams=t),_229(this)})},resize:function(e,t){return e.each(function(){_20c(this,t)})},doLayout:function(e,t){return e.each(function(){function e(n,i){if(n){var o=n==$("body")[0];$(n).find("div.panel:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible,.easyui-fluid:visible").filter(function(e,t){var a=$(t).parents(".panel-"+i+":first");return o?0==a.length:a[0]==n}).each(function(){$(this).triggerHandler("_resize",[t||!1])})}}e(this,"body"),e($(this).siblings(".panel-footer")[0],"footer")})},move:function(e,t){return e.each(function(){_215(this,t)})},maximize:function(e){return e.each(function(){_237(this)})},minimize:function(e){return e.each(function(){_24b(this)})},restore:function(e){return e.each(function(){_24e(this)})},collapse:function(e,t){return e.each(function(){_238(this,t)})},expand:function(e,t){return e.each(function(){_245(this,t)})}},$.fn.panel.parseOptions=function(e){var t=$(e),a=t.children(".panel-header,header"),n=t.children(".panel-footer,footer");return $.extend({},$.parser.parseOptions(e,["id","width","height","left","top","title","iconCls","cls","headerCls","bodyCls","tools","href","method","header","footer",{cache:"boolean",fit:"boolean",border:"boolean",noheader:"boolean"},{collapsible:"boolean",minimizable:"boolean",maximizable:"boolean"},{closable:"boolean",collapsed:"boolean",minimized:"boolean",maximized:"boolean",closed:"boolean"},"openAnimation","closeAnimation",{openDuration:"number",closeDuration:"number"}]),{loadingMessage:null!=t.attr("loadingMessage")?t.attr("loadingMessage"):void 0,header:a.length?a.removeClass("panel-header"):void 0,footer:n.length?n.removeClass("panel-footer"):void 0})},$.fn.panel.defaults={id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:!0,fit:!1,border:!0,doSize:!0,noheader:!1,content:null,collapsible:!1,minimizable:!1,maximizable:!1,closable:!1,collapsed:!1,minimized:!1,maximized:!1,closed:!1,openAnimation:!1,openDuration:400,closeAnimation:!1,closeDuration:400,tools:null,footer:null,header:null,queryParams:{},method:"get",loadingMessage:"Loading...",loader:function(e,t,a){var n=$(this).panel("options");if(!n.href)return!1;$.ajax({type:n.method,url:n.href,cache:!1,data:e,dataType:"html",success:function(e){t(e)},error:function(){a.apply(this,arguments)}})},extractor:function(e){var t=/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(e);return t?t[1]:e},onBeforeLoad:function(e){},onLoad:function(){},onLoadError:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(e,t){},onMove:function(e,t){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}}}(jQuery),function(r){function d(e,t){var a=r.data(e,"window");t&&(null!=t.left&&(a.options.left=t.left),null!=t.top&&(a.options.top=t.top)),r(e).panel("move",a.options),a.shadow&&a.shadow.css({left:a.options.left,top:a.options.top})}function s(e,t){var a=r.data(e,"window").options,n=r(e).window("panel"),i=n._outerWidth();if(a.inline){var o=n.parent();a.left=Math.ceil((o.width()-i)/2+o.scrollLeft())}else a.left=Math.ceil((r(window)._outerWidth()-i)/2+r(document).scrollLeft());t&&d(e)}function l(e,t){var a=r.data(e,"window").options,n=r(e).window("panel"),i=n._outerHeight();if(a.inline){var o=n.parent();a.top=Math.ceil((o.height()-i)/2+o.scrollTop())}else a.top=Math.ceil((r(window)._outerHeight()-i)/2+r(document).scrollTop());t&&d(e)}r(window).resize(function(){r("body>div.window-mask").css({width:r(window)._outerWidth(),height:r(window)._outerHeight()}),setTimeout(function(){r("body>div.window-mask").css(r.fn.window.getMaskSize())},50)}),r.fn.window=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var t,a,e=r.data(this,"window");e?r.extend(e.options,n):(e=r.data(this,"window",{options:r.extend({},r.fn.window.defaults,r.fn.window.parseOptions(this),n)})).options.inline||document.body.appendChild(this),function(n){var i=r.data(n,"window"),o=i.options,e=r(n).panel(r.extend({},i.options,{border:!1,doSize:!0,closed:!0,cls:"window",headerCls:"window-header",bodyCls:"window-body "+(o.noheader?"window-body-noheader":""),onBeforeDestroy:function(){if(0==o.onBeforeDestroy.call(n))return!1;i.shadow&&i.shadow.remove(),i.mask&&i.mask.remove()},onClose:function(){i.shadow&&i.shadow.hide(),i.mask&&i.mask.hide(),o.onClose.call(n)},onOpen:function(){i.mask&&i.mask.css(r.extend({display:"block",zIndex:r.fn.window.defaults.zIndex++},r.fn.window.getMaskSize(n))),i.shadow&&i.shadow.css({display:"block",zIndex:r.fn.window.defaults.zIndex++,left:o.left,top:o.top,width:i.window._outerWidth(),height:i.window._outerHeight()}),i.window.css("z-index",r.fn.window.defaults.zIndex++),o.onOpen.call(n)},onResize:function(e,t){var a=r(this).panel("options");r.extend(o,{width:a.width,height:a.height,left:a.left,top:a.top}),i.shadow&&i.shadow.css({left:o.left,top:o.top,width:i.window._outerWidth(),height:i.window._outerHeight()}),o.onResize.call(n,e,t)},onMinimize:function(){i.shadow&&i.shadow.hide(),i.mask&&i.mask.hide(),i.options.onMinimize.call(n)},onBeforeCollapse:function(){if(0==o.onBeforeCollapse.call(n))return!1;i.shadow&&i.shadow.hide()},onExpand:function(){i.shadow&&i.shadow.show(),o.onExpand.call(n)}}));i.window=e.panel("panel"),i.mask&&i.mask.remove(),o.modal&&(i.mask=r('<div class="window-mask" style="display:none"></div>').insertAfter(i.window)),i.shadow&&i.shadow.remove(),o.shadow&&(i.shadow=r('<div class="window-shadow" style="display:none"></div>').insertAfter(i.window));var t=o.closed;null==o.left&&s(n),null==o.top&&l(n),d(n),t||e.window("open")}(this),t=this,(a=r.data(t,"window")).window.draggable({handle:">div.panel-header>div.panel-title",disabled:0==a.options.draggable,onStartDrag:function(e){a.mask&&a.mask.css("z-index",r.fn.window.defaults.zIndex++),a.shadow&&a.shadow.css("z-index",r.fn.window.defaults.zIndex++),a.window.css("z-index",r.fn.window.defaults.zIndex++),a.proxy||(a.proxy=r('<div class="window-proxy"></div>').insertAfter(a.window)),a.proxy.css({display:"none",zIndex:r.fn.window.defaults.zIndex++,left:e.data.left,top:e.data.top}),a.proxy._outerWidth(a.window._outerWidth()),a.proxy._outerHeight(a.window._outerHeight()),setTimeout(function(){a.proxy&&a.proxy.show()},500)},onDrag:function(e){return a.proxy.css({display:"block",left:e.data.left,top:e.data.top}),!1},onStopDrag:function(e){a.options.left=e.data.left,a.options.top=e.data.top,r(t).window("move"),a.proxy.remove(),a.proxy=null}}),a.window.resizable({disabled:0==a.options.resizable,onStartResize:function(e){a.pmask&&a.pmask.remove(),a.pmask=r('<div class="window-proxy-mask"></div>').insertAfter(a.window),a.pmask.css({zIndex:r.fn.window.defaults.zIndex++,left:e.data.left,top:e.data.top,width:a.window._outerWidth(),height:a.window._outerHeight()}),a.proxy&&a.proxy.remove(),a.proxy=r('<div class="window-proxy"></div>').insertAfter(a.window),a.proxy.css({zIndex:r.fn.window.defaults.zIndex++,left:e.data.left,top:e.data.top}),a.proxy._outerWidth(e.data.width)._outerHeight(e.data.height)},onResize:function(e){return a.proxy.css({left:e.data.left,top:e.data.top}),a.proxy._outerWidth(e.data.width),a.proxy._outerHeight(e.data.height),!1},onStopResize:function(e){r(t).window("resize",e.data),a.pmask.remove(),a.pmask=null,a.proxy.remove(),a.proxy=null}})});var t=r.fn.window.methods[n];return t?t(this,e):this.panel(n,e)},r.fn.window.methods={options:function(e){var t=e.panel("options"),a=r.data(e[0],"window").options;return r.extend(a,{closed:t.closed,collapsed:t.collapsed,minimized:t.minimized,maximized:t.maximized})},window:function(e){return r.data(e[0],"window").window},move:function(e,t){return e.each(function(){d(this,t)})},hcenter:function(e){return e.each(function(){s(this,!0)})},vcenter:function(e){return e.each(function(){l(this,!0)})},center:function(e){return e.each(function(){s(this),l(this),d(this)})}},r.fn.window.getMaskSize=function(e){var t=r(e).data("window"),a=t&&t.options.inline;return{width:a?"100%":r(document).width(),height:a?"100%":r(document).height()}},r.fn.window.parseOptions=function(e){return r.extend({},r.fn.panel.parseOptions(e),r.parser.parseOptions(e,[{draggable:"boolean",resizable:"boolean",shadow:"boolean",modal:"boolean",inline:"boolean"}]))},r.fn.window.defaults=r.extend({},r.fn.panel.defaults,{zIndex:9e3,draggable:!0,resizable:!0,shadow:!0,modal:!1,inline:!1,title:"New Window",collapsible:!0,minimizable:!0,maximizable:!0,closable:!0,closed:!1})}(jQuery),function($){function _292(_293){var opts=$.data(_293,"dialog").options;opts.inited=!1,$(_293).window($.extend({},opts,{onResize:function(e,t){opts.inited&&(_298(this),opts.onResize.call(this,e,t))}}));var win=$(_293).window("window");if(opts.toolbar)if($.isArray(opts.toolbar)){$(_293).siblings("div.dialog-toolbar").remove();for(var _294=$('<div class="dialog-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').appendTo(win),tr=_294.find("tr"),i=0;i<opts.toolbar.length;i++){var btn=opts.toolbar[i];if("-"==btn)$('<td><div class="dialog-tool-separator"></div></td>').appendTo(tr);else{var td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:void(0)"></a>').appendTo(td);tool[0].onclick=eval(btn.handler||function(){}),tool.linkbutton($.extend({},btn,{plain:!0}))}}}else $(opts.toolbar).addClass("dialog-toolbar").appendTo(win),$(opts.toolbar).show();else $(_293).siblings("div.dialog-toolbar").remove();if(opts.buttons)if($.isArray(opts.buttons)){$(_293).siblings("div.dialog-button").remove();for(var _295=$('<div class="dialog-button"></div>').appendTo(win),i=0;i<opts.buttons.length;i++){var p=opts.buttons[i],_296=$('<a href="javascript:void(0)"></a>').appendTo(_295);p.handler&&(_296[0].onclick=p.handler),_296.linkbutton(p)}}else $(opts.buttons).addClass("dialog-button").appendTo(win),$(opts.buttons).show();else $(_293).siblings("div.dialog-button").remove();opts.inited=!0;var _297=opts.closed;win.show(),$(_293).window("resize"),_297&&win.hide()}function _298(e,t){var a=$(e),n=a.dialog("options"),i=n.noheader,o=a.siblings(".dialog-toolbar"),r=a.siblings(".dialog-button");o.insertBefore(e).css({position:"relative",borderTopWidth:i?1:0,top:i?o.length:0}),r.insertAfter(e).css({position:"relative",top:-1}),o.add(r)._outerWidth(a._outerWidth()).find(".easyui-fluid:visible").each(function(){$(this).triggerHandler("_resize")});var d=o._outerHeight()+r._outerHeight();if(isNaN(parseInt(n.height))){var s=a._size("min-height");s&&a._size("min-height",s-d);var l=a._size("max-height");l&&a._size("max-height",l-d)}else a._outerHeight(a._outerHeight()-d);var c=$.data(e,"window").shadow;if(c){var u=a.panel("panel");c.css({width:u._outerWidth(),height:u._outerHeight()})}}$.fn.dialog=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=$.data(this,"dialog");e?$.extend(e.options,t):$.data(this,"dialog",{options:$.extend({},$.fn.dialog.defaults,$.fn.dialog.parseOptions(this),t)}),_292(this)});var a=$.fn.dialog.methods[t];return a?a(this,e):this.window(t,e)},$.fn.dialog.methods={options:function(e){var t=$.data(e[0],"dialog").options,a=e.panel("options");return $.extend(t,{width:a.width,height:a.height,left:a.left,top:a.top,closed:a.closed,collapsed:a.collapsed,minimized:a.minimized,maximized:a.maximized}),t},dialog:function(e){return e.window("window")}},$.fn.dialog.parseOptions=function(e){var t=$(e);return $.extend({},$.fn.window.parseOptions(e),$.parser.parseOptions(e,["toolbar","buttons"]),{toolbar:t.children(".dialog-toolbar").length?t.children(".dialog-toolbar").removeClass("dialog-toolbar"):void 0,buttons:t.children(".dialog-button").length?t.children(".dialog-button").removeClass("dialog-button"):void 0})},$.fn.dialog.defaults=$.extend({},$.fn.window.defaults,{title:"New Dialog",collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,toolbar:null,buttons:null})}(jQuery),function(d){function s(e){d(document).unbind(".messager").bind("keydown.messager",function(e){if(27==e.keyCode)d("body").children("div.messager-window").children("div.messager-body").each(function(){d(this).dialog("close")});else if(9==e.keyCode){var t=d("body").children("div.messager-window");if(!t.length)return;for(var a=t.find(".messager-input,.messager-button .l-btn"),n=0;n<a.length;n++)if(d(a[n]).is(":focus"))return d(a[n>=a.length-1?0:n+1]).focus(),!1}});var t=d('<div class="messager-body"></div>').appendTo("body");return t.dialog(d.extend({},e,{noheader:!e.title,onClose:function(){d(document).unbind(".messager"),e.onClose&&e.onClose.call(this),setTimeout(function(){t.dialog("destroy")},100)}})),t.dialog("dialog").addClass("messager-window").find(".dialog-button").addClass("messager-button").find("a:first").focus(),t}function l(e,t){e.dialog("close"),e.dialog("options").fn(t)}d.messager={show:function(e){return t=e,a=d.extend({},d.messager.defaults,{modal:!1,shadow:!1,draggable:!1,resizable:!1,closed:!0,style:{left:"",top:"",right:0,zIndex:d.fn.window.defaults.zIndex++,bottom:-document.body.scrollTop-document.documentElement.scrollTop},title:"",width:"auto",height:100,minHeight:0,showType:"slide",showSpeed:600,content:t.msg,timeout:4e3},t),(n=d('<div class="messager-body"></div>').appendTo("body")).dialog(d.extend({},a,{noheader:!a.title,openAnimation:a.showType,closeAnimation:"show"==a.showType?"hide":a.showType,openDuration:a.showSpeed,closeDuration:a.showSpeed,onOpen:function(){function e(){0<a.timeout&&(a.timer=setTimeout(function(){n.length&&n.data("dialog")&&n.dialog("close")},a.timeout))}n.dialog("dialog").hover(function(){a.timer&&clearTimeout(a.timer)},function(){e()}),e(),t.onOpen?t.onOpen.call(this):a.onOpen.call(this)},onClose:function(){a.timer&&clearTimeout(a.timer),t.onClose?t.onClose.call(this):a.onClose.call(this),n.dialog("destroy")}})),n.dialog("dialog").css(a.style),n.dialog("open"),n;var t,a,n},alert:function(e,t,a,n){var i="object"==typeof e?e:{title:e,msg:t,icon:a,fn:n},o=i.icon?"messager-icon messager-"+i.icon:"";(i=d.extend({},d.messager.defaults,{content:'<div class="'+o+'"></div><div>'+i.msg+'</div><div style="clear:both;"/>'},i)).buttons||(i.buttons=[{text:i.ok,onClick:function(){l(r)}}]);var r=s(i);return r},confirm:function(e,t,a){var n="object"==typeof e?e:{title:e,msg:t,fn:a};(n=d.extend({},d.messager.defaults,{content:'<div class="messager-icon messager-question"></div><div>'+n.msg+'</div><div style="clear:both;"/>'},n)).buttons||(n.buttons=[{text:n.ok,onClick:function(){l(i,!0)}},{text:n.cancel,onClick:function(){l(i,!1)}}]);var i=s(n);return i},prompt:function(e,t,a){var n="object"==typeof e?e:{title:e,msg:t,fn:a};(n=d.extend({},d.messager.defaults,{content:'<div class="messager-icon messager-question"></div><div>'+n.msg+'</div><br/><div style="clear:both;"/><div><input class="messager-input" type="password"/></div>'},n)).buttons||(n.buttons=[{text:n.ok,onClick:function(){l(i,i.find(".messager-input").val())}},{text:n.cancel,onClick:function(){l(i)}}]);var i=s(n);return i.find("input.messager-input").focus(),i},progress:function(e){if("string"==typeof e)return(0,{bar:function(){return d("body>div.messager-window").find("div.messager-p-bar")},close:function(){var e=d("body>div.messager-window>div.messager-body:has(div.messager-progress)");e.length&&e.dialog("close")}}[e])();e=e||{};var t=d.extend({},{title:"",minHeight:0,content:void 0,msg:"",text:void 0,interval:300},e),a=s(d.extend({},d.messager.defaults,{content:'<div class="messager-progress"><div class="messager-p-msg">'+t.msg+'</div><div class="messager-p-bar"></div></div>',closable:!1,doSize:!1},t,{onClose:function(){this.timer&&clearInterval(this.timer),e.onClose?e.onClose.call(this):d.messager.defaults.onClose.call(this)}})),n=a.find("div.messager-p-bar");return n.progressbar({text:t.text}),a.dialog("resize"),t.interval&&(a[0].timer=setInterval(function(){var e=n.progressbar("getValue");100<(e+=10)&&(e=0),n.progressbar("setValue",e)},t.interval)),a}},d.messager.defaults=d.extend({},d.fn.dialog.defaults,{ok:"Ok",cancel:"Cancel",width:300,height:"auto",minHeight:150,modal:!0,collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,fn:function(){}})}(jQuery),function(f){function h(e,t){var a=f.data(e,"accordion"),n=a.options,d=a.panels,s=f(e);t&&f.extend(n,{width:t.width,height:t.height}),s._size(n);var l=0,i="auto",o=s.find(">.panel>.accordion-header");function r(e,t){for(var a=0,n=0;n<d.length;n++){var i=d[n],o=i.panel("header")._outerHeight(l);if(i.panel("options").collapsible==e){var r=isNaN(t)?void 0:t+l*o.length;i.panel("resize",{width:s.width(),height:e?r:void 0}),a+=i.panel("panel").outerHeight()-l*o.length}}return a}o.length&&(l=f(o[0]).css("height","")._outerHeight()),isNaN(parseInt(n.height))||(i=s.height()-l*o.length),r(!0,i-r(!1)+1)}function p(e,t,a,n){for(var i=f.data(e,"accordion").panels,o=[],r=0;r<i.length;r++){var d=i[r];if(t)d.panel("options")[t]==a&&o.push(d);else if(d[0]==f(a)[0])return r}return t?n?o:o.length?o[0]:null:-1}function s(e){return p(e,"collapsed",!1,!0)}function l(e){var t=s(e);return t.length?t[0]:null}function g(e,t){return p(e,null,t)}function c(e,t){var a=f.data(e,"accordion").panels;return"number"==typeof t?t<0||t>=a.length?null:a[t]:p(e,"title",t)}function b(n,e,i){var o=f.data(n,"accordion").options;e.panel(f.extend({},{collapsible:!0,minimizable:!1,maximizable:!1,closable:!1,doSize:!1,collapsed:!0,headerCls:"accordion-header",bodyCls:"accordion-body"},i,{onBeforeExpand:function(){if(i.onBeforeExpand&&0==i.onBeforeExpand.call(this))return!1;if(!o.multiple)for(var e=f.grep(s(n),function(e){return e.panel("options").collapsible}),t=0;t<e.length;t++)u(n,g(n,e[t]));var a=f(this).panel("header");a.addClass("accordion-header-selected"),a.find(".accordion-collapse").removeClass("accordion-expand")},onExpand:function(){i.onExpand&&i.onExpand.call(this),o.onSelect.call(n,f(this).panel("options").title,g(n,this))},onBeforeCollapse:function(){if(i.onBeforeCollapse&&0==i.onBeforeCollapse.call(this))return!1;var e=f(this).panel("header");e.removeClass("accordion-header-selected"),e.find(".accordion-collapse").addClass("accordion-expand")},onCollapse:function(){i.onCollapse&&i.onCollapse.call(this),o.onUnselect.call(n,f(this).panel("options").title,g(n,this))}}));var t=e.panel("header"),a=t.children("div.panel-tool");a.children("a.panel-tool-collapse").hide();var r=f('<a href="javascript:void(0)"></a>').addClass("accordion-collapse accordion-expand").appendTo(a);function d(e){var t=e.panel("options");if(t.collapsible){var a=g(n,e);(t.collapsed?v:u)(n,a)}}r.bind("click",function(){return d(e),!1}),e.panel("options").collapsible?r.show():r.hide(),t.click(function(){return d(e),!1})}function v(e,t){var a=c(e,t);if(a){m(e);var n=f.data(e,"accordion").options;a.panel("expand",n.animate)}}function u(e,t){var a=c(e,t);if(a){m(e);var n=f.data(e,"accordion").options;a.panel("collapse",n.animate)}}function m(e){for(var t=f.data(e,"accordion").panels,a=0;a<t.length;a++)t[a].stop(!0,!0)}f.fn.accordion=function(u,e){return"string"==typeof u?f.fn.accordion.methods[u](this,e):(u=u||{},this.each(function(){var a,n,e,t,i,o,r,d,s,l=f.data(this,"accordion");function c(e){var t=d.animate;d.animate=!1,v(r,e),d.animate=t}l?f.extend(l.options,u):(f.data(this,"accordion",{options:f.extend({},f.fn.accordion.defaults,f.fn.accordion.parseOptions(this),u),accordion:f(this).addClass("accordion"),panels:[]}),a=this,n=f.data(a,"accordion"),(e=f(a)).addClass("accordion"),n.panels=[],e.children("div").each(function(){var e=f.extend({},f.parser.parseOptions(this),{selected:!!f(this).attr("selected")||void 0}),t=f(this);n.panels.push(t),b(a,t,e)}),e.bind("_resize",function(e,t){return(f(this).hasClass("easyui-fluid")||t)&&h(a),!1})),t=this,i=f.data(t,"accordion").options,o=f(t),i.border?o.removeClass("accordion-noborder"):o.addClass("accordion-noborder"),h(this),r=this,d=f.data(r,"accordion").options,c((s=p(r,"selected",!0))?g(r,s):d.selected)}))},f.fn.accordion.methods={options:function(e){return f.data(e[0],"accordion").options},panels:function(e){return f.data(e[0],"accordion").panels},resize:function(e,t){return e.each(function(){h(this,t)})},getSelections:function(e){return s(e[0])},getSelected:function(e){return l(e[0])},getPanel:function(e,t){return c(e[0],t)},getPanelIndex:function(e,t){return g(e[0],t)},select:function(e,t){return e.each(function(){v(this,t)})},unselect:function(e,t){return e.each(function(){u(this,t)})},add:function(e,t){return e.each(function(){!function(e,t){var a=f.data(e,"accordion"),n=a.options,i=a.panels;null==t.selected&&(t.selected=!0),m(e);var o=f("<div></div>").appendTo(e);i.push(o),b(e,o,t),h(e),n.onAdd.call(e,t.title,i.length-1),t.selected&&v(e,i.length-1)}(this,t)})},remove:function(e,t){return e.each(function(){!function(e,t){var a=f.data(e,"accordion"),n=a.options,i=a.panels;m(e);var o=c(e,t),r=o.panel("options").title,d=g(e,o);if(o&&0!=n.onBeforeRemove.call(e,r,d)){if(i.splice(d,1),o.panel("destroy"),i.length)h(e),l(e)||v(e,0);n.onRemove.call(e,r,d)}}(this,t)})}},f.fn.accordion.parseOptions=function(e){f(e);return f.extend({},f.parser.parseOptions(e,["width","height",{fit:"boolean",border:"boolean",animate:"boolean",multiple:"boolean",selected:"number"}]))},f.fn.accordion.defaults={width:"auto",height:"auto",fit:!1,border:!0,animate:!0,multiple:!1,selected:0,onSelect:function(e,t){},onUnselect:function(e,t){},onAdd:function(e,t){},onBeforeRemove:function(e,t){},onRemove:function(e,t){}}}(jQuery),function($){function _312(e){var t=0;return $(e).children().each(function(){t+=$(this).outerWidth(!0)}),t}function _313(e){var t=$.data(e,"tabs").options;if("left"!=t.tabPosition&&"right"!=t.tabPosition&&t.showHeader){var a=$(e).children("div.tabs-header"),n=a.children("div.tabs-tool:not(.tabs-tool-hidden)"),i=a.children("div.tabs-scroller-left"),o=a.children("div.tabs-scroller-right"),r=a.children("div.tabs-wrap"),d=a.outerHeight();t.plain&&(d-=d-a.height()),n._outerHeight(d);var s=_312(a.find("ul.tabs")),l=a.width()-n._outerWidth();l<s?(i.add(o).show()._outerHeight(d),"left"==t.toolPosition?(n.css({left:i.outerWidth(),right:""}),r.css({marginLeft:i.outerWidth()+n._outerWidth(),marginRight:o._outerWidth(),width:l-i.outerWidth()-o.outerWidth()})):(n.css({left:"",right:o.outerWidth()}),r.css({marginLeft:i.outerWidth(),marginRight:o.outerWidth()+n._outerWidth(),width:l-i.outerWidth()-o.outerWidth()}))):(i.add(o).hide(),"left"==t.toolPosition?(n.css({left:0,right:""}),r.css({marginLeft:n._outerWidth(),marginRight:0,width:l})):(n.css({left:"",right:0}),r.css({marginLeft:0,marginRight:n._outerWidth(),width:l})))}}function _31b(_31c){var opts=$.data(_31c,"tabs").options,_31d=$(_31c).children("div.tabs-header");if(opts.tools)if("string"==typeof opts.tools)$(opts.tools).addClass("tabs-tool").appendTo(_31d),$(opts.tools).show();else{_31d.children("div.tabs-tool").remove();for(var _31e=$('<div class="tabs-tool"><table cellspacing="0" cellpadding="0" style="height:100%"><tr></tr></table></div>').appendTo(_31d),tr=_31e.find("tr"),i=0;i<opts.tools.length;i++){var td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:void(0);"></a>').appendTo(td);tool[0].onclick=eval(opts.tools[i].handler||function(){}),tool.linkbutton($.extend({},opts.tools[i],{plain:!0}))}}else _31d.children("div.tabs-tool").remove()}function _31f(e,t){var a=$.data(e,"tabs"),i=a.options,n=$(e);if(i.doSize){t&&$.extend(i,{width:t.width,height:t.height}),n._size(i);var o=n.children("div.tabs-header"),r=n.children("div.tabs-panels"),d=o.find("div.tabs-wrap"),s=d.find(".tabs");if(s.children("li").removeClass("tabs-first tabs-last"),s.children("li:first").addClass("tabs-first"),s.children("li:last").addClass("tabs-last"),"left"==i.tabPosition||"right"==i.tabPosition?(o._outerWidth(i.showHeader?i.headerWidth:0),r._outerWidth(n.width()-o.outerWidth()),o.add(r)._size("height",isNaN(parseInt(i.height))?"":n.height()),d._outerWidth(o.width()),s._outerWidth(d.width()).css("height","")):(o.children("div.tabs-scroller-left,div.tabs-scroller-right,div.tabs-tool:not(.tabs-tool-hidden)").css("display",i.showHeader?"block":"none"),o._outerWidth(n.width()).css("height",""),i.showHeader?(o.css("background-color",""),d.css("height","")):(o.css("background-color","transparent"),o._outerHeight(0),d._outerHeight(0)),s._outerHeight(i.tabHeight).css("width",""),s._outerHeight(s.outerHeight()-s.height()-1+i.tabHeight).css("width",""),r._size("height",isNaN(parseInt(i.height))?"":n.height()-o.outerHeight()),r._size("width",n.width())),a.tabs.length){var l=s.outerWidth(!0)-s.width(),c=s.children("li:first"),u=c.outerWidth(!0)-c.width(),f=o.width()-o.children(".tabs-tool:not(.tabs-tool-hidden)")._outerWidth(),h=Math.floor((f-l-u*a.tabs.length)/a.tabs.length);if($.map(a.tabs,function(e){g(e,i.justified&&0<=$.inArray(i.tabPosition,["top","bottom"])?h:void 0)}),i.justified&&0<=$.inArray(i.tabPosition,["top","bottom"])){var p=f-l-_312(s);g(a.tabs[a.tabs.length-1],h+p)}}_313(e)}function g(e,t){var a=e.panel("options"),n=a.tab.find("a.tabs-inner");(t=t||parseInt(a.tabWidth||i.tabWidth||void 0))?n._outerWidth(t):n.css("width",""),n._outerHeight(i.tabHeight),n.css("lineHeight",n.height()+"px"),n.find(".easyui-fluid:visible").triggerHandler("_resize")}}function _32b(e){var t=$.data(e,"tabs").options,a=_32d(e);if(a){var n=$(e).children("div.tabs-panels"),i="auto"==t.width?"auto":n.width(),o="auto"==t.height?"auto":n.height();a.panel("resize",{width:i,height:o})}}function _331(a){$.data(a,"tabs").tabs;var e=$(a).addClass("tabs-container"),t=$('<div class="tabs-panels"></div>').insertBefore(e);e.children("div").each(function(){t[0].appendChild(this)}),e[0].appendChild(t[0]),$('<div class="tabs-header"><div class="tabs-scroller-left"></div><div class="tabs-scroller-right"></div><div class="tabs-wrap"><ul class="tabs"></ul></div></div>').prependTo(a),e.children("div.tabs-panels").children("div").each(function(e){var t=$.extend({},$.parser.parseOptions(this),{disabled:!!$(this).attr("disabled")||void 0,selected:!!$(this).attr("selected")||void 0});_340(a,t,$(this))}),e.children("div.tabs-header").find(".tabs-scroller-left, .tabs-scroller-right").hover(function(){$(this).addClass("tabs-scroller-over")},function(){$(this).removeClass("tabs-scroller-over")}),e.bind("_resize",function(e,t){return($(this).hasClass("easyui-fluid")||t)&&(_31f(a),_32b(a)),!1})}function _335(i){var o=$.data(i,"tabs"),r=o.options;function d(t){var a=0;return t.parent().children("li").each(function(e){if(t[0]==this)return a=e,!1}),a}$(i).children("div.tabs-header").unbind().bind("click",function(e){if($(e.target).hasClass("tabs-scroller-left"))$(i).tabs("scrollBy",-r.scrollIncrement);else{if(!$(e.target).hasClass("tabs-scroller-right")){var t=$(e.target).closest("li");if(t.hasClass("tabs-disabled"))return!1;if($(e.target).closest("a.tabs-close").length)_359(i,d(t));else if(t.length){var a=d(t),n=o.tabs[a].panel("options");(!n.collapsible||n.closed?_350:_36d)(i,a)}return!1}$(i).tabs("scrollBy",r.scrollIncrement)}}).bind("contextmenu",function(e){var t=$(e.target).closest("li");t.hasClass("tabs-disabled")||t.length&&r.onContextMenu.call(i,e,t.find("span.tabs-title").html(),d(t))})}function _33c(e){var t=$.data(e,"tabs").options,a=$(e).children("div.tabs-header"),n=$(e).children("div.tabs-panels");a.removeClass("tabs-header-top tabs-header-bottom tabs-header-left tabs-header-right"),n.removeClass("tabs-panels-top tabs-panels-bottom tabs-panels-left tabs-panels-right"),"top"==t.tabPosition?a.insertBefore(n):"bottom"==t.tabPosition?(a.insertAfter(n),a.addClass("tabs-header-bottom"),n.addClass("tabs-panels-top")):"left"==t.tabPosition?(a.addClass("tabs-header-left"),n.addClass("tabs-panels-right")):"right"==t.tabPosition&&(a.addClass("tabs-header-right"),n.addClass("tabs-panels-left")),1==t.plain?a.addClass("tabs-header-plain"):a.removeClass("tabs-header-plain"),a.removeClass("tabs-header-narrow").addClass(t.narrow?"tabs-header-narrow":"");var i=a.find(".tabs");i.removeClass("tabs-pill").addClass(t.pill?"tabs-pill":""),i.removeClass("tabs-narrow").addClass(t.narrow?"tabs-narrow":""),i.removeClass("tabs-justified").addClass(t.justified?"tabs-justified":""),1==t.border?(a.removeClass("tabs-header-noborder"),n.removeClass("tabs-panels-noborder")):(a.addClass("tabs-header-noborder"),n.addClass("tabs-panels-noborder")),t.doSize=!0}function _340(d,s,e){s=s||{};var t=$.data(d,"tabs"),a=t.tabs;(null==s.index||s.index>a.length)&&(s.index=a.length),s.index<0&&(s.index=0);var n=$(d).children("div.tabs-header").find("ul.tabs"),i=$(d).children("div.tabs-panels"),o=$('<li><a href="javascript:void(0)" class="tabs-inner"><span class="tabs-title"></span><span class="tabs-icon"></span></a></li>');e=e||$("<div></div>"),s.index>=a.length?(o.appendTo(n),e.appendTo(i),a.push(e)):(o.insertBefore(n.children("li:eq("+s.index+")")),e.insertBefore(i.children("div.panel:eq("+s.index+")")),a.splice(s.index,0,e)),e.panel($.extend({},s,{tab:o,border:!1,noheader:!0,closed:!0,doSize:!1,iconCls:s.icon?s.icon:void 0,onLoad:function(){s.onLoad&&s.onLoad.call(this,arguments),t.options.onLoad.call(d,$(this))},onBeforeOpen:function(){if(s.onBeforeOpen&&0==s.onBeforeOpen.call(this))return!1;var e=$(d).tabs("getSelected");if(e){if(e[0]==this)return _32b(d),!1;if($(d).tabs("unselect",_34b(d,e)),e=$(d).tabs("getSelected"))return!1}var t=$(this).panel("options");t.tab.addClass("tabs-selected");var a=$(d).find(">div.tabs-header>div.tabs-wrap"),n=t.tab.position().left,i=n+t.tab.outerWidth();if(n<0||i>a.width()){var o=n-(a.width()-t.tab.width())/2;$(d).tabs("scrollBy",o)}else $(d).tabs("scrollBy",0);var r=$(this).panel("panel");r.css("display","block"),_32b(d),r.css("display","none")},onOpen:function(){s.onOpen&&s.onOpen.call(this);var e=$(this).panel("options");t.selectHis.push(e.title),t.options.onSelect.call(d,e.title,_34b(d,this))},onBeforeClose:function(){if(s.onBeforeClose&&0==s.onBeforeClose.call(this))return!1;$(this).panel("options").tab.removeClass("tabs-selected")},onClose:function(){s.onClose&&s.onClose.call(this);var e=$(this).panel("options");t.options.onUnselect.call(d,e.title,_34b(d,this))}})),$(d).tabs("update",{tab:e,options:e.panel("options"),type:"header"})}function _34c(e,t){var a=$.data(e,"tabs").options;null==t.selected&&(t.selected=!0),_340(e,t),a.onAdd.call(e,t.title,t.index),t.selected&&_350(e,t.index)}function _351(e,t){t.type=t.type||"all";var a=$.data(e,"tabs").selectHis,n=t.tab,i=n.panel("options"),o=i.title;if($.extend(i,t.options,{iconCls:t.options.icon?t.options.icon:void 0}),"all"!=t.type&&"body"!=t.type||n.panel(),"all"==t.type||"header"==t.type){var r=i.tab;if(i.header)r.find(".tabs-inner").html($(i.header));else{var d=r.find("span.tabs-title"),s=r.find("span.tabs-icon");if(d.html(i.title),s.attr("class","tabs-icon"),r.find("a.tabs-close").remove(),i.closable?(d.addClass("tabs-closable"),$('<a href="javascript:void(0)" class="tabs-close"></a>').appendTo(r)):d.removeClass("tabs-closable"),i.iconCls?(d.addClass("tabs-with-icon"),s.addClass(i.iconCls)):d.removeClass("tabs-with-icon"),i.tools){if(!(l=r.find("span.tabs-p-tool")).length)var l=$('<span class="tabs-p-tool"></span>').insertAfter(r.find("a.tabs-inner"));if($.isArray(i.tools)){l.empty();for(var c=0;c<i.tools.length;c++){var u=$('<a href="javascript:void(0)"></a>').appendTo(l);u.addClass(i.tools[c].iconCls),i.tools[c].handler&&u.bind("click",{handler:i.tools[c].handler},function(e){$(this).parents("li").hasClass("tabs-disabled")||e.data.handler.call(this)})}}else $(i.tools).children().appendTo(l);var f=12*l.children().length;i.closable?f+=8:(f-=3,l.css("right","5px")),d.css("padding-right",f+"px")}else r.find("span.tabs-p-tool").remove(),d.css("padding-right","")}if(o!=i.title)for(c=0;c<a.length;c++)a[c]==o&&(a[c]=i.title)}i.disabled?i.tab.addClass("tabs-disabled"):i.tab.removeClass("tabs-disabled"),_31f(e),$.data(e,"tabs").options.onUpdate.call(e,i.title,_34b(e,n))}function _359(e,t){var a=$.data(e,"tabs").options,n=$.data(e,"tabs").tabs,i=$.data(e,"tabs").selectHis;if(_35d(e,t)){var o=(d=_35e(e,t)).panel("options").title,r=_34b(e,d);if(0!=a.onBeforeClose.call(e,o,r)){var d;(d=_35e(e,t,!0)).panel("options").tab.remove(),d.panel("destroy"),a.onClose.call(e,o,r),_31f(e);for(var s=0;s<i.length;s++)i[s]==o&&(i.splice(s,1),s--);var l=i.pop();l?_350(e,l):n.length&&_350(e,0)}}}function _35e(e,t,a){var n=$.data(e,"tabs").tabs;if("number"==typeof t){if(t<0||t>=n.length)return null;var i=n[t];return a&&n.splice(t,1),i}for(var o=0;o<n.length;o++){if((i=n[o]).panel("options").title==t)return a&&n.splice(o,1),i}return null}function _34b(e,t){for(var a=$.data(e,"tabs").tabs,n=0;n<a.length;n++)if(a[n][0]==$(t)[0])return n;return-1}function _32d(e){for(var t=$.data(e,"tabs").tabs,a=0;a<t.length;a++){var n=t[a];if(n.panel("options").tab.hasClass("tabs-selected"))return n}return null}function _367(e){for(var t=$.data(e,"tabs"),a=t.tabs,n=0;n<a.length;n++){var i=a[n].panel("options");if(i.selected&&!i.disabled)return void _350(e,n)}_350(e,t.options.selected)}function _350(e,t){var a=_35e(e,t);a&&!a.is(":visible")&&(_36c(e),a.panel("options").disabled||a.panel("open"))}function _36d(e,t){var a=_35e(e,t);a&&a.is(":visible")&&(_36c(e),a.panel("close"))}function _36c(e){$(e).children("div.tabs-panels").each(function(){$(this).stop(!0,!0)})}function _35d(e,t){return null!=_35e(e,t)}function _373(e,t){$.data(e,"tabs").options.showHeader=t,$(e).tabs("resize")}function _376(e,t){var a=$(e).find(">.tabs-header>.tabs-tool");t?a.removeClass("tabs-tool-hidden").show():a.addClass("tabs-tool-hidden").hide(),$(e).tabs("resize").tabs("scrollBy",0)}$.fn.tabs=function(t,e){return"string"==typeof t?$.fn.tabs.methods[t](this,e):(t=t||{},this.each(function(){var e=$.data(this,"tabs");e?$.extend(e.options,t):($.data(this,"tabs",{options:$.extend({},$.fn.tabs.defaults,$.fn.tabs.parseOptions(this),t),tabs:[],selectHis:[]}),_331(this)),_31b(this),_33c(this),_31f(this),_335(this),_367(this)}))},$.fn.tabs.methods={options:function(e){var t=e[0],a=$.data(t,"tabs").options,n=_32d(t);return a.selected=n?_34b(t,n):-1,a},tabs:function(e){return $.data(e[0],"tabs").tabs},resize:function(e,t){return e.each(function(){_31f(this,t),_32b(this)})},add:function(e,t){return e.each(function(){_34c(this,t)})},close:function(e,t){return e.each(function(){_359(this,t)})},getTab:function(e,t){return _35e(e[0],t)},getTabIndex:function(e,t){return _34b(e[0],t)},getSelected:function(e){return _32d(e[0])},select:function(e,t){return e.each(function(){_350(this,t)})},unselect:function(e,t){return e.each(function(){_36d(this,t)})},exists:function(e,t){return _35d(e[0],t)},update:function(e,t){return e.each(function(){_351(this,t)})},enableTab:function(e,t){return e.each(function(){var e=$(this).tabs("getTab",t).panel("options");e.tab.removeClass("tabs-disabled"),e.disabled=!1})},disableTab:function(e,t){return e.each(function(){var e=$(this).tabs("getTab",t).panel("options");e.tab.addClass("tabs-disabled"),e.disabled=!0})},showHeader:function(e){return e.each(function(){_373(this,!0)})},hideHeader:function(e){return e.each(function(){_373(this,!1)})},showTool:function(e){return e.each(function(){_376(this,!0)})},hideTool:function(e){return e.each(function(){_376(this,!1)})},scrollBy:function(e,o){return e.each(function(){var e,t,a=$(this).tabs("options"),n=$(this).find(">div.tabs-header>div.tabs-wrap"),i=Math.min(n._scrollLeft()+o,(e=0,(t=n.children("ul")).children("li").each(function(){e+=$(this).outerWidth(!0)}),e-n.width()+(t.outerWidth()-t.width())));n.animate({scrollLeft:i},a.scrollDuration)})}},$.fn.tabs.parseOptions=function(e){return $.extend({},$.parser.parseOptions(e,["tools","toolPosition","tabPosition",{fit:"boolean",border:"boolean",plain:"boolean"},{headerWidth:"number",tabWidth:"number",tabHeight:"number",selected:"number"},{showHeader:"boolean",justified:"boolean",narrow:"boolean",pill:"boolean"}]))},$.fn.tabs.defaults={width:"auto",height:"auto",headerWidth:150,tabWidth:"auto",tabHeight:27,selected:0,showHeader:!0,plain:!1,fit:!1,border:!0,justified:!1,narrow:!1,pill:!1,tools:null,toolPosition:"right",tabPosition:"top",scrollIncrement:100,scrollDuration:400,onLoad:function(e){},onSelect:function(e,t){},onUnselect:function(e,t){},onBeforeClose:function(e,t){},onClose:function(e,t){},onAdd:function(e,t){},onUpdate:function(e,t){},onContextMenu:function(e,t,a){}}}(jQuery),function(f){var h=!1;function p(e,t){var a=f.data(e,"layout"),n=a.options,i=a.panels,o=f(e);t&&f.extend(n,{width:t.width,height:t.height}),"body"==e.tagName.toLowerCase()?o._size("fit"):o._size(n);var r={top:0,left:0,width:o.width(),height:o.height()};function d(e,t){if(e.length&&v(e)){var a=e.panel("options");e.panel("resize",{width:o.width(),height:a.height});var n=e.panel("panel").outerHeight();e.panel("move",{left:0,top:"n"==t?0:o.height()-n}),r.height-=n,"n"==t&&(r.top+=n,!a.split&&a.border&&r.top--),!a.split&&a.border&&r.height++}}function s(e,t){if(e.length&&v(e)){var a=e.panel("options");e.panel("resize",{width:a.width,height:r.height});var n=e.panel("panel").outerWidth();e.panel("move",{left:"e"==t?o.width()-n:0,top:r.top}),r.width-=n,"w"==t&&(r.left+=n,!a.split&&a.border&&r.left--),!a.split&&a.border&&r.width++}}d(v(i.expandNorth)?i.expandNorth:i.north,"n"),d(v(i.expandSouth)?i.expandSouth:i.south,"s"),s(v(i.expandEast)?i.expandEast:i.east,"e"),s(v(i.expandWest)?i.expandWest:i.west,"w"),i.center.panel("resize",r)}function g(i,e,t){e.region=e.region||"center";var a=f.data(i,"layout").panels,n=f(i),o=e.region;if(!a[o].length){var r=f(t);r.length||(r=f("<div></div>").appendTo(n));var d=f.extend({},f.fn.layout.paneldefaults,{width:r.length?parseInt(r[0].style.width)||r.outerWidth():"auto",height:r.length?parseInt(r[0].style.height)||r.outerHeight():"auto",doSize:!1,collapsible:!0,onOpen:function(){var e=f(this).panel("header").children("div.panel-tool");e.children("a.panel-tool-collapse").hide();var t={north:"up",south:"down",east:"right",west:"left"};if(t[o]){var a="layout-button-"+t[o],n=e.children("a."+a);n.length||(n=f('<a href="javascript:void(0)"></a>').addClass(a).appendTo(e)).bind("click",{dir:o},function(e){return b(i,e.data.dir),!1}),f(this).panel("options").collapsible?n.show():n.hide()}}},e,{cls:(e.cls||"")+" layout-panel layout-panel-"+o,bodyCls:(e.bodyCls||"")+" layout-body"});r.panel(d);var s=(a[o]=r).panel("panel");r.panel("options").split&&s.addClass("layout-split-"+o),s.resizable(f.extend({},{handles:{north:"s",south:"n",east:"w",west:"e"}[o]||"",disabled:!r.panel("options").split,onStartResize:function(e){if(h=!0,"north"==o||"south"==o)var t=f(">div.layout-split-proxy-v",i);else t=f(">div.layout-split-proxy-h",i);var a={display:"block"};"north"==o?(a.top=parseInt(s.css("top"))+s.outerHeight()-t.height(),a.left=parseInt(s.css("left")),a.width=s.outerWidth(),a.height=t.height()):"south"==o?(a.top=parseInt(s.css("top")),a.left=parseInt(s.css("left")),a.width=s.outerWidth(),a.height=t.height()):"east"==o?(a.top=parseInt(s.css("top"))||0,a.left=parseInt(s.css("left"))||0,a.width=t.width(),a.height=s.outerHeight()):"west"==o&&(a.top=parseInt(s.css("top"))||0,a.left=s.outerWidth()-t.width(),a.width=t.width(),a.height=s.outerHeight()),t.css(a),f('<div class="layout-mask"></div>').css({left:0,top:0,width:n.width(),height:n.height()}).appendTo(n)},onResize:function(e){var t;"north"==o||"south"==o?(t=f(">div.layout-split-proxy-v",i)).css("top",e.pageY-f(i).offset().top-t.height()/2):(t=f(">div.layout-split-proxy-h",i)).css("left",e.pageX-f(i).offset().left-t.width()/2);return!1},onStopResize:function(e){n.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide(),r.panel("resize",e.data),p(i),h=!1,n.find(">div.layout-mask").remove()}},e)),n.layout("options").onAdd.call(i,o)}}function b(d,s,e){null==e&&(e="normal");var l=f.data(d,"layout").panels,c=l[s],u=c.panel("options");if(0!=u.onBeforeCollapse.call(c)){var t="expand"+s.substring(0,1).toUpperCase()+s.substring(1);if(!l[t]){l[t]=function(e){var t="north"==u.region||"south"==u.region,a="layout-button-"+{east:"left",west:"right",north:"down",south:"up"}[e],n=f("<div></div>").appendTo(d);if(n.panel(f.extend({},f.fn.layout.paneldefaults,{cls:"layout-expand layout-expand-"+e,title:"&nbsp;",iconCls:u.hideCollapsedContent?null:u.iconCls,closed:!0,minWidth:0,minHeight:0,doSize:!1,region:u.region,collapsedSize:u.collapsedSize,noheader:!t&&u.hideExpandTool,tools:t&&u.hideExpandTool?null:[{iconCls:a,handler:function(){return o(d,s),!1}}]})),!u.hideCollapsedContent){var i="function"==typeof u.collapsedContent?u.collapsedContent.call(n[0],u.title):u.collapsedContent;t?n.panel("setTitle",i):n.html(i)}return n.panel("panel").hover(function(){f(this).addClass("layout-expand-over")},function(){f(this).removeClass("layout-expand-over")}),n}(s);var a=l[t].panel("panel");u.expandMode?a.bind("click",function(){if("dock"==u.expandMode)o(d,s);else{c.panel("expand",!1).panel("open");var e=i();c.panel("resize",e.collapse),c.panel("panel").animate(e.expand,function(){f(this).unbind(".layout").bind("mouseleave.layout",{region:s},function(e){1!=h&&(f("body>div.combo-p>div.combo-panel:visible").length||b(d,e.data.region))}),f(d).layout("options").onExpand.call(d,s)})}return!1}):a.css("cursor","default")}var n=i();v(l[t])||l.center.panel("resize",n.resizeC),c.panel("panel").animate(n.collapse,e,function(){c.panel("collapse",!1).panel("close"),l[t].panel("open").panel("resize",n.expandP),f(this).unbind(".layout"),f(d).layout("options").onCollapse.call(d,s)})}function i(){var e=f(d),t=l.center.panel("options"),a=u.collapsedSize;if("east"==s){var n=c.panel("panel")._outerWidth(),i=t.width+n-a;return!u.split&&u.border||i++,{resizeC:{width:i},expand:{left:e.width()-n},expandP:{top:t.top,left:e.width()-a,width:a,height:t.height},collapse:{left:e.width(),top:t.top,height:t.height}}}if("west"==s){n=c.panel("panel")._outerWidth(),i=t.width+n-a;return!u.split&&u.border||i++,{resizeC:{width:i,left:a-1},expand:{left:0},expandP:{left:0,top:t.top,width:a,height:t.height},collapse:{left:-n,top:t.top,height:t.height}}}if("north"==s){var o=c.panel("panel")._outerHeight(),r=t.height;return v(l.expandNorth)||(r+=o-a+(u.split||!u.border?1:0)),l.east.add(l.west).add(l.expandEast).add(l.expandWest).panel("resize",{top:a-1,height:r}),{resizeC:{top:a-1,height:r},expand:{top:0},expandP:{top:0,left:0,width:e.width(),height:a},collapse:{top:-o,width:e.width()}}}if("south"==s){o=c.panel("panel")._outerHeight(),r=t.height;return v(l.expandSouth)||(r+=o-a+(u.split||!u.border?1:0)),l.east.add(l.west).add(l.expandEast).add(l.expandWest).panel("resize",{height:r}),{resizeC:{height:r},expand:{top:e.height()-o},expandP:{top:e.height()-a,left:0,width:e.width(),height:a},collapse:{top:e.height(),width:e.width()}}}}}function o(a,n){var i=f.data(a,"layout").panels,o=i[n];if(0!=o.panel("options").onBeforeExpand.call(o)){var e="expand"+n.substring(0,1).toUpperCase()+n.substring(1);if(i[e]){i[e].panel("close"),o.panel("panel").stop(!0,!0),o.panel("expand",!1).panel("open");var t=function(){var e=f(a),t=i.center.panel("options");{if("east"==n&&i.expandEast)return{collapse:{left:e.width(),top:t.top,height:t.height},expand:{left:e.width()-o.panel("panel")._outerWidth()}};if("west"==n&&i.expandWest)return{collapse:{left:-o.panel("panel")._outerWidth(),top:t.top,height:t.height},expand:{left:0}};if("north"==n&&i.expandNorth)return{collapse:{top:-o.panel("panel")._outerHeight(),width:e.width()},expand:{top:0}};if("south"==n&&i.expandSouth)return{collapse:{top:e.height(),width:e.width()},expand:{top:e.height()-o.panel("panel")._outerHeight()}}}}();o.panel("resize",t.collapse),o.panel("panel").animate(t.expand,function(){p(a),f(a).layout("options").onExpand.call(a,n)})}}}function v(e){return e&&(e.length&&e.panel("panel").is(":visible"))}function a(e,t,a){var n=f(e).layout("panel",t);n.panel("options").split=a;var i="layout-split-"+t,o=n.panel("panel").removeClass(i);a&&o.addClass(i),o.resizable({disabled:!a}),p(e)}f.fn.layout=function(u,e){return"string"==typeof u?f.fn.layout.methods[u](this,e):(u=u||{},this.each(function(){var n,e,a,t,i,o,r,d=f.data(this,"layout");if(d)f.extend(d.options,u);else{var s=f.extend({},f.fn.layout.defaults,f.fn.layout.parseOptions(this),u);f.data(this,"layout",{options:s,panels:{center:f(),north:f(),south:f(),east:f(),west:f()}}),(e=f(n=this)).addClass("layout"),e.children("form").length?l(e.children("form")):l(e),e.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>'),e.bind("_resize",function(e,t){return(f(this).hasClass("easyui-fluid")||t)&&p(n),!1})}function l(e){var t=e.layout("options"),a=t.onAdd;t.onAdd=function(){},e.children("div").each(function(){var e=f.fn.layout.parsePanelOptions(this);0<="north,south,east,west,center".indexOf(e.region)&&g(n,e,this)}),t.onAdd=a}function c(e){var t=o[e];t.length&&t.panel("options").collapsed&&b(a,e,0)}p(this),a=this,t=f.data(a,"layout"),i=t.options,o=t.panels,r=i.onCollapse,i.onCollapse=function(){},c("east"),c("west"),c("north"),c("south"),i.onCollapse=r}))},f.fn.layout.methods={options:function(e){return f.data(e[0],"layout").options},resize:function(e,t){return e.each(function(){p(this,t)})},panel:function(e,t){return f.data(e[0],"layout").panels[t]},collapse:function(e,t){return e.each(function(){b(this,t)})},expand:function(e,t){return e.each(function(){o(this,t)})},add:function(e,t){return e.each(function(){g(this,t),p(this),f(this).layout("panel",t.region).panel("options").collapsed&&b(this,t.region,0)})},remove:function(e,t){return e.each(function(){!function(e,t){var a=f.data(e,"layout").panels;if(a[t].length){a[t].panel("destroy"),a[t]=f();var n="expand"+t.substring(0,1).toUpperCase()+t.substring(1);a[n]&&(a[n].panel("destroy"),a[n]=void 0),f(e).layout("options").onRemove.call(e,t)}}(this,t),p(this)})},split:function(e,t){return e.each(function(){a(this,t,!0)})},unsplit:function(e,t){return e.each(function(){a(this,t,!1)})}},f.fn.layout.parseOptions=function(e){return f.extend({},f.parser.parseOptions(e,[{fit:"boolean"}]))},f.fn.layout.defaults={fit:!1,onExpand:function(e){},onCollapse:function(e){},onAdd:function(e){},onRemove:function(e){}},f.fn.layout.parsePanelOptions=function(e){f(e);return f.extend({},f.fn.panel.parseOptions(e),f.parser.parseOptions(e,["region",{split:"boolean",collpasedSize:"number",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))},f.fn.layout.paneldefaults=f.extend({},f.fn.panel.defaults,{region:null,split:!1,collapsedSize:28,expandMode:"float",hideExpandTool:!1,hideCollapsedContent:!0,collapsedContent:function(e){var t=f(this).panel("options");if("north"==t.region||"south"==t.region)return e;var a=t.collapsedSize-2,n=(a-16)/2;n=a-n;var i=[];return t.iconCls&&i.push('<div class="panel-icon '+t.iconCls+'"></div>'),i.push('<div class="panel-title layout-expand-title'),i.push(t.iconCls?" layout-expand-with-icon":""),i.push('" style="left:'+n+'px">'),i.push(e),i.push("</div>"),i.join("")},minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4})}(jQuery),function($){function init(n){var e=$.data(n,"menu").options;$(n).addClass("menu-top st-menu"),e.inline?$(n).addClass("menu-inline"):$(n).appendTo("body"),$(n).bind("_resize",function(e,t){return($(this).hasClass("easyui-fluid")||t)&&$(n).menu("resize",n),!1});for(var t=function a(e){var n=[];e.addClass("st-menu menu");n.push(e);e.hasClass("menu-content")||e.children("div").each(function(){var e=$(this).children("div");if(e.length){e.appendTo("body"),this.submenu=e;var t=a(e);n=n.concat(t)}});return n}($(n)),a=0;a<t.length;a++)i(t[a]);function i(e){var t=$.parser.parseOptions(e[0],["width","height"]);e[0].originalHeight=t.height||0,e.hasClass("menu-content")?e[0].originalWidth=t.width||e._outerWidth():(e[0].originalWidth=t.width||0,e.children("div").each(function(){var e=$(this),t=$.extend({},$.parser.parseOptions(this,["name","iconCls","href",{separator:"boolean"}]),{disabled:!!e.attr("disabled")||void 0});if(t.separator&&e.addClass("menu-sep"),!e.hasClass("menu-sep")){e[0].itemName=t.name||"",e[0].itemHref=t.href||"";var a=e.addClass("menu-item").html();e.empty().append($('<div class="menu-text"></div>').html(a)),t.iconCls&&$('<div class="menu-icon"></div>').addClass(t.iconCls).appendTo(e),t.disabled&&_3fc(n,e[0],!0),e[0].submenu&&$('<div class="menu-rightarrow"></div>').appendTo(e),_3fd(n,e)}}),$('<div class="menu-line"></div>').prependTo(e)),_3fe(n,e),e.hasClass("menu-inline")||e.hide(),_3ff(n,e)}$.data(n,"menu").options.afterRender.call(n)}function _3fe(e,t){var a=$.data(e,"menu").options,n=t.attr("style")||"";t.css({display:"block",left:-1e4,height:"auto",overflow:"hidden"}),t.find(".menu-item").each(function(){$(this)._outerHeight(a.itemHeight),$(this).find(".menu-text").css({height:a.itemHeight-2+"px",lineHeight:a.itemHeight-2+"px"})}),t.removeClass("menu-noline").addClass(a.noline?"menu-noline":"");var i=t[0].originalWidth||"auto";isNaN(parseInt(i))&&(i=0,t.find("div.menu-text").each(function(){i<$(this)._outerWidth()&&(i=$(this)._outerWidth())}),i+=40);var o=t.outerHeight(),r=t[0].originalHeight||"auto";if(isNaN(parseInt(r)))if(r=o,t.hasClass("menu-top")&&a.alignTo){var d=$(a.alignTo),s=d.offset().top-$(document).scrollTop(),l=$(window)._outerHeight()+$(document).scrollTop()-d.offset().top-d._outerHeight();r=Math.min(r,Math.max(s,l))}else r>$(window)._outerHeight()&&(r=$(window).height());t.attr("style",n),t._size({fit:t[0]==e&&a.fit,width:i,minWidth:a.minWidth,height:r}),t.css("overflow",t.outerHeight()<o?"auto":"hidden"),t.children("div.menu-line")._outerHeight(o-2)}function _3ff(e,t){if(!t.hasClass("menu-inline")){var a=$.data(e,"menu");t.unbind(".menu").bind("mouseenter.menu",function(){a.timer&&(clearTimeout(a.timer),a.timer=null)}).bind("mouseleave.menu",function(){a.options.hideOnUnhover&&(a.timer=setTimeout(function(){_407(e,$(e).hasClass("menu-inline"))},a.options.duration))})}}function _3fd(a,n){n.hasClass("menu-item")&&(n.unbind(".menu"),n.bind("click.menu",function(){if(!$(this).hasClass("menu-item-disabled")){if(!this.submenu){_407(a,$(a).hasClass("menu-inline"));var e=this.itemHref;e&&(location.href=e)}$(this).trigger("mouseenter");var t=$(a).menu("getItem",this);$.data(a,"menu").options.onClick.call(a,t)}}).bind("mouseenter.menu",function(e){if(n.siblings().each(function(){this.submenu&&_3f3(this.submenu),$(this).removeClass("menu-active")}),n.addClass("menu-active"),$(this).hasClass("menu-item-disabled"))n.addClass("menu-active-disabled");else{var t=n[0].submenu;t&&$(a).menu("show",{menu:t,parent:n})}}).bind("mouseleave.menu",function(e){n.removeClass("menu-active menu-active-disabled");var t=n[0].submenu;t?e.pageX>=parseInt(t.css("left"))?n.addClass("menu-active"):_3f3(t):n.removeClass("menu-active")}))}function _407(e,t){var a=$.data(e,"menu");a&&$(e).is(":visible")&&(_3f3($(e)),t?$(e).show():a.options.onHide.call(e))}function _40e(e,t){var a,n,i=$((t=t||{}).menu||e);if($(e).menu("resize",i[0]),i.hasClass("menu-top")){var o=$.data(e,"menu").options;if($.extend(o,t),a=o.left,n=o.top,o.alignTo){var r=$(o.alignTo);a=r.offset().left,n=r.offset().top+r._outerHeight(),"right"==o.align&&(a+=r.outerWidth()-i.outerWidth())}a+i.outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()&&(a=$(window)._outerWidth()+$(document).scrollLeft()-i.outerWidth()-5),a<0&&(a=0),n=s(n,o.alignTo)}else{var d=t.parent;(a=d.offset().left+d.outerWidth()-2)+i.outerWidth()+5>$(window)._outerWidth()+$(document).scrollLeft()&&(a=d.offset().left-i.outerWidth()+2),n=s(d.offset().top-3)}function s(e,t){return e+i.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(e=t?$(t).offset().top-i._outerHeight():$(window)._outerHeight()+$(document).scrollTop()-i.outerHeight()),e<0&&(e=0),e}i.css({left:a,top:n}),i.show(0,function(){i[0].shadow||(i[0].shadow=$('<div class="menu-shadow"></div>').insertAfter(i)),i[0].shadow.css({display:i.hasClass("menu-inline")?"none":"block",zIndex:$.fn.menu.defaults.zIndex++,left:i.css("left"),top:i.css("top"),width:i.outerWidth(),height:i.outerHeight()}),i.css("z-index",$.fn.menu.defaults.zIndex++),i.hasClass("menu-top")&&$.data(i[0],"menu").options.onShow.call(i[0])})}function _3f3(e){e&&e.length&&(function(e){e.stop(!0,!0),e[0].shadow&&e[0].shadow.hide();e.hide()}(e),e.find("div.menu-item").each(function(){this.submenu&&_3f3(this.submenu),$(this).removeClass("menu-active")}))}function _415(n,i){var o=null,r=$("<div></div>");return function a(e){e.children("div.menu-item").each(function(){var e=$(n).menu("getItem",this),t=r.empty().html(e.text).text();i==$.trim(t)?o=e:this.submenu&&!o&&a(this.submenu)})}($(n)),r.remove(),o}function _3fc(e,t,a){var n=$(t);n.hasClass("menu-item")&&(a?(n.addClass("menu-item-disabled"),t.onclick&&(t.onclick1=t.onclick,t.onclick=null)):(n.removeClass("menu-item-disabled"),t.onclick1&&(t.onclick=t.onclick1,t.onclick1=null)))}function _41b(_41c,_41d){var opts=$.data(_41c,"menu").options,menu=$(_41c);if(_41d.parent){if(!_41d.parent.submenu){var _41e=$('<div class="menu st-menu"><div class="menu-line"></div></div>').appendTo("body");_41e.hide(),_41d.parent.submenu=_41e,$('<div class="menu-rightarrow"></div>').appendTo(_41d.parent)}menu=_41d.parent.submenu}if(_41d.separator)var item=$('<div class="menu-sep"></div>').appendTo(menu);else{var item=$('<div class="menu-item"></div>').appendTo(menu);$('<div class="menu-text"></div>').html(_41d.text).appendTo(item)}_41d.iconCls&&$('<div class="menu-icon"></div>').addClass(_41d.iconCls).appendTo(item),_41d.id&&item.attr("id",_41d.id),_41d.name&&(item[0].itemName=_41d.name),_41d.href&&(item[0].itemHref=_41d.href),_41d.onclick&&("string"==typeof _41d.onclick?item.attr("onclick",_41d.onclick):item[0].onclick=eval(_41d.onclick)),_41d.handler&&(item[0].onclick=eval(_41d.handler)),_41d.disabled&&_3fc(_41c,item[0],!0),_3fd(_41c,item),_3ff(_41c,menu),_3fe(_41c,menu)}function _41f(e,t){var a=$(t).parent();!function e(t){if(t.submenu){t.submenu.children("div.menu-item").each(function(){e(this)});var a=t.submenu[0].shadow;a&&a.remove(),t.submenu.remove()}$(t).remove()}(t),_3fe(e,a)}function _424(e,t,a){var n=$(t).parent();a?$(t).show():$(t).hide(),_3fe(e,n)}function _428(e){$(e).children("div.menu-item").each(function(){_41f(e,this)}),e.shadow&&e.shadow.remove(),$(e).remove()}$(function(){$(document).unbind(".menu").bind("mousedown.menu",function(e){$(e.target).closest("div.menu,div.combo-p").length||($("body>div.menu-top:visible").not(".menu-inline").menu("hide"),_3f3($("body>div.menu:visible").not(".menu-inline")))})}),$.fn.menu=function(t,e){return"string"==typeof t?$.fn.menu.methods[t](this,e):(t=t||{},this.each(function(){var e=$.data(this,"menu");e?$.extend(e.options,t):(e=$.data(this,"menu",{options:$.extend({},$.fn.menu.defaults,$.fn.menu.parseOptions(this),t)}),init(this)),$(this).css({left:e.options.left,top:e.options.top})}))},$.fn.menu.methods={options:function(e){return $.data(e[0],"menu").options},show:function(e,t){return e.each(function(){_40e(this,t)})},hide:function(e){return e.each(function(){_407(this)})},destroy:function(e){return e.each(function(){_428(this)})},setText:function(e,t){return e.each(function(){$(t.target).children("div.menu-text").html(t.text)})},setIcon:function(e,t){return e.each(function(){$(t.target).children("div.menu-icon").remove(),t.iconCls&&$('<div class="menu-icon"></div>').addClass(t.iconCls).appendTo(t.target)})},getItem:function(e,t){var a=$(t),n={target:t,id:a.attr("id"),text:$.trim(a.children("div.menu-text").html()),disabled:a.hasClass("menu-item-disabled"),name:t.itemName,href:t.itemHref,onclick:t.onclick},i=a.children("div.menu-icon");if(i.length){for(var o=[],r=i.attr("class").split(" "),d=0;d<r.length;d++)"menu-icon"!=r[d]&&o.push(r[d]);n.iconCls=o.join(" ")}return n},findItem:function(e,t){return _415(e[0],t)},appendItem:function(e,t){return e.each(function(){_41b(this,t)})},removeItem:function(e,t){return e.each(function(){_41f(this,t)})},enableItem:function(e,t){return e.each(function(){_3fc(this,t,!1)})},disableItem:function(e,t){return e.each(function(){_3fc(this,t,!0)})},showItem:function(e,t){return e.each(function(){_424(this,t,!0)})},hideItem:function(e,t){return e.each(function(){_424(this,t,!1)})},resize:function(e,t){return e.each(function(){_3fe(this,$(t))})}},$.fn.menu.parseOptions=function(e){return $.extend({},$.parser.parseOptions(e,[{minWidth:"number",itemHeight:"number",duration:"number",hideOnUnhover:"boolean"},{fit:"boolean",inline:"boolean",noline:"boolean"}]))},$.fn.menu.defaults={zIndex:11e4,left:0,top:0,alignTo:null,align:"left",minWidth:120,itemHeight:28,duration:100,hideOnUnhover:!0,inline:!1,fit:!1,noline:!1,onShow:function(){},onHide:function(){},onClick:function(e){},afterRender:function(){}}}(jQuery),function(d){function r(e){var t=d(e).menubutton("options");if(!t.disabled&&t.menu){d("body>div.menu-top").menu("hide");var a=d(e),n=d(t.menu);n.length&&(n.menu("options").alignTo=a,n.menu("show",{alignTo:a,align:t.menuAlign})),a.blur()}}d.fn.menubutton=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=d.data(this,"menubutton");e?d.extend(e.options,t):(d.data(this,"menubutton",{options:d.extend({},d.fn.menubutton.defaults,d.fn.menubutton.parseOptions(this),t)}),d(this).removeAttr("disabled")),function(e){var t=d.data(e,"menubutton").options,a=d(e);if(a.linkbutton(t),t.hasDownArrow){a.removeClass(t.cls.btn1+" "+t.cls.btn2).addClass("m-btn"),a.removeClass("m-btn-small m-btn-medium m-btn-large").addClass("m-btn-"+t.size);var n=a.find(".l-btn-left");d("<span></span>").addClass(t.cls.arrow).appendTo(n),d("<span></span>").addClass("m-btn-line").appendTo(n)}if(d(e).menubutton("resize"),t.menu){d(t.menu).menu({duration:t.duration});var i=d(t.menu).menu("options"),o=i.onShow,r=i.onHide;d.extend(i,{onShow:function(){var e=d(this).menu("options"),t=d(e.alignTo),a=t.menubutton("options");t.addClass(1==a.plain?a.cls.btn2:a.cls.btn1),o.call(this)},onHide:function(){var e=d(this).menu("options"),t=d(e.alignTo),a=t.menubutton("options");t.removeClass(1==a.plain?a.cls.btn2:a.cls.btn1),r.call(this)}})}}(this),function(e){var t=d.data(e,"menubutton").options,a=d(e),n=a.find("."+t.cls.trigger);n.length||(n=a),n.unbind(".menubutton");var i=null;function o(){return d(e).linkbutton("options").disabled}n.bind("click.menubutton",function(){if(!o())return r(e),!1}).bind("mouseenter.menubutton",function(){if(!o())return i=setTimeout(function(){r(e)},t.duration),!1}).bind("mouseleave.menubutton",function(){i&&clearTimeout(i),d(t.menu).triggerHandler("mouseleave")})}(this)});var a=d.fn.menubutton.methods[t];return a?a(this,e):this.linkbutton(t,e)},d.fn.menubutton.methods={options:function(e){var t=e.linkbutton("options");return d.extend(d.data(e[0],"menubutton").options,{toggle:t.toggle,selected:t.selected,disabled:t.disabled})},destroy:function(e){return e.each(function(){var e=d(this).menubutton("options");e.menu&&d(e.menu).menu("destroy"),d(this).remove()})}},d.fn.menubutton.parseOptions=function(e){d(e);return d.extend({},d.fn.linkbutton.parseOptions(e),d.parser.parseOptions(e,["menu",{plain:"boolean",hasDownArrow:"boolean",duration:"number"}]))},d.fn.menubutton.defaults=d.extend({},d.fn.linkbutton.defaults,{plain:!0,hasDownArrow:!0,menu:null,menuAlign:"left",duration:100,cls:{btn1:"m-btn-active",btn2:"m-btn-plain-active",arrow:"m-btn-downarrow",trigger:"m-btn"}})}(jQuery),function(i){i.fn.splitbutton=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var e,t,a=i.data(this,"splitbutton");a?i.extend(a.options,n):(i.data(this,"splitbutton",{options:i.extend({},i.fn.splitbutton.defaults,i.fn.splitbutton.parseOptions(this),n)}),i(this).removeAttr("disabled")),e=this,t=i.data(e,"splitbutton").options,i(e).menubutton(t),i(e).addClass("s-btn")});var t=i.fn.splitbutton.methods[n];return t?t(this,e):this.menubutton(n,e)},i.fn.splitbutton.methods={options:function(e){var t=e.menubutton("options"),a=i.data(e[0],"splitbutton").options;return i.extend(a,{disabled:t.disabled,toggle:t.toggle,selected:t.selected}),a}},i.fn.splitbutton.parseOptions=function(e){i(e);return i.extend({},i.fn.linkbutton.parseOptions(e),i.parser.parseOptions(e,["menu",{plain:"boolean",duration:"number"}]))},i.fn.splitbutton.defaults=i.extend({},i.fn.linkbutton.defaults,{plain:!0,menu:null,duration:100,cls:{btn1:"m-btn-active s-btn-active",btn2:"m-btn-plain-active s-btn-plain-active",arrow:"m-btn-downarrow",trigger:"m-btn-line"}})}(jQuery),function(v){function h(e,t){var a=v.data(e,"switchbutton"),n=a.options,i=a.switchbutton;t&&v.extend(n,t);var o=i.is(":visible");o||i.appendTo("body"),i._size(n);var r=i.width(),d=i.height(),s=(r=i.outerWidth(),d=i.outerHeight(),parseInt(n.handleWidth)||i.height()),l=2*r-s;i.find(".switchbutton-inner").css({width:26+l+"px",height:d+"px",lineHeight:d+"px"}),i.find(".switchbutton-handle")._outerWidth(s-4)._outerHeight(d-6).css({marginLeft:-s/2+"px"}),i.find(".switchbutton-on").css({width:r-s/2+11+"px",textIndent:(n.reversed?"":"-")+s/2+"px"}),i.find(".switchbutton-off").css({width:r-s/2+11+"px",textIndent:(n.reversed?"-":"")+s/2+"px"}),n.marginWidth=r-s,p(e,n.checked,!1),o||i.insertAfter(e)}function p(e,t,a){var n=v.data(e,"switchbutton"),i=n.options;i.checked=t;var o=n.switchbutton.find(".switchbutton-inner"),r=o.find(".switchbutton-off"),d=o.find(".switchbutton-on"),s=o.find(".switchbutton-handle"),l=i.reversed?i.checked?i.marginWidth+22:0:i.checked?0:i.marginWidth+22,c={};c["margin-"+d.css("float").toLowerCase()]=-l+"px";var u="",f="",h="",p="";p=t?(u="-25px",f="#1890ff",h=i.onText,""):(u="1px",f="#bfbfbf",h="",i.offText),d.animate({"background-color":f}).html(h),r.animate({"background-color":f}).html(p),s.animate({"margin-left":u},400),a?o.animate(c,399):o.css(c);var g=o.find(".switchbutton-value"),b=g.is(":checked");v(e).add(g)._propAttr("checked",i.checked),b!=i.checked&&i.onChange.call(e,i.checked)}function t(e,t){var a=v.data(e,"switchbutton"),n=a.options,i=a.switchbutton,o=i.find(".switchbutton-value");t?(n.disabled=!0,v(e).add(o).attr("disabled","disabled"),i.addClass("switchbutton-disabled")):(n.disabled=!1,v(e).add(o).removeAttr("disabled"),i.removeClass("switchbutton-disabled"))}function g(e,t){var a=v.data(e,"switchbutton"),n=a.options;n.readonly=null==t||t,a.switchbutton.removeClass("switchbutton-readonly").addClass(n.readonly?"switchbutton-readonly":"")}v.fn.switchbutton=function(f,e){return"string"==typeof f?v.fn.switchbutton.methods[f](this,e):(f=f||{},this.each(function(){var e,t,a,n,i,o,r,d,s,l,c,u=v.data(this,"switchbutton");u?v.extend(u.options,f):u=v.data(this,"switchbutton",{options:v.extend({},v.fn.switchbutton.defaults,v.fn.switchbutton.parseOptions(this),f),switchbutton:function(a){var e=v('<span class="switchbutton"><span class="switchbutton-inner"><span class="switchbutton-on"></span><span class="switchbutton-handle"></span><span class="switchbutton-off"></span><input class="switchbutton-value" type="checkbox"></span></span>').insertAfter(a),t=v(a);t.addClass("switchbutton-f").hide();var n=t.attr("name");return n&&(t.removeAttr("name").attr("switchbuttonName",n),e.find(".switchbutton-value").attr("name",n)),e.bind("_resize",function(e,t){return(v(this).hasClass("easyui-fluid")||t)&&h(a),!1}),e}(this)}),u.options.originalChecked=u.options.checked,e=this,t=v.data(e,"switchbutton"),a=t.options,n=t.switchbutton,i=n.find(".switchbutton-inner"),o=i.find(".switchbutton-on").html(a.onText),r=i.find(".switchbutton-off").html(a.offText),d=i.find(".switchbutton-handle").html(a.handleText),a.reversed?(r.prependTo(i),o.insertAfter(d)):(o.prependTo(i),r.insertAfter(d)),n.find(".switchbutton-value")._propAttr("checked",a.checked),n.removeClass("switchbutton-disabled").addClass(a.disabled?"switchbutton-disabled":""),n.removeClass("switchbutton-reversed").addClass(a.reversed?"switchbutton-reversed":""),p(e,a.checked),g(e,a.readonly),v(e).switchbutton("setValue",a.value),h(this),s=this,l=v.data(s,"switchbutton"),c=l.options,l.switchbutton.unbind(".switchbutton").bind("click.switchbutton",function(){c.disabled||c.readonly||p(s,!c.checked,!0)})}))},v.fn.switchbutton.methods={options:function(e){var t=e.data("switchbutton");return v.extend(t.options,{value:t.switchbutton.find(".switchbutton-value").val()})},resize:function(e,t){return e.each(function(){h(this,t)})},enable:function(e){return e.each(function(){t(this,!1)})},disable:function(e){return e.each(function(){t(this,!0)})},readonly:function(e,t){return e.each(function(){g(this,t)})},check:function(e){return e.each(function(){p(this,!0)})},uncheck:function(e){return e.each(function(){p(this,!1)})},clear:function(e){return e.each(function(){p(this,!1)})},reset:function(e){return e.each(function(){p(this,v(this).switchbutton("options").originalChecked)})},setValue:function(e,t){return e.each(function(){v(this).val(t),v.data(this,"switchbutton").switchbutton.find(".switchbutton-value").val(t)})},toggle:function(e,t){return e.each(function(){v(this).val(t),v.data(this,"switchbutton").switchbutton.find(".switchbutton-value").val(t),p(this,1===t)})}},v.fn.switchbutton.parseOptions=function(e){var t=v(e);return v.extend({},v.parser.parseOptions(e,["onText","offText","handleText",{handleWidth:"number",reversed:"boolean"}]),{value:t.val()||void 0,checked:!!t.attr("checked")||void 0,disabled:!!t.attr("disabled")||void 0,readonly:!!t.attr("readonly")||void 0})},v.fn.switchbutton.defaults={handleWidth:"auto",width:50,height:26,checked:!1,disabled:!1,readonly:!1,reversed:!1,onText:"ON",offText:"OFF",handleText:"",value:"on",onChange:function(e){}}}(jQuery),function($){function init(e){$(e).addClass("validatebox-text")}function _482(e){var t=$.data(e,"validatebox");t.validating=!1,t.timer&&clearTimeout(t.timer),$(e).tooltip("destroy"),$(e).unbind(),$(e).remove()}function _485(e){var t=$.data(e,"validatebox").options,a=$(e);if(a.unbind(".validatebox"),!t.novalidate&&!a.is(":disabled"))for(var n in t.events)$(e).bind(n+".validatebox",{target:e},t.events[n])}function _488(e){var t=e.data.target,a=$.data(t,"validatebox"),n=$(t);$(t).attr("readonly")||(a.validating=!0,a.value=void 0,function(){a.validating&&(a.value!=n.val()?(a.value=n.val(),a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){$(t).validatebox("validate")},a.options.delay)):_48b(t),setTimeout(arguments.callee,200))}())}function _48c(e){var t=e.data.target,a=$.data(t,"validatebox");a.timer&&(clearTimeout(a.timer),a.timer=void 0),a.validating=!1,_48f(t)}function _490(e){var t=e.data.target;$(t).hasClass("validatebox-invalid")&&_492(t)}function _493(e){var t=e.data.target;$.data(t,"validatebox").validating||_48f(t)}function _492(e){var t=$.data(e,"validatebox"),a=t.options;$(e).tooltip($.extend({},a.tipOptions,{content:t.message,position:a.tipPosition,deltaX:a.deltaX})).tooltip("show"),t.tip=!0}function _48b(e){var t=$.data(e,"validatebox");t&&t.tip&&$(e).tooltip("reposition")}function _48f(e){$.data(e,"validatebox").tip=!1,$(e).tooltip("hide")}function _49c(_49d){var _49e=$.data(_49d,"validatebox"),opts=_49e.options,box=$(_49d);opts.onBeforeValidate.call(_49d);var _49f=_4a0();return opts.onValidate.call(_49d,_49f),_49f;function _4a1(e){_49e.message=e}function _4a2(_4a3,_4a4){var _4a5=box.val(),_4a6=/([a-zA-Z_]+)(.*)/.exec(_4a3),rule=opts.rules[_4a6[1]];if(rule&&_4a5){var _4a7=_4a4||opts.validParams||eval(_4a6[2]);if(!rule.validator.call(_49d,_4a5,_4a7)){box.addClass("validatebox-invalid");var _4a8=rule.message;if(_4a7)for(var i=0;i<_4a7.length;i++)_4a8=_4a8.replace(new RegExp("\\{"+i+"\\}","g"),_4a7[i]);return _4a1(opts.invalidMessage||_4a8),void(_49e.validating&&_492(_49d))}}return 1}function _4a0(){if(box.removeClass("validatebox-invalid"),_48f(_49d),opts.novalidate||box.is(":disabled"))return!0;if(opts.required&&""==box.val())return box.addClass("validatebox-invalid"),_4a1(opts.missingMessage),_49e.validating&&_492(_49d),!1;if(opts.validType)if($.isArray(opts.validType)){for(var e=0;e<opts.validType.length;e++)if(!_4a2(opts.validType[e]))return!1}else if("string"==typeof opts.validType){if(!_4a2(opts.validType))return!1}else for(var t in opts.validType){if(!_4a2(t,opts.validType[t]))return!1}return!0}}function _4ab(e,t){var a=$.data(e,"validatebox").options;null!=t&&(a.novalidate=t),a.novalidate&&($(e).removeClass("validatebox-invalid"),_48f(e)),_49c(e),_485(e)}$.fn.validatebox=function(t,e){return"string"==typeof t?$.fn.validatebox.methods[t](this,e):(t=t||{},this.each(function(){var e=$.data(this,"validatebox");e?$.extend(e.options,t):(init(this),$.data(this,"validatebox",{options:$.extend({},$.fn.validatebox.defaults,$.fn.validatebox.parseOptions(this),t)})),_4ab(this),_49c(this)}))},$.fn.validatebox.methods={options:function(e){return $.data(e[0],"validatebox").options},destroy:function(e){return e.each(function(){_482(this)})},validate:function(e){return e.each(function(){_49c(this)})},isValid:function(e){return _49c(e[0])},enableValidation:function(e){return e.each(function(){_4ab(this,!1)})},disableValidation:function(e){return e.each(function(){_4ab(this,!0)})}},$.fn.validatebox.parseOptions=function(e){var t=$(e);return $.extend({},$.parser.parseOptions(e,["validType","missingMessage","invalidMessage","tipPosition",{delay:"number",deltaX:"number"}]),{required:!!t.attr("required")||void 0,novalidate:null!=t.attr("novalidate")||void 0})},$.fn.validatebox.defaults={required:!1,validType:null,validParams:null,delay:200,missingMessage:"This field is required.",invalidMessage:null,tipPosition:"right",deltaX:0,novalidate:!1,events:{focus:_488,blur:_48c,mouseenter:_490,mouseleave:_493,click:function(e){var t=$(e.data.target);t.is(":focus")||t.trigger("focus")}},tipOptions:{showEvent:"none",hideEvent:"none",showDelay:0,hideDelay:0,zIndex:"",onShow:function(){$(this).tooltip("tip").css({color:"#000",borderColor:"#CC9933",backgroundColor:"#FFFFCC"})},onHide:function(){$(this).tooltip("destroy")}},rules:{email:{validator:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},message:"Please enter a valid email address."},url:{validator:function(e){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},message:"Please enter a valid URL."},length:{validator:function(e,t){var a=$.trim(e).length;return a>=t[0]&&a<=t[1]},message:"Please enter a value between {0} and {1}."},remote:{validator:function(e,t){var a={};return a[t[1]]=e,"true"==$.ajax({url:t[0],dataType:"json",data:a,async:!1,cache:!1,type:"post"}).responseText},message:"Please fix this field."},CHS:{validator:function(e,t){return/^[\u0391-\uFFE5]+$/.test(e)},message:""},english:{validator:function(e){return/^[A-Za-z]+$/i.test(e)},message:""},mobile:{validator:function(e,t){return/^0{0,1}1[3,8,5][0-9]{9}$/.test(e)},message:""}},onBeforeValidate:function(){},onValidate:function(e){}}}(jQuery),function(p){function s(e,t){var a=p.data(e,"textbox"),n=a.options,i=a.textbox,o=i.parent();if(t&&(n.width=t),isNaN(parseInt(n.width))){var r=p(e).clone();r.css("visibility","hidden"),r.insertAfter(e),n.width=r.outerWidth(),r.remove()}var d=i.is(":visible");d||i.appendTo("body");var s=i.find(".textbox-text"),l=i.find(".textbox-button"),c=i.find(".textbox-addon"),u=c.find(".textbox-icon");if(i._size(n,o),l.linkbutton("resize",{height:i.height()}),l.css({left:"left"==n.buttonAlign?0:"",right:"right"==n.buttonAlign?0:""}),c.css({left:"left"==n.iconAlign?"left"==n.buttonAlign?l._outerWidth():0:"",right:"right"==n.iconAlign?"right"==n.buttonAlign?l._outerWidth():n.buttonRightVal:""}),u.css({width:n.iconWidth+"px",height:i.height()+"px","line-height":i.height()+"px"}),n.buttonFilter?s.css({paddingLeft:e.style.paddingLeft||"",paddingRight:e.style.paddingRight||"",marginLeft:70,marginRight:h("right")}):s.css({paddingLeft:e.style.paddingLeft||"",paddingRight:e.style.paddingRight||"",marginLeft:h("left"),marginRight:h("right")}),n.multiline)s.css({paddingTop:e.style.paddingTop||"",paddingBottom:e.style.paddingBottom||""}),s._outerHeight(i.height());else{var f=Math.floor((i.height()-s.height())/2);s.css({paddingTop:f+"px",paddingBottom:f+"px"})}function h(e){return(n.iconAlign==e?c._outerWidth():0)+(n.buttonAlign==e?l._outerWidth():0)}n.buttonFilter?s._outerWidth(i.width()-u.length*n.iconWidth-l._outerWidth()-110):s._outerWidth(i.width()-u.length*n.iconWidth-l._outerWidth()),d||i.insertAfter(e),n.onResize.call(e,n.width,n.height)}function o(e){var n=p(e).textbox("options");p(e).textbox("textbox").validatebox(p.extend({},n,{deltaX:p(e).textbox("getTipX"),onBeforeValidate:function(){var e=p(this);e.is(":focus")||(n.oldInputValue=e.val(),e.val(n.value))},onValidate:function(e){var t=p(this);null!=n.oldInputValue&&(t.val(n.oldInputValue),n.oldInputValue=void 0);var a=t.parent();e?a.removeClass("textbox-invalid"):a.addClass("textbox-invalid")}}))}function r(i){var e=p.data(i,"textbox"),o=e.options,t=e.textbox,a=t.find(".textbox-text");if(a.attr("placeholder",o.prompt),a.unbind(".textbox"),!o.disabled&&!o.readonly)for(var n in a.bind("blur.textbox",function(e){t.hasClass("textbox-focused")&&(o.value=p(this).val(),""==o.value?p(this).addClass("textbox-prompt"):p(this).removeClass("textbox-prompt"),t.removeClass("textbox-focused"))}).bind("focus.textbox",function(e){t.hasClass("textbox-focused")||(p(this).val()!=o.value&&p(this).val(o.value),p(this).removeClass("textbox-prompt"),t.addClass("textbox-focused"))}),o.inputEvents)a.bind(n+".textbox",{target:i},o.inputEvents[n]);var r=t.find(".textbox-addon");r.unbind().bind("click",{target:i},function(e){var t=p(e.target).closest("a.textbox-icon:not(.textbox-icon-disabled)");if(t.length){var a=parseInt(t.attr("icon-index")),n=o.icons[a];n&&n.handler&&(n.handler.call(t[0],e),o.onClickIcon.call(i,a))}}),r.find(".textbox-icon").each(function(e){var t=o.icons[e],a=p(this);!t||t.disabled||o.disabled||o.readonly?a.addClass("textbox-icon-disabled"):a.removeClass("textbox-icon-disabled")});var d=t.find(".textbox-button");d.unbind(".textbox").bind("click.textbox",function(){d.linkbutton("options").disabled||o.onClickButton.call(i)}),d.linkbutton(o.disabled||o.readonly?"disable":"enable"),t.unbind(".textbox").bind("_resize.textbox",function(e,t){return(p(this).hasClass("easyui-fluid")||t)&&s(i),!1})}function d(e,t){var a=p.data(e,"textbox"),n=a.options,i=a.textbox;t?(n.disabled=!0,p(e).attr("disabled","disabled"),i.addClass("textbox-disabled"),i.find(".textbox-text,.textbox-value").attr("disabled","disabled")):(n.disabled=!1,i.removeClass("textbox-disabled"),p(e).removeAttr("disabled"),i.find(".textbox-text,.textbox-value").removeAttr("disabled"))}function l(e,t){var a=p.data(e,"textbox"),n=a.options;n.readonly=null==t||t,a.textbox.removeClass("textbox-readonly").addClass(n.readonly?"textbox-readonly":"");var i=a.textbox.find(".textbox-text");i.removeAttr("readonly"),!n.readonly&&n.editable||i.attr("readonly","readonly")}p.fn.textbox=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=p.data(this,"textbox");e?(p.extend(e.options,t),null!=t.value&&(e.options.originalValue=t.value)):(e=p.data(this,"textbox",{options:p.extend({},p.fn.textbox.defaults,p.fn.textbox.parseOptions(this),t),textbox:function(e){p(e).addClass("textbox-f").hide();var t=p('<span class="textbox"><input class="textbox-text" autocomplete="off"><input type="hidden" class="textbox-value"></span>').insertAfter(e),a=p(e).attr("name");return a&&(t.find("input.textbox-value").attr("name",a),p(e).removeAttr("name").attr("textboxName",a)),t}(this)})).options.originalValue=e.options.value,function(e){var t=p.data(e,"textbox"),a=t.options,n=t.textbox;n.addClass(a.cls),n.find(".textbox-text").remove(),a.multiline?p('<textarea class="textbox-text" autocomplete="off"></textarea>').prependTo(n):p('<input type="'+a.type+'" class="textbox-text" autocomplete="off">').prependTo(n),n.find(".textbox-addon").remove();var i=a.icons?p.extend(!0,[],a.icons):[];if(a.iconCls&&i.push({iconCls:a.iconCls,disabled:!0}),i.length){var o=p('<span class="textbox-addon"></span>').prependTo(n);o.addClass("textbox-addon-"+a.iconAlign);for(var r=0;r<i.length;r++)a.isSearch?o.append('<a href="javascript:void(0)" class="textbox-icon" icon-index="'+r+'" tabindex="-1"><i class="'+i[r].iconCls+'"></i></a>'):o.append('<a href="javascript:void(0)" class="textbox-icon '+i[r].iconCls+'" icon-index="'+r+'" tabindex="-1"></a>')}n.find(".textbox-button").remove(),(a.buttonText||a.buttonIcon)&&p('<a href="javascript:void(0)" class="textbox-button"></a>').prependTo(n).addClass("textbox-button-"+a.buttonAlign).linkbutton({text:a.buttonText,iconCls:a.buttonIcon}),a.buttonFilter&&(p('<a href="javascript:void(0)" class="search-filter-field" onclick="Strack.toggle_filter_field(this)" data-maindom="'+a.filterBar.main_dom+'" data-bardom="'+a.filterBar.bar_dom+'"><i class="filter icon icon-left"></i>'+StrackLang.Field+"</a>").prependTo(n),p('<a href="javascript:void(0)" class="search-filter-button" onclick="Strack.toggle_filter(this)" data-maindom="'+a.filterBar.main_dom+'" data-bardom="'+a.filterBar.bar_dom+'"><i class="icon-uniF141"></i></a>').appendTo(n)),d(e,a.disabled),l(e,a.readonly)}(this),r(this),s(this),o(this),p(this).textbox("initValue",e.options.value)});var a=p.fn.textbox.methods[t];return a?a(this,e):this.each(function(){p(this).textbox("textbox").validatebox(t,e)})},p.fn.textbox.methods={options:function(e){return p.data(e[0],"textbox").options},cloneFrom:function(e,i){return e.each(function(){var e=p(this);if(!e.data("textbox")){p(i).data("textbox")||p(i).textbox();var t=e.attr("name")||"";e.addClass("textbox-f").hide(),e.removeAttr("name").attr("textboxName",t);var a=p(i).next().clone().insertAfter(e);a.find("input.textbox-value").attr("name",t),p.data(this,"textbox",{options:p.extend(!0,{},p(i).textbox("options")),textbox:a});var n=p(i).textbox("button");n.length&&e.textbox("button").linkbutton(p.extend(!0,{},n.linkbutton("options"))),r(this),o(this)}})},textbox:function(e){return p.data(e[0],"textbox").textbox.find(".textbox-text")},button:function(e){return p.data(e[0],"textbox").textbox.find(".textbox-button")},destroy:function(e){return e.each(function(){var e,t;e=this,(t=p.data(e,"textbox").textbox).find(".textbox-text").validatebox("destroy"),t.remove(),p(e).remove()})},resize:function(e,t){return e.each(function(){s(this,t)})},disable:function(e){return e.each(function(){d(this,!0),r(this)})},enable:function(e){return e.each(function(){d(this,!1),r(this)})},readonly:function(e,t){return e.each(function(){l(this,t),r(this)})},isValid:function(e){return e.textbox("textbox").validatebox("isValid")},clear:function(e){return e.each(function(){p(this).textbox("setValue","")})},setText:function(e,a){return e.each(function(){var e=p(this).textbox("options"),t=p(this).textbox("textbox");a=null==a?"":String(a),p(this).textbox("getText")!=a&&t.val(a),e.value=a,t.is(":focus")||(a?t.removeClass("textbox-prompt"):t.addClass("textbox-prompt")),p(this).textbox("validate")})},initValue:function(e,t){return e.each(function(){var e=p.data(this,"textbox");e.options.value="",p(this).textbox("setText",t),e.textbox.find(".textbox-value").val(t),p(this).val(t)})},setValue:function(e,a){return e.each(function(){var e=p.data(this,"textbox").options,t=p(this).textbox("getValue");p(this).textbox("initValue",a),t!=a&&(e.onChange.call(this,a,t),p(this).closest("form").trigger("_change",[this]))})},getText:function(e){var t=e.textbox("textbox");return t.is(":focus")?t.val():e.textbox("options").value},getValue:function(e){return e.data("textbox").textbox.find(".textbox-value").val()},reset:function(e){return e.each(function(){var e=p(this).textbox("options");p(this).textbox("setValue",e.originalValue)})},getIcon:function(e,t){return e.data("textbox").textbox.find(".textbox-icon:eq("+t+")")},getTipX:function(e){var t=e.data("textbox"),a=t.options,n=t.textbox,i=(n.find(".textbox-text"),n.find(".textbox-addon")._outerWidth()),o=n.find(".textbox-button")._outerWidth();return"right"==a.tipPosition?("right"==a.iconAlign?i:0)+("right"==a.buttonAlign?o:0)+1:"left"==a.tipPosition?("left"==a.iconAlign?-i:0)+("left"==a.buttonAlign?-o:0)-1:i/2*("right"==a.iconAlign?1:-1)}},p.fn.textbox.parseOptions=function(e){var t=p(e);return p.extend({},p.fn.validatebox.parseOptions(e),p.parser.parseOptions(e,["prompt","iconCls","iconAlign","buttonText","buttonIcon","buttonAlign",{multiline:"boolean",editable:"boolean",iconWidth:"number"}]),{value:t.val()||void 0,type:t.attr("type")?t.attr("type"):void 0,disabled:!!t.attr("disabled")||void 0,readonly:!!t.attr("readonly")||void 0})},p.fn.textbox.defaults=p.extend({},p.fn.validatebox.defaults,{width:"auto",height:26,prompt:"",value:"",type:"text",multiline:!1,editable:!0,disabled:!1,readonly:!1,icons:[],iconCls:null,iconAlign:"right",iconWidth:24,buttonText:"",buttonIcon:null,buttonFilter:!1,filterBar:{},showFilterField:null,buttonRightVal:0,buttonRadius:!0,buttonAlign:"right",checkbox:!1,inputEvents:{blur:function(e){var t=p(e.data.target),a=t.textbox("options");t.textbox("setValue",a.value)},keydown:function(e){if(13==e.keyCode){var t=p(e.data.target);t.textbox("setValue",t.textbox("getText"))}}},onChange:function(e,t){},onResize:function(e,t){},onClickButton:function(){},onClickIcon:function(e){}})}(jQuery),function(o){var r=0;function d(e){var t=o.data(e,"filebox"),a=t.options;t.filebox.find(".textbox-value").remove(),a.oldValue="";var n=o('<input type="file" class="textbox-value">').appendTo(t.filebox);return n.attr("id",a.fileboxId).attr("name",o(e).attr("textboxName")||""),n.change(function(){o(e).filebox("setText",this.value),a.onChange.call(e,this.value,a.oldValue),a.oldValue=this.value}),n}o.fn.filebox=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=o.data(this,"filebox");e?o.extend(e.options,t):o.data(this,"filebox",{options:o.extend({},o.fn.filebox.defaults,o.fn.filebox.parseOptions(this),t)}),function(e){var t=o.data(e,"filebox"),a=t.options;a.fileboxId="filebox_file_id_"+ ++r,o(e).addClass("filebox-f").textbox(a),o(e).textbox("textbox").attr("readonly","readonly"),t.filebox=o(e).next().addClass("filebox");var n=d(e),i=o(e).filebox("button");i.length&&(o('<label class="filebox-label" for="'+a.fileboxId+'"></label>').appendTo(i),i.linkbutton("options").disabled?n.attr("disabled","disabled"):n.removeAttr("disabled"))}(this)});var a=o.fn.filebox.methods[t];return a?a(this,e):this.textbox(t,e)},o.fn.filebox.methods={options:function(e){var t=e.textbox("options");return o.extend(o.data(e[0],"filebox").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},clear:function(e){return e.each(function(){o(this).textbox("clear"),d(this)})},reset:function(e){return e.each(function(){o(this).filebox("clear")})}},o.fn.filebox.parseOptions=function(e){return o.extend({},o.fn.textbox.parseOptions(e),{})},o.fn.filebox.defaults=o.extend({},o.fn.textbox.defaults,{buttonIcon:null,buttonText:"Choose File",buttonAlign:"right",inputEvents:{}})}(jQuery),function($){function _506(t){var a=$.data(t,"searchbox"),n=a.options,e=$.extend(!0,[],n.icons);e.push({iconCls:"search icon",handler:function(e){var t=$(e.data.target);t.searchbox("options").searcher.call(e.data.target,t.searchbox("getValue"),t.searchbox("getName"))}}),function(){if(n.menu){a.menu=$(n.menu).menu();var e=a.menu.menu("options"),t=e.onClick;e.onClick=function(e){o(e),t.call(this,e)}}else a.menu&&a.menu.menu("destroy"),a.menu=null}();var i=function(){{if(a.menu){var e=a.menu.children("div.menu-item:first");return a.menu.children("div.menu-item").each(function(){if($.extend({},$.parser.parseOptions(this),{selected:!!$(this).attr("selected")||void 0}).selected)return e=$(this),!1}),a.menu.menu("getItem",e[0])}return null}}();function o(e){e&&($(t).textbox("button").menubutton({text:e.text,iconCls:e.iconCls||null,menu:a.menu,menuAlign:n.buttonAlign,plain:!1}),a.searchbox.find("input.textbox-value").attr("name",e.name||e.text),$(t).searchbox("resize"))}$(t).addClass("searchbox-f").textbox($.extend({},n,{icons:e,buttonText:i?i.text:""})),$(t).attr("searchboxName",$(t).attr("textboxName")),a.searchbox=$(t).next(),a.searchbox.addClass("searchbox"),n.buttonRadius&&a.searchbox.css("border-radius","500em"),o(i)}$.fn.searchbox=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=$.data(this,"searchbox");t.isSearch=!0,e?$.extend(e.options,t):$.data(this,"searchbox",{options:$.extend({},$.fn.searchbox.defaults,$.fn.searchbox.parseOptions(this),t)}),_506(this)});var a=$.fn.searchbox.methods[t];return a?a(this,e):this.textbox(t,e)},$.fn.searchbox.methods={options:function(e){var t=e.textbox("options");return $.extend($.data(e[0],"searchbox").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly,showFilterField:t.showFilterField})},menu:function(e){return $.data(e[0],"searchbox").menu},getName:function(e){return $.data(e[0],"searchbox").searchbox.find("input.textbox-value").attr("name")},selectName:function(e,t){return e.each(function(){var e=$.data(this,"searchbox").menu;e&&e.children("div.menu-item").each(function(){if(e.menu("getItem",this).name==t)return $(this).triggerHandler("click"),!1})})},destroy:function(e){return e.each(function(){var e=$(this).searchbox("menu");e&&e.menu("destroy"),$(this).textbox("destroy")})}},$.fn.searchbox.parseOptions=function(_515){var t=$(_515);return $.extend({},$.fn.textbox.parseOptions(_515),$.parser.parseOptions(_515,["menu"]),{searcher:t.attr("searcher")?eval(t.attr("searcher")):void 0})},$.fn.searchbox.defaults=$.extend({},$.fn.textbox.defaults,{inputEvents:$.extend({},$.fn.textbox.defaults.inputEvents,{keydown:function(e){if(13==e.keyCode){e.preventDefault();var t=$(e.data.target),a=t.searchbox("options");return t.searchbox("setValue",$(this).val()),a.searcher.call(e.data.target,t.searchbox("getValue"),t.searchbox("getName")),!1}}}),buttonAlign:"left",menu:null,searcher:function(e,t){}})}(jQuery),function(u){function n(d,e){var s=u.data(d,"form").options;u.extend(s,e||{});var t=u.extend({},s.queryParams);if(0!=s.onSubmit.call(d,t)){u(d).find(".textbox-text:focus").blur();var l="easyui_frame_"+(new Date).getTime(),a=u("<iframe id="+l+" name="+l+"></iframe>").appendTo("body");a.attr("src",window.ActiveXObject?"javascript:false":"about:blank"),a.css({position:"absolute",top:-1e3,left:-1e3}),a.bind("load",r),function(e){var t=u(d);s.url&&t.attr("action",s.url);var a=t.attr("target"),n=t.attr("action");t.attr("target",l);var i=u();try{for(var o in e){var r=u('<input type="hidden" name="'+o+'">').val(e[o]).appendTo(t);i=i.add(r)}c(),t[0].submit()}finally{t.attr("action",n),a?t.attr("target",a):t.removeAttr("target"),i.remove()}}(t);var o=10}function c(){var e=u("#"+l);if(e.length)try{var t=e.contents()[0].readyState;t&&"uninitialized"==t.toLowerCase()&&setTimeout(c,100)}catch(e){r()}}function r(){var e=u("#"+l);if(e.length){e.unbind();var t="";try{var a=e.contents().find("body");if(""==(t=a.html())&&--o)return void setTimeout(r,100);var n=a.find(">textarea");if(n.length)t=n.val();else{var i=a.find(">pre");i.length&&(t=i.html())}}catch(e){}s.success(t),setTimeout(function(){e.unbind(),e.remove()},100)}}}function i(e,t){t=t||{};var a=u.data(e,"form");a?u.extend(a.options,t):u.data(e,"form",{options:u.extend({},u.fn.form.defaults,u.fn.form.parseOptions(e),t)})}function o(e,t){u.data(e,"form").options.novalidate=t,u(e).find(".validatebox-text:not(:disabled)").validatebox(t?"disableValidation":"enableValidation")}u.fn.form=function(t,e){return"string"==typeof t?(this.each(function(){i(this)}),u.fn.form.methods[t](this,e)):this.each(function(){var e,a;i(this,t),e=this,a=u.data(e,"form").options,u(e).unbind(".form"),a.ajax&&u(e).bind("submit.form",function(){return setTimeout(function(){n(e,a)},0),!1}),u(e).bind("_change.form",function(e,t){a.onChange.call(this,t)}).bind("change.form",function(e){var t=e.target;u(t).hasClass("textbox-text")||a.onChange.call(this,t)}),o(e,a.novalidate)})},u.fn.form.methods={options:function(e){return u.data(e[0],"form").options},submit:function(e,t){return e.each(function(){n(this,t)})},load:function(e,t){return e.each(function(){!function(r,e){var d=u.data(r,"form").options;if("string"==typeof e){var t={};if(0==d.onBeforeLoad.call(r,t))return;u.ajax({url:e,data:t,dataType:"json",success:function(e){a(e)},error:function(){d.onLoadError.apply(r,arguments)}})}else a(e);function a(e){var t=u(r);for(var a in e){var n=e[a];i(a,n)||o(a,n)||(t.find('input[name="'+a+'"]').val(n),t.find('textarea[name="'+a+'"]').val(n),t.find('select[name="'+a+'"]').val(n))}d.onLoadSuccess.call(r,e),t.form("validate")}function i(e,t){var a=u(r).find('[switchbuttonName="'+e+'"]');return a.length?(a.switchbutton("uncheck"),a.each(function(){n(u(this).switchbutton("options").value,t)&&u(this).switchbutton("check")}),1):(a=u(r).find('input[name="'+e+'"][type=radio], input[name="'+e+'"][type=checkbox]')).length?(a._propAttr("checked",!1),a.each(function(){n(u(this).val(),t)&&u(this)._propAttr("checked",!0)}),1):void 0}function n(e,t){return e==String(t)||0<=u.inArray(e,u.isArray(t)?t:[t])}function o(e,t){var a=u(r).find('[textboxName="'+e+'"],[sliderName="'+e+'"]');if(a.length)for(var n=0;n<d.fieldTypes.length;n++){var i=d.fieldTypes[n],o=a.data(i);if(o)return o.options.multiple||o.options.range?a[i]("setValues",t):a[i]("setValue",t),1}}}(this,t)})},clear:function(e){return e.each(function(){!function(e){u("input,select,textarea",e).each(function(){var e=this.type,t=this.tagName.toLowerCase();if("text"==e||"hidden"==e||"password"==e||"textarea"==t)this.value="";else if("file"==e){var a=u(this);if(!a.hasClass("textbox-value")){var n=a.clone().val("");n.insertAfter(a),a.data("validatebox")?(a.validatebox("destroy"),n.validatebox()):a.remove()}}else"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)});for(var t=u(e),a=u.data(e,"form").options,n=a.fieldTypes.length-1;0<=n;n--){var i=a.fieldTypes[n],o=t.find("."+i+"-f");o.length&&o[i]&&o[i]("clear")}t.form("validate")}(this)})},reset:function(e){return e.each(function(){!function(e){e.reset();for(var t=u(e),a=u.data(e,"form").options,n=a.fieldTypes.length-1;0<=n;n--){var i=a.fieldTypes[n],o=t.find("."+i+"-f");o.length&&o[i]&&o[i]("reset")}t.form("validate")}(this)})},validate:function(e){return function(e){if(u.fn.validatebox){var t=u(e);t.find(".validatebox-text:not(:disabled)").validatebox("validate");var a=t.find(".validatebox-invalid");return a.filter(":not(:disabled):first").focus(),0==a.length}return!0}(e[0])},disableValidation:function(e){return e.each(function(){o(this,!0)})},enableValidation:function(e){return e.each(function(){o(this,!1)})}},u.fn.form.parseOptions=function(e){var t=u(e);return u.extend({},u.parser.parseOptions(e,[{ajax:"boolean"}]),{url:t.attr("action")?t.attr("action"):void 0})},u.fn.form.defaults={fieldTypes:["combobox","combotree","combogrid","datetimebox","datebox","combo","datetimespinner","timespinner","numberspinner","spinner","slider","searchbox","tagbox","numberbox","textbox","switchbutton"],novalidate:!1,ajax:!0,url:null,queryParams:{},onSubmit:function(e){return u(this).form("validate")},success:function(e){},onBeforeLoad:function(e){},onLoadSuccess:function(e){},onLoadError:function(){},onChange:function(e){}}}(jQuery),function(r){r.fn.numberbox=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=r.data(this,"numberbox");e?r.extend(e.options,t):e=r.data(this,"numberbox",{options:r.extend({},r.fn.numberbox.defaults,r.fn.numberbox.parseOptions(this),t)}),function(e){var t=r.data(e,"numberbox"),a=t.options;r(e).addClass("numberbox-f").textbox(a),r(e).textbox("textbox").css({imeMode:"disabled"}),r(e).attr("numberboxName",r(e).attr("textboxName")),t.numberbox=r(e).next(),t.numberbox.addClass("numberbox");var n=a.parser.call(e,a.value),i=a.formatter.call(e,n);r(e).numberbox("initValue",n).numberbox("setText",i)}(this)});var a=r.fn.numberbox.methods[t];return a?a(this,e):this.textbox(t,e)},r.fn.numberbox.methods={options:function(e){var t=e.data("textbox")?e.textbox("options"):{};return r.extend(r.data(e[0],"numberbox").options,{width:t.width,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},fix:function(e){return e.each(function(){r(this).numberbox("setValue",r(this).numberbox("getText"))})},setValue:function(e,i){return e.each(function(){var e,t,a,n;e=this,t=i,a=r.data(e,"numberbox").options,t=a.parser.call(e,t),n=a.formatter.call(e,t),a.value=t,r(e).textbox("setText",n).textbox("setValue",t),n=a.formatter.call(e,r(e).textbox("getValue")),r(e).textbox("setText",n)})},clear:function(e){return e.each(function(){r(this).textbox("clear"),r(this).numberbox("options").value=""})},reset:function(e){return e.each(function(){r(this).textbox("reset"),r(this).numberbox("setValue",r(this).numberbox("getValue"))})}},r.fn.numberbox.parseOptions=function(e){var t=r(e);return r.extend({},r.fn.textbox.parseOptions(e),r.parser.parseOptions(e,["decimalSeparator","groupSeparator","suffix",{min:"number",max:"number",precision:"number"}]),{prefix:t.attr("prefix")?t.attr("prefix"):void 0})},r.fn.numberbox.defaults=r.extend({},r.fn.textbox.defaults,{inputEvents:{keypress:function(e){var t=e.data.target;return r(t).numberbox("options").filter.call(t,e)},blur:function(e){var t=e.data.target;r(t).numberbox("setValue",r(t).numberbox("getText"))},keydown:function(e){if(13===e.keyCode){var t=e.data.target;r(t).numberbox("setValue",r(t).numberbox("getText"))}}},min:null,max:null,precision:0,decimalSeparator:".",groupSeparator:"",prefix:"",suffix:"",filter:function(e){var t=r(this).numberbox("options"),a=r(this).numberbox("getText");if(13==e.which)return!0;if(45==e.which)return-1==a.indexOf("-");var n=String.fromCharCode(e.which);return n==t.decimalSeparator?-1==a.indexOf(n):n==t.groupSeparator||(48<=e.which&&e.which<=57&&0==e.ctrlKey&&0==e.shiftKey||0==e.which||8==e.which||1==e.ctrlKey&&(99==e.which||118==e.which))},formatter:function(e){if(!e)return e;e+="";var t=r(this).numberbox("options"),a=e,n="",i=e.indexOf(".");if(0<=i&&(a=e.substring(0,i),n=e.substring(i+1,e.length)),t.groupSeparator)for(var o=/(\d+)(\d{3})/;o.test(a);)a=a.replace(o,"$1"+t.groupSeparator+"$2");return n?t.prefix+a+t.decimalSeparator+n+t.suffix:t.prefix+a+t.suffix},parser:function(e){e+="";var t=r(this).numberbox("options");parseFloat(e)!=e&&(t.prefix&&(e=r.trim(e.replace(new RegExp("\\"+r.trim(t.prefix),"g"),""))),t.suffix&&(e=r.trim(e.replace(new RegExp("\\"+r.trim(t.suffix),"g"),""))),t.groupSeparator&&(e=r.trim(e.replace(new RegExp("\\"+t.groupSeparator,"g"),""))),t.decimalSeparator&&(e=r.trim(e.replace(new RegExp("\\"+t.decimalSeparator,"g"),"."))),e=e.replace(/\s/g,""));var a=parseFloat(e).toFixed(t.precision);return isNaN(a)?a="":"number"==typeof t.min&&a<t.min?a=t.min.toFixed(t.precision):"number"==typeof t.max&&a>t.max&&(a=t.max.toFixed(t.precision)),a}})}(jQuery),function(w){function n(e,t){var a=w.data(e,"calendar").options,n=w(e);t&&w.extend(a,{width:t.width,height:t.height}),n._size(a,n.parent()),n.find(".calendar-body")._outerHeight(n.height()-n.find(".calendar-header")._outerHeight()),n.find(".calendar-menu").is(":visible")&&p(e)}function p(e){var t=w.data(e,"calendar").options;if(w(e).find(".calendar-menu").show(),w(e).find(".calendar-menu-month-inner").is(":empty")){w(e).find(".calendar-menu-month-inner").empty();for(var a=w('<table class="calendar-mtable"></table>').appendTo(w(e).find(".calendar-menu-month-inner")),n=0,i=0;i<3;i++)for(var o=w("<tr></tr>").appendTo(a),r=0;r<4;r++)w('<td class="calendar-nav calendar-menu-month"></td>').html(t.months[n++]).attr("abbr",n).appendTo(o)}var d=w(e).find(".calendar-body"),s=w(e).find(".calendar-menu"),l=s.find(".calendar-menu-year-inner"),c=s.find(".calendar-menu-month-inner");l.find("input").val(t.year).focus(),c.find("td.calendar-selected").removeClass("calendar-selected"),c.find("td:eq("+(t.month-1)+")").addClass("calendar-selected"),s._outerWidth(d._outerWidth()),s._outerHeight(d._outerHeight()),c._outerHeight(s.height()-l._outerHeight())}function g(e){var t=w.data(e,"calendar").options;t.current&&!t.validator.call(e,t.current)&&(t.current=null);var a=new Date,n=a.getFullYear()+","+(a.getMonth()+1)+","+a.getDate(),i=t.current?t.current.getFullYear()+","+(t.current.getMonth()+1)+","+t.current.getDate():"",o=6-t.firstDay,r=o+1;7<=o&&(o-=7),7<=r&&(r-=7),w(e).find(".calendar-title span").html(t.months[t.month-1]+" "+t.year);var d=w(e).find("div.calendar-body");d.children("table").remove();var s=['<table class="calendar-dtable" cellspacing="0" cellpadding="0" border="0">'];s.push("<thead><tr>");for(var l=t.firstDay;l<t.weeks.length;l++)s.push("<th>"+t.weeks[l]+"</th>");for(l=0;l<t.firstDay;l++)s.push("<th>"+t.weeks[l]+"</th>");s.push("</tr></thead>"),s.push("<tbody>");var c=function(e,t,a){for(var n=w.data(e,"calendar").options,i=[],o=new Date(t,a,0).getDate(),r=1;r<=o;r++)i.push([t,a,r]);for(var d=[],s=[],l=-1;0<i.length;){var c=i.shift();s.push(c);var u=new Date(c[0],c[1]-1,c[2]).getDay();l==u?u=0:u==(0==n.firstDay?7:n.firstDay)-1&&(d.push(s),s=[]),l=u}s.length&&d.push(s);var f=d[0];if(f.length<7)for(;f.length<7;){var h=f[0];c=new Date(h[0],h[1]-1,h[2]-1);f.unshift([c.getFullYear(),c.getMonth()+1,c.getDate()])}else{for(h=f[0],s=[],r=1;r<=7;r++){c=new Date(h[0],h[1]-1,h[2]-r);s.unshift([c.getFullYear(),c.getMonth()+1,c.getDate()])}d.unshift(s)}for(var p=d[d.length-1];p.length<7;){var g=p[p.length-1];c=new Date(g[0],g[1]-1,g[2]+1);p.push([c.getFullYear(),c.getMonth()+1,c.getDate()])}if(d.length<6){for(g=p[p.length-1],s=[],r=1;r<=7;r++){c=new Date(g[0],g[1]-1,g[2]+r);s.push([c.getFullYear(),c.getMonth()+1,c.getDate()])}d.push(s)}return d}(e,t.year,t.month);for(l=0;l<c.length;l++){var u=c[l],f="";0==l?f="calendar-first":l==c.length-1&&(f="calendar-last"),s.push('<tr class="'+f+'">');for(var h=0;h<u.length;h++){var p=u[h],g=p[0]+","+p[1]+","+p[2],b=new Date(p[0],parseInt(p[1])-1,p[2]),v=t.formatter.call(e,b),m=t.styler.call(e,b),x="",_="";"string"==typeof m?_=m:m&&(x=m.class||"",_=m.style||"");f="calendar-day";t.year==p[0]&&t.month==p[1]||(f+=" calendar-other-month"),g==n&&(f+=" calendar-today"),g==i&&(f+=" calendar-selected"),h==o?f+=" calendar-saturday":h==r&&(f+=" calendar-sunday"),0==h?f+=" calendar-first":h==u.length-1&&(f+=" calendar-last"),f+=" "+x,t.validator.call(e,b)||(f+=" calendar-disabled"),s.push('<td class="'+f+'" abbr="'+g+'" style="'+_+'">'+v+"</td>")}s.push("</tr>")}s.push("</tbody>"),s.push("</table>"),d.append(s.join("")),d.children("table.calendar-dtable").prependTo(d),t.onNavigate.call(e,t.year,t.month)}var e;w.fn.calendar=function(t,e){return"string"==typeof t?w.fn.calendar.methods[t](this,e):(t=t||{},this.each(function(){var a,d,s,l,e=w.data(this,"calendar");function c(e){var t=w(e).closest(".calendar-day");return t.length?t:w(e)}function u(e){var t=w(d).find(".calendar-menu"),a=t.find(".calendar-menu-year").val(),n=t.find(".calendar-selected").attr("abbr");isNaN(a)||(s.year=parseInt(a),s.month=parseInt(n),g(d)),e&&t.hide()}function f(e){s.year+=e,g(d),l.find(".calendar-menu-year").val(s.year)}function h(e){s.month+=e,12<s.month?(s.year++,s.month=1):s.month<1&&(s.year--,s.month=12),g(d),l.find("td.calendar-selected").removeClass("calendar-selected"),l.find("td:eq("+(s.month-1)+")").addClass("calendar-selected")}e?w.extend(e.options,t):(e=w.data(this,"calendar",{options:w.extend({},w.fn.calendar.defaults,w.fn.calendar.parseOptions(this),t)}),w(a=this).addClass("calendar").html('<div class="calendar-header"><div class="calendar-nav calendar-prevmonth"></div><div class="calendar-nav calendar-nextmonth"></div><div class="calendar-nav calendar-prevyear"></div><div class="calendar-nav calendar-nextyear"></div><div class="calendar-title"><span class="calendar-text"></span></div></div><div class="calendar-body"><div class="calendar-menu"><div class="calendar-menu-year-inner"><span class="calendar-nav calendar-menu-prev"></span><span><input class="calendar-menu-year" type="text" /></span><span class="calendar-nav calendar-menu-next"></span></div><div class="calendar-menu-month-inner"></div></div></div>'),w(a).bind("_resize",function(e,t){return(w(this).hasClass("easyui-fluid")||t)&&n(a),!1})),0==e.options.border&&w(this).addClass("calendar-noborder"),n(this),d=this,s=w.data(d,"calendar").options,(l=w(d).find(".calendar-menu")).find(".calendar-menu-year").unbind(".calendar").bind("keypress.calendar",function(e){13==e.keyCode&&u(!0)}),w(d).unbind(".calendar").bind("mouseover.calendar",function(e){var t=c(e.target);(t.hasClass("calendar-nav")||t.hasClass("calendar-text")||t.hasClass("calendar-day")&&!t.hasClass("calendar-disabled"))&&t.addClass("calendar-nav-hover")}).bind("mouseout.calendar",function(e){var t=c(e.target);(t.hasClass("calendar-nav")||t.hasClass("calendar-text")||t.hasClass("calendar-day")&&!t.hasClass("calendar-disabled"))&&t.removeClass("calendar-nav-hover")}).bind("click.calendar",function(e){var t=c(e.target);if(t.hasClass("calendar-menu-next")||t.hasClass("calendar-nextyear"))f(1);else if(t.hasClass("calendar-menu-prev")||t.hasClass("calendar-prevyear"))f(-1);else if(t.hasClass("calendar-menu-month"))l.find(".calendar-selected").removeClass("calendar-selected"),t.addClass("calendar-selected"),u(!0);else if(t.hasClass("calendar-prevmonth"))h(-1);else if(t.hasClass("calendar-nextmonth"))h(1);else if(t.hasClass("calendar-text"))l.is(":visible")?l.hide():p(d);else if(t.hasClass("calendar-day")){if(t.hasClass("calendar-disabled"))return;var a=s.current;t.closest("div.calendar-body").find(".calendar-selected").removeClass("calendar-selected"),t.addClass("calendar-selected");var n=t.attr("abbr").split(","),i=parseInt(n[0]),o=parseInt(n[1]),r=parseInt(n[2]);s.current=new Date(i,o-1,r),s.onSelect.call(d,s.current),a&&a.getTime()==s.current.getTime()||s.onChange.call(d,s.current,a),s.year==i&&s.month==o||(s.year=i,s.month=o,g(d))}}),g(this),w(this).find("div.calendar-menu").hide()}))},w.fn.calendar.methods={options:function(e){return w.data(e[0],"calendar").options},resize:function(e,t){return e.each(function(){n(this,t)})},moveTo:function(e,n){return e.each(function(){if(n){var e=w(this).calendar("options");if(e.validator.call(this,n)){var t=e.current;w(this).calendar({year:n.getFullYear(),month:n.getMonth()+1,current:n}),t&&t.getTime()==n.getTime()||e.onChange.call(this,e.current,t)}}else{var a=new Date;w(this).calendar({year:a.getFullYear(),month:a.getMonth()+1,current:n})}})}},w.fn.calendar.parseOptions=function(e){w(e);return w.extend({},w.parser.parseOptions(e,[{firstDay:"number",fit:"boolean",border:"boolean"}]))},w.fn.calendar.defaults={width:210,height:210,fit:!1,border:!0,firstDay:1,weeks:["S","M","T","W","T","F","S"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],year:(new Date).getFullYear(),month:(new Date).getMonth()+1,current:(e=new Date,new Date(e.getFullYear(),e.getMonth(),e.getDate())),formatter:function(e){return e.getDate()},styler:function(e){return""},validator:function(e){return!0},onSelect:function(e){},onChange:function(e,t){},onNavigate:function(e,t){}}}(jQuery),function(o){function n(e){var t=o.data(e,"spinner"),a=t.options,n=o.extend(!0,[],a.icons);n.push({iconCls:"spinner-arrow",handler:function(e){!function(e){var t=e.data.target,a=o(t).spinner("options");o(e.target).closest("a.spinner-arrow-up").length&&(a.spin.call(t,!1),a.onSpinUp.call(t),o(t).spinner("validate"));o(e.target).closest("a.spinner-arrow-down").length&&(a.spin.call(t,!0),a.onSpinDown.call(t),o(t).spinner("validate"))}(e)}}),o(e).addClass("spinner-f").textbox(o.extend({},a,{icons:n}));var i=o(e).textbox("getIcon",n.length-1);i.append('<a href="javascript:void(0)" class="spinner-arrow-up" tabindex="-1"></a>'),i.append('<a href="javascript:void(0)" class="spinner-arrow-down" tabindex="-1"></a>'),o(e).attr("spinnerName",o(e).attr("textboxName")),t.spinner=o(e).next(),t.spinner.addClass("spinner")}o.fn.spinner=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=o.data(this,"spinner");e?o.extend(e.options,t):e=o.data(this,"spinner",{options:o.extend({},o.fn.spinner.defaults,o.fn.spinner.parseOptions(this),t)}),n(this)});var a=o.fn.spinner.methods[t];return a?a(this,e):this.textbox(t,e)},o.fn.spinner.methods={options:function(e){var t=e.textbox("options");return o.extend(o.data(e[0],"spinner").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})}},o.fn.spinner.parseOptions=function(e){return o.extend({},o.fn.textbox.parseOptions(e),o.parser.parseOptions(e,["min","max",{increment:"number"}]))},o.fn.spinner.defaults=o.extend({},o.fn.textbox.defaults,{min:null,max:null,increment:1,spin:function(e){},onSpinUp:function(){},onSpinDown:function(){}})}(jQuery),function(o){o.fn.numberspinner=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=o.data(this,"numberspinner");e?o.extend(e.options,t):o.data(this,"numberspinner",{options:o.extend({},o.fn.numberspinner.defaults,o.fn.numberspinner.parseOptions(this),t)}),function(e){o(e).addClass("numberspinner-f");var t=o.data(e,"numberspinner").options;o(e).numberbox(t).spinner(t),o(e).numberbox("setValue",t.value)}(this)});var a=o.fn.numberspinner.methods[t];return a?a(this,e):this.numberbox(t,e)},o.fn.numberspinner.methods={options:function(e){var t=e.numberbox("options");return o.extend(o.data(e[0],"numberspinner").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})}},o.fn.numberspinner.parseOptions=function(e){return o.extend({},o.fn.spinner.parseOptions(e),o.fn.numberbox.parseOptions(e),{})},o.fn.numberspinner.defaults=o.extend({},o.fn.spinner.defaults,o.fn.numberbox.defaults,{spin:function(e){var t,a,n,i;t=this,a=e,n=o.data(t,"numberspinner").options,i=parseFloat(o(t).numberbox("getValue")||n.value)||0,a?i-=n.increment:i+=n.increment,o(t).numberbox("setValue",i)}})}(jQuery),function(c){function t(e){for(var t=e.data.target,a=c.data(t,"timespinner").options,n=function(e){var t=0;if("number"==typeof e.selectionStart)t=e.selectionStart;else if(e.createTextRange){var a=e.createTextRange(),n=document.selection.createRange();n.setEndPoint("StartToStart",a),t=n.text.length}return t}(this),i=0;i<a.selections.length;i++){var o=a.selections[i];if(n>=o[0]&&n<=o[1])return void u(t,i)}}function u(e,t){var a=c.data(e,"timespinner").options;null!=t&&(a.highlight=t);var n=a.selections[a.highlight];if(n){var i=c(e).timespinner("textbox");!function(e,t,a){if(e.setSelectionRange)e.setSelectionRange(t,a);else if(e.createTextRange){var n=e.createTextRange();n.collapse(),n.moveEnd("character",a),n.moveStart("character",t),n.select()}}(i[0],n[0],n[1]),i.focus()}}c.fn.timespinner=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=c.data(this,"timespinner");e?c.extend(e.options,t):c.data(this,"timespinner",{options:c.extend({},c.fn.timespinner.defaults,c.fn.timespinner.parseOptions(this),t)}),function(e){var t=c.data(e,"timespinner").options,a=c(e).closest(".datagrid-row").height();0<a&&(t.height=a),c(e).addClass("timespinner-f").spinner(t);var n=t.formatter.call(e,t.parser.call(e,t.value));c(e).timespinner("initValue",n)}(this)});var a=c.fn.timespinner.methods[t];return a?a(this,e):this.spinner(t,e)},c.fn.timespinner.methods={options:function(e){var t=e.data("spinner")?e.spinner("options"):{};return c.extend(c.data(e[0],"timespinner").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},setValue:function(e,i){return e.each(function(){var e,t,a,n;e=this,t=i,a=c.data(e,"timespinner").options,t=a.parser.call(e,t),n=a.formatter.call(e,t),c(e).spinner("setValue",n)})},getHours:function(e){var t=c.data(e[0],"timespinner").options,a=e.timespinner("getValue").split(t.separator);return parseInt(a[0],10)},getMinutes:function(e){var t=c.data(e[0],"timespinner").options,a=e.timespinner("getValue").split(t.separator);return parseInt(a[1],10)},getSeconds:function(e){var t=c.data(e[0],"timespinner").options,a=e.timespinner("getValue").split(t.separator);return parseInt(a[2],10)||0}},c.fn.timespinner.parseOptions=function(e){return c.extend({},c.fn.spinner.parseOptions(e),c.parser.parseOptions(e,["separator",{showSeconds:"boolean",highlight:"number"}]))},c.fn.timespinner.defaults=c.extend({},c.fn.spinner.defaults,{inputEvents:c.extend({},c.fn.spinner.defaults.inputEvents,{click:function(e){t.call(this,e)},blur:function(e){var t=c(e.data.target);t.timespinner("setValue",t.timespinner("getText"))},keydown:function(e){if(13==e.keyCode){var t=c(e.data.target);t.timespinner("setValue",t.timespinner("getText"))}}}),formatter:function(e){if(!e)return"";var t=c(this).timespinner("options");if("number"===t.limit){var a=99<parseInt(e[0])?99:parseInt(e[0])<0?0:parseInt(e[0]),n=59<parseInt(e[1])?59:parseInt(e[1])<0?0:parseInt(e[1]);return[o(a),o(n)].join(t.separator)}var i=[o(e.getHours()),o(e.getMinutes())];return t.showSeconds&&i.push(o(e.getSeconds())),i.join(t.separator);function o(e){return(e<10?"0":"")+e}},parser:function(e){var a=c(this).timespinner("options"),t=o(e);if(t){var n=o(a.min),i=o(a.max);n&&t<n&&(t=n),i&&i<t&&(t=i)}return t;function o(e){if(!e)return null;var t=e.split(a.separator);return"number"===a.limit?(1===t.length&&t.push(0),t):new Date(1900,0,0,parseInt(t[0],10)||0,parseInt(t[1],10)||0,parseInt(t[2],10)||0)}},selections:[[0,2],[3,5],[6,8]],separator:":",limit:"number",showSeconds:!1,highlight:0,spin:function(e){var t,a,n,i,o,r,d,s,l;t=this,a=e,n=c.data(t,"timespinner").options,i=c(t).timespinner("getValue"),o=n.selections[n.highlight],r=i.substring(0,o[0]),d=i.substring(o[0],o[1]),s=i.substring(o[1]),l=r+((parseInt(d,10)||0)+n.increment*(a?-1:1))+s,c(t).timespinner("setValue",l),u(t)}})}(jQuery),function(i){i.fn.datetimespinner=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var e,t,a=i.data(this,"datetimespinner");a?i.extend(a.options,n):i.data(this,"datetimespinner",{options:i.extend({},i.fn.datetimespinner.defaults,i.fn.datetimespinner.parseOptions(this),n)}),e=this,t=i.data(e,"datetimespinner").options,i(e).addClass("datetimespinner-f").timespinner(t)});var t=i.fn.datetimespinner.methods[n];return t?t(this,e):this.timespinner(n,e)},i.fn.datetimespinner.methods={options:function(e){var t=e.timespinner("options");return i.extend(i.data(e[0],"datetimespinner").options,{width:t.width,value:t.value,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})}},i.fn.datetimespinner.parseOptions=function(e){return i.extend({},i.fn.timespinner.parseOptions(e),i.parser.parseOptions(e,[]))},i.fn.datetimespinner.defaults=i.extend({},i.fn.timespinner.defaults,{formatter:function(e){return e?i.fn.datebox.defaults.formatter.call(this,e)+" "+i.fn.timespinner.defaults.formatter.call(this,e):""},parser:function(e){if(!(e=i.trim(e)))return null;var t=e.split(" "),a=i.fn.datebox.defaults.parser.call(this,t[0]);if(t.length<2)return a;var n=i.fn.timespinner.defaults.parser.call(this,t[1]);return new Date(a.getFullYear(),a.getMonth(),a.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())},selections:[[0,2],[3,5],[6,10],[11,13],[14,16],[17,19]]})}(jQuery),function($){var _5cb=0;function _5cc(e,t){for(var a=0,n=e.length;a<n;a++)if(e[a]==t)return a;return-1}function _5cd(e,t,a){if("string"==typeof t){for(var n=0,i=e.length;n<i;n++)if(e[n][t]==a)return void e.splice(n,1)}else{var o=_5cc(e,t);-1!=o&&e.splice(o,1)}}function _5cf(e,t,a){for(var n=0,i=e.length;n<i;n++)if(e[n][t]==a[t])return;e.push(a)}function _5d0(e,t){return $.data(e,"treegrid")?t.slice(1):t}function _5d2(e){var t=$.data(e,"datagrid"),a=t.options,n=t.panel,i=t.dc,o=null;a.sharedStyleSheet?o="boolean"==typeof a.sharedStyleSheet?"head":a.sharedStyleSheet:(o=n.closest("div.datagrid-view")).length||(o=i.view);var r=$(o),d=$.data(r[0],"ss");return d=d||$.data(r[0],"ss",{cache:{},dirty:[]}),{add:function(e){for(var t=['<style type="text/css" easyui="true">'],a=0;a<e.length;a++)d.cache[e[a][0]]={width:e[a][1]};var n=0;for(var i in d.cache){var o=d.cache[i];o.index=n++,t.push(i+"{width:"+o.width+"}")}t.push("</style>"),$(t.join("\n")).appendTo(r),r.children("style[easyui]:not(:last)").remove()},getRule:function(e){var t=r.children("style[easyui]:last")[0],a=t.styleSheet?t.styleSheet:t.sheet||document.styleSheets[document.styleSheets.length-1];return(a.cssRules||a.rules)[e]},set:function(e,t){var a=d.cache[e];if(a){a.width=t;var n=this.getRule(a.index);n&&(n.style.width=t)}},remove:function(e){var t=[];for(var a in d.cache)-1==a.indexOf(e)&&t.push([a,d.cache[a].width]);d.cache={},this.add(t)},dirty:function(e){e&&d.dirty.push(e)},clean:function(){for(var e=0;e<d.dirty.length;e++)this.remove(d.dirty[e]);d.dirty=[]}}}function _5e1(e,t){var a=$.data(e,"datagrid"),n=a.options,i=a.panel;if(t&&$.extend(n,t),1==n.fit){var o=i.panel("panel").parent();n.width=o.width(),n.height=o.height()}i.panel("resize",n)}function _5e6(e){var t,a,n=$.data(e,"datagrid"),i=n.options,o=n.dc,r=n.panel;if(i.adaptive){var d=$(i.adaptive.dom).offset(),s=$("#"+i.id).closest(".entity-datalist").next(".datagrid-filter").width();s=0<s?s:0;var l=$(".grid-right-wrap"),c=0;l.is(":hidden")||(c=0<(c=l.width())?c+1:0),t=window.innerWidth-d.left-2-s-c,a=window.innerHeight-d.top-2-i.adaptive.exth,r.css({width:t,height:a})}else t=r.width(),a=r.height();var u=o.view,f=o.view1,h=o.view2,p=f.children("div.datagrid-header"),g=h.children("div.datagrid-header"),b=p.find("table"),v=g.find("table");u.width(t);var m=p.children("div.datagrid-header-inner").show();f.width(m.find("table").width()),i.showHeader||m.hide(),h.width(t-f._outerWidth()),f.children()._outerWidth(f.width()),h.children()._outerWidth(h.width());var x=p.add(g).add(b).add(v);x.css("height","");var _=0;_=i.HeaderHeight?i.HeaderHeight:Math.max(b.height(),v.height()),x._outerHeight(_),o.body1.add(o.body2).children("table.datagrid-btable-frozen").css({position:"absolute",top:o.header2._outerHeight()});var w=o.body2.children("table.datagrid-btable-frozen")._outerHeight(),y=w+g._outerHeight()+h.children(".datagrid-footer")._outerHeight();r.children(":not(.datagrid-view,.datagrid-mask,.datagrid-mask-msg)").each(function(){y+=$(this)._outerHeight()});var C=r.outerHeight()-r.height(),k=r._size("minHeight")||"",F=r._size("maxHeight")||"";f.add(h).children("div.datagrid-body").css({marginTop:w,height:isNaN(parseInt(i.height))?"":a-y,minHeight:k?k-C-y:"",maxHeight:F?F-C-y:""}),u.height(h.height())}function _5f7(e,t,a){$.data(e,"datagrid").data.rows;var n,i,l=$.data(e,"datagrid").options,o=$.data(e,"datagrid").dc;o.body1.is(":empty")||l.nowrap&&!l.autoRowHeight&&!a||(null!=t?u(l.finder.getTr(e,t,"body",1),l.finder.getTr(e,t,"body",2),e):(u(l.finder.getTr(e,0,"allbody",1),l.finder.getTr(e,0,"allbody",2),e),l.showFooter&&u(l.finder.getTr(e,0,"allfooter",1),l.finder.getTr(e,0,"allfooter",2),e)));if(_5e6(e),"auto"==l.height){var r=o.body1.parent(),d=o.body2,s=(i=n=0,$(d).children().each(function(){var e=$(this);e.is(":visible")&&(i+=e._outerHeight(),n<e._outerWidth()&&(n=e._outerWidth()))}),{width:n,height:i}),c=s.height;s.width>d.width()&&(c+=18),c-=parseInt(d.css("marginTop"))||0,r.height(c),d.height(c),o.view.height(o.view2.height())}function u(e,t,a){var n=$(a).parent();if(0<l.rowheight&&!l.differhigh)n.find(".datagrid-row").css("height",l.rowheight);else if(0<l.rowheight&&l.differhigh&&0<e.length){var i=e[0].id.split("-")[2];n.find(".datagrid-row").css("height",l.rowheight),t.each(function(){var e=$(this);n.find("#datagrid-row-"+i+"-1-"+e.attr("datagrid-row-index")).css("height",e.height())})}else for(var o=0;o<t.length;o++){var r=$(e[o]),d=$(t[o]);r.css("height",""),d.css("height","");var s=Math.max(r.height(),d.height());r.css("height",s),d.css("height",s)}}o.body2.triggerHandler("scroll")}function _604(n,i){var e=$.data(n,"datagrid"),o=e.options,r=e.dc;function t(e){var t=e?1:2,a=o.finder.getTr(n,i,"body",t);(e?r.body1:r.body2).children("table.datagrid-btable-frozen").append(a)}r.body2.children("table.datagrid-btable-frozen").length||r.body1.add(r.body2).prepend('<table class="datagrid-btable datagrid-btable-frozen" cellspacing="0" cellpadding="0"></table>'),t(!0),t(!1),_5e6(n)}function _60b(_60c,_60d){function _60e(){var _60f=[],_610=[];return $(_60c).children("thead").each(function(){var opt=$.parser.parseOptions(this,[{frozen:"boolean"}]);$(this).find("tr").each(function(){var cols=[];$(this).find("th").each(function(){var th=$(this),col=$.extend({},$.parser.parseOptions(this,["field","align","halign","order","width",{sortable:"boolean",checkbox:"boolean",resizable:"boolean",fixed:"boolean"},{rowspan:"number",colspan:"number"}]),{title:th.html()||void 0,hidden:!!th.attr("hidden")||void 0,formatter:th.attr("formatter")?eval(th.attr("formatter")):void 0,styler:th.attr("styler")?eval(th.attr("styler")):void 0,sorter:th.attr("sorter")?eval(th.attr("sorter")):void 0});if(col.width&&-1==String(col.width).indexOf("%")&&(col.width=parseInt(col.width)),th.attr("editor")){var s=$.trim(th.attr("editor"));"{"==s.substr(0,1)?col.editor=eval("("+s+")"):col.editor=s}cols.push(col)}),opt.frozen?_60f.push(cols):_610.push(cols)})}),[_60f,_610]}var _611=$('<div class="datagrid-wrap"><div class="datagrid-view"><div class="datagrid-view1"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"><div class="datagrid-body-inner"></div></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div><div class="datagrid-view2"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div></div></div>').insertAfter(_60c);_611.panel({doSize:!1,cls:"datagrid"}),$(_60c).addClass("datagrid-f").hide().appendTo(_611.children("div.datagrid-view"));var cc=_60e(),view=_611.children("div.datagrid-view"),view_kanban={};_60d.isKanban&&(view.prepend('<div class="datagrid-view-kanban"></div>'),view_kanban=view.children("div.datagrid-view-kanban"));var _612=view.children("div.datagrid-view1"),_613=view.children("div.datagrid-view2");return{panel:_611,frozenColumns:cc[0],columns:cc[1],dc:{view:view,view1:_612,view2:_613,view_kanban:view_kanban,header1:_612.children("div.datagrid-header").children("div.datagrid-header-inner"),header2:_613.children("div.datagrid-header").children("div.datagrid-header-inner"),body1:_612.children("div.datagrid-body").children("div.datagrid-body-inner"),body2:_613.children("div.datagrid-body"),footer1:_612.children("div.datagrid-footer").children("div.datagrid-footer-inner"),footer2:_613.children("div.datagrid-footer").children("div.datagrid-footer-inner")}}}function _614(_615){var _616=$.data(_615,"datagrid"),opts=_616.options,dc=_616.dc,_617=_616.panel;if(_616.ss=$(_615).datagrid("createStyleSheet"),_617.panel($.extend({},opts,{id:null,doSize:!1,onResize:function(e,t){$.data(_615,"datagrid")&&(_5e6(_615),$(_615).datagrid("fitColumns"),opts.onResize.call(_617,e,t))},onExpand:function(){$.data(_615,"datagrid")&&($(_615).datagrid("fixRowHeight").datagrid("fitColumns"),opts.onExpand.call(_617))}})),_616.rowIdPrefix="datagrid-row-r"+ ++_5cb,_616.cellClassPrefix="datagrid-cell-c"+_5cb,_61a(dc.header1,opts.frozenColumns,!0),_61a(dc.header2,opts.columns,!1),_61b(),dc.header1.add(dc.header2).css("display",opts.showHeader?"block":"none"),dc.footer1.add(dc.footer2).css("display",opts.showFooter?"block":"none"),opts.toolbar)if($.isArray(opts.toolbar)){$("div.datagrid-toolbar",_617).remove();for(var tb=$('<div class="datagrid-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').prependTo(_617),tr=tb.find("tr"),i=0;i<opts.toolbar.length;i++){var btn=opts.toolbar[i];if("-"==btn)$('<td><div class="datagrid-btn-separator"></div></td>').appendTo(tr);else{var td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:void(0)"></a>').appendTo(td);tool[0].onclick=eval(btn.handler||function(){}),tool.linkbutton($.extend({},btn,{plain:!0}))}}}else $(opts.toolbar).addClass("datagrid-toolbar").prependTo(_617),$(opts.toolbar).show();else $("div.datagrid-toolbar",_617).remove();if($("div.datagrid-pager",_617).remove(),opts.pagination){var _61c=$('<div class="datagrid-pager"></div>');if("bottom"==opts.pagePosition)_61c.appendTo(_617);else if("top"==opts.pagePosition)_61c.addClass("datagrid-pager-top").prependTo(_617);else{var ptop=$('<div class="datagrid-pager datagrid-pager-top"></div>').prependTo(_617);_61c.appendTo(_617),_61c=_61c.add(ptop)}if(_61c.pagination({total:opts.pageNumber*opts.pageSize,pageNumber:opts.pageNumber,pageSize:opts.pageSize,pageList:opts.pageList,showPageList:opts.showPageList,layout:opts.pageLayout,onSelectPage:function(e,t){t=isNaN(t)?"All":t,opts.pageNumber=e||1,opts.pageSize=t,_61c.pagination("refresh",{pageNumber:e,pageSize:t}),_65a(_615)}}),opts.pageSize=_61c.pagination("options").pageSize,opts.sortConfig&&!opts.isKanban){var $grid_sort=$(_615).closest(".entity-datalist").find(".grid_sort");Strack.init_sort_grid_icon($(_615),$grid_sort,opts.sortConfig)}}function _61a(e,t,a){if(t){$(e).show(),$(e).empty();var n=[],i=[];opts.sortName&&(n=opts.sortName.split(","),i=opts.sortOrder.split(","));var o=$('<table class="datagrid-htable" border="0" cellspacing="0" cellpadding="0"><tbody></tbody></table>').appendTo(e);2===t.length&&t[0].forEach(function(e){e&&"yes"===e.step&&"yes"!==e.hidden_status&&(Strack.G.gridFirstColMap[e.but]=1<e.colspan)});for(var r=0;r<t.length;r++)for(var d=$('<tr class="datagrid-header-row"></tr>').appendTo($("tbody",o)),s=t[r],l=0;l<s.length;l++){var c=s[l],u="",f="";if(c.rowspan&&(u+='rowspan="'+c.rowspan+'" '),c.colspan&&(u+='colspan="'+c.colspan+'" '),c.class&&(u+='class="'+c.class+' clohide" '),c.cbd&&(u+='class="'+c.cbd+'" '),c.bgc&&(u+='style=" background-color:#'+c.bgc+";border-color:#"+c.bgc+';border-style: solid;border-width: 0px 2px;" '),c.bdc)switch(c.cbd){case"colboth":Strack.G.gridFirstColMap[c.belong]?u+='style="border-color:#DDD #DDD #DDD #'+c.bdc+';border-style: dotted dotted dotted solid;border-width: 0px 1px 1px 3px"':u+='style=" border-color:#'+c.bdc+'"';break;default:u+='style=" border-color:#'+c.bdc+'"'}var h=$("<td "+u+"></td>").appendTo(d);if(c.checkbox)h.attr("field",c.field),$('<div class="datagrid-header-check"></div>').html('<input type="checkbox"/>').appendTo(h);else if(c.field){h.attr("field",c.field);var p="",g="",b="",v="",m="";opts.HeaderField&&"bnt"!==c.col_type&&(p='<a href="javascript:;" id="ickn_'+c.field+'" class="cell-excel-down" onclick="Strack.show_excel_check_fields(this,event)" data-field="'+c.field+'"><i class="dropdown icon"></i></a>',g="cell-excel",v='<div id="cell_ckt_'+c.field+'" class="cell-excel-ck">'+StrackLang.Non_Mapping_Field+"</div>"),opts.headerAddCheckbox&&opts.treeField!==c.field&&(b='<a href="javascript:;" onclick="Strack.rule_grid_header_checkbox(this)" id="rule_header_checkbox_'+c.field+'" class="dg-rule-checkbox" style="margin-right: 5px" data-pos="header" data-field="'+c.field+'"><div class="tree-checkbox tree-checkbox0"></div></a>'),"frozen"===c.frozen?m="<a href='javascript:;' class='cols_frozen no-move' onclick='Strack.frozen_col(this,event)' data-index='"+c.findex+"'><i class='icon-uniF023 icon-right'></i></a>":"nofrozen"===c.frozen&&(m="<a href='javascript:;' class='cols_frozen no-move' onclick='Strack.frozen_col(this,event)' data-index='"+c.findex+"'><i class='icon-uniF09C icon-right'></i></a>"),c.drag&&h.addClass("drag-yes"),h.attr("row_index",1),h.append('<div class="datagrid-cell">'+b+'<span class="'+g+'"></span><a href="javascript:;" class="datagrid-sort-icon no-move icon-left" onclick="Strack.sort_grid_item(this)" data-field="'+c.field+'" data-grid="'+opts.id+'" style="font-size: 12px;"></a>'+p+m+"</div>"+v),h.find("span:first").html(c.title);var x=h.find("div.datagrid-cell"),_=_5cc(n,c.field);if(0<=_&&x.addClass("datagrid-sort-"+i[_]),c.sortable&&x.addClass("datagrid-sort"),!1===c.resizable&&x.attr("resizable","false"),c.width){var w=$.parser.parseValue("width",c.width,dc.view,opts.scrollbarSize);x._outerWidth(w-1),c.boxWidth=parseInt(x[0].style.width),c.deltaWidth=w-c.boxWidth}else c.auto=!0;x.css("text-align",c.halign||c.align||""),c.cellClass=_616.cellClassPrefix+"-"+c.field.replace(/[\.|\s]/g,"-"),x.addClass(c.cellClass),opts.fitColumns&&x.css("width","")}else if($('<div class="datagrid-cell-group"></div>').html(c.title).appendTo(h),c.but){h.addClass("drag-yes"),h.attr("fname",c.fname).attr("field",c.fname).attr("row_index",0);var y="";y=1<c.colspan?(f="showcol","icon-uniF100"):"icon-uniF101",h.find("div").prepend('<a class="colswitch '+f+'" href="javascript:;" onclick="Strack.show_or_hide_grid_step(this)" data-grid="'+opts.id+'" data-color="'+c.bgc+'" data-col="'+c.but+'" data-firstfield="'+c.first_field+'" data-fieldlist="'+c.field_list+'"><i class="'+y+'"></i></a>')}c.hidden&&h.hide()}if(a&&opts.rownumbers){h=$('<td rowspan="'+opts.frozenColumns.length+'"><div class="datagrid-header-rownumber"></div></td>');0==$("tr",o).length?h.wrap('<tr class="datagrid-header-row"></tr>').parent().appendTo($("tbody",o)):h.prependTo($("tr:first",o))}}}function _61b(){for(var e=[],t=_627(_615,!0).concat(_627(_615)),a=0;a<t.length;a++){var n=_628(_615,t[a]);n&&!n.checkbox&&e.push(["."+n.cellClass,n.boxWidth?n.boxWidth+"px":"auto"])}_616.ss.add(e),_616.ss.dirty(_616.cellSelectorPrefix),_616.cellSelectorPrefix="."+_616.cellClassPrefix}}function _629(o){var n=$.data(o,"datagrid"),t=n.panel,r=n.options,d=n.dc,i=d.header1.add(d.header2);i.find("input[type=checkbox]").unbind(".datagrid").bind("click.datagrid",function(e){if(r.singleSelect&&r.selectOnCheck)return!1;($(this).is(":checked")?_6c4:_6ca)(o),e.stopPropagation()});var e=i.find("div.datagrid-cell");e.closest("td").unbind(".datagrid").bind("mouseenter.datagrid",function(){n.resizing||$(this).addClass("datagrid-header-over")}).bind("mouseleave.datagrid",function(){$(this).removeClass("datagrid-header-over")}).bind("contextmenu.datagrid",function(e){var t=$(this).attr("field");r.onHeaderContextMenu.call(o,e,t)}),e.unbind(".datagrid").bind("click.datagrid",function(e){$(this).offset().left;var t=$(this).offset().left+$(this)._outerWidth()-5;e.pageX<t&&e.pageX}).bind("dblclick.datagrid",function(e){var t=$(this).offset().left+5,a=$(this).offset().left+$(this)._outerWidth()-5;if("right"==r.resizeHandle?e.pageX>a:"left"==r.resizeHandle?e.pageX<t:e.pageX<t||e.pageX>a){var n=$(this).parent().attr("field"),i=_628(o,n);if(0==i.resizable)return;$(o).datagrid("autoSizeColumn",n),i.auto=!1}});var a="right"==r.resizeHandle?"e":"left"==r.resizeHandle?"w":"e,w";e.each(function(){$(this).resizable({handles:a,disabled:!!$(this).attr("resizable")&&"false"==$(this).attr("resizable"),minWidth:25,onStartResize:function(e){n.resizing=!0,i.css("cursor",$("body").css("cursor")),n.proxy||(n.proxy=$('<div class="datagrid-resize-proxy"></div>').appendTo(d.view)),n.proxy.css({left:e.pageX-$(t).offset().left-1,display:"none"}),setTimeout(function(){n.proxy&&n.proxy.show()},500)},onResize:function(e){return n.proxy.css({left:e.pageX-$(t).offset().left-1,display:"block"}),!1},onStopResize:function(e){i.css("cursor",""),$(this).css("height","");var t=$(this).parent().attr("field"),a=_628(o,t);a.width=$(this)._outerWidth()+1,a.boxWidth=a.width-a.deltaWidth,a.auto=void 0,r.fitColumns&&$(this).css("width",""),$(o).datagrid("fixColumnSize",t),n.proxy.remove(),n.proxy=null,$(this).parents("div:first.datagrid-header").parent().hasClass("datagrid-view1")&&_5e6(o),$(o).datagrid("fitColumns"),r.onResizeColumn.call(o,t,a.width),setTimeout(function(){n.resizing=!1},0),$(o).datagrid("highlightViewSave")}})});var s=d.body1.add(d.body2);for(var l in s.unbind(),r.rowEvents)s.bind(l,r.rowEvents[l]);d.body1.bind("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent||window.event,a=t.wheelDelta||-1*t.detail,n=$(e.target).closest("div.datagrid-view").children(".datagrid-f").data("datagrid").dc;n.body2.scrollTop(n.body2.scrollTop()-a)}),d.body2.bind("scroll",function(){0<$(".layui-layer-tips").length&&layer.tips("close");var e=d.view1.children("div.datagrid-body");e.scrollTop($(this).scrollTop());var t=d.body1.children(":first"),a=d.body2.children(":first");if(t.length&&a.length){var n=t.offset().top,i=a.offset().top;n!=i&&e.scrollTop(e.scrollTop()+n-i)}d.view2.children("div.datagrid-header,div.datagrid-footer")._scrollLeft($(this)._scrollLeft()),d.body2.children("table.datagrid-btable-frozen").css("left",-$(this)._scrollLeft())})}function _dragSelect(){return function(e){if(!e.ctrlKey&&!e.shiftKey&&0===e.button){var t=_637(e.target);if(!t)return;var a=_639(t);if($.data(a,"datagrid").options.DragSelect){var n=e.clientY,i="",o="",r="";$(a).datagrid("clearSelections"),$(document).on("mousemove",function(e){var t=$(e.target).closest(".datagrid-row").attr("datagrid-row-index");switch(i=i||(e.clientY>n?"down":"up"),r<e.clientY?o="down":r>e.clientY&&(o="up"),i){case"down":"down"===i&&"down"===o?$(a).datagrid("selectRow",t):e.clientY<n?($(a).datagrid("selectRow",t),n=e.clientY):$(a).datagrid("unselectRow",t);break;case"up":"up"===i&&"up"===o?$(a).datagrid("selectRow",t):e.clientY>n?($(a).datagrid("selectRow",t),n=e.clientY):$(a).datagrid("unselectRow",t)}r=e.clientY}).on("mouseup",function(e){$(this).off("mousemove")})}}}}function _635(i){return function(e){var t=_637(e.target);if(t){var a=_639(t);if(!$.data(a,"datagrid").resizing){var n=_63b(t);if(i)_63c(a,n);else $.data(a,"datagrid").options.finder.getTr(a,n).removeClass("datagrid-row-over")}}}}function _63d(e){var t=_637(e.target);if(t){var a=_639(t),n=$.data(a,"datagrid").options,i=_63b(t),o=$(e.target);if(o.parent().hasClass("datagrid-cell-check"))n.singleSelect&&n.selectOnCheck?(o._propAttr("checked",!o.is(":checked")),_640(a,i)):o.is(":checked")?(o._propAttr("checked",!1),_640(a,i)):(o._propAttr("checked",!0),_641(a,i));else{var r=n.finder.getRow(a,i),d=o.closest("td[field]",t);if(d.length){var s,l,c=d.attr("field");if(n.onClickCell.call(a,i,c,r[c],e.target),"TD"==e.target.tagName||0<$(e.target).closest(".datagrid-cell").length)l="TD"==e.target.tagName?(s=$(e.target).find(".datagrid-cell"),$(e.target)):(s=$(e.target).closest(".datagrid-cell"),$(e.target).closest("td")),Math.round(s.prop("scrollWidth"))>Math.round(s.outerWidth())&&layer.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(l.height()+12)+'px;padding: 4px 15px;">',s.html(),"</div>",'<i class="icon-uniE6DF layui-table-tips-c"></i>'].join(""),l[0],{tips:[3,""],time:-1,anim:-1,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.css("width",s.outerWidth()),e.find(".layui-table-tips-c").on("click",function(){layer.close(t)})}})}if(1==n.singleSelect)_643(a,i);else if(n.ctrlSelect)if(e.ctrlKey)(t.hasClass("datagrid-row-selected")?_644:_643)(a,i);else if(e.shiftKey){$(a).datagrid("clearSelections");for(var u=Math.min(n.lastSelectedIndex||0,i),f=Math.max(n.lastSelectedIndex||0,i),h=u;h<=f;h++)_643(a,h)}else $(a).datagrid("clearSelections"),_643(a,i),n.lastSelectedIndex=i;else(t.hasClass("datagrid-row-selected")?_644:_643)(a,i);n.onClickRow.apply(a,_5d0(a,[i,r]))}}}function _647(e){var t=_637(e.target);if(t){var a=_639(t),n=$.data(a,"datagrid").options,i=_63b(t),o=n.finder.getRow(a,i),r=$(e.target).closest("td[field]",t);if(r.length){var d=r.attr("field");n.onDblClickCell.call(a,i,d,o[d])}n.onDblClickRow.apply(a,_5d0(a,[i,o]))}}function _64b(e){var t=_637(e.target);if(t){var a=_639(t),n=$.data(a,"datagrid").options,i=_63b(t),o=n.finder.getRow(a,i);if(n.showContextMenu){e.preventDefault(),grid_clipboard(e.target);var r=e.pageY,d=$(".globel-top-notice").height();0<d&&(r=r-d-10),$("#"+n.contextMenuData.id).menu("show",{left:e.pageX,top:r})}n.onRowContextMenu.call(a,e,i,o)}else{var s=_637(e.target,".datagrid-body");if(s){a=_639(s);(n=$.data(a,"datagrid").options).onRowContextMenu.call(a,e,-1,null)}}}function _639(e){return $(e).closest("div.datagrid-view").children(".datagrid-f")[0]}function _637(e,t){var a=$(e).closest(t||"tr.datagrid-row");return a.length&&a.parent().length?a:void 0}function _63b(e){return e.attr("datagrid-row-index")?parseInt(e.attr("datagrid-row-index")):e.attr("node-id")}function _64f(e,t){var a=$.data(e,"datagrid"),n=a.options;t=t||{};var i={sortName:n.sortName,sortOrder:n.sortOrder};"object"==typeof t&&$.extend(i,t);var o=[],r=[];if(i.sortName&&(o=i.sortName.split(","),r=i.sortOrder.split(",")),"string"==typeof t){var d=t;if(!(p=_628(e,d)).sortable||a.resizing)return;var s=p.order||"asc",l=_5cc(o,d);if(0<=l){var c="asc"==r[l]?"desc":"asc";n.multiSort&&c==s?(o.splice(l,1),r.splice(l,1)):r[l]=c}else n.multiSort?(o.push(d),r.push(s)):(o=[d],r=[s]);i.sortName=o.join(","),i.sortOrder=r.join(",")}if(0!=n.onBeforeSortColumn.call(e,i.sortName,i.sortOrder)){$.extend(n,i);var u=a.dc,f=u.header1.add(u.header2);f.find("div.datagrid-cell").removeClass("datagrid-sort-asc datagrid-sort-desc");for(var h=0;h<o.length;h++){var p=_628(e,o[h]);f.find("div."+p.cellClass).addClass("datagrid-sort-"+r[h])}n.remoteSort?_65a(e):_65b(e,$(e).datagrid("getData")),n.onSortColumn.call(e,n.sortName,n.sortOrder)}}function _65c(c){var n,e,u=$.data(c,"datagrid"),f=u.options,i=u.dc,h=i.view2.children("div.datagrid-header");function t(e){i.header1.add(i.header2).find(".datagrid-cell-group").length&&e&&_5e6(c)}function p(e){return!(0<=String(e.width||"").indexOf("%"))&&!(e.hidden||e.checkbox||e.auto||e.fixed)}i.body2.css("overflow-x",""),t(),e=_627(c,!(n=!1)).concat(_627(c,!1)),$.map(e,function(e){var t=_628(c,e);if(0<=String(t.width||"").indexOf("%")){var a=$.parser.parseValue("width",t.width,i.view,f.scrollbarSize)-t.deltaWidth;0<a&&(t.boxWidth=a,n=!0)}}),n&&$(c).datagrid("fixColumnSize"),function(){if(!f.fitColumns)return;u.leftWidth||(u.leftWidth=0);for(var e=0,t=[],a=_627(c,!1),n=0;n<a.length;n++){var i=_628(c,a[n]);p(i)&&(e+=i.width,t.push({field:i.field,col:i,addingWidth:0}))}if(!e)return;t[t.length-1].addingWidth-=u.leftWidth;var o=h.children("div.datagrid-header-inner").show(),r=h.width()-h.find("table").width()-f.scrollbarSize+u.leftWidth,d=r/e;f.showHeader||o.hide();for(n=0;n<t.length;n++){var s=t[n],l=parseInt(s.col.width*d);s.addingWidth+=l,r-=l}t[t.length-1].addingWidth+=r;for(n=0;n<t.length;n++){0<(s=t[n]).col.boxWidth+s.addingWidth&&(s.col.boxWidth+=s.addingWidth,s.col.width+=s.addingWidth)}u.leftWidth=r,$(c).datagrid("fixColumnSize")}(),t(!0),h.width()>=h.find("table").width()&&i.body2.css("overflow-x","hidden")}function _66e(o,e){var t=$.data(o,"datagrid"),r=t.options,d=t.dc,s=$('<div class="datagrid-cell" style="position:absolute;left:-9999px"></div>').appendTo("body");if(e)l(e),$(o).datagrid("fitColumns");else{for(var a=!1,n=_627(o,!0).concat(_627(o,!1)),i=0;i<n.length;i++){e=n[i];_628(o,e).auto&&(l(e),a=!0)}a&&$(o).datagrid("fitColumns")}function l(n){var i=d.view.find('div.datagrid-header td[field="'+n+'"] div.datagrid-cell');i.css("width","");var e=$(o).datagrid("getColumnOption",n);e.width=void 0,e.boxWidth=void 0,e.auto=!0,$(o).datagrid("fixColumnSize",n);var t=Math.max(a("header"),a("allbody"),a("allfooter"))+1;function a(e){var t=0;return"header"==e?t=a(i):r.finder.getTr(o,0,e).find('td[field="'+n+'"] div.datagrid-cell').each(function(){var e=a($(this));t<e&&(t=e)}),t;function a(e){return e.is(":visible")?e._outerWidth():s.html(e.html())._outerWidth()}}i._outerWidth(t-1),e.width=t,e.boxWidth=parseInt(i[0].style.width),e.deltaWidth=t-e.boxWidth,i.css("width",""),$(o).datagrid("fixColumnSize",n),r.onResizeColumn.call(o,n,e.width)}s.remove()}function _67a(a,e){var n=$.data(a,"datagrid"),t=(n.options,n.dc.view.find("table.datagrid-btable,table.datagrid-ftable"));if(t.css("table-layout","fixed"),e)r(e);else for(var i=_627(a,!0).concat(_627(a,!1)),o=0;o<i.length;o++)r(i[o]);function r(e){var t=_628(a,e);t.cellClass&&n.ss.set("."+t.cellClass,t.boxWidth?t.boxWidth+"px":"auto")}t.css("table-layout",""),_67f(a),_5f7(a),_680(a)}function _67f(o){$.data(o,"datagrid").dc.view.find("td.datagrid-td-merged").each(function(){for(var e=$(this),t=e.attr("colspan")||1,a=_628(o,e.attr("field")),n=a.boxWidth+a.deltaWidth-1,i=1;i<t;i++)e=e.next(),n+=(a=_628(o,e.attr("field"))).boxWidth+a.deltaWidth;$(this).children("div.datagrid-cell")._outerWidth(n)})}function _680(i){$.data(i,"datagrid").dc.view.find("div.datagrid-editable").each(function(){var e=$(this),t=e.parent().attr("field"),a=$(i).datagrid("getColumnOption",t);e._outerWidth(a.boxWidth+a.deltaWidth-1);var n=$.data(this,"datagrid.editor");n&&n.actions.resize&&n.actions.resize(n.target,e.width())})}function _628(e,o){function t(e){if(e)for(var t=0;t<e.length;t++)for(var a=e[t],n=0;n<a.length;n++){var i=a[n];if(i.field==o)return i}return null}var a=$.data(e,"datagrid").options,n=t(a.columns);return n=n||t(a.frozenColumns)}function _627(e,t){var a=$.data(e,"datagrid").options,n=1==t?a.frozenColumns||[[]]:a.columns;if(0==n.length)return[];for(var o=[],i=function(){var e,t=0;e=2<=n.length?n[1]:n[0];return $.map(e,function(e){t+=e.colspan||1}),t}(),r=0;r<n.length;r++)o[r]=new Array(i);for(var d=0;d<n.length;d++)$.map(n[d],function(e){var t=s(o[d]);if(0<=t)for(var a=e.field||"",n=0;n<(e.colspan||1);n++){for(var i=0;i<(e.rowspan||1);i++)o[d+i][t]=a;t++}});return o[o.length-1];function s(e){for(var t=0;t<e.length;t++)if(null==e[t])return t;return-1}}function _65b(r,e){var t=$.data(r,"datagrid"),a=t.options,n=t.dc;if((e=a.loadFilter.call(r,e)).total=parseInt(e.total),(t.data=e).footer&&(t.footer=e.footer),!a.remoteSort&&a.sortName){var d=a.sortName.split(","),s=a.sortOrder.split(",");e.rows.sort(function(e,t){for(var a=0,n=0;n<d.length;n++){var i=d[n],o=s[n];if(0!=(a=(_628(r,i).sorter||function(e,t){return e==t?0:t<e?1:-1})(e[i],t[i])*("asc"==o?1:-1)))return a}return a})}a.view.onBeforeRender&&a.view.onBeforeRender.call(a.view,r,e.rows),a.view.render.call(a.view,r,n.body2,!1),a.view.render.call(a.view,r,n.body1,!0),a.showFooter&&(a.view.renderFooter.call(a.view,r,n.footer2,!1),a.view.renderFooter.call(a.view,r,n.footer1,!0)),a.view.onAfterRender&&(Strack.init_other_thumb_media("grid"),a.view.onAfterRender.call(a.view,r)),t.ss.clean();var i=$(r).datagrid("getPager");if(i.length){var o=i.pagination("options");o.total!=e.total&&(i.pagination("refresh",{total:e.total}),a.pageNumber!=o.pageNumber&&0<o.pageNumber&&(a.pageNumber=o.pageNumber,_65a(r)))}_5f7(r),n.body2.triggerHandler("scroll"),$(r).datagrid("setSelectionState"),$(r).datagrid("autoSizeColumn"),a.onLoadSuccess.call(r,e)}function _69b(e){var t=$.data(e,"datagrid"),n=t.options,a=t.dc;if(a.header1.add(a.header2).find("input[type=checkbox]")._propAttr("checked",!1),n.idField){var i=!!$.data(e,"treegrid"),o=n.onSelect,r=n.onCheck;n.onSelect=n.onCheck=function(){};for(var d=n.finder.getRows(e),s=0;s<d.length;s++){var l=d[s],c=i?l[n.idField]:s;u(t.selectedRows,l)&&_643(e,c,!0),u(t.checkedRows,l)&&_640(e,c,!0)}n.onSelect=o,n.onCheck=r}function u(e,t){for(var a=0;a<e.length;a++)if(e[a][n.idField]==t[n.idField])return e[a]=t,1}}function _6a3(e,t){var a=$.data(e,"datagrid"),n=a.options,i=a.data.rows;if("object"==typeof t)return _5cc(i,t);for(var o=0;o<i.length;o++)if(i[o][n.idField]==t)return o;return-1}function _6a6(e){var t=$.data(e,"datagrid"),a=t.options;t.data;if(a.idField)return t.selectedRows;var n=[];return a.finder.getTr(e,"","selected",2).each(function(){n.push(a.finder.getRow(e,$(this)))}),n}function _6a9(e){var t=$.data(e,"datagrid"),a=t.options;if(a.idField)return t.checkedRows;var n=[];return a.finder.getTr(e,"","checked",2).each(function(){n.push(a.finder.getRow(e,$(this)))}),n}function _6ac(e,t){var a=$.data(e,"datagrid"),n=a.dc,i=a.options.finder.getTr(e,t);if(i.length){if(i.closest("table").hasClass("datagrid-btable-frozen"))return;var o=n.view2.children("div.datagrid-header")._outerHeight(),r=n.body2,d=r.outerHeight(!0)-r.outerHeight(),s=i.position().top-o-d;s<0?r.scrollTop(r.scrollTop()+s):s+i._outerHeight()>r.height()-18&&r.scrollTop(r.scrollTop()+s+i._outerHeight()-r.height()+18)}}function _63c(e,t){var a=$.data(e,"datagrid"),n=a.options;n.finder.getTr(e,a.highlightIndex).removeClass("datagrid-row-over"),n.finder.getTr(e,t).addClass("datagrid-row-over"),a.highlightIndex=t}function _643(e,t,a){var n=$.data(e,"datagrid"),i=n.options,o=i.finder.getRow(e,t);0!=i.onBeforeSelect.apply(e,_5d0(e,[t,o]))&&(i.singleSelect&&(_6ba(e,!0),n.selectedRows=[]),!a&&i.checkOnSelect&&_640(e,t,!0),i.idField&&_5cf(n.selectedRows,i.idField,o),i.finder.getTr(e,t).addClass("datagrid-row-selected"),$(e).datagrid("showSelectedNumber"),i.onSelect.apply(e,_5d0(e,[t,o])),_6ac(e,t))}function _644(e,t,a){var n=$.data(e,"datagrid"),i=(n.dc,n.options),o=i.finder.getRow(e,t);0!=i.onBeforeUnselect.apply(e,_5d0(e,[t,o]))&&(!a&&i.checkOnSelect&&_641(e,t,!0),i.finder.getTr(e,t).removeClass("datagrid-row-selected"),i.idField&&_5cd(n.selectedRows,i.idField,o[i.idField]),i.onUnselect.apply(e,_5d0(e,[t,o])))}function _6bf(e,t){var a=$.data(e,"datagrid").options,n=a.finder.getRows(e),i=$.data(e,"datagrid").selectedRows;if(!t&&a.checkOnSelect&&_6c4(e,!0),a.finder.getTr(e,"","allbody").addClass("datagrid-row-selected"),a.idField)for(var o=0;o<n.length;o++)_5cf(i,a.idField,n[o]);$(e).datagrid("showSelectedNumber"),a.onSelectAll.call(e,n)}function _6ba(e,t){var a=$.data(e,"datagrid").options,n=a.finder.getRows(e),i=$.data(e,"datagrid").selectedRows;if(!t&&a.checkOnSelect&&_6ca(e,!0),a.finder.getTr(e,"","selected").removeClass("datagrid-row-selected"),a.idField)for(var o=0;o<n.length;o++)_5cd(i,a.idField,n[o][a.idField]);$(e).datagrid("showSelectedNumber"),a.onUnselectAll.call(e,n)}function _640(e,t,a){var n=$.data(e,"datagrid"),i=n.options,o=i.finder.getRow(e,t);if(0!=i.onBeforeCheck.apply(e,_5d0(e,[t,o]))){i.singleSelect&&i.selectOnCheck&&(_6ca(e,!0),n.checkedRows=[]),!a&&i.selectOnCheck&&_643(e,t,!0);var r=i.finder.getTr(e,t).addClass("datagrid-row-checked");if(r.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0),(r=i.finder.getTr(e,"","checked",2)).length==i.finder.getRows(e).length){var d=n.dc;d.header1.add(d.header2).find("input[type=checkbox]")._propAttr("checked",!0)}i.idField&&_5cf(n.checkedRows,i.idField,o),i.onCheck.apply(e,_5d0(e,[t,o]))}}function _641(e,t,a){var n=$.data(e,"datagrid"),i=n.options,o=i.finder.getRow(e,t);if(0!=i.onBeforeUncheck.apply(e,_5d0(e,[t,o]))){!a&&i.selectOnCheck&&_644(e,t,!0),i.finder.getTr(e,t).removeClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!1);var r=n.dc;r.header1.add(r.header2).find("input[type=checkbox]")._propAttr("checked",!1),i.idField&&_5cd(n.checkedRows,i.idField,o[i.idField]),i.onUncheck.apply(e,_5d0(e,[t,o]))}}function _6c4(e,t){var a=$.data(e,"datagrid"),n=a.options,i=n.finder.getRows(e);!t&&n.selectOnCheck&&_6bf(e,!0);var o=a.dc,r=o.header1.add(o.header2).find("input[type=checkbox]"),d=n.finder.getTr(e,"","allbody").addClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(r.add(d)._propAttr("checked",!0),n.idField)for(var s=0;s<i.length;s++)_5cf(a.checkedRows,n.idField,i[s]);n.onCheckAll.call(e,i)}function _6ca(e,t){var a=$.data(e,"datagrid"),n=a.options,i=n.finder.getRows(e);!t&&n.selectOnCheck&&_6ba(e,!0);var o=a.dc,r=o.header1.add(o.header2).find("input[type=checkbox]"),d=n.finder.getTr(e,"","checked").removeClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(r.add(d)._propAttr("checked",!1),n.idField)for(var s=0;s<i.length;s++)_5cd(a.checkedRows,n.idField,i[s][n.idField]);n.onUncheckAll.call(e,i)}function _6db(e,t){var a=$.data(e,"datagrid").options,n=a.finder.getTr(e,t),i=a.finder.getRow(e,t);n.hasClass("datagrid-row-editing")||0!=a.onBeforeEdit.apply(e,_5d0(e,[t,i]))&&(n.addClass("datagrid-row-editing"),_6de(e,t),_680(e),n.find("div.datagrid-editable").each(function(){var e=$(this).parent().attr("field"),t=$.data(this,"datagrid.editor");t&&t.actions.setValue(t.target,i[a.columnsFieldConfig[e].field_map])}),_6e0(e,t),a.onBeginEdit.apply(e,_5d0(e,[t,i])))}function _6e1(e,u,t){var f,a=$.data(e,"datagrid"),h=a.options,n=a.updatedRows,i=a.insertedRows,o=h.finder.getTr(e,u),p=h.finder.getRow(e,u);if(o.hasClass("datagrid-row-editing")){if(!t){if(!_6e0(e,u))return;var g=!1,b={},v=!1,m={};o.find("div.datagrid-editable").each(function(){var t=$(this).parent().attr("field"),e="";if("task_repeat"===h.columnsFieldConfig[t].editor)v=!0,e=$(this).find(".field_edit_item").val(),m=Strack.G.repeatTaskConfigData;else{var a=$.data(this,"datagrid.editor"),n=$(a.target);(n.data("textbox")?n.textbox("textbox"):n).triggerHandler("blur"),e=a.actions.getValue(a.target)}$(this).closest("td").removeAttr("style").find(".placeholder").remove();var i="";if(p.hasOwnProperty(h.columnsFieldConfig[t].field_map)&&p[h.columnsFieldConfig[t].field_map])if(p[h.columnsFieldConfig[t].field_map].hasOwnProperty("rows")){var o=[];p[h.columnsFieldConfig[t].field_map].rows.forEach(function(e){o.push(e.id)}),i=o.join(",")}else i=p[h.columnsFieldConfig[t].field_map];if(i!=e||v){i=p[t],p[t]=e,g=!0,b[t]=e;var r=h.columnsFieldConfig[t];if("auto"===h.cellUpdateMode){"checkbox"!==r.editor||e||(e="off");var d="";d="custom"===r.field_type?p.id:p[r.primary];var s={dom:$(this).closest("td[field]").attr("id"),editor:"common",original_field:r.field_value_map,other_param:m},l=r.module_id?r.module_id:h.moduleId;f={data_source:r.data_source,primary:r.primary,primary_value:d,module:r.module,table:r.table,original_field:r.fields,field:r.field_value_map,field_type:r.field_type,module_id:l,module_code:r.module_code,project_id:h.projectId,variable_id:r.variable_id,editor:r.editor,val:e,widget_param:s},$.ajax({type:"POST",url:StrackPHP.updateWidget,dataType:"json",contentType:"application/json",data:JSON.stringify(f),success:function(e){200===e.status?(Strack.top_message({bg:"g",msg:e.message}),Strack.Websocket.List.hasOwnProperty("update")||(p[r.field_map]=e.data.data[r.fields],e.data.status=200,Strack.update.widget(e.data,s))):(Strack.top_message({bg:"r",msg:e.message}),p[t]=i)}})}else{var c=t+"_"+u;$.inArray(c,h.gridDirtyData.list)<0&&h.gridDirtyData.list.push(c),h.gridDirtyData.value[c]={primary:p[h.columnsFieldConfig[t].primary],field:t,value:e}}}}),g&&-1==_5cc(i,p)&&-1==_5cc(n,p)&&n.push(p),h.onEndEdit.apply(e,_5d0(e,[u,p,b]))}o.removeClass("datagrid-row-editing"),_6ed(e,u),"manual"==h.cellUpdateMode&&$(e).datagrid("refreshRow",u),t?h.onCancelEdit.apply(e,_5d0(e,[u,p])):h.onAfterEdit.apply(e,_5d0(e,[u,p,b]))}}function _6ee(e,t){var a=$.data(e,"datagrid").options.finder.getTr(e,t),n=[];return a.children("td").each(function(){var e=$(this).find("div.datagrid-editable");if(e.length){var t=$.data(e[0],"datagrid.editor");n.push(t)}}),n}function _6f2(e,t){for(var a=_6ee(e,null!=t.index?t.index:t.id),n=0;n<a.length;n++)if(a[n]&&a[n].field==t.field)return a[n];return null}function _6de(s,e){var l=$.data(s,"datagrid").options;l.finder.getTr(s,e).children("td").each(function(){var e=$(this).find("div.datagrid-cell"),t=$(this).attr("field"),a=_628(s,t);if(a&&a.editor){var n,i;"string"==typeof a.editor?n=a.editor:(n=a.editor.type,i=a.editor.options);var o=l.editors[n];if(o){var r=e.html(),d=e._outerWidth();e.addClass("datagrid-editable"),e._outerWidth(d),e.html('<table border="0" cellspacing="0" cellpadding="1"><tr><td></td></tr></table>'),e.children("table").bind("click dblclick contextmenu",function(e){e.stopPropagation()}),$.data(e[0],"datagrid.editor",{actions:o,target:o.init(e.find("td"),i),field:t,type:n,oldHtml:r})}}})}function _6ed(e,t){var n=$.data(e,"datagrid").options;n.finder.getTr(e,t).children("td").each(function(){var e=$(this).find("div.datagrid-editable");if(e.length){var t=$(e.prevObject[0]).attr("field");switch(n.columnsFieldConfig[t].editor){case"task_repeat":Strack.remove_task_repeat_editor(),e.html($(e[0]).find(".field_edit_item").val());break;default:var a=$.data(e[0],"datagrid.editor");a.actions.destroy&&a.actions.destroy(a.target),e.html(a.oldHtml),$.removeData(e[0],"datagrid.editor")}e.removeClass("datagrid-editable"),e.css("width","")}})}function _6e0(e,t){var a=$.data(e,"datagrid").options.finder.getTr(e,t);if(!a.hasClass("datagrid-row-editing"))return!0;var n=a.find(".validatebox-text");return n.validatebox("validate"),n.trigger("mouseleave"),0==a.find(".validatebox-invalid").length}function _703(e,t){var a=$.data(e,"datagrid").insertedRows,n=$.data(e,"datagrid").deletedRows,i=$.data(e,"datagrid").updatedRows;if(t)return"inserted"==t?a:"deleted"==t?n:"updated"==t?i:[];var o=[];return o=(o=(o=o.concat(a)).concat(n)).concat(i)}function _709(e,t){var a=$.data(e,"datagrid"),n=a.options,i=a.data,o=a.insertedRows,r=a.deletedRows;$(e).datagrid("cancelEdit",t);var d=n.finder.getRow(e,t);0<=_5cc(o,d)?_5cd(o,d):r.push(d),_5cd(a.selectedRows,n.idField,d[n.idField]),_5cd(a.checkedRows,n.idField,d[n.idField]),n.view.deleteRow.call(n.view,e,t),"auto"==n.height&&_5f7(e),$(e).datagrid("getPager").pagination("refresh",{total:i.total})}function _70f(e,t){var a=$.data(e,"datagrid").data,n=$.data(e,"datagrid").options.view,i=$.data(e,"datagrid").insertedRows;n.insertRow.call(n,e,t.index,t.row),i.push(t.row),$(e).datagrid("getPager").pagination("refresh",{total:a.total})}function _713(e,t){var a=$.data(e,"datagrid").data,n=$.data(e,"datagrid").options.view,i=$.data(e,"datagrid").insertedRows;n.insertRow.call(n,e,null,t),i.push(t),$(e).datagrid("getPager").pagination("refresh",{total:a.total})}function _716(e){for(var t=$.data(e,"datagrid"),a=t.data.rows,n=[],i=0;i<a.length;i++)n.push($.extend({},a[i]));t.originalRows=n,t.updatedRows=[],t.insertedRows=[],t.deletedRows=[]}function _71a(e){for(var t=!0,a=0,n=$.data(e,"datagrid").data.rows.length;a<n;a++)_6e0(e,a)?$(e).datagrid("endEdit",a):t=!1;t&&_716(e)}function _71c(i){var e=$.data(i,"datagrid"),n=e.options,t=e.originalRows,a=e.insertedRows,o=e.deletedRows,r=e.selectedRows,d=e.checkedRows,s=e.data;function l(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a][n.idField]);return t}function c(e,t){for(var a=0;a<e.length;a++){var n=_6a3(i,e[a]);0<=n&&("s"==t?_643:_640)(i,n,!0)}}for(var u=0;u<s.rows.length;u++)$(i).datagrid("cancelEdit",u);var f=l(r),h=l(d);r.splice(0,r.length),d.splice(0,d.length),s.total+=o.length-a.length,s.rows=t,_65b(i,s),c(f,"s"),c(h,"c"),_716(i)}function _65a(t,e,a){var n=$.data(t,"datagrid"),i=(n.dc,n.options);e&&(i.queryParams=e);var o=$.extend({},i.queryParams);i.pagination&&(isNaN(i.pageSize)&&(i.pageSize="All"),$.extend(o,{page:i.pageNumber||1,rows:i.pageSize})),i.sortName&&$.extend(o,{sort:i.sortName,order:i.sortOrder}),0!=i.onBeforeLoad.call(t,o)&&($(t).datagrid("loading"),0==i.loader.call(t,o,function(e){$(t).datagrid("loaded"),$(t).datagrid("loadData",e),a&&a()},function(){$(t).datagrid("loaded"),i.onLoadError.apply(t,arguments)})&&$(t).datagrid("loaded"))}function _72e(e,t){var a=$.data(e,"datagrid").options;if(t.type=t.type||"body",t.rowspan=t.rowspan||1,t.colspan=t.colspan||1,1!=t.rowspan||1!=t.colspan){var n=a.finder.getTr(e,null!=t.index?t.index:t.id,t.type);if(n.length){var i=n.find('td[field="'+t.field+'"]');i.attr("rowspan",t.rowspan).attr("colspan",t.colspan),i.addClass("datagrid-td-merged"),r(i.next(),t.colspan-1);for(var o=1;o<t.rowspan&&(n=n.next()).length;o++)r(i=n.find('td[field="'+t.field+'"]'),t.colspan);_67f(e)}}function r(e,t){for(var a=0;a<t;a++)e.hide(),e=e.next()}}function render_grid_entity(o,t){if(t.filterConfig.id){var e=$("#"+t.filterConfig.id),a=t.toolbarConfig.page,n=t.moduleId,i=e.attr("data-maindom"),r=e.attr("data-bardom"),d=t.projectId;if(t.searchConfig.id&&"yes"===t.authorityRules.filter.show){var s=$("#"+t.searchConfig.id);s.hasClass("searchbox-f")?($("#"+i).find(".search-filter-field").removeClass("search-bar-active"),$("#"+i).find(".grid-view-bnt").removeClass("dg-bnt-active")):s.searchbox({searcher:function(e){var t=[];if($("#search_list_"+r).find("a.field-item").each(function(){$(this).find("i").hasClass("icon-checked")&&t.push({field:$(this).attr("field"),field_type:$(this).attr("field_type"),variable_id:$(this).attr("variable_id"),editor:"text",value:e,condition:"LIKE",module_code:$(this).attr("module_code"),table:$(this).attr("table")})}),0<t.length){var a=$(o).datagrid("options");if(a.isKanban){var n=$(".datagrid-view-kanban").boards().data("boards"),i=JSON.parse(a.queryParams.filter_data);i.filter.filter_advance=[],i.filter.filter_input=t,i.filter.filter_panel=[],a.queryParams.filter_data=JSON.stringify(i),n.resetQueryConfig(a.queryParams),n.reload()}else $(o).datagrid("setFilterParams",{filter_input:t,filter_panel:[],filter_advance:[]}).datagrid("reload");Strack.save_filter_cache(r,"filter_input",t),Strack.show_nosaved_filter(r,"filter_input",StrackLang.Search_Filter)}else layer.msg(StrackLang.Choice_Search_Fields,{icon:2,time:1200,anim:6})},height:28,width:280,buttonRightVal:42,buttonFilter:!0,filterBar:t.searchConfig.filterBar,prompt:StrackLang.Search_More}),t.renderNewPage&&$("#"+r).addClass("filter-min"),"yes"!==t.searchConfig.bar_show||"yes"!==t.authorityRules.filter.show?Strack.apply_toggle_filter(t.searchConfig.filterBar.bar_dom,t.searchConfig.filterBar.main_dom,"hide"):Strack.apply_toggle_filter(t.searchConfig.filterBar.bar_dom,t.searchConfig.filterBar.main_dom,"show")}$.ajax({type:"POST",url:StrackPHP.getGridPanelData,data:{page:a,schema_page:t.filterConfig.schema_page,project_id:d,module_id:n,view_type:"grid"},dataType:"json",beforeSend:function(){e.append(Strack.loading_dom(t.filterConfig.loading_type,"","filter"))},success:function(e){build_filter(o,t,r,i,e),t.showContextMenu&&(t.contextMenuData.data=Strack.generate_grid_right_menu(t),Strack.right_menu_dom(t.contextMenuData)),$("#st-load_filter").remove()}})}}function build_filter(e,t,a,n,i){var o=$(e).attr("id"),r="",d=$("#"+t.filterConfig.id),s=$(".grid-tool-item"),l=$(".kanban-mode-list");if(t.isKanban?l.show():s.show(),"yes"===t.authorityRules.filter.show){$.isEmptyObject(i.filter_bar)||["stick","my","public"].forEach(function(e){0<i.filter_bar[e].length&&(r+=filter_term_header(e),i.filter_bar[e].forEach(function(e){parseInt(e.filter_id)===parseInt(t.panelConfig.active_filter_id)&&(e.select=!0),r+=filter_term_item(e)}))}),d.empty().append(term_wrap_dom(r,t)).append(filter_main_wrap(t.authorityRules.filter.edit,t)).find(".filter-task-panel").panel({border:!1,width:279}),$("#"+t.toolbarConfig.id).find(".custom-menu-item").remove();var c=filter_field_list(i.filter_list,"bar");d.find(".filter-task-list").empty().append('<div class="ui vertical menu">'+c+"</div>");var u=filter_field_list(i.search_list,"search"),f=$("#search_list_"+a);0<f.length?f.empty().append('<div class="ui vertical menu">'+u+"</div>"):$("body").append('<div id="search_list_'+a+'" class="filter-task-list" data-maindom="'+n+'"><div class="ui vertical menu">'+u+"</div></div>"),Strack.init_dropdown()}if(t.toolbarConfig.sortAllow&&"yes"===t.authorityRules.sort){var h=$("#"+t.toolbarConfig.id).find(".grid_sort");h.append(Strack.toolbar_down_init("sort",i.sort_list,t,"grid")),Strack.init_show_sort_down_icon(h,t.sortConfig.sort_data,t.sortConfig.sort_type)}if(t.toolbarConfig.groupAllow&&"yes"===t.authorityRules.group){var p=Strack.toolbar_down_init("group",i.group_list,t,"grid");t.isKanban?$(".kanban-mode-list").empty().append(p):$("#"+t.toolbarConfig.id).find(".grid_group").append(p)}t.toolbarConfig.fieldAllow&&$("#"+t.toolbarConfig.id).find(".grid_fields").append(Strack.toolbar_down_init("show",i.show_list,t,"grid")),t.toolbarConfig.viewAllow&&$("#"+t.toolbarConfig.id).find(".grid_view").append(Strack.toolbar_view_init("view",i.view_list,"grid")),t.toolbarConfig.stepAllow&&$("#"+t.toolbarConfig.id).find(".step_view").append(Strack.toolbar_step_init("step",i.step_list,t,"grid")),t.toolbarConfig.actionAllow&&$("#"+t.toolbarConfig.id).find(".common_action").empty().append(Strack.toolbar_common_action(o,t,i.common_action_list))}function filter_main_wrap(e,t){var a="";return a+=' <div class="grid-filter-right filter-adv-list">'+filter_main_header(e,t)+'<div class="filter-task-list"></div>'+filter_main_bnt()+filter_main_panel()+"</div>"}function reload_filter_tags(e,n,i){var o=$("#"+n.filterConfig.id),t=o.attr("data-page"),a=o.attr("data-modulecode"),r=o.attr("data-moduletype"),d=o.attr("data-maindom"),s=o.attr("data-bardom"),l=o.attr("data-projectid");$.ajax({type:"POST",url:StrackPHP.getGridFilterBarData,data:{page:t,module_code:a,module_type:r,project_id:l},dataType:"json",beforeSend:function(){o.append(Strack.loading_dom("white","","filter"))},success:function(t){var a="";if(["stick","my","public"].forEach(function(e){0<t[e].length&&(a+=filter_term_header(e),t[e].forEach(function(e){parseInt(e.filter_id)==parseInt(n.panelConfig.active_filter_id)&&(e.select=!0),a+=filter_term_item(e)}))}),o.find(".exist-filter-item").empty().append(a),Strack.do_reset_filter(d,s,!1),i){var e=o.find(".filter-bar-index-"+i.id);Strack.toggle_ac_filter(e[0])}$("#st-load_filter").remove()}})}function toolbar_down_self(e){var t="";return t+='<div class="scrolling menu">'+e+"</div>"}function filter_main_header(e,t){var a="";return a+='<div class="filter-header p-wrap-filter"><div class="aign-left"><a href="javascript:;" class="st-dropdown" onclick="Strack.show_filter_filter(this);">'+StrackLang.Add_Filter+'<i class="dropdown icon"></i></a></div><div class="aign-right"><div class="ui dropdown st-dropdown">'+StrackLang.Advanced+'<i class="icon-right icon-uniE60D"></i><div class="menu" style="left:-20px">',"yes"===e&&(a+='<a href="javascript:;" class="item" onclick="Strack.save_filter_condition(this);">'+StrackLang.Save_Filter+"</a>"),a+='<a href="javascript:;" class="item" onclick="Strack.reset_filter_default(this);">'+StrackLang.Reset_Default+"</a>",t.allowAdvanceFilter&&(a+='<a href="javascript:;" class="item" onclick="Strack.open_advance_filter(this);">'+StrackLang.Advanced_Filter+"</a>"),a+="</div></div></div></div>"}function filter_main_panel(){var e="";return e+='<div class="filter-task-main p-wrap"><div class="filter-task-panel"><div class="no-filter-task">'+StrackLang.No_Filter_Item+"</div></div></div>"}function filter_field_list(t,a){var n,e="";for(var i in t)for(var o in t[i])$.isEmptyObject(t[i][o].fields)||(n="",t[i][o].fields.forEach(function(e){e.belong=t[i][o].title,e.module_code=i,n+=field_item_menu(e,a)}),e+=field_list_item(t[i][o].title,n));return e}function field_list_item(e,t){var a="";return a+='<div class="ui dropdown item"><i class="dropdown icon"></i>'+e+'<div class="menu">'+t+"</div></div>"}function field_item_menu(e,t){var a="",n="built_in"===e.field_type?0:e.variable_id,i=e.data_source?e.data_source:"";return 0<n&&0<=$.inArray(e.type,["horizontal_relationship","belong_to"])&&(e.module_code="yes"===e.is_master?e.fields:e.module_code+"_"+e.fields,e.table="entity"===e.module_type?e.module_type:e.module_code,e.fields="id"),a+='<a href="javascript:;" class="item field-item" onclick="Strack.toggle_filter_item(this);" from="'+t+'" field="'+e.fields+'" field_type="'+e.field_type+'" module_id="'+e.module_id+'" module_code="'+e.module_code+'" variable_id="'+n+'" project_id="'+e.project_id+'"  table="'+e.table+'" editor="'+e.editor+'" lang="'+e.lang+'" belong="'+e.belong+'"  value_show="'+e.value_show+'" flg_module="'+e.flg_module+'" frozen_module="'+e.frozen_module+'" data_source="'+i+'"><i class="icon-left icon-unchecked"></i>'+e.lang+"</a>"}function filter_main_bnt(){var e="";return e+='<div class="filter-task-button"><a href="javascript:;" class="st-dialog-button st-button-base button-dgsub" onclick="Strack.filter_manual(this);" data-auto="manual">'+StrackLang.Search+'</a><div class="aign-left project-checkbox"><input class="icon-left filter_auto_in" type="checkbox"><span class="filter_auto_check">'+StrackLang.Auto_Filter+"</span></div></div>"}function unsave_filter_item(){var e="";return e+=filter_term_header("unsaved"),e+=unsave_term_item()}function unsave_term_item(){return'<div class="filter-tag-item filter-tag-ac"><a href="javascript:;" class="item-name aign-left" onclick="Strack.toggle_ac_filter(this)" filter_type="unsave" filter_id="0"><div class="ui grey label filter-tag-label"></div><div class="filter-tag-name text-ellipsis"></div></a><a class="item-bnt aign-left fbar-save-bnt" onclick="Strack.save_active_filter(this)"><i class="icon-uniF0C7"></i></a><a class="item-bnt aign-left" onclick="Strack.delete_unsave_filter(this)"><i class="icon-uniE6DB"></i></a></div>'}function term_wrap_dom(e,t){var a=t.searchConfig.bar_show;unsave_filter_item();var n="",i="",o="";return o="yes"===a?(i="stick-on",StrackLang.Cancel_Keep):StrackLang.Keep_Display,e=e||'<div class="datagrid-empty-no">'+StrackLang.No_Filter_List+"</div>",n+='<div class="grid-filter-left filter-label-list"><div class="filter-header filter-label"><div class="aign-left filter-label-pin"><a href="javascript:;" class="st-dropdown filter_list '+i+'" onclick="Strack.stick_filter_bar(this);"><i class="pin icon icon-left"></i><span>'+o+'</span></a></div><div class="aign-right filter-label-bnt"><a href="javascript:;" class="st-dropdown filter_list" onclick="Strack.toggle_filter_main(this);"><i class="icon-uniE94E"></i></a></div></div><div class="filter-tag-list"><a href="javascript:;" class="reset-filter-item" onclick="Strack.reset_filter_default(this);">'+StrackLang.Reset_Default+'</a><div class="unsaved-filter-item">'+unsave_filter_item()+'</div><div class="exist-filter-item">'+e+"</div></div></div>"}function filter_term_header(e){var t="",a="",n="";switch(e){case"unsaved":a="icon-uniE6A7",n=StrackLang.Unsaved;break;case"stick":a="icon-uniE8BA",n=StrackLang.Stick;break;case"my":a="icon-uniF21D",n=StrackLang.My;break;case"public":a="icon-uniF1E0",n=StrackLang.Public}return t+='<div class="filter-tag-group"><i class="'+a+' icon-left"></i><span class="filter-group-name text-ellipsis">'+n+"</span></div>"}function filter_term_item(e){var t="";return t+='<div class="filter-tag-item '+(e.select?"filter-tag-ac":"")+'" filter_id="'+e.id+'"><a href="javascript:;" class="item-name aign-left filter-bar-index-'+e.id+'" onclick="Strack.toggle_ac_filter(this)" filter_type="exist" filter_id="'+e.id+'"><div class="ui '+e.color+' label filter-tag-label"></div><div class="filter-tag-name text-ellipsis">'+e.name+"</div></a>",t+='<a class="item-bnt aign-left" onclick="Strack.filter_item_stick(this)" filter_id="'+e.id+'" stick="'+e.stick+'"><i class="'+e.icon+'"></i></a>',e.allow_del&&(t+='<a class="item-bnt aign-left" onclick="Strack.filter_item_delete(this)" filter_id="'+e.id+'"><i class="icon-uniE6DB"></i></a>'),t+="</div>"}function replace_html_tag(e){return e=e.replace(/<\/?[^>]*>/g,"")}function grid_clipboard(e){var t="",a=$("#grid_clipboard");e&&(t=replace_html_tag($(e).html())),0<a.length?a.val(t):$("body").append('<input id="grid_clipboard" type="text" style="position: absolute;top:-9999px" value="'+t+'"/>')}function reset_grid_column(){}function checkFieldRegion(e,t,a){return 0<=$.inArray(a,e)||0<=$.inArray(a,t)}function build_index(e,t){return $.inArray(t,e)<0?t:build_index(e,++t)}function _737(e){var t={};return $.map(e,function(e){function i(e){return null!=$.data($(e)[0],o)}var o;t[e]=(o=e,{init:function(e,t){var a=$('<input type="text" class="datagrid-editable-input">').appendTo(e);if(a[o]&&"text"!==o){if("tagbox"!==o){var n=$(e).closest(".datagrid-row").height();t&&0<t.height?t.height=n:t={height:n}}return a[o](t)}return a},destroy:function(e){i(e)&&$(e)[o]("destroy")},getValue:function(e){if(i(e)){var t=$(e)[o]("options");return t.multiple?$(e)[o]("getValues").join(t.separator):$(e)[o]("getValue")}return $(e).val()},setValue:function(e,t){if(i(e)){var a=$(e)[o]("options");if(a.multiple)if(t)if(t.hasOwnProperty("rows")){var n=[];t.rows.forEach(function(e){n.push(e.id)}),$(e)[o]("setValues",n)}else $(e)[o]("setValues",t.split(a.separator));else $(e)[o]("clear");else t&&t.hasOwnProperty("rows")?$(e)[o]("setValue",t.rows[0].id):$(e)[o]("setValue",t)}else $(e).val(t)},resize:function(e,t){if(i(e)?$(e)[o]("resize",t):$(e)._outerWidth(t)._outerHeight($(e).closest(".datagrid-row").height()),"tagbox"===o){var a=$(e).closest(".datagrid-row").height();$(e).next(".tagbox").css({"min-height":a-2}).find("a.combo-arrow").css({"min-height":a-2})}}})}),t}$.fn.datagrid=function(i,e){return"string"==typeof i?$.fn.datagrid.methods[i](this,e):(i=i||{},this.each(function(){var e,t=$.data(this,"datagrid");if(t)e=$.extend(t.options,i),t.options=e;else{e=$.extend({},$.extend({},$.fn.datagrid.defaults,{queryParams:{}}),$.fn.datagrid.parseOptions(this),i),$(this).css("width","").css("height","");var a=_60b(this,e);e.columns||(e.columns=a.columns),e.frozenColumns||(e.frozenColumns=a.frozenColumns),e.columns=$.extend(!0,[],e.columns),e.frozenColumns=$.extend(!0,[],e.frozenColumns),e.view=$.extend({},e.view),$.data(this,"datagrid",{options:e,panel:a.panel,dc:a.dc,ss:null,selectedRows:[],checkedRows:[],data:{total:0,rows:[]},originalRows:[],updatedRows:[],insertedRows:[],deletedRows:[]})}if(_614(this),e.isKanban||_629(this),_5e1(this),e.data)$(this).datagrid("loadData",e.data);else{var n=$.fn.datagrid.parseData(this);0<n.total?$(this).datagrid("loadData",n):(e.view.renderEmptyRow(this),$(this).datagrid("autoSizeColumn"))}_65a(this)}))};var _745=$.extend({},_737(["text","textbox","tagbox","numberbox","numberspinner","combobox","combotree","combogrid","datebox","datetimebox","timespinner","datetimespinner"]),{textarea:{init:function(e,t){return $('<textarea class="datagrid-editable-input"></textarea>').appendTo(e)},getValue:function(e){return $(e).val()},setValue:function(e,t){$(e).val(t)},resize:function(e,t){var a=$(e).closest(".datagrid-row").height();$(e)._outerWidth(t).css({"min-width":t-10,"max-width":t-10,"min-height":a-4})}},checkbox:{init:function(e,t){var a=$('<input type="checkbox">').appendTo(e);return t&&(a.val(t.on),a.attr("offval",t.off)),a},getValue:function(e){return $(e).is(":checked")?$(e).val():$(e).attr("offval")},setValue:function(e,t){var a=!1;$(e).val()==t&&(a=!0),$(e)._propAttr("checked",a)},resize:function(e,t){var a=($(e).closest(".datagrid-row").height()-13)/2;$(e).css("margin-top",a)}},validatebox:{init:function(e,t){var a=$('<input type="text" class="datagrid-editable-input">').appendTo(e);return a.validatebox(t),a},destroy:function(e){$(e).validatebox("destroy")},getValue:function(e){return $(e).val()},setValue:function(e,t){$(e).val(t)},resize:function(e,t){$(e)._outerWidth(t)._outerHeight($(e).closest(".datagrid-row").height())}}});$.fn.datagrid.methods={options:function(e){var t=$.data(e[0],"datagrid").options,a=$.data(e[0],"datagrid").panel.panel("options");return $.extend(t,{width:a.width,height:a.height,closed:a.closed,collapsed:a.collapsed,minimized:a.minimized,maximized:a.maximized})},setOptions:function(e,a){return e.each(function(){var t=$(this).datagrid("options");$.each(a,function(e){t[e]=a[e]}),a.columns&&(_614(e[0]),$(e[0]).datagrid("columnMoving"),_629(this))})},setFilterParams:function(e,a){return e.each(function(){var e=$(this).datagrid("options"),t=JSON.parse(e.queryParams.filter_data);$.each(a,function(e){t.filter[e]=a[e]}),e.queryParams.filter_data=JSON.stringify(t)})},addQueryFields:function(jq,_opt){return jq.each(function(){var opts=$(this).datagrid("options"),col=opts.columns,d_index=col.length-1,c_col=col[d_index],l_index=c_col[c_col.length-1].findex+1,f_w=120<_opt.width?_opt.width:120,t_field={field:_opt.value_show,title:_opt.lang,align:"center",width:f_w,frozen:"frozen",findex:l_index,field_type:_opt.field_type,drag:!0},formatter=Strack.G.gridFieldCache[opts.toolbarConfig.page][_opt.value_show].outreach_formatter;if(formatter&&(t_field.formatter=function(value,row,index){return eval(formatter)}),c_col.push(t_field),col[d_index]=c_col,1<col.length){var f_col=col[0],last_f_col=f_col[f_col.length-1];"yes"===last_f_col.step?f_col.push({bgc:"",but:"",class:"",colspan:1,fhcol:!0,fname:"",step:"no",title:""}):(last_f_col.colspan=parseInt(last_f_col.colspan)+1,f_col[f_col.length-1]=last_f_col),col[0]=f_col}opts.columns=col;var d_filter=JSON.parse(opts.queryParams.filter_data);d_filter.filter.temp_fields.add[_opt.value_show]={field:_opt.field,value_show:_opt.value_show,module_code:_opt.module_code,module_type:_opt.module_type},delete d_filter.filter.temp_fields.cut[_opt.value_show],opts.queryParams.filter_data=JSON.stringify(d_filter),_614(jq[0]),$(jq[0]).datagrid("columnMoving"),_629(this)})},cutQueryFields:function(u,f){return u.each(function(){var e=$(this).datagrid("options"),t=e.columns.length-1,a=e.columns[t],n=e.frozenColumns[t],i=[];a.forEach(function(e,t){a[t].field===f.value_show&&(a.splice(t,1),0)}),n.forEach(function(e,t){n[t].field===f.value_show&&(n.splice(t,1),0),i.push(e.findex)});var o=0,r=[];if(a.forEach(function(e,t){o=build_index(i,o),e.findex=o,o++,r.push(e)}),e.columns[t]=r,e.frozenColumns[t]=n,1==t){var d={};e.columns[0].forEach(function(e){e.but&&(d[e.but]=e)});var s=[],l=[];a.forEach(function(e,t){e.belong?$.inArray(e.belong,l)<0&&(s.push(d[e.belong]),l.push(e.belong)):"col"==l[l.length-1]?s[l.length-1].colspan=s[l.length-1].colspan+1:(s.push({bgc:"",but:"",class:"",colspan:1,fhcol:!0,fname:"",step:"no",title:""}),l.push("col"))}),e.columns[0]=s}var c=JSON.parse(e.queryParams.filter_data);c.filter.temp_fields.cut[f.value_show]={field:f.field,value_show:f.value_show,module_code:f.module_code,module_type:f.module_type},delete c.filter.temp_fields.add[f.value_show],e.queryParams.filter_data=JSON.stringify(c),_614(u[0]),$(u[0]).datagrid("columnMoving"),_629(this)})},applyGroup:function(e,t){},cancelGroup:function(e,t){},setColumns:function(t,i){return t.each(function(){var e=$(this).datagrid("options"),a=($.data(t[0],"datagrid").dc,[]),n=!0;switch(i.ishide){case"de":e.columns[0].forEach(function(e){e.field!=i.field&&a.push(e)});break;case"add":e.columns[0].forEach(function(e,t){i.index<e.findex&&n&&(a.push(i.setting),n=!1),a.push(e)}),n&&a.push(i.setting)}e.columns[0]=a,_614(t[0])})},ResetStepColumnColspan:function(e,i){return e.each(function(){var a=$(this).datagrid("options"),n=$(this).datagrid("getPanel");1<a.columns.length&&(a.columns[0].forEach(function(e,t){"yes"===e.step&&e.but===i.step&&(a.columns[0][t].colspan=i.colspan,1===i.colspan?a.columns[0][t].fhcol=!0:a.columns[0][t].fhcol=!1)}),a.columns[1].forEach(function(e,t){e.belong===i.step&&(-1!==$.inArray(e.field,i.field_list)?1===i.colspan?(n.find('td[field="'+e.field+'"]').hide(),a.columns[1][t].hidden=!0):(n.find('td[field="'+e.field+'"]').show(),a.columns[1][t].hidden=!1):1===i.colspan?a.columns[1][t].cbd="colboth":a.columns[1][t].cbd="colleft")})),$(e[0]).datagrid("columnMoving"),_629(this)})},FrozenColumn:function(l,c){return l.each(function(){var e,t,a,n=$(this).datagrid("options"),i=-1,o=-1;if(1<n.columns.length){switch(e=n.columns[1],t=n.frozenColumns[1],c.isfrozen){case"frozen":e.forEach(function(e,t){e.field==c.field&&(i=t,e.frozen="nofrozen",a=e)}),e.splice(i,1),t.push(a);break;case"nofrozen":t.forEach(function(e,t){e.field==c.field&&(i=t,e.frozen="frozen",a=e)}),t.splice(i,1),e.every(function(e,t){return!(e.findex>a.findex)||(o=t,!1)}),-1==o?e.push(a):e.splice(o,0,a)}n.frozenColumns[1]=t,n.columns[1]=e,n.frozenColumns[0]=[{colspan:t.length}];var r={};n.columns[0].forEach(function(e){e.but&&(r[e.but]=e)});var d=[],s=[];e.forEach(function(e,t){e.belong?$.inArray(e.belong,s)<0&&(d.push(r[e.belong]),s.push(e.belong)):"col"==s[s.length-1]?d[s.length-1].colspan=d[s.length-1].colspan+1:(d.push({bgc:"",but:"",class:"",colspan:1,fhcol:!0,fname:"",step:"no",title:""}),s.push("col"))}),n.columns[0]=d}else{switch(e=n.columns[0],t=n.frozenColumns[0],c.isfrozen){case"frozen":e.forEach(function(e,t){e.field==c.field&&(i=t,e.frozen="nofrozen",a=e)}),e.splice(i,1),t.push(a);break;case"nofrozen":t.forEach(function(e,t){e.field==c.field&&(i=t,e.frozen="frozen",a=e)}),t.splice(i,1),e.every(function(e,t){return!(e.findex>a.findex)||(o=t,!1)}),-1==o?e.push(a):e.splice(o,0,a)}n.frozenColumns[0]=t,n.columns[0]=e}_614(l[0]),$(l[0]).datagrid("columnMoving"),_629(this)})},appendStepColumn:function(e,a){return e.each(function(){var t=$(this).datagrid("options");t.columns[0].push(a.first),a.second.forEach(function(e){t.columns[1].push(e)}),_614(e[0]),$(e[0]).datagrid("columnMoving"),_629(this)})},highlightViewSave:function(e){$(e[0]).closest(".datagrid-wrap").find(".grid-view-bnt").addClass("dg-bnt-active")},delHighlightViewSave:function(e){$(e[0]).closest(".datagrid-wrap").find(".grid-view-bnt").removeClass("dg-bnt-active")},setSelectionState:function(e){return e.each(function(){_69b(this)})},createStyleSheet:function(e){return _5d2(e[0])},getPanel:function(e){return $.data(e[0],"datagrid").panel},getPager:function(e){return $.data(e[0],"datagrid").panel.children("div.datagrid-pager")},getColumnFields:function(e,t){return _627(e[0],t)},getColumnOption:function(e,t){return _628(e[0],t)},resize:function(e,t){return e.each(function(){_5e1(this,t)})},load:function(e,t){return e.each(function(){var e=$(this).datagrid("options");"string"==typeof t&&(e.url=t,t=null),e.pageNumber=1,$(this).datagrid("getPager").pagination("refresh",{pageNumber:1}),_65a(this,t)})},reload:function(e,t){return e.each(function(){var e=$(this).datagrid("options");e.isKanban||(e.gridDirtyData.list=[],e.gridDirtyData.value={},"string"==typeof t&&(e.url=t,t=null),e.groupActive?e.view=scrollview:e.view=_790,_65a(this,t))})},reloadFooter:function(e,a){return e.each(function(){var e=$.data(this,"datagrid").options,t=$.data(this,"datagrid").dc;a&&($.data(this,"datagrid").footer=a),e.showFooter&&(e.view.renderFooter.call(e.view,this,t.footer2,!1),e.view.renderFooter.call(e.view,this,t.footer1,!0),e.view.onAfterRender&&e.view.onAfterRender.call(e.view,this),$(this).datagrid("fixRowHeight"))})},loading:function(e){return e.each(function(){var e=$.data(this,"datagrid").options;if($(this).datagrid("getPager").pagination("loading"),e.loadMsg){var t=$(this).datagrid("getPanel");if(!t.children("div.datagrid-mask").length){$('<div class="datagrid-mask" style="display:block"></div>').appendTo(t);var a=$('<div class="datagrid-mask-msg" style="display:block;left:50%"></div>').html(e.loadMsg).appendTo(t);a._outerHeight(40),a.css({marginLeft:-a.outerWidth()/2,lineHeight:a.height()+"px"})}}})},loaded:function(e){return e.each(function(){$(this).datagrid("getPager").pagination("loaded");var e=$(this).datagrid("getPanel");e.children("div.datagrid-mask-msg").remove(),e.children("div.datagrid-mask").remove()})},fitColumns:function(e){return e.each(function(){_65c(this)})},fixColumnSize:function(e,t){return e.each(function(){_67a(this,t)})},fixRowHeight:function(e,t){return e.each(function(){_5f7(this,t)})},freezeRow:function(e,t){return e.each(function(){_604(this,t)})},autoSizeColumn:function(e,t){return e.each(function(){_66e(this,t)})},loadData:function(e,t){return e.each(function(){_65b(this,t),_716(this)})},getData:function(e){return $.data(e[0],"datagrid").data},getRow:function(e,t){return $.data(e[0],"datagrid").data.rows[parseInt(t)]},getRows:function(e){return $.data(e[0],"datagrid").data.rows},getFooterRows:function(e){return $.data(e[0],"datagrid").footer},getRowIndex:function(e,t){return _6a3(e[0],t)},getChecked:function(e){return _6a9(e[0])},getSelected:function(e){var t=_6a6(e[0]);return 0<t.length?t[0]:null},showSelectedNumber:function(e){var t=$(e[0]).closest(".entity-datalist").find(".datagrid-pager .pagination-selected");if(t.length){var a=_6a6(e[0]).length;0<a?t.html(": "+a):t.html("")}},getSelections:function(e){return _6a6(e[0])},clearSelections:function(e){return e.each(function(){var e=$.data(this,"datagrid"),t=e.selectedRows,a=e.checkedRows;t.splice(0,t.length),_6ba(this),e.options.checkOnSelect&&a.splice(0,a.length)})},clearChecked:function(e){return e.each(function(){var e=$.data(this,"datagrid"),t=e.selectedRows,a=e.checkedRows;a.splice(0,a.length),_6ca(this),e.options.selectOnCheck&&t.splice(0,t.length)})},reloadFilterTags:function(e,t){reload_filter_tags(e,$(e).datagrid("options"),t)},scrollTo:function(e,t){return e.each(function(){_6ac(this,t)})},highlightRow:function(e,t){return e.each(function(){_63c(this,t),_6ac(this,t)})},selectAll:function(e){return e.each(function(){_6bf(this)})},unselectAll:function(e){return e.each(function(){_6ba(this)})},selectRow:function(e,t){return e.each(function(){_643(this,t)})},selectRecord:function(e,t){return e.each(function(){if($.data(this,"datagrid").options.idField){var e=_6a3(this,t);0<=e&&$(this).datagrid("selectRow",e)}})},unselectRow:function(e,t){return e.each(function(){_644(this,t)})},checkRow:function(e,t){return e.each(function(){_640(this,t)})},uncheckRow:function(e,t){return e.each(function(){_641(this,t)})},checkAll:function(e){return e.each(function(){_6c4(this)})},uncheckAll:function(e){return e.each(function(){_6ca(this)})},beginEdit:function(e,t){return e.each(function(){_6db(this,t)})},endEdit:function(e,t){return e.each(function(){_6e1(this,t,!1)})},cancelEdit:function(e,t){return e.each(function(){_6e1(this,t,!0)})},getEditors:function(e,t){return _6ee(e[0],t)},getEditor:function(e,t){return _6f2(e[0],t)},refreshRow:function(e,t){return e.each(function(){var e=$.data(this,"datagrid").options;e.view.refreshRow.call(e.view,this,t)})},validateRow:function(e,t){return _6e0(e[0],t)},updateRow:function(e,t){return e.each(function(){var e=$.data(this,"datagrid").options;e.view.updateRow.call(e.view,this,t.index,t.row)})},appendRow:function(e,t){return e.each(function(){_713(this,t)})},insertRow:function(e,t){return e.each(function(){_70f(this,t)})},deleteRow:function(e,t){return e.each(function(){_709(this,t)})},getChanges:function(e,t){return _703(e[0],t)},acceptChanges:function(e){return e.each(function(){_71a(this)})},rejectChanges:function(e){return e.each(function(){_71c(this)})},mergeCells:function(e,t){return e.each(function(){_72e(this,t)})},showColumn:function(e,t){return e.each(function(){$(this).datagrid("getPanel").find('td[field="'+t+'"]').show(),$(this).datagrid("getColumnOption",t).hidden=!1,$(this).datagrid("fitColumns")})},hideColumn:function(e,t){return e.each(function(){$(this).datagrid("getPanel").find('td[field="'+t+'"]').hide(),$(this).datagrid("getColumnOption",t).hidden=!0,$(this).datagrid("fitColumns")})},sort:function(e,t){return e.each(function(){_64f(this,t)})},gotoPage:function(e,n){return e.each(function(){var e,t,a=this;"object"==typeof n?(e=n.page,t=n.callback):e=n,$(a).datagrid("options").pageNumber=e,$(a).datagrid("getPager").pagination("refresh",{pageNumber:e}),_65a(a,null,function(){t&&t.call(a,e)})})}},$.fn.datagrid.parseOptions=function(_78d){var t=$(_78d);return $.extend({},$.fn.panel.parseOptions(_78d),$.parser.parseOptions(_78d,["url","toolbar","idField","sortName","sortOrder","pagePosition","resizeHandle",{sharedStyleSheet:"boolean",fitColumns:"boolean",autoRowHeight:"boolean",striped:"boolean",nowrap:"boolean"},{rownumbers:"boolean",singleSelect:"boolean",ctrlSelect:"boolean",checkOnSelect:"boolean",selectOnCheck:"boolean"},{pagination:"boolean",pageSize:"number",pageNumber:"number"},{multiSort:"boolean",remoteSort:"boolean",showHeader:"boolean",showFooter:"boolean"},{scrollbarSize:"number"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0,loadMsg:null!=t.attr("loadMsg")?t.attr("loadMsg"):void 0,rowStyler:t.attr("rowStyler")?eval(t.attr("rowStyler")):void 0})},$.fn.datagrid.parseData=function(e){var t=$(e),a={total:0,rows:[]},n=t.datagrid("getColumnFields",!0).concat(t.datagrid("getColumnFields",!1));return t.find("tbody tr").each(function(){a.total++;var e={};$.extend(e,$.parser.parseOptions(this,["iconCls","state"]));for(var t=0;t<n.length;t++)e[n[t]]=$(this).find("td:eq("+t+")").html();a.rows.push(e)}),a};var _790={render:function(e,t,a){var n=$(e).datagrid("getRows"),i=$(e).datagrid("getData");$(t).html(this.renderTable(e,0,n,a,i.total))},renderFooter:function(e,t,a){$.data(e,"datagrid").options;for(var n=$.data(e,"datagrid").footer||[],i=$(e).datagrid("getColumnFields",a),o=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],r=0;r<n.length;r++)o.push('<tr class="datagrid-row" datagrid-row-index="'+r+'">'),o.push(this.renderRow.call(this,e,i,a,r,n[r])),o.push("</tr>");o.push("</tbody></table>"),$(t).html(o.join(""))},renderTable:function(e,t,a,n,i){var o=$.data(e,"datagrid"),r=o.options;if(n&&!(r.rownumbers||r.frozenColumns&&r.frozenColumns.length))return"";for(var d=$(e).datagrid("getColumnFields",n),s=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'],l=0;l<a.length;l++){var c=a[l],u=r.rowStyler?r.rowStyler.call(e,t,c):"",f="",h="";"string"==typeof u?h=u:u&&(f=u.class||"",h=u.style||"");var p='class="datagrid-row '+(t%2&&r.striped?"datagrid-row-alt ":" ")+f+'"',g=h?'style="'+h+'"':"",b=o.rowIdPrefix+"-"+(n?1:2)+"-"+t;$.isEmptyObject(c)||(s.push('<tr id="'+b+'" datagrid-row-index="'+t+'" '+p+" "+g+">"),s.push(this.renderRow.call(this,e,d,n,t,c,i)),s.push("</tr>")),t++}return s.push("</tbody></table>"),s.join("")},renderRow:function(e,t,a,n,i,o){var r=$.data(e,"datagrid").options,d=[];if(a&&r.rownumbers){r.pageSize="All"==r.pageSize?o:r.pageSize;var s=n+1;r.pagination&&(s+=(r.pageNumber-1)*r.pageSize),d.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+s+"</div></td>")}for(var l=0;l<t.length;l++){var c=t[l],u=$(e).datagrid("getColumnOption",c);if(u){var f=i[c],h=u.styler&&u.styler(f,i,n)||"",p="",g="";"string"==typeof h?g=h:h&&(p=h.class||"",g=h.style||"");var b=[];p&&b.push(p),u.cbd&&b.push(u.cbd),u.editor&&b.push("item-hover"),0<=$.inArray(u.field+"_"+n,r.gridDirtyData.list)&&b.push("grid-cell-dirty"),b.push("is-grid-td");var v=0<b.length?'class="'+b.join(" ")+'"':"",m="";if(u.bdc)switch(u.cbd){case"colboth":Strack.G.gridFirstColMap[u.belong]?m+="border-color:#DDD #DDD #DDD #"+u.bdc+";border-style: dotted dotted dotted solid;border-width: 0px 1px 1px 3px":m="border-color:#DDD #"+u.bdc+";";break;default:m="border-color:#DDD #"+u.bdc+";"}var x=u.hidden?"display:none;"+g+m:g?g+m:m||"",_=c+"_"+i.id;d.push('<td id="'+_+'" field="'+c+'" style="'+x+'" '+v+' data-grid="'+r.id+'">');var w="";if(u.editor&&d.push('<a href="javascript:;" class="aign-right icon-hide-min dg-hid-icon"><i class="icon-uniE684"></i></a>'),u.checkbox||(u.align&&(w+="text-align:"+u.align+";"),r.nowrap?r.autoRowHeight&&(w+="height:auto;"):w+="white-space:normal;height:auto;"),d.push('<div style="'+w+'" '),d.push(u.checkbox?'class="datagrid-cell-check"':'class="datagrid-cell '+u.cellClass+'"'),d.push(">"),u.checkbox)d.push('<input type="checkbox" '+(i.checked?'checked="checked"':"")),d.push(' name="'+c+'" value="'+(null!=f?f:"")+'">');else if(u.formatter)d.push(u.formatter(f,i,n));else{var y=u.editor&&u.editor.type&&"timespinner"===u.editor.type;(y=y||u.custom_type&&"timespinner"===u.custom_type)&&f&&(f=Strack.format_timespinner_val(f)),d.push(f)}d.push("</div>"),d.push("</td>")}}return d.join("")},refreshRow:function(e,t){this.updateRow.call(this,e,t,{})},updateRow:function(i,o,e){var r=$.data(i,"datagrid").options,d=$(i).datagrid("getRows"),t=n(o);$.extend(d[o],e);var a=n(o),s=t.c,l=a.s,c="datagrid-row "+(o%2&&r.striped?"datagrid-row-alt ":" ")+a.c;function n(e){var t=r.rowStyler?r.rowStyler.call(i,e,d[e]):"",a="",n="";return"string"==typeof t?n=t:t&&(a=t.class||"",n=t.style||""),{c:a,s:n}}function u(e){var t=$(i).datagrid("getColumnFields",e),a=r.finder.getTr(i,o,"body",e?1:2),n=a.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");a.html(this.renderRow.call(this,i,t,e,o,d[o])),a.attr("style",l).removeClass(s).addClass(c),n&&a.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0)}u.call(this,!0),u.call(this,!1),$(i).datagrid("fixRowHeight",o)},insertRow:function(o,r,e){var d=$.data(o,"datagrid"),s=d.options,n=d.dc,l=d.data;function t(e){for(var t=e?1:2,a=l.rows.length-1;r<=a;a--){var n=s.finder.getTr(o,a,"body",t);if(n.attr("datagrid-row-index",a+1),n.attr("id",d.rowIdPrefix+"-"+t+"-"+(a+1)),e&&s.rownumbers){var i=a+2;s.pagination&&(i+=(s.pageNumber-1)*s.pageSize),n.find("div.datagrid-cell-rownumber").html(i)}s.striped&&n.removeClass("datagrid-row-alt").addClass((a+1)%2?"datagrid-row-alt":"")}}function a(e){var t=e?1:2,a=($(o).datagrid("getColumnFields",e),'<tr id="'+(d.rowIdPrefix+"-"+t+"-"+r)+'" class="datagrid-row" datagrid-row-index="'+r+'"></tr>');r>=l.rows.length?l.rows.length?s.finder.getTr(o,"","last",t).after(a):(e?n.body1:n.body2).html('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'+a+"</tbody></table>"):s.finder.getTr(o,r+1,"body",t).before(a)}null!=r&&null!=r||(r=l.rows.length),r>l.rows.length&&(r=l.rows.length),t.call(this,!0),t.call(this,!1),a.call(this,!0),a.call(this,!1),l.total+=1,l.rows.splice(r,0,e),this.refreshRow.call(this,o,r)},deleteRow:function(o,r){var d=$.data(o,"datagrid"),s=d.options,l=d.data;function e(e){for(var t=e?1:2,a=r+1;a<l.rows.length;a++){var n=s.finder.getTr(o,a,"body",t);if(n.attr("datagrid-row-index",a-1),n.attr("id",d.rowIdPrefix+"-"+t+"-"+(a-1)),e&&s.rownumbers){var i=a;s.pagination&&(i+=(s.pageNumber-1)*s.pageSize),n.find("div.datagrid-cell-rownumber").html(i)}s.striped&&n.removeClass("datagrid-row-alt").addClass((a-1)%2?"datagrid-row-alt":"")}}s.finder.getTr(o,r).remove(),e.call(this,!0),e.call(this,!1),--l.total,l.rows.splice(r,1)},onBeforeRender:function(e,t){},onAfterRender:function(e){var t=$.data(e,"datagrid").options;t.showFooter&&$(e).datagrid("getPanel").find("div.datagrid-footer").find("div.datagrid-cell-rownumber,div.datagrid-cell-check").css("visibility","hidden");0===t.finder.getRows(e).length&&this.renderEmptyRow(e);var a=$(e).closest(".entity-datalist");a.removeClass("skeleton-size-full");var n=a.find(".datagrid-pager .pagination-selected");if(n.length&&n.html(""),t.adaptive){var i=t.adaptive.exth;i=i||0;var o=t.adaptive.domresize?1:0;Strack.auto_resize_datagrid(e,t.adaptive.dom,t.adaptive.min_width,i,o)}var r=0,d=0;switch(t.dataGridType){case"treegrid":d=(r=$(e).treegrid("getData")).length;break;default:r=$(e).datagrid("getData"),d=parseInt(r.total)}if(0===d&&0<=$.inArray(t.dataGridType,["datagrid","treegrid"])&&!t.isKanban){var s=t.DataNull?t.DataNull:StrackLang.Datagird_No_Data;$(e).prev(".datagrid-view2").find(".datagrid-body").prepend('<div class="datagrid-empty-no">'+s+"</div>")}Strack.G.GridPage.pageSize=t.pageSize,Strack.G.GridPage.pageNumber=t.pageNumber},renderEmptyRow:function(t){var e=$.map($(t).datagrid("getColumnFields"),function(e){return $(t).datagrid("getColumnOption",e)});$.map(e,function(e){e.formatter1=e.formatter,e.styler1=e.styler,e.formatter=e.styler=void 0});var a=$.data(t,"datagrid").dc.body2;a.html(this.renderTable(t,0,[{}],!1)),a.find("tbody *").css({height:1,borderColor:"transparent",background:"transparent"});var n=a.find(".datagrid-row");n.removeClass("datagrid-row").removeAttr("datagrid-row-index"),n.find(".datagrid-cell,.datagrid-cell-check").empty(),$.map(e,function(e){e.formatter=e.formatter1,e.styler=e.styler1,e.formatter1=e.styler1=void 0})}};$.fn.datagrid.defaults=$.extend({},$.fn.panel.defaults,{sharedStyleSheet:!1,frozenColumns:void 0,columns:void 0,fitColumns:!1,resizeHandle:"right",renderComplet:!1,renderNewPage:!1,autoRowHeight:!0,toolbar:null,striped:!1,method:"post",nowrap:!0,idField:null,url:null,data:null,loadMsg:"Processing, please wait ...",rownumbers:!1,rowheight:31,differhigh:!1,adaptive:null,autocolumns:!1,gridname:null,DragSelect:!1,isKanban:!1,groupParam:{},moduleId:0,projectId:0,showContextMenu:!0,contextMenuData:{id:"st_menu_default",copy_id:"def_copy_cell",data:[{id:"def_copy_cell",lang:StrackLang.Copy_Grip_Cell,iconCls:"icon-uniE943",type:"function",click:"Strack.copy_to_clipboard(this)",attr_data:{"clipboard-action":"copy","clipboard-target":"#grid_clipboard"}}]},HeaderField:!1,HeaderFieldData:null,HeaderHeight:null,DataNull:null,dataGridType:"datagrid",headerAddCheckbox:!1,cellUpdateMode:"auto",gridDirtyData:{list:[],value:{}},panelConfig:{},toolbarConfig:{id:"",page:"",sortAllow:!1,groupAllow:!1,fieldAllow:!1,viewAllow:!1,stepAllow:!1,actionAllow:!1,param:{}},searchConfig:{id:"",filterBar:{}},filterConfig:{id:"",schema_page:"",loading_type:"white",barParam:{}},authorityRules:{filter:{}},allowAdvanceFilter:!0,columnsFieldConfig:{},groupActive:!1,singleSelect:!1,ctrlSelect:!1,selectOnCheck:!0,checkOnSelect:!0,pagination:!1,pagePosition:"bottom",pageNumber:1,pageSize:10,pageList:[10,20,30,40,50],pageLayout:["list","sep","first","prev","sep","manual","sep","next","last","sep","refresh"],queryParams:{},sortName:null,sortOrder:"asc",multiSort:!1,remoteSort:!0,showHeader:!0,showFooter:!1,scrollbarSize:18,dynamicColumns:!1,rowEvents:{mousedown:_dragSelect(),mouseover:_635(!0),mouseout:_635(!1),click:_63d,dblclick:_647,contextmenu:_64b},rowStyler:function(e,t){},loader:function(e,o,t){var a=$(this),r=a.datagrid("options");if(!r.url)return!1;if(r.renderComplet&&!r.renderNewPage||(render_grid_entity(this,r),r.renderComplet=!0,r.renderNewPage=!1),r.isKanban){var n=a.data("datagrid").dc.view_kanban,d=[],s=JSON.parse(e.filter_data);r.groupParam.group_raw_param=r.columnsFieldConfig[r.groupParam.group_param.value_show],$.ajax({type:r.method,url:StrackPHP.getGridCollaborators,contentType:"application/json",dataType:"json",data:JSON.stringify({param:s,group:r.groupParam.group_param}),success:function(e){var t,i,a;i={},a=[],(t=e).collaborators.forEach(function(e){e.state=e.id,e.name=e.name,e.color="#"+e.color,e.icon=e.icon,e.issuesCount=0,a.push(e)}),n.boards({key:"avenue",name:r.groupParam.grid_param.module_code+"_name",data:a,filter_param:s,drag_card:t.drag_auth,message:{loading:"...",allComplete:"",stateDisabled:""},types:[{id:1,states:d}],user:{admin:!0,id:0},gridParam:r.groupParam,paramConfig:{formula_config:t.formula_config,status_config:t.status_config,time_config:t.time_config,timelog_config:t.timelog_config},plugins:{Sortable:Sortable},onUpdate:function(e,t){var a={};"built_in"===r.groupParam.group_raw_param.field_type?a[r.groupParam.group_raw_param.module]=[{field:r.groupParam.group_raw_param.module+"-"+r.groupParam.group_raw_param.field_value_map,field_type:r.groupParam.group_raw_param.field_type,value:e.avenue,variable_id:0}]:a[r.groupParam.group_raw_param.module_code]=[{field:r.groupParam.group_raw_param.module_code+"-"+r.groupParam.group_raw_param.field_value_map,field_type:r.groupParam.group_raw_param.field_type,value:e.avenue,variable_id:r.groupParam.group_raw_param.variable_id}],Strack.update_kanban_issue({from_item_id:"0",from_module_id:"0",mode:"modify",module_id:r.groupParam.grid_param.module_id,page:r.groupParam.grid_param.page,primary_id:e.id,project_id:r.groupParam.grid_param.project_id,type:"update_panel"},a)},onLoad:function(a,n){switch(i[a.state]=this.filter_param,r.groupParam.group_raw_param.field_type){case"custom":"horizontal_relationship"===r.groupParam.group_raw_param.custom_type?i[a.state].filter.request=Strack.reset_filter_condition_value(i[a.state].filter.request,{field:"id",field_type:"custom",variable_id:r.groupParam.group_raw_param.variable_id,value:[a.state],condition:"IN",editor:r.groupParam.group_raw_param.custom_type,module_code:r.groupParam.group_raw_param.fields,table:r.groupParam.group_raw_param.fields}):i[a.state].filter.request=Strack.reset_filter_condition_value(i[a.state].filter.request,{field:r.groupParam.group_raw_param.fields,field_type:"custom",variable_id:r.groupParam.group_raw_param.variable_id,value:[a.state],condition:"IN",editor:r.groupParam.group_raw_param.custom_type,module_code:r.groupParam.group_raw_param.module_code,table:r.groupParam.group_raw_param.module});break;case"built_in":i[a.state].filter.request=Strack.reset_filter_condition_value(i[a.state].filter.request,{field:"id",field_type:"built_in",variable_id:"0",value:[a.state],condition:"IN",editor:"combobox",module_code:r.groupParam.group_raw_param.module_code,table:"Status"})}$.ajax({type:r.method,url:r.url,dataType:"json",data:{filter_data:JSON.stringify(i[a.state]),page:a.page,rows:20}}).done(function(e){var t=e.rows.map(function(e){return e.avenue=e[r.groupParam.grid_param.module_code+"_"+r.groupParam.group_raw_param.field_value_map],e.author={path:"",name:e[r.groupParam.grid_param.module_code+"_created_by"]},e.state=a.state,e.title=e[r.groupParam.grid_param.module_code+"_name"],e.created=e[r.groupParam.grid_param.module_code+"_created"],e.state_data={name:e[r.groupParam.grid_param.module_code+"_status_name"],icon:e[r.groupParam.grid_param.module_code+"_status_icon"],color:"#"+e[r.groupParam.grid_param.module_code+"_status_color"]},e});o(t),n(t,e.total)})}})}})}else $.ajax({type:r.method,url:r.url,data:e,dataType:"json",success:function(e){o(e)},error:function(){t.apply(this,arguments)}})},loadFilter:function(e){return"number"==typeof e.length&&"function"==typeof e.splice?{total:e.length,rows:e}:e},editors:_745,finder:{getTr:function(e,t,a,n){a=a||"body",n=n||0;var i=$.data(e,"datagrid"),o=i.dc,r=i.options;if(0==n){var d=r.finder.getTr(e,t,a,1),s=r.finder.getTr(e,t,a,2);return d.add(s)}if("body"!=a)return"footer"==a?(1==n?o.footer1:o.footer2).find(">table>tbody>tr[datagrid-row-index="+t+"]"):"selected"==a?(1==n?o.body1:o.body2).find(">table>tbody>tr.datagrid-row-selected"):"highlight"==a?(1==n?o.body1:o.body2).find(">table>tbody>tr.datagrid-row-over"):"checked"==a?(1==n?o.body1:o.body2).find(">table>tbody>tr.datagrid-row-checked"):"editing"==a?(1==n?o.body1:o.body2).find(">table>tbody>tr.datagrid-row-editing"):"last"==a?(1==n?o.body1:o.body2).find(">table>tbody>tr[datagrid-row-index]:last"):"allbody"==a?(1==n?o.body1:o.body2).find(">table>tbody>tr[datagrid-row-index]"):"allfooter"==a?(1==n?o.footer1:o.footer2).find(">table>tbody>tr[datagrid-row-index]"):void 0;var l=$("#"+i.rowIdPrefix+"-"+n+"-"+t);return l.length||(l=(1==n?o.body1:o.body2).find(">table>tbody>tr[datagrid-row-index="+t+"]")),l},getRow:function(e,t){var a="object"==typeof t?t.attr("datagrid-row-index"):t;return $.data(e,"datagrid").data.rows[parseInt(a)]},getRows:function(e){return $(e).datagrid("getRows")}},view:_790,onBeforeLoad:function(e){},onLoadSuccess:function(){},onLoadError:function(){},onClickRow:function(e,t){},onDblClickRow:function(e,t){},onClickCell:function(e,t,a,n){},onDblClickCell:function(e,t,a){},onBeforeSortColumn:function(e,t){},onSortColumn:function(e,t){},onResizeColumn:function(e,t){},onBeforeSelect:function(e,t){},onSelect:function(e,t){},onBeforeUnselect:function(e,t){},onUnselect:function(e,t){},onSelectAll:function(e){},onUnselectAll:function(e){},onBeforeCheck:function(e,t){},onCheck:function(e,t){},onBeforeUncheck:function(e,t){},onUncheck:function(e,t){},onCheckAll:function(e){},onUncheckAll:function(e){},onBeforeEdit:function(e,t){},onBeginEdit:function(e,t){},onEndEdit:function(e,t,a){},onAfterEdit:function(e,t,a){},onCancelEdit:function(e,t){},onHeaderContextMenu:function(e,t){},onRowContextMenu:function(e,t,a){}})}(jQuery),function(x){function a(e,t){var a=x(this),n=a.datagrid("cell");if(!a.datagrid("input",n))return a.datagrid("gotoCell",t),!1}function t(e){var t=x(this),a=t.datagrid("cell");if(a)return t.datagrid("input",a)?void 0:(t.datagrid("editCell",{index:a.index,field:a.field,value:""}),!1)}function r(e,t){var a=x(e).datagrid("options");a.finder.getTr(e,t.index).find('td[field="'+t.field+'"]').removeClass("datagrid-row-on-edit"),a.onUnselectCell.call(e,t.index,t.field)}function g(e){x(e).datagrid("getPanel").find("td.datagrid-row-on-edit").removeClass("datagrid-row-on-edit")}function b(e,t){var a=x(e).datagrid("options");a.singleSelect&&g(e),a.finder.getTr(e,t.index).find('td[field="'+t.field+'"]').addClass("datagrid-row-on-edit"),a.onSelectCell.call(e,t.index,t.field)}function v(e,t){var a=x(e),n=a.datagrid("options"),i=a.datagrid("cell");if(i){var o=a.datagrid("input",i);if(o)if(t){if(!a.datagrid("validateRow",i.index))return a.datagrid("gotoCell",i),void o.focus();a.datagrid("endEdit",i.index),a.datagrid("gotoCell",i)}else a.datagrid("cancelEdit",i.index),a.datagrid("gotoCell",i);else"task_repeat"===n.columnsFieldConfig[i.field].editor&&a.datagrid("endEdit",i.index)}return 1}function n(e){switch(e){case 16:Strack.G.shiftOrCtrlKeyPress="shift";break;case 17:Strack.G.shiftOrCtrlKeyPress="ctrrl"}}x.extend(x.fn.datagrid.defaults,{clickToEdit:!1,bntToEdit:!0,dblclickToEdit:!1,navHandler:{37:function(e){var t=x(this).datagrid("options");return a.call(this,e,t.isRtl?"right":"left")},39:function(e){var t=x(this).datagrid("options");return a.call(this,e,t.isRtl?"left":"right")},38:function(e){return a.call(this,e,"up")},40:function(e){return a.call(this,e,"down")},13:function(e){return function(e){var t=x(this),a=t.datagrid("cell");if(!a)return;var n=t.datagrid("input",a);if(0<n.closest(".tagbox").length)return;if(n){if("textarea"==n[0].tagName.toLowerCase())return;v(this,!0)}else t.datagrid("editCell",a);return!1}.call(this,e)},27:function(e){return function(e){return v(this,!1),!1}.call(this,e)},8:function(e){return t.call(this,e)},46:function(e){return t.call(this,e)},keypress:function(e){if(!e.metaKey&&!e.ctrlKey){var t=x(this),a=t.datagrid("cell");if(a)if(!t.datagrid("input",a)){var n=x("<span></span>");n.html(String.fromCharCode(e.which));var i=n.text();if(n.remove(),i)return t.datagrid("editCell",{index:a.index,field:a.field,value:i}),!1}}}},onBeforeCellEdit:function(e,t){},onCellEdit:function(e,t,a){var n=x(this).datagrid("input",{index:e,field:t});n&&null!=a&&n.val(a)},onSelectCell:function(e,t){},onUnselectCell:function(e,t){}}),x.extend(x.fn.datagrid.methods,{editCell:function(e,t){return e.each(function(){!function(t,a){var n=x(t),i=n.datagrid("options");if(b=n.datagrid("input",a))return n.datagrid("gotoCell",a),b.focus();if(v(t,!0)&&0!=i.onBeforeCellEdit.call(t,a.index,a.field)){var e=n.datagrid("getColumnFields",!0).concat(n.datagrid("getColumnFields"));x.map(e,function(e){var t=n.datagrid("getColumnOption",e);t.editor1=t.editor,e!=a.field&&(t.editor=null)});var o=n.datagrid("getColumnOption",a.field);if(o.editor)switch(o.editor.type){case"horizontal_relationship":var r=i.finder.getRow(t,a.index),d=[];r[a.field]&&0<r[a.field].total&&r[a.field].rows.forEach(function(e){d.push(e.id)}),Strack.open_h_relationship_dialog({project_id:i.projectId,src_module_id:i.moduleId,variable_id:o.variable_id,dst_module_id:o.editor.relation_module_id,src_link_id:r.id,link_data:d,grid_id:t.id,from:"widget"});break;case"relation":r=i.finder.getRow(t,a.index),d=[];r[a.field]&&0<r[a.field].total&&r[a.field].rows.forEach(function(e){d.push(e.id)});var s=i.columnsFieldConfig[a.field];Strack.open_has_many_dialog({field:a.field,field_module:s.module,field_table:s.table,project_id:i.projectId,src_module_id:i.moduleId,variable_id:o.variable_id,dst_module_id:o.editor.relation_module_id,src_link_id:r.id,link_data:d,grid_id:t.id,from:"widget"});break;case"upload":r=i.finder.getRow(t,a.index);var l=i.finder.getTr(t,a.index).find("td[field="+a.field+"]"),c=i.columnsFieldConfig[a.field].field_type,u=i.columnsFieldConfig[a.field].variable_id;Strack.open_change_item_media({title:StrackLang.Modify_Thumb,link_id:r.id,module_id:i.moduleId,mode:"single",from:"grid",td_dom:l,index:a.index,field_type:c,variable_id:u},function(){}),n.datagrid("gotoCell",a);break;case"task_repeat":r=i.finder.getRow(t,a.index);var f=(l=i.finder.getTr(t,a.index).find("td[field="+a.field+"]")).offset(),h=l.height(),p=l.width(),g=l.find(".datagrid-cell");(s=Strack.deep_copy(i.columnsFieldConfig[a.field])).value=r[s.field_map],s.primary=r.id,g.addClass("datagrid-editable"),s.row_h=h,s.row_w=p,s.row_offset=f,g.closest("td").addClass("datagrid-row-on-edit"),g.closest(".datagrid-row").addClass("datagrid-row-editing"),Strack.dg_ask_repeat_editor_dom(g,r,s);break;default:var b;n.datagrid("beginEdit",a.index),(b=n.datagrid("input",a))?(n.datagrid("gotoCell",a),setTimeout(function(){b.unbind(".cellediting").bind("keydown.cellediting",function(e){if(13===e.keyCode)return i.navHandler[13].call(t,e)}),b.focus()},0),i.onCellEdit.call(t,a.index,a.field,a.value)):(n.datagrid("cancelEdit",a.index),n.datagrid("gotoCell",a))}x.map(e,function(e){var t=n.datagrid("getColumnOption",e);t.editor=t.editor1})}}(this,t)})},isEditing:function(e,t){var a=x.data(e[0],"datagrid").options.finder.getTr(e[0],t);return a.length&&a.hasClass("datagrid-row-editing")},gotoCell:function(e,t){return e.each(function(){!function(i,e){var o=x(i),r=o.datagrid("options"),t=o.datagrid("getPanel").focus(),a=o.datagrid("cell");if(a){var n=o.datagrid("input",a);if(n)return n.focus()}if("object"!=typeof e){var d=t.find("td.datagrid-row-on-edit");if(d){var s=o.datagrid("getColumnFields",!0).concat(o.datagrid("getColumnFields")),l=d.attr("field"),c=d.closest("tr.datagrid-row"),u=parseInt(c.attr("datagrid-row-index")),f=x.inArray(l,s);if("up"==e&&0<u)u--;else if("down"==e)r.finder.getRow(i,u+1)&&u++;else if("left"==e)for(var h=f-1;0<=h;){if(!o.datagrid("getColumnOption",s[h]).hidden){f=h;break}h--}else if("right"==e)for(h=f+1;h<=s.length-1;){if(!o.datagrid("getColumnOption",s[h]).hidden){f=h;break}h++}p({index:u,field:l=s[f]})}}else p(e);function p(e){g(i),b(i,e);var t=r.finder.getTr(i,e.index,"body",2).find('td[field="'+e.field+'"]');if(t.length){var a=o.data("datagrid").dc.body2,n=t.position().left;n<0?a._scrollLeft(a._scrollLeft()+n*(r.isRtl?-1:1)):n+t._outerWidth()>a.width()&&a._scrollLeft(a._scrollLeft()+(n+t._outerWidth()-a.width())*(r.isRtl?-1:1))}}}(this,t)})},enableCellEditing:function(e){return e.each(function(){var a,e,r,t;e=x(a=this),r=e.datagrid("options"),(t=e.datagrid("getPanel")).attr("tabindex",1).css("outline-style","none").unbind(".cellediting").bind("keydown.cellediting",function(e){var t=r.navHandler[e.keyCode];if(t)return t.call(a,e)}).bind("keypress.cellediting",function(e){return r.navHandler.keypress.call(a,e)}),t.panel("panel").unbind(".cellediting").bind("keydown.cellediting",function(e){n(e.keyCode),e.stopPropagation()}).bind("keydown.cellediting",function(e){n(e.keyCode),e.stopPropagation()}).bind("keyup.cellediting",function(e){Strack.G.shiftOrCtrlKeyPress=!1,Strack.G.shiftOrCtrlRowData={start:0,end:0},e.stopPropagation()}).bind("mouseover.cellediting",function(e){var t=x(e.target).closest("td[field]");t.length&&(t.addClass("datagrid-row-over"),t.closest("tr.datagrid-row").removeClass("datagrid-row-over"))}).bind("mouseout.cellediting",function(e){x(e.target).closest("td[field]").removeClass("datagrid-row-over")}),r.isRtl="rtl"==e.datagrid("getPanel").css("direction").toLowerCase(),r.oldOnClickCell=r.onClickCell,r.oldOnDblClickCell=r.onDblClickCell,r.onClickCell=function(e,t,a,n){if(!x(n).hasClass("widget-edit")){var i=x(n).closest("td"),o=i.find(".datagrid-cell").width();(x(n).hasClass("dg-hid-icon")||0<x(n).closest(".dg-hid-icon").length)&&r.bntToEdit||r.clickToEdit?(x(this).datagrid("editCell",{index:e,field:t}),i.css({width:o}).prepend('<div class="placeholder" style="width:'+o+'px"></div>')):v(this,!0)&&x(this).datagrid("gotoCell",{index:e,field:t}),r.oldOnClickCell.call(this,e,t,a)}},r.dblclickToEdit&&(r.onDblClickCell=function(e,t,a){x(this).datagrid("editCell",{index:e,field:t}),r.oldOnDblClickCell.call(this,e,t,a)}),r.OldOnBeforeSelect=r.onBeforeSelect,r.onBeforeSelect=function(){return!1},e.datagrid("clearSelections")})},disableCellEditing:function(e){return e.each(function(){var e,t,a;e=x(this),t=e.datagrid("getPanel"),(a=e.datagrid("options")).onClickCell=a.oldOnClickCell||a.onClickCell,a.onDblClickCell=a.oldOnDblClickCell||a.onDblClickCell,a.onBeforeSelect=a.OldOnBeforeSelect||a.onBeforeSelect,t.unbind(".cellediting").find("td.datagrid-row-on-edit").removeClass("datagrid-row-on-edit"),t.panel("panel").unbind(".cellediting")})},enableCellSelecting:function(e){return e.each(function(){var i,e,t,a,o,n;e=x(i=this),t=e.data("datagrid"),a=e.datagrid("getPanel"),o=t.options,n=t.dc,a.attr("tabindex",1).css("outline-style","none").unbind(".cellediting").bind("keydown.cellediting",function(e){var t=o.navHandler[e.keyCode];if(t)return t.call(i,e)}),n.body1.add(n.body2).unbind(".cellediting").bind("click.cellediting",function(e){var t=x(e.target).closest(".datagrid-row");if(t.length&&t.parent().length){var a=x(e.target).closest("td[field]",t);if(a.length){var n={index:parseInt(t.attr("datagrid-row-index")),field:a.attr("field")};o.singleSelect?b(i,n):!o.ctrlSelect||e.ctrlKey?(a.hasClass("datagrid-row-on-edit")?r:b)(i,n):(g(i),b(i,n))}}}).bind("mouseover.cellediting",function(e){var t=x(e.target).closest("td[field]");t.length&&(t.addClass("datagrid-row-over"),t.closest("tr.datagrid-row").removeClass("datagrid-row-over"))}).bind("mouseout.cellediting",function(e){x(e.target).closest("td[field]").removeClass("datagrid-row-over")}),o.isRtl="rtl"==e.datagrid("getPanel").css("direction").toLowerCase(),o.OldOnBeforeSelect=o.onBeforeSelect,o.onBeforeSelect=function(){return!1},e.datagrid("clearSelections")})},disableCellSelecting:function(e){return e.each(function(){!function(e){var t=x(e),a=t.data("datagrid"),n=t.datagrid("getPanel"),i=a.options;i.onBeforeSelect=i.OldOnBeforeSelect||i.onBeforeSelect,n.unbind(".cellediting").find("td.datagrid-row-on-edit").removeClass("datagrid-row-on-edit");var o=a.dc;o.body1.add(o.body2).unbind(".cellediting")}(this)})},input:function(e,t){if(!t)return null;var a=e.datagrid("getEditor",t);if(a){var n=x(a.target);return n.hasClass("textbox-f")&&(n=n.textbox("textbox")),n}return null},cell:function(e){return t=e[0],(a=x(t).datagrid("getPanel").find("td.datagrid-row-on-edit")).length?{index:parseInt(a.closest("tr.datagrid-row").attr("datagrid-row-index")),field:a.attr("field")}:null;var t,a},getSelectedCells:function(e){return t=e[0],a=[],x(t).datagrid("getPanel").find("td.datagrid-row-on-edit").each(function(){var e=x(this);a.push({index:parseInt(e.closest("tr.datagrid-row").attr("datagrid-row-index")),field:e.attr("field")})}),a;var t,a}}),x.extend(x.fn.datagrid.methods,{columnMoving:function(e){return e.each(function(){var e,v=this;function m(e,t,a){return 0<=x.inArray(a,e)?"frozen":0<=x.inArray(a,t)?"nofrozen":void 0}e=1<x(this).datagrid("getPanel").find(".datagrid-view2 .datagrid-header-row").length?x(this).datagrid("getPanel").find("div.datagrid-header td.drag-yes"):x(this).datagrid("getPanel").find("div.datagrid-header td[field]"),x(this).datagrid("getPanel").find("div.datagrid-header td[field=id]").droppable({disabled:!0}),e.draggable({revert:!0,cursor:"pointer",edge:5,proxy:function(e){var t=x('<div class="tree-node-proxy tree-dnd-no" style="position:absolute;width: 120px"/>').appendTo("body");return t.html(x(e).text()),t.after('<div class="grid-movetop"/><div class="grid-movebottom"/>'),t.hide(),t},onBeforeDrag:function(e){return!x(e.target).hasClass("datagrid-header-check")&&((!x(e.target).hasClass("no-move")||!x(e.target).closest(".no-move"))&&(e.data.startLeft=x(this).offset().left,void(e.data.startTop=x(this).offset().top)))},onStartDrag:function(){x(this).draggable("proxy").css({left:-1e4,top:-1e4})},onDrag:function(e){return x(this).draggable("proxy").show().css({left:e.pageX+15,top:e.pageY+15}),!1}}).droppable({accept:"td[field]",onDragOver:function(e,t){0<x(e.target).closest(".datagrid-view1").length&&x(t).hasClass("clohide")?x(this).droppable("disable"):(x(t).draggable("proxy").removeClass("tree-dnd-no").addClass("tree-dnd-yes"),x(".grid-movetop").css({top:x(this).offset().top-10,left:x(this).offset().left-5}),x(".grid-movebottom").css({top:x(this).offset().top+28,left:x(this).offset().left-5}),x(".grid-movetop,.grid-movebottom").show())},onDragLeave:function(e,t){x(t).draggable("proxy").removeClass("tree-dnd-yes").addClass("tree-dnd-no"),x(".grid-movetop,.grid-movebottom").hide()},onDrop:function(e,t){if(x(this).css("border-left",0),x(".grid-movetop,.grid-movebottom").remove(),!(0<x(e.target).closest(".datagrid-view1").length&&x(t).hasClass("clohide"))){var a=x(t).attr("field"),n=x(t).attr("row_index"),i=x(this).attr("field"),o=x(this).attr("row_index");setTimeout(function(){!function(e,t,r,o){var d=x(v).datagrid("options"),s=d.columns.length-1,l=d.columns[s],c=d.frozenColumns[s],u=[],a=[];c.forEach(function(e){0<=e.findex&&(a.push(e.field),u.push(e.findex))});var n=[];l.forEach(function(e){n.push(e.field)}),0<s&&d.columns[0].forEach(function(e){e.but&&n.push(e.but)});var f=m(a,n,e),h=m(a,n,t),i=function(a){var n={};if("nofrozen"==f){if(0<s){if(0==r){n.bottom=[];var i=-1,o=0;l.filter(function(e,t){return e.belong!=a||(-1==i&&(i=t),o++,n.bottom.push(e),!1)}),l.splice(i,o)}else for(var e=0;e<l.length;e++)l[e].field==a&&("frozen"==h&&(l[e].frozen="nofrozen"),n.bottom=l[e],l.splice(e,1));return n}for(e=0;e<l.length;e++)if(l[e].field==a)return"frozen"==h&&(l[e].frozen="nofrozen"),n.bottom=l[e],l.splice(e,1),n}else for(e=0;e<c.length;e++)if(c[e].field==a)return"nofrozen"==h&&(c[e].frozen="frozen"),n.bottom=c[e],c.splice(e,1),n;return null}(e);i&&function(t,a){var n=[],i=!0;if("nofrozen"==h)if(0<s)if(0==r)0==o?l.forEach(function(e){e.belong==t&&i&&(a.bottom.forEach(function(e){n.push(e)}),i=!1),n.push(e)}):l.forEach(function(e){e.field==t&&a.bottom.forEach(function(e){n.push(e)}),n.push(e)});else if(1==o)for(var e=0;e<l.length;e++)l[e].field==t&&n.push(a.bottom),n.push(l[e]);else l.forEach(function(e){e.belong==t&&i&&(n.push(a.bottom),i=!1),n.push(e)});else for(e=0;e<l.length;e++)l[e].field==t&&n.push(a.bottom),n.push(l[e]);else for(e=0;e<c.length;e++)c[e].field==t&&n.push(a.bottom),n.push(c[e]);!function(e){"nofrozen"==h?(g(e),p(d.frozenColumns[s])):(g(d.columns[s]),p(e))}(n)}(t,i);function p(e){var a=[],n=[];0<s?(e.forEach(function(e,t){"col"==n[n.length-1]?a[n.length-1].colspan=a[n.length-1].colspan+1:(a.push({bgc:"",but:"",class:"",colspan:1,fhcol:!0,fname:"",step:"no",title:""}),n.push("col"))}),d.frozenColumns[0]=a,d.frozenColumns[1]=e):d.frozenColumns[0]=e}function g(e){var a=[],n=0,i=[],o=[];if(0<s){var r={};d.columns[0].forEach(function(e){e.but&&(r[e.but]=e)}),e.forEach(function(e,t){n=b(u,n),e.findex=n,n++,a.push(e),e.belong?x.inArray(e.belong,o)<0&&(i.push(r[e.belong]),o.push(e.belong)):"col"==o[o.length-1]?i[o.length-1].colspan=i[o.length-1].colspan+1:(i.push({bgc:"",but:"",class:"",colspan:1,fhcol:!0,fname:"",step:"no",title:""}),o.push("col"))}),d.columns[0]=i,d.columns[1]=a}else e.forEach(function(e,t){n=b(u,n),e.findex=n,n++,a.push(e)}),d.columns[0]=a}function b(e,t){return x.inArray(t,e)<0?t:b(e,++t)}}(a,i,n,o),x(v).datagrid(),x(v).datagrid("columnMoving"),x(v).datagrid("highlightViewSave")},0)}}})})}})}(jQuery),function(b){var d;function s(e){var t=b(e);if(t.length){var a=b.data(e,"propertygrid").options;a.finder.getTr(e,null,"editing").each(function(){var e=parseInt(b(this).attr("datagrid-row-index"));t.datagrid("validateRow",e)?t.datagrid("endEdit",e):t.datagrid("cancelEdit",e)}),a.editIndex=void 0}}b(document).unbind(".propertygrid").bind("mousedown.propertygrid",function(e){b(e.target).closest("div.datagrid-view,div.combo-panel").length||(s(d),d=void 0)}),b.fn.propertygrid=function(a,e){if("string"!=typeof a)return a=a||{},this.each(function(){var e=b.data(this,"propertygrid");if(e)b.extend(e.options,a);else{var t=b.extend({},b.fn.propertygrid.defaults,b.fn.propertygrid.parseOptions(this),a);t.frozenColumns=b.extend(!0,[],t.frozenColumns),t.columns=b.extend(!0,[],t.columns),b.data(this,"propertygrid",{options:t})}!function(o){b.data(o,"propertygrid");var r=b.data(o,"propertygrid").options;b(o).datagrid(b.extend({},r,{cls:"propertygrid",view:r.showGroup?r.groupView:r.view,onBeforeEdit:function(e,t){if(0==r.onBeforeEdit.call(o,e,t))return!1;var a=b(this);t=a.datagrid("getRows")[e];a.datagrid("getColumnOption","value").editor=t.editor},onClickCell:function(e,t,a){if(d!=this&&(s(d),d=this),r.editIndex!=e){s(d),b(this).datagrid("beginEdit",e);var n=b(this).datagrid("getEditor",{index:e,field:t});if(n=n||b(this).datagrid("getEditor",{index:e,field:"value"})){var i=b(n.target);(i.data("textbox")?i.textbox("textbox"):i).focus(),r.editIndex=e}}r.onClickCell.call(o,e,t,a)},loadFilter:function(e){return s(this),r.loadFilter.call(this,e)}}))}(this)});var t=b.fn.propertygrid.methods[a];return t?t(this,e):this.datagrid(a,e)},b.fn.propertygrid.methods={options:function(e){return b.data(e[0],"propertygrid").options}},b.fn.propertygrid.parseOptions=function(e){return b.extend({},b.fn.datagrid.parseOptions(e),b.parser.parseOptions(e,[{showGroup:"boolean"}]))};var e=b.extend({},b.fn.datagrid.defaults.view,{render:function(e,t,a){for(var n=[],i=this.groups,o=0;o<i.length;o++)n.push(this.renderGroup.call(this,e,o,i[o],a));b(t).html(n.join(""))},renderGroup:function(e,t,a,n){var i=b.data(e,"datagrid"),o=i.options,r=b(e).datagrid("getColumnFields",n),d=[];d.push('<div class="datagrid-group" group-index='+t+">"),(n&&(o.rownumbers||o.frozenColumns.length)||!n&&!o.rownumbers&&!o.frozenColumns.length)&&(d.push('<span class="datagrid-group-expander">'),d.push('<span class="datagrid-row-expander datagrid-row-collapse">&nbsp;</span>'),d.push("</span>")),n||(d.push('<span class="datagrid-group-title">'),d.push(o.groupFormatter.call(e,a.value,a.rows)),d.push("</span>")),d.push("</div>"),d.push('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>');for(var s=a.startIndex,l=0;l<a.rows.length;l++){var c=o.rowStyler?o.rowStyler.call(e,s,a.rows[l]):"",u="",f="";"string"==typeof c?f=c:c&&(u=c.class||"",f=c.style||"");var h='class="datagrid-row '+(s%2&&o.striped?"datagrid-row-alt ":" ")+u+'"',p=f?'style="'+f+'"':"",g=i.rowIdPrefix+"-"+(n?1:2)+"-"+s;d.push('<tr id="'+g+'" datagrid-row-index="'+s+'" '+h+" "+p+">"),d.push(this.renderRow.call(this,e,r,n,s,a.rows[l])),d.push("</tr>"),s++}return d.push("</tbody></table>"),d.join("")},bindEvents:function(n){var e=b.data(n,"datagrid").dc,t=e.body1.add(e.body2),i=(b.data(t[0],"events")||b._data(t[0],"events")).click[0].handler;t.unbind("click").bind("click",function(e){var t=b(e.target).closest("span.datagrid-row-expander");if(t.length){var a=t.closest("div.datagrid-group").attr("group-index");t.hasClass("datagrid-row-collapse")?b(n).datagrid("collapseGroup",a):b(n).datagrid("expandGroup",a)}else i(e);e.stopPropagation()})},onBeforeRender:function(e,t){var a=b.data(e,"datagrid"),n=a.options;b("#datagrid-group-style").length||b("head").append('<style id="datagrid-group-style">.datagrid-group{height:'+n.groupHeight+"px;overflow:hidden;font-weight:bold;border-bottom:1px solid #d9d9d9;}.datagrid-group-title,.datagrid-group-expander{display:inline-block;vertical-align:bottom;height:100%;line-height:"+n.groupHeight+"px;padding:0 4px;}.datagrid-group-expander{width:"+n.expanderWidth+"px;text-align:center;padding:0}.datagrid-row-expander{margin:"+Math.floor((n.groupHeight-16)/2)+"px 0;display:inline-block;width:16px;height:16px;cursor:pointer}</style>");for(var i=[],o=0;o<t.length;o++){var r=t[o];(l=u(r[n.groupField]))?l.rows.push(r):(l={value:r[n.groupField],rows:[r]},i.push(l))}var d=0,s=[];for(o=0;o<i.length;o++){var l;(l=i[o]).startIndex=d,d+=l.rows.length,s=s.concat(l.rows)}a.data.rows=s,this.groups=i;var c=this;function u(e){for(var t=0;t<i.length;t++){var a=i[t];if(a.value==e)return a}return null}setTimeout(function(){c.bindEvents(e)},0)}});b.extend(b.fn.datagrid.methods,{groups:function(e){return e.datagrid("options").view.groups},expandGroup:function(e,a){return e.each(function(){var e=b.data(this,"datagrid").dc.view.find(null!=a?'div.datagrid-group[group-index="'+a+'"]':"div.datagrid-group"),t=e.find("span.datagrid-row-expander");t.hasClass("datagrid-row-expand")&&(t.removeClass("datagrid-row-expand").addClass("datagrid-row-collapse"),e.next("table").show()),b(this).datagrid("fixRowHeight")})},collapseGroup:function(e,a){return e.each(function(){var e=b.data(this,"datagrid").dc.view.find(null!=a?'div.datagrid-group[group-index="'+a+'"]':"div.datagrid-group"),t=e.find("span.datagrid-row-expander");t.hasClass("datagrid-row-collapse")&&(t.removeClass("datagrid-row-collapse").addClass("datagrid-row-expand"),e.next("table").hide()),b(this).datagrid("fixRowHeight")})}}),b.extend(e,{refreshGroupTitle:function(e,t){var a=b.data(e,"datagrid"),n=a.options,i=a.dc,o=this.groups[t];i.body2.children("div.datagrid-group[group-index="+t+"]").find("span.datagrid-group-title").html(n.groupFormatter.call(e,o.value,o.rows))},insertRow:function(i,e,t){var a,n=b.data(i,"datagrid"),o=n.options,r=n.dc,d=null;if(n.data.rows.length){for(var s=0;s<this.groups.length;s++)if(this.groups[s].value==t[o.groupField]){d=this.groups[s],a=s;break}d?(null!=e&&null!=e||(e=n.data.rows.length),e<d.startIndex?e=d.startIndex:e>d.startIndex+d.rows.length&&(e=d.startIndex+d.rows.length),b.fn.datagrid.defaults.view.insertRow.call(this,i,e,t),e>=d.startIndex+d.rows.length&&(l(e,!0),l(e,!1)),d.rows.splice(e-d.startIndex,0,t)):(d={value:t[o.groupField],rows:[t],startIndex:n.data.rows.length},a=this.groups.length,r.body1.append(this.renderGroup.call(this,i,a,d,!0)),r.body2.append(this.renderGroup.call(this,i,a,d,!1)),this.groups.push(d),n.data.rows.push(t)),this.refreshGroupTitle(i,a)}else b(i).datagrid("loadData",[t]);function l(e,t){var a=t?1:2,n=o.finder.getTr(i,e-1,"body",a);o.finder.getTr(i,e,"body",a).insertAfter(n)}},updateRow:function(e,t,a){var n=b.data(e,"datagrid").options;b.fn.datagrid.defaults.view.updateRow.call(this,e,t,a);var i=n.finder.getTr(e,t,"body",2).closest("table.datagrid-btable"),o=parseInt(i.prev().attr("group-index"));n.groupFormatter&&this.refreshGroupTitle(e,o)},deleteRow:function(e,t){var a=b.data(e,"datagrid"),n=a.options,i=a.dc,o=i.body1.add(i.body2),r=n.finder.getTr(e,t,"body",2).closest("table.datagrid-btable"),d=parseInt(r.prev().attr("group-index"));if(b.fn.datagrid.defaults.view.deleteRow.call(this,e,t),1<(l=this.groups[d]).rows.length)l.rows.splice(t-l.startIndex,1),this.refreshGroupTitle(e,d);else{o.children("div.datagrid-group[group-index="+d+"]").remove();for(var s=d+1;s<this.groups.length;s++)o.children("div.datagrid-group[group-index="+s+"]").attr("group-index",s-1);this.groups.splice(d,1)}for(t=0,s=0;s<this.groups.length;s++){var l;(l=this.groups[s]).startIndex=t,t+=l.rows.length}}}),b.fn.propertygrid.defaults=b.extend({},b.fn.datagrid.defaults,{groupHeight:21,expanderWidth:16,singleSelect:!0,remoteSort:!1,fitColumns:!0,loadMsg:"",frozenColumns:[[{field:"f",width:16,resizable:!1}]],columns:[[{field:"name",title:"Name",width:100,sortable:!0},{field:"value",title:"Value",width:100,resizable:!1}]],showGroup:!1,groupView:e,groupField:"group",groupFormatter:function(e,t){return e}})}(jQuery),function(y){function p(i,e){var o=y.data(i,"datagrid").options;if(!y.data(i,"datagrid").dc.body1.is(":empty")&&(!o.nowrap||o.autoRowHeight)&&null!=e)for(var t=r(i,e),a=0;a<t.length;a++)n(t[a][o.idField]);function n(e){var t=o.finder.getTr(i,e,"body",1),a=o.finder.getTr(i,e,"body",2);t.css("height",""),a.css("height","");var n=Math.max(t.height(),a.height());t.css("height",n),a.css("height",n)}y(i).datagrid("fixRowHeight",e)}function g(e){var t=y.data(e,"datagrid").dc;y.data(e,"treegrid").options.rownumbers&&t.body1.find("div.datagrid-cell-rownumber").each(function(e){y(this).html(e+1)})}function e(n){return function(e){y.fn.datagrid.defaults.rowEvents[n?"mouseover":"mouseout"](e);var t=y(e.target),a=n?"addClass":"removeClass";t.hasClass("tree-hit")&&(t.hasClass("tree-expanded")?t[a]("tree-expanded-hover"):t[a]("tree-collapsed-hover"))}}function c(e,t){var a=y.data(e,"treegrid").options,n=a.finder.getTr(e,t,"body",1),i=a.finder.getTr(e,t,"body",2),o=y(e).datagrid("getColumnFields",!0).length+(a.rownumbers?1:0),r=y(e).datagrid("getColumnFields",!1).length;function d(e,t){y('<tr class="treegrid-tr-tree"><td style="border:0px" colspan="'+t+'"><div></div></td></tr>').insertAfter(e)}d(n,o),d(i,r)}function u(e,t,a,n){var i=y.data(e,"treegrid"),o=i.options,r=i.dc;a=o.loadFilter.call(e,a,t);var d=b(e,t);if(d){var s=o.finder.getTr(e,t,"body",1),l=o.finder.getTr(e,t,"body",2),c=s.next("tr.treegrid-tr-tree").children("td").children("div"),u=l.next("tr.treegrid-tr-tree").children("td").children("div");n||(d.children=[])}else{c=r.body1,u=r.body2;n||(i.data=[])}if(n||(c.empty(),u.empty()),o.view.onBeforeRender&&o.view.onBeforeRender.call(o.view,e,t,a),o.view.render.call(o.view,e,c,!0),o.view.render.call(o.view,e,u,!1),o.showFooter&&(o.view.renderFooter.call(o.view,e,r.footer1,!0),o.view.renderFooter.call(o.view,e,r.footer2,!1)),o.view.onAfterRender&&o.view.onAfterRender.call(o.view,e),!t&&o.pagination){var f=y.data(e,"treegrid").total,h=y(e).datagrid("getPager");h.pagination("options").total!=f&&h.pagination({total:f})}p(e),g(e),y(e).treegrid("showLines"),y(e).treegrid("setSelectionState"),y(e).treegrid("autoSizeColumn"),o.onLoadSuccess.call(e,d,a)}function f(t,a,e,n,i){var o=y.data(t,"treegrid").options,r=y(t).datagrid("getPanel").find("div.datagrid-body");e&&(o.queryParams=e);var d=y.extend({},o.queryParams);o.pagination&&y.extend(d,{page:o.pageNumber,rows:o.pageSize}),o.sortName&&y.extend(d,{sort:o.sortName,order:o.sortOrder});var s=b(t,a);if(0!=o.onBeforeLoad.call(t,s,d)){var l=r.find('tr[node-id="'+a+'"] span.tree-folder');l.addClass("tree-loading"),y(t).treegrid("loading"),0==o.loader.call(t,d,function(e){l.removeClass("tree-loading"),y(t).treegrid("loaded"),u(t,a,e,n),i&&i()},function(){l.removeClass("tree-loading"),y(t).treegrid("loaded"),o.onLoadError.apply(t,arguments),i&&i()})&&(l.removeClass("tree-loading"),y(t).treegrid("loaded"))}}function n(e){return y.data(e,"treegrid").data}function h(e,t){var a=b(e,t);return a._parentId?b(e,a._parentId):null}function r(o,e){var r=y.data(o,"treegrid").options,d=(y(o).datagrid("getPanel").find("div.datagrid-view2 div.datagrid-body"),[]);if(e)s(e);else for(var t=n(o),a=0;a<t.length;a++)d.push(t[a]),s(t[a][r.idField]);function s(e){var t=b(o,e);if(t&&t.children)for(var a=0,n=t.children.length;a<n;a++){var i=t.children[a];d.push(i),s(i[r.idField])}}return d}function b(e,t){for(var a=y.data(e,"treegrid").options,n=[y.data(e,"treegrid").data];n.length;)for(var i=n.shift(),o=0;o<i.length;o++){var r=i[o];if(r[a.idField]==t)return r;r.children&&n.push(r.children)}return null}function o(e,t){var a=y.data(e,"treegrid").options,n=b(e,t),i=a.finder.getTr(e,t),o=i.find("span.tree-hit");if(0!=o.length&&!o.hasClass("tree-collapsed")&&0!=a.onBeforeCollapse.call(e,n)){o.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),o.next().removeClass("tree-folder-open"),n.state="closed";var r=(i=i.next("tr.treegrid-tr-tree")).children("td").children("div");a.animate?r.slideUp("normal",function(){y(e).treegrid("autoSizeColumn"),p(e,t),a.onCollapse.call(e,n)}):(r.hide(),y(e).treegrid("autoSizeColumn"),p(e,t),a.onCollapse.call(e,n))}}function d(t,a){var n=y.data(t,"treegrid").options,e=n.finder.getTr(t,a),i=e.find("span.tree-hit"),o=b(t,a);if(0!=i.length&&(!i.hasClass("tree-expanded")&&0!=n.onBeforeExpand.call(t,o)))if(i.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),n.showFolderIcon&&i.next().addClass("tree-folder-open"),(d=e.next("tr.treegrid-tr-tree")).length){l(r=d.children("td").children("div"))}else{c(t,o[n.idField]);var r,d=e.next("tr.treegrid-tr-tree");(r=d.children("td").children("div")).hide();var s=y.extend({},n.queryParams||{});s.id=o[n.idField],f(t,o[n.idField],s,!0,function(){r.is(":empty")?d.remove():l(r)})}function l(e){o.state="open",n.animate?e.slideDown("normal",function(){y(t).treegrid("autoSizeColumn"),p(t,a),n.onExpand.call(t,o)}):(e.show(),y(t).treegrid("autoSizeColumn"),p(t,a),n.onExpand.call(t,o))}}function i(e,t){(y.data(e,"treegrid").options.finder.getTr(e,t).find("span.tree-hit").hasClass("tree-expanded")?o:d)(e,t)}function v(e,t){var a=y.data(e,"treegrid").options;if(t.parent){var n=a.finder.getTr(e,t.parent);0==n.next("tr.treegrid-tr-tree").length&&c(e,t.parent);var i=n.children('td[field="'+a.treeField+'"]').children("div.datagrid-cell").children("span.tree-icon");if(i.hasClass("tree-file")){i.removeClass("tree-file").addClass("tree-folder tree-folder-open");var o=y('<span class="tree-hit tree-expanded"></span>').insertBefore(i);o.prev().length&&o.prev().remove()}}u(e,t.parent,t.data,!0)}function t(d){var s=y(d),l=s.treegrid("options");if(l.lines){s.treegrid("getPanel").addClass("tree-lines"),s.treegrid("getPanel").find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),s.treegrid("getPanel").find("div.datagrid-cell").removeClass("tree-node-last tree-root-first tree-root-one");var e=s.treegrid("getRoots");1<e.length?n(e[0]).addClass("tree-root-first"):1==e.length&&n(e[0]).addClass("tree-root-one"),function a(e){y.map(e,function(e){if(e.children&&e.children.length)a(e.children);else{var t=n(e);t.find(".tree-icon").prev().addClass("tree-join")}});if(e.length){var t=n(e[e.length-1]);t.addClass("tree-node-last"),t.find(".tree-join").removeClass("tree-join").addClass("tree-joinbottom")}}(e),function t(e){y.map(e,function(e){e.children&&e.children.length&&t(e.children)});for(var a=0;a<e.length-1;a++){var n=e[a],i=s.treegrid("getLevel",n[l.idField]),o=l.finder.getTr(d,n[l.idField]),r=o.next().find('tr.datagrid-row td[field="'+l.treeField+'"] div.datagrid-cell');r.find("span:eq("+(i-1)+")").addClass("tree-line")}}(e)}else s.treegrid("getPanel").removeClass("tree-lines");function n(e){return l.finder.getTr(d,e[l.idField]).find('td[field="'+l.treeField+'"] div.datagrid-cell')}}y.fn.treegrid=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=y.data(this,"treegrid");e?y.extend(e.options,t):e=y.data(this,"treegrid",{options:y.extend({},y.fn.treegrid.defaults,y.fn.treegrid.parseOptions(this),t),data:[]}),function(n){var e=y.data(n,"treegrid"),i=e.options;y(n).datagrid(y.extend({},i,{url:null,data:null,loader:function(){return!1},onBeforeLoad:function(){return!1},onLoadSuccess:function(){},onResizeColumn:function(e,t){p(n),i.onResizeColumn.call(n,e,t)},onBeforeSortColumn:function(e,t){if(0==i.onBeforeSortColumn.call(n,e,t))return!1},onSortColumn:function(e,t){if(i.sortName=e,i.sortOrder=t,i.remoteSort)f(n);else{var a=y(n).treegrid("getData");u(n,0,a)}i.onSortColumn.call(n,e,t)},onClickCell:function(e,t){i.onClickCell.call(n,t,b(n,e))},onDblClickCell:function(e,t){i.onDblClickCell.call(n,t,b(n,e))},onRowContextMenu:function(e,t){i.onContextMenu.call(n,e,b(n,t))}}));var t=y.data(n,"datagrid").options;if(i.columns=t.columns,i.frozenColumns=t.frozenColumns,e.dc=y.data(n,"datagrid").dc,i.pagination){var a=y(n).datagrid("getPager");a.pagination({pageNumber:i.pageNumber,pageSize:i.pageSize,pageList:i.pageList,onSelectPage:function(e,t){i.pageNumber=e,i.pageSize=t,f(n)}}),i.pageSize=a.pagination("options").pageSize}}(this),e.options.data&&y(this).treegrid("loadData",e.options.data),f(this)});var a=y.fn.treegrid.methods[t];return a?a(this,e):this.datagrid(t,e)},y.fn.treegrid.methods={options:function(e){return y.data(e[0],"treegrid").options},resize:function(e,t){return e.each(function(){y(this).datagrid("resize",t)})},fixRowHeight:function(e,t){return e.each(function(){p(this,t)})},loadData:function(e,t){return e.each(function(){u(this,t.parent,t)})},load:function(e,t){return e.each(function(){y(this).treegrid("options").pageNumber=1,y(this).treegrid("getPager").pagination({pageNumber:1}),y(this).treegrid("reload",t)})},reload:function(e,i){return e.each(function(){var e=y(this).treegrid("options"),t={};if("object"==typeof i?t=i:(t=y.extend({},e.queryParams)).id=i,t.id){var a=y(this).treegrid("find",t.id);a.children&&a.children.splice(0,a.children.length),e.queryParams=t;var n=e.finder.getTr(this,t.id);n.next("tr.treegrid-tr-tree").remove(),n.find("span.tree-hit").removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),d(this,t.id)}else f(this,null,t)})},reloadFooter:function(e,a){return e.each(function(){var e=y.data(this,"treegrid").options,t=y.data(this,"datagrid").dc;a&&(y.data(this,"treegrid").footer=a),e.showFooter&&(e.view.renderFooter.call(e.view,this,t.footer1,!0),e.view.renderFooter.call(e.view,this,t.footer2,!1),e.view.onAfterRender&&e.view.onAfterRender.call(e.view,this),y(this).treegrid("fixRowHeight"))})},getData:function(e){return y.data(e[0],"treegrid").data},getFooterRows:function(e){return y.data(e[0],"treegrid").footer},getRoot:function(e){return t=e[0],(a=n(t)).length?a[0]:null;var t,a},getRoots:function(e){return n(e[0])},getParent:function(e,t){return h(e[0],t)},getChildren:function(e,t){return r(e[0],t)},getLevel:function(e,t){return a=e[0],n=t,(i=y.data(a,"treegrid").options).finder.getTr(a,n).children('td[field="'+i.treeField+'"]').find("span.tree-indent,span.tree-hit").length;var a,n,i},find:function(e,t){return b(e[0],t)},isLeaf:function(e,t){return 0==y.data(e[0],"treegrid").options.finder.getTr(e[0],t).find("span.tree-hit").length},select:function(e,t){return e.each(function(){y(this).datagrid("selectRow",t)})},unselect:function(e,t){return e.each(function(){y(this).datagrid("unselectRow",t)})},collapse:function(e,t){return e.each(function(){o(this,t)})},expand:function(e,t){return e.each(function(){d(this,t)})},toggle:function(e,t){return e.each(function(){i(this,t)})},collapseAll:function(e,t){return e.each(function(){!function(e,t){var a=y.data(e,"treegrid").options,n=r(e,t);t&&n.unshift(b(e,t));for(var i=0;i<n.length;i++)o(e,n[i][a.idField])}(this,t)})},expandAll:function(e,t){return e.each(function(){!function(e,t){var a=y.data(e,"treegrid").options,n=r(e,t);t&&n.unshift(b(e,t));for(var i=0;i<n.length;i++)d(e,n[i][a.idField])}(this,t)})},expandTo:function(e,t){return e.each(function(){!function(e,t){for(var a=y.data(e,"treegrid").options,n=[],i=h(e,t);i;){var o=i[a.idField];n.unshift(o),i=h(e,o)}for(var r=0;r<n.length;r++)d(e,n[r])}(this,t)})},append:function(e,t){return e.each(function(){v(this,t)})},insert:function(e,t){return e.each(function(){!function(r,d){var s=d.before||d.after,l=y.data(r,"treegrid").options,e=h(r,s);v(r,{parent:e?e[l.idField]:null,data:[d.data]});for(var t=e?e.children:y(r).treegrid("getRoots"),a=0;a<t.length;a++)if(t[a][l.idField]==s){var n=t[t.length-1];t.splice(d.before?a:a+1,0,n),t.splice(t.length-1,1);break}function i(e){var t=e?1:2,a=l.finder.getTr(r,d.data[l.idField],"body",t),n=a.closest("table.datagrid-btable");a=a.parent().children();var i=l.finder.getTr(r,s,"body",t);if(d.before)a.insertBefore(i);else{var o=i.next("tr.treegrid-tr-tree");a.insertAfter(o.length?o:i)}n.remove()}i(!0),i(!1),g(r),y(r).treegrid("showLines")}(this,t)})},remove:function(e,n){return e.each(function(){var e,t,a;e=this,t=n,a=y.data(e,"treegrid"),y(e).datagrid("deleteRow",t),g(e),--a.total,y(e).datagrid("getPager").pagination("refresh",{total:a.total}),y(e).treegrid("showLines")})},pop:function(e,t){var a=e.treegrid("find",t);return e.treegrid("remove",t),a},refresh:function(e,t){return e.each(function(){var e=y.data(this,"treegrid").options;e.view.refreshRow.call(e.view,this,t)})},update:function(e,t){return e.each(function(){var e=y.data(this,"treegrid").options;e.view.updateRow.call(e.view,this,t.id,t.row)})},beginEdit:function(e,t){return e.each(function(){y(this).datagrid("beginEdit",t),y(this).treegrid("fixRowHeight",t)})},endEdit:function(e,t){return e.each(function(){y(this).datagrid("endEdit",t)})},cancelEdit:function(e,t){return e.each(function(){y(this).datagrid("cancelEdit",t)})},showLines:function(e){return e.each(function(){t(this)})}},y.fn.treegrid.parseOptions=function(e){return y.extend({},y.fn.datagrid.parseOptions(e),y.parser.parseOptions(e,["treeField",{animate:"boolean"}]))};var a=y.extend({},y.fn.datagrid.defaults.view,{render:function(v,e,t){var m=y.data(v,"treegrid").options,x=y(v).datagrid("getColumnFields",t),_=y.data(v,"datagrid").rowIdPrefix;if(!t||m.rownumbers||m.frozenColumns&&m.frozenColumns.length){var w=this;if(this.treeNodes&&this.treeNodes.length){var a=function e(t,a,n){var i=y(v).treegrid("getParent",n[0][m.idField]);var o=(i?i.children.length:y(v).treegrid("getRoots").length)-n.length;var r=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'];for(var d=0;d<n.length;d++){var s=n[d];"open"!=s.state&&"closed"!=s.state&&(s.state="open");var l=m.rowStyler?m.rowStyler.call(v,s):"",c="",u="";"string"==typeof l?u=l:l&&(c=l.class||"",u=l.style||"");var f='class="datagrid-row '+(o++%2&&m.striped?"datagrid-row-alt ":" ")+c+'"',h=u?'style="'+u+'"':"",p=_+"-"+(t?1:2)+"-"+s[m.idField];if(r.push('<tr id="'+p+'" node-id="'+s[m.idField]+'" '+f+" "+h+">"),(r=r.concat(w.renderRow.call(w,v,x,t,a,s))).push("</tr>"),s.children&&s.children.length){var g=e(t,a+1,s.children),b="closed"==s.state?"none":"block";r.push('<tr class="treegrid-tr-tree"><td style="border:0px" colspan='+(x.length+(m.rownumbers?1:0))+'><div style="display:'+b+'">'),(r=r.concat(g)).push("</div></td></tr>")}}r.push("</tbody></table>");return r}(t,this.treeLevel,this.treeNodes);y(e).append(a.join(""))}}},renderFooter:function(e,t,a){for(var n=y.data(e,"treegrid").options,i=y.data(e,"treegrid").footer||[],o=y(e).datagrid("getColumnFields",a),r=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],d=0;d<i.length;d++){var s=i[d];s[n.idField]=s[n.idField]||"foot-row-id"+d,r.push('<tr class="datagrid-row" node-id="'+s[n.idField]+'">'),r.push(this.renderRow.call(this,e,o,a,0,s)),r.push("</tr>")}r.push("</tbody></table>"),y(t).html(r.join(""))},renderRow:function(e,t,a,n,i){var o=y.data(e,"treegrid").options,r=[];a&&o.rownumbers&&r.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">0</div></td>');for(var d=0;d<t.length;d++){var s=t[d],l=y(e).datagrid("getColumnOption",s);if(l){var c=l.styler&&l.styler(i[s],i)||"",u="",f="";"string"==typeof c?f=c:r&&(u=c.class||"",f=c.style||"");var h=u?'class="'+u+'"':"",p=l.hidden?'style="display:none;'+f+'"':f?'style="'+f+'"':"";r.push('<td field="'+s+'" '+h+" "+p+">");p="";if(l.checkbox||(l.align&&(p+="text-align:"+l.align+";"),o.nowrap?o.autoRowHeight&&(p+="height:auto;"):p+="white-space:normal;height:auto;"),r.push('<div style="'+p+'" '),l.checkbox?r.push('class="datagrid-cell-check '):r.push('class="datagrid-cell '+l.cellClass),r.push('">'),l.checkbox)i.checked?r.push('<input type="checkbox" checked="checked"'):r.push('<input type="checkbox"'),r.push(' name="'+s+'" value="'+(null!=i[s]?i[s]:"")+'">');else{var g=null;if(g=l.formatter?l.formatter(i[s],i):i[s],s==o.treeField){for(var b=0;b<n;b++)r.push('<span class="tree-indent"></span>');"closed"==i.state?(r.push('<span class="tree-hit tree-collapsed"></span>'),o.showFolderIcon&&r.push('<span class="tree-icon tree-folder '+(i.iconCls?i.iconCls:"")+'"></span>')):i.children&&i.children.length?(r.push('<span class="tree-hit tree-expanded"></span>'),o.showFolderIcon&&r.push('<span class="tree-icon tree-folder tree-folder-open '+(i.iconCls?i.iconCls:"")+'"></span>')):(r.push('<span class="tree-indent"></span>'),o.showFolderIcon&&r.push('<span class="tree-icon tree-file '+(i.iconCls?i.iconCls:"")+'"></span>')),r.push('<span class="tree-title">'+g+"</span>")}else r.push(g)}r.push("</div>"),r.push("</td>")}}return r.join("")},refreshRow:function(e,t){this.updateRow.call(this,e,t,{})},updateRow:function(o,r,e){var d=y.data(o,"treegrid").options,s=y(o).treegrid("find",r);y.extend(s,e);var l=y(o).treegrid("getLevel",r)-1,c=d.rowStyler?d.rowStyler.call(o,s):"",u=y.data(o,"datagrid").rowIdPrefix,f=s[d.idField];function t(e){var t=y(o).treegrid("getColumnFields",e),a=d.finder.getTr(o,r,"body",e?1:2),n=a.find("div.datagrid-cell-rownumber").html(),i=a.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");a.html(this.renderRow(o,t,e,l,s)),a.attr("style",c||""),a.find("div.datagrid-cell-rownumber").html(n),i&&a.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0),f!=r&&(a.attr("id",u+"-"+(e?1:2)+"-"+f),a.attr("node-id",f))}t.call(this,!0),t.call(this,!1),y(o).treegrid("fixRowHeight",r)},deleteRow:function(i,e){var o=y.data(i,"treegrid").options,t=o.finder.getTr(i,e);t.next("tr.treegrid-tr-tree").remove(),t.remove();var a=function(e){var t,a=y(i).treegrid("getParent",e);t=a?a.children:y(i).treegrid("getData");for(var n=0;n<t.length;n++)if(t[n][o.idField]==e){t.splice(n,1);break}return a}(e);if(a&&0==a.children.length){(t=o.finder.getTr(i,a[o.idField])).next("tr.treegrid-tr-tree").remove();var n=t.children('td[field="'+o.treeField+'"]').children("div.datagrid-cell");n.find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),n.find(".tree-hit").remove(),y('<span class="tree-indent"></span>').prependTo(n)}},onBeforeRender:function(e,t,a){if(y.isArray(t)&&(a={total:t.length,rows:t},t=null),!a)return!1;var n=y.data(e,"treegrid"),o=n.options;if(null==a.length)a.footer&&(n.footer=a.footer),a.total&&(n.total=a.total),a=this.transfer(e,t,a.rows);else{!function e(t,a){for(var n=0;n<t.length;n++){var i=t[n];i._parentId=a,i.children&&i.children.length&&e(i.children,i[o.idField])}}(a,t)}var i=b(e,t);i?i.children?i.children=i.children.concat(a):i.children=a:n.data=n.data.concat(a),this.sort(e,a),this.treeNodes=a,this.treeLevel=y(e).treegrid("getLevel",t)},onAfterRender:function(e){y.fn.datagrid.defaults.view.onAfterRender.call(this,e),y.data(e,"treegrid").options.onAfterRender(e)},sort:function(s,e){var t=y.data(s,"treegrid").options;if(!t.remoteSort&&t.sortName){var l=t.sortName.split(","),c=t.sortOrder.split(",");!function e(t){t.sort(function(e,t){for(var a=0,n=0;n<l.length;n++){var i=l[n],o=c[n],r=y(s).treegrid("getColumnOption",i),d=r.sorter||function(e,t){return e==t?0:t<e?1:-1};if(0!=(a=d(e[i],t[i])*("asc"==o?1:-1)))return a}return a});for(var a=0;a<t.length;a++){var n=t[a].children;n&&n.length&&e(n)}}(e)}},transfer:function(e,t,a){for(var n=y.data(e,"treegrid").options,i=[],o=0;o<a.length;o++)i.push(a[o]);var r=[];for(o=0;o<i.length;o++){var d=i[o];t?d._parentId==t&&(r.push(d),i.splice(o,1),o--):d._parentId||(r.push(d),i.splice(o,1),o--)}var s=[];for(o=0;o<r.length;o++)s.push(r[o]);for(;s.length;){var l=s.shift();for(o=0;o<i.length;o++){(d=i[o])._parentId==l[n.idField]&&(l.children?l.children.push(d):l.children=[d],s.push(d),i.splice(o,1),o--)}}return r}});y.fn.treegrid.defaults=y.extend({},y.fn.datagrid.defaults,{treeField:null,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,lines:!1,animate:!1,singleSelect:!0,view:a,rowEvents:y.extend({},y.fn.datagrid.defaults.rowEvents,{mouseover:e(!0),mouseout:e(!1),click:function(e){var t=y(e.target);if(t.hasClass("tree-hit")){var a=t.closest("tr.datagrid-row");i(a.closest("div.datagrid-view").children(".datagrid-f")[0],a.attr("node-id"))}else y.fn.datagrid.defaults.rowEvents.click(e)}}),loader:function(e,t,a){var n=y(this).treegrid("options");if(!n.url)return!1;y.ajax({type:n.method,url:n.url,data:e,dataType:"json",success:function(e){t(e)},error:function(){a.apply(this,arguments)}})},loadFilter:function(e,t){return e},finder:{getTr:function(e,t,a,n){a=a||"body",n=n||0;var i=y.data(e,"datagrid").dc;if(0==n){var o=y.data(e,"treegrid").options,r=o.finder.getTr(e,t,a,1),d=o.finder.getTr(e,t,a,2);return r.add(d)}if("body"!=a)return"footer"==a?(1==n?i.footer1:i.footer2).find('tr[node-id="'+t+'"]'):"selected"==a?(1==n?i.body1:i.body2).find("tr.datagrid-row-selected"):"highlight"==a?(1==n?i.body1:i.body2).find("tr.datagrid-row-over"):"checked"==a?(1==n?i.body1:i.body2).find("tr.datagrid-row-checked"):"last"==a?(1==n?i.body1:i.body2).find("tr:last[node-id]"):"allbody"==a?(1==n?i.body1:i.body2).find("tr[node-id]"):"allfooter"==a?(1==n?i.footer1:i.footer2).find("tr[node-id]"):void 0;var s=y("#"+y.data(e,"datagrid").rowIdPrefix+"-"+n+"-"+t);return s.length||(s=(1==n?i.body1:i.body2).find('tr[node-id="'+t+'"]')),s},getRow:function(e,t){var a="object"==typeof t?t.attr("node-id"):t;return y(e).treegrid("find",a)},getRows:function(e){return y(e).treegrid("getChildren")}},onBeforeLoad:function(e,t){},onLoadSuccess:function(e,t){},onLoadError:function(){},onBeforeCollapse:function(e){},onCollapse:function(e){},onBeforeExpand:function(e){},onExpand:function(e){},onClickRow:function(e){},onDblClickRow:function(e){},onClickCell:function(e,t){},onDblClickCell:function(e,t){},onContextMenu:function(e,t){},onBeforeEdit:function(e){},onAfterEdit:function(e,t){},onCancelEdit:function(e){},onAfterRender:function(e){}})}(jQuery),function(l){var e=l.extend({},l.fn.datagrid.defaults.view,{render:function(e,t,a){var n=l.data(e,"datagrid");if(n.options.groupField){var i=this.groupRows(e,n.data.rows);this.groups=i.groups,n.data.rows=i.rows;for(var o=[],r=0;r<i.groups.length;r++)o.push(this.renderGroup.call(this,e,r,i.groups[r],a));l(t).html(o.join(""))}else l(t).html(this.renderTable(e,0,n.data.rows,a))},renderGroup:function(e,t,a,n){var i=l.data(e,"datagrid").options,o=(l(e).datagrid("getColumnFields",n),[]);return o.push('<div class="datagrid-group" group-index='+t+">"),n||(o.push('<span class="datagrid-group-title">'),o.push(i.groupFormatter.call(e,a.value,a.rows)),o.push("</span>")),o.push("</div>"),o.push(this.renderTable(e,a.startIndex,a.rows,n)),o.join("")},groupRows:function(e,t){for(var a=l.data(e,"datagrid").options,n=[],i=0;i<t.length;i++){var o=t[i];(d=s(o[a.groupField]))?d.rows.push(o):(d={value:o[a.groupField],rows:[o]},n.push(d))}var r=0;for(t=[],i=0;i<n.length;i++){var d;(d=n[i]).startIndex=r,r+=d.rows.length,t=t.concat(d.rows)}return{groups:n,rows:t};function s(e){for(var t=0;t<n.length;t++){var a=n[t];if(a.value==e)return a}return null}}});l.fn.datalist=function(o,e){if("string"!=typeof o)return o=o||{},this.each(function(){var e,n,t=l.data(this,"datalist");if(t)l.extend(t.options,o);else{var a=l.extend({},l.fn.datalist.defaults,l.fn.datalist.parseOptions(this),o);a.columns=l.extend(!0,[],a.columns),t=l.data(this,"datalist",{options:a})}if(e=this,n=l.data(e,"datalist").options,l(e).datagrid(l.extend({},n,{cls:"datalist"+(n.lines?" datalist-lines":""),frozenColumns:n.frozenColumns&&n.frozenColumns.length?n.frozenColumns:n.checkbox?[[{field:"_ck",checkbox:!0}]]:void 0,columns:n.columns&&n.columns.length?n.columns:[[{field:n.textField,width:"100%",formatter:function(e,t,a){return n.textFormatter?n.textFormatter(e,t,a):e}}]]})),!t.options.data){var i=l.fn.datalist.parseData(this);i.total&&l(this).datalist("loadData",i)}});var t=l.fn.datalist.methods[o];return t?t(this,e):this.datagrid(o,e)},l.fn.datalist.methods={options:function(e){return l.data(e[0],"datalist").options}},l.fn.datalist.parseOptions=function(e){return l.extend({},l.fn.datagrid.parseOptions(e),l.parser.parseOptions(e,["valueField","textField","groupField",{checkbox:"boolean",lines:"boolean"}]))},l.fn.datalist.parseData=function(e){var n=l.data(e,"datalist").options,i={total:0,rows:[]};return l(e).children().each(function(){var e=l.parser.parseOptions(this,["value","group"]),t={},a=l(this).html();t[n.valueField]=null!=e.value?e.value:a,t[n.textField]=a,n.groupField&&(t[n.groupField]=e.group),i.total++,i.rows.push(t)}),i},l.fn.datalist.defaults=l.extend({},l.fn.datagrid.defaults,{fitColumns:!0,singleSelect:!0,showHeader:!1,checkbox:!1,lines:!1,valueField:"value",textField:"text",groupField:"",view:e,textFormatter:function(e,t){return e},groupFormatter:function(e,t){return e}})}(jQuery),function(l){function r(e){var t=l.data(e,"combo").panel;if(t.is(":visible"))d(e);else{var a=l(e).closest("div.combo-panel");l("div.combo-panel:visible").not(t).not(a).panel("close"),l(e).combo("showPanel")}l(e).combo("textbox").focus()}function o(e){l(e).find(".combo-f").each(function(){var e=l(this).combo("panel");e.is(":visible")&&e.panel("close")})}function e(t){var a=t.data.target,n=l(a),i=n.data("combo"),o=n.combo("options");switch(t.keyCode){case 38:o.keyHandler.up.call(a,t);break;case 40:o.keyHandler.down.call(a,t);break;case 37:o.keyHandler.left.call(a,t);break;case 39:o.keyHandler.right.call(a,t);break;case 13:return t.preventDefault(),o.keyHandler.enter.call(a,t),!1;case 9:case 27:d(a);break;default:o.editable&&(i.timer&&clearInterval(i.timer),i.timer=setInterval(function(){var e=n.combo("getText");i.previousText!=e&&(i.previousText=e,n.combo("showPanel"),o.keyHandler.query.call(a,e,t),n.combo("validate"))},o.delay))}}function t(e){var t=l.data(e,"combo"),a=t.combo,n=t.panel,i=l(e).combo("options"),o=n.panel("options");o.comboTarget=e,o.closed&&(n.panel("panel").show().css({zIndex:l.fn.menu?l.fn.menu.defaults.zIndex++:l.fn.window?l.fn.window.defaults.zIndex++:99,left:-999999}),n.panel("resize",{width:i.panelWidth?i.panelWidth:a._outerWidth(),height:i.panel_height}),n.panel("panel").hide(),n.panel("open")),function(){n.is(":visible")&&(n.panel("move",{left:function(){var e=a.offset().left;"right"==i.panelAlign&&(e+=a._outerWidth()-n._outerWidth());e+n._outerWidth()>l(window)._outerWidth()+l(document).scrollLeft()&&(e=l(window)._outerWidth()+l(document).scrollLeft()-n._outerWidth());e<0&&(e=0);return e}(),top:function(){var e=a.offset().top+a._outerHeight();e+n._outerHeight()>l(window)._outerHeight()+l(document).scrollTop()&&(e=a.offset().top-n._outerHeight());e<l(document).scrollTop()&&(e=a.offset().top+a._outerHeight());var t=l(".globel-top-notice").height();0<t&&(e=e-t-10);return e}()}),setTimeout(arguments.callee,200))}()}function d(e){l.data(e,"combo").panel.panel("close")}function c(e){var t=[];return l.data(e,"combo").combo.find(".textbox-value").each(function(){t.push(l(this).val())}),t}function s(e,n){var t=l.data(e,"combo"),a=t.options,i=t.combo;l.isArray(n)||(n=n.split(a.separator));var o=c(e);i.find(".textbox-value").remove();for(var r=l(e).attr("textboxName")||"",d=0;d<n.length;d++){var s=l('<input type="hidden" class="textbox-value">').appendTo(i);s.attr("name",r),a.disabled&&s.attr("disabled","disabled"),s.val(n[d])}!function(){if(o.length!=n.length)return!0;var e=l.extend(!0,[],o),t=l.extend(!0,[],n);e.sort(),t.sort();for(var a=0;a<e.length;a++)if(e[a]!=t[a])return!0;return!1}()||(a.multiple?a.onChange.call(e,n,o):a.onChange.call(e,n[0],o[0]),l(e).closest("form").trigger("_change",[e]))}function u(e,t){s(e,[t])}l(function(){l(document).unbind(".combo").bind("mousedown.combo mousewheel.combo",function(e){var t=l(e.target).closest("span.combo,div.combo-p,div.menu");t.length?o(t):l("body>div.combo-p>div.combo-panel:visible").panel("close")})}),l.fn.combo=function(i,e){if("string"!=typeof i)return i=i||{},this.each(function(){var e,t,a,n=l.data(this,"combo");n?(l.extend(n.options,i),null!=i.value&&(n.options.originalValue=i.value)):(n=l.data(this,"combo",{options:l.extend({},l.fn.combo.defaults,l.fn.combo.parseOptions(this),i),previousText:""})).options.originalValue=n.options.value,function(e){var t=l.data(e,"combo"),a=t.options,n=a.extraClass?a.extraClass:"";t.panel||(t.panel=l('<div class="combo-panel"></div>').appendTo("body"),t.panel.panel({minWidth:a.panelMinWidth,maxWidth:a.panelMaxWidth,minHeight:a.panelMinHeight,maxHeight:a.panelMaxHeight,doSize:!1,closed:!0,cls:"combo-p "+n,style:{position:"absolute",zIndex:10},onOpen:function(){var e=l(this).panel("options").comboTarget,t=l.data(e,"combo");t&&t.options.onShowPanel.call(e)},onBeforeClose:function(){o(this)},onClose:function(){var e=l(this).panel("options").comboTarget,t=l(e).data("combo");t&&t.options.onHidePanel.call(e)}}));var i=l.extend(!0,[],a.icons);a.hasDownArrow&&i.push({iconCls:"combo-arrow",handler:function(e){r(e.data.target)}}),l(e).addClass("combo-f").textbox(l.extend({},a,{icons:i,onChange:function(){}})),l(e).attr("comboName",l(e).attr("textboxName")),t.combo=l(e).next(),t.combo.addClass("combo"),0<a.minHeight&&t.combo.css("min-height",a.minHeight)}(this),e=this,t=l.data(e,"combo").options,a=t.onChange,t.onChange=function(){},t.multiple?s(e,t.value?t.value:[]):u(e,t.value),t.onChange=a});var t=l.fn.combo.methods[i];return t?t(this,e):this.textbox(i,e)},l.fn.combo.methods={options:function(e){var t=e.textbox("options");return l.extend(l.data(e[0],"combo").options,{width:t.width,height:t.height,disabled:t.disabled,readonly:t.readonly})},cloneFrom:function(e,t){return e.each(function(){l(this).textbox("cloneFrom",t),l.data(this,"combo",{options:l.extend(!0,{cloned:!0},l(t).combo("options")),combo:l(this).next(),panel:l(t).combo("panel")}),l(this).addClass("combo-f").attr("comboName",l(this).attr("textboxName"))})},panel:function(e){return l.data(e[0],"combo").panel},destroy:function(e){return e.each(function(){var e,t,a,n;e=this,t=l.data(e,"combo"),a=t.options,(n=t.panel).is(":visible")&&n.panel("close"),a.cloned||n.panel("destroy"),l(e).textbox("destroy")})},showPanel:function(e){return e.each(function(){t(this)})},hidePanel:function(e){return e.each(function(){d(this)})},clear:function(e){return e.each(function(){l(this).textbox("setText",""),l.data(this,"combo").options.multiple?l(this).combo("setValues",[]):l(this).combo("setValue","")})},reset:function(e){return e.each(function(){var e=l.data(this,"combo").options;e.multiple?l(this).combo("setValues",e.originalValue):l(this).combo("setValue",e.originalValue)})},setText:function(e,n){return e.each(function(){var e,t,a;e=this,t=n,a=l.data(e,"combo"),l(e).textbox("getText")!=t&&(l(e).textbox("setText",t),a.previousText=t)})},getValues:function(e){return c(e[0])},setValues:function(e,t){return e.each(function(){s(this,t)})},getValue:function(e){return c(e[0])[0]},setValue:function(e,t){return e.each(function(){u(this,t)})}},l.fn.combo.parseOptions=function(e){var t=l(e);return l.extend({},l.fn.textbox.parseOptions(e),l.parser.parseOptions(e,["separator","panelAlign",{panelWidth:"number",hasDownArrow:"boolean",delay:"number",selectOnNavigation:"boolean"},{panelMinWidth:"number",panelMaxWidth:"number",panelMinHeight:"number",panelMaxHeight:"number"}]),{panel_height:"auto"==t.attr("panel_height")?"auto":parseInt(t.attr("panel_height"))||void 0,multiple:!!t.attr("multiple")||void 0})},l.fn.combo.defaults=l.extend({},l.fn.textbox.defaults,{inputEvents:{click:function(e){var t=e.data.target,a=l.data(t,"combo"),n=a.options,i=a.panel;if(n.editable){var o=l(t).closest("div.combo-panel");l("div.combo-panel:visible").not(i).not(o).panel("close")}else r(t)},keyup:e,paste:e,drop:e},panelWidth:null,panel_height:200,panelMinWidth:null,panelMaxWidth:null,panelMinHeight:null,panelMaxHeight:null,panelAlign:"right",multiple:!1,limitToList:!0,appendToDB:{allow:!1},allowInput:!1,selectOnNavigation:!0,separator:",",hasDownArrow:!0,delay:200,keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){},query:function(e,t){}},onShowPanel:function(){},onHidePanel:function(){},onChange:function(e,t){}})}(jQuery),function(b){var r=0;function d(e,t){for(var a=b.data(e,"combobox"),n=a.options,i=a.data,o=0;o<i.length;o++)if(i[o][n.valueField]==t||i[o][n.textField]==t)return o;return-1}function s(e,t){var a=b.data(e,"combobox").options,n=b(e).combo("panel"),i=a.finder.getEl(e,t);if(i.length)if(i.position().top<=0){var o=n.scrollTop()+i.position().top;n.scrollTop(o)}else if(i.position().top+i.outerHeight()>n.height()){o=n.scrollTop()+i.position().top+i.outerHeight()-n.height();n.scrollTop(o)}}function t(e,t){var a=b.data(e,"combobox").options,n=b(e).combobox("panel"),i=n.children("div.combobox-item-hover");i.length||(i=n.children("div.combobox-item-selected")),i.removeClass("combobox-item-hover");var o="div.combobox-item:visible:not(.combobox-item-disabled):first",r="div.combobox-item:visible:not(.combobox-item-disabled):last";if(i.length?"next"==t?(i=i.nextAll(o)).length||(i=n.children(o)):(i=i.prevAll(o)).length||(i=n.children(r)):i=n.children("next"==t?o:r),i.length){i.addClass("combobox-item-hover");var d=a.finder.getRow(e,i);d&&(s(e,d[a.valueField]),a.selectOnNavigation&&p(e,d[a.valueField]))}}function p(e,t){var a=b.data(e,"combobox").options,n=b(e).combo("getValues");-1==b.inArray(t+"",n)&&(a.multiple?n.push(t):n=[t],g(e,n),a.onSelect.call(e,a.finder.getRow(e,t)))}function l(e,t){var a=b.data(e,"combobox").options,n=b(e).combo("getValues"),i=b.inArray(t+"",n);0<=i&&(n.splice(i,1),g(e,n),a.onUnselect.call(e,a.finder.getRow(e,t)))}function g(e,t,a){var n=b.data(e,"combobox").options,i=b(e).combo("panel");b.isArray(t)||(t=t.split(n.separator)),i.find("div.combobox-item-selected").removeClass("combobox-item-selected");var o,r,d,s=[],l=[],c=b(e).combobox("getData"),u={};c.forEach(function(e){u[e[n.textField]]=e[n.valueField]});for(var f=0;f<t.length;f++){var h=t[f],p=h;n.finder.getEl(e,h).addClass("combobox-item-selected");var g=n.finder.getRow(e,h);p=g?g[n.textField]:(o=h,r=n.mappingRows,((d=Strack.getArrayItem(r,n.valueField,o))?d[n.textField]:void 0)||h),s.push(h),l.push(p)}a||(b(e).combo("setText",l.join(n.separator)),b(e).combo("setValues",s))}function c(e,t,a){var n=b.data(e,"combobox"),i=n.options;n.data=i.loadFilter.call(e,t),n.groups=[],t=n.data;for(var o=b(e).combobox("getValues"),r=[],d=void 0,s=0;s<t.length;s++){var l=t[s],c=l[i.valueField]+"",u=l[i.textField],f=l[i.groupField];f?d!=f&&(d=f,n.groups.push(f),r.push('<div id="'+n.groupIdPrefix+"_"+(n.groups.length-1)+'" class="combobox-group">'),r.push(i.groupFormatter?i.groupFormatter.call(e,f):f),r.push("</div>")):d=void 0;var h="combobox-item"+(l.disabled?" combobox-item-disabled":"")+(f?" combobox-gitem":"");r.push('<div id="'+n.itemIdPrefix+"_"+s+'" class="'+h+'">'),r.push(i.formatter?i.formatter.call(e,l):u),r.push("</div>"),l.selected&&-1==b.inArray(c,o)&&o.push(c)}b(e).combo("panel").html(r.join("")),i.multiple?g(e,o,a):g(e,o.length?[o[o.length-1]]:[],a),i.onLoadSuccess.call(e,t)}function v(t,e,a,n){var i=b.data(t,"combobox").options;e&&(i.url=e),a=b.extend({},i.queryParams,a||{}),0!=i.onBeforeLoad.call(t,a)&&i.loader.call(t,a,function(e){c(t,e,n)},function(){i.onLoadError.apply(this,arguments)})}function i(t){var e=b(t),a=e.combobox("options"),n=e.combobox("panel").children("div.combobox-item-hover");if(n.length){n.removeClass("combobox-item-hover");var i=a.finder.getRow(t,n)[a.valueField];!a.multiple||n.hasClass("combobox-item-selected")?e.combobox("select",i):e.combobox("unselect",i)}var o=[];b.map(e.combobox("getValues"),function(e){0<=d(t,e)&&o.push(e)}),e.combobox("setValues",o),a.multiple||e.combobox("hidePanel")}b.fn.combobox=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var i,e,o,t=b.data(this,"combobox");if(t?b.extend(t.options,n):t=b.data(this,"combobox",{options:b.extend({},b.fn.combobox.defaults,b.fn.combobox.parseOptions(this),n),data:[]}),i=this,e=b.data(i,"combobox"),o=e.options,r++,e.itemIdPrefix="_easyui_combobox_i"+r,e.groupIdPrefix="_easyui_combobox_g"+r,b(i).addClass("combobox-f"),b(i).combo(b.extend({},o,{onShowPanel:function(){b(i).combo("panel").find("div.combobox-item:hidden,div.combobox-group:hidden").show(),s(i,b(i).combobox("getValue")),o.onShowPanel.call(i)}})),b(i).combo("panel").unbind().bind("mouseover",function(e){b(this).children("div.combobox-item-hover").removeClass("combobox-item-hover");var t=b(e.target).closest("div.combobox-item");t.hasClass("combobox-item-disabled")||t.addClass("combobox-item-hover"),e.stopPropagation()}).bind("mouseout",function(e){b(e.target).closest("div.combobox-item").removeClass("combobox-item-hover"),e.stopPropagation()}).bind("click",function(e){var t=b(e.target).closest("div.combobox-item");if(t.length&&!t.hasClass("combobox-item-disabled")){var a=o.finder.getRow(i,t);if(a){var n=a[o.valueField];o.multiple?(t.hasClass("combobox-item-selected")?l:p)(i,n):(p(i,n),b(i).combo("hidePanel")),e.stopPropagation()}}}),t.options.data)c(this,t.options.data);else{var a=b.fn.combobox.parseData(this);a.length&&c(this,a)}v(this)});var t=b.fn.combobox.methods[n];return t?t(this,e):this.combo(n,e)},b.fn.combobox.methods={options:function(e){var t=e.combo("options");return b.extend(b.data(e[0],"combobox").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},setOptions:function(e,a){return e.each(function(){var t=b(this).combobox("options");b.each(a,function(e){t[e]=a[e]})})},getData:function(e){return b.data(e[0],"combobox").data},getRowValue:function(e,t){var a=b(e[0]).combobox("getValue"),n=b.data(e[0],"combobox").data;if(a){var i="";return n.every(function(e){return e[t]!=a||(i=e,!1)}),i}return""},getRowValues:function(e,t){var a=b(e[0]).combobox("getValues"),n=b.data(e[0],"combobox").data;if(0<a.length){var i=[];return n.forEach(function(e){0<=b.inArray(e[t]+"",a)&&i.push(e)}),i}return[]},appendNewItem:function(t,a){return t.each(function(){var e=b.data(t[0],"combobox").data;e.push(a),c(this,e)})},setValues:function(e,t){return e.each(function(){g(this,t)})},setValue:function(e,t){return e.each(function(){g(this,[t])})},getValue:function(e){var t=b(e[0]).combo("getValue");return b(e[0]).combo("panel").children("div").hasClass("combobox-item-selected")?t:""},clear:function(e){return e.each(function(){b(this).combo("clear"),b(this).combo("panel").find("div.combobox-item-selected").removeClass("combobox-item-selected")})},reset:function(e){return e.each(function(){var e=b(this).combobox("options");e.multiple?b(this).combobox("setValues",e.originalValue):b(this).combobox("setValue",e.originalValue)})},loadData:function(e,t){return e.each(function(){c(this,t)})},reload:function(e,t){return e.each(function(){if("string"==typeof t)v(this,t);else{if(t)b(this).combobox("options").queryParams=t;v(this)}})},select:function(e,t){return e.each(function(){p(this,t)})},unselect:function(e,t){return e.each(function(){l(this,t)})}},b.fn.combobox.parseOptions=function(e){b(e);return b.extend({},b.fn.combo.parseOptions(e),b.parser.parseOptions(e,["valueField","textField","groupField","mode","method","url"]))},b.fn.combobox.parseData=function(e){var i=[],o=b(e).combobox("options");return b(e).children().each(function(){if("optgroup"==this.tagName.toLowerCase()){var e=b(this).attr("label");b(this).children().each(function(){t(this,e)})}else t(this)}),i;function t(e,t){var a=b(e),n={};n[o.valueField]=null!=a.attr("value")?a.attr("value"):a.text(),n[o.textField]=a.text(),n.selected=a.is(":selected"),n.disabled=a.is(":disabled"),t&&(o.groupField=o.groupField||"group",n[o.groupField]=t),i.push(n)}},b.fn.combobox.defaults=b.extend({},b.fn.combo.defaults,{valueField:"value",textField:"text",groupField:null,groupFormatter:function(e){return e},mode:"local",method:"post",url:null,data:null,queryParams:{},keyHandler:{up:function(e){t(this,"prev"),e.preventDefault()},down:function(e){t(this,"next"),e.preventDefault()},left:function(e){},right:function(e){},enter:function(e){i(this)},query:function(e,t){!function(l,t){var e=b.data(l,"combobox"),c=e.options,u=b(),a=c.multiple?t.split(c.separator):[t];if("remote"==c.mode)i(a),v(l,null,{q:t},!0);else{var n=b(l).combo("panel");n.find(".combobox-item-hover").removeClass("combobox-item-hover"),n.find(".combobox-item,.combobox-group").hide();var f=e.data,h=[];b.map(a,function(e){var t=e=b.trim(e),a=void 0;u=b();for(var n=0;n<f.length;n++){var i=f[n];if(c.filter.call(l,e,i)){var o=i[c.valueField],r=i[c.textField],d=i[c.groupField],s=c.finder.getEl(l,o).show();r.toLowerCase()==e.toLowerCase()&&(t=o,c.reversed?u=s:p(l,o)),c.groupField&&a!=d&&(c.finder.getGroupEl(l,d).show(),a=d)}}h.push(t)}),i(h)}function i(e){c.reversed?u.addClass("combobox-item-hover"):g(l,!c.multiple||t?e:[],!0)}}(this,e)}},inputEvents:b.extend({},b.fn.combo.defaults.inputEvents,{blur:function(e){var t=e.data.target,a=b(t).combobox("options");if(a.limitToList&&a.multiple){var n=b(t).parent().find(".textbox-text").val();b(t).combobox("panel").children("div.combobox-item-hover");n&&i(t)}}}),filter:function(e,t){return 0<=t[b(this).combobox("options").textField].toLowerCase().indexOf(e.toLowerCase())},formatter:function(e){return e[b(this).combobox("options").textField]},loader:function(e,t,a){var n=b(this).combobox("options");if(!n.url)return!1;b.ajax({type:n.method,url:n.url,data:e,dataType:"json",success:function(e){t(e)},error:function(){a.apply(this,arguments)}})},loadFilter:function(e){return e},finder:{getEl:function(e,t){var a=d(e,t),n=b.data(e,"combobox").itemIdPrefix+"_"+a;return b("#"+n)},getGroupEl:function(e,t){var a=b.data(e,"combobox"),n=Strack.indexOfArray(a.groups,"value",t),i=a.groupIdPrefix+"_"+n;return b("#"+i)},getRow:function(e,t){var a=b.data(e,"combobox"),n=t instanceof jQuery?t.attr("id").substr(a.itemIdPrefix.length+1):d(e,t);return a.data[parseInt(n)]}},onBeforeLoad:function(e){},onLoadSuccess:function(){},onLoadError:function(){},onSelect:function(e){},onUnselect:function(e){}})}(jQuery),function(u){function n(e){var t=u.data(e,"combotree"),a=t.options,n=t.tree,i=[],o=[];if(a.multiple)for(var r=n.tree("getChecked"),d=0;d<r.length;d++)i.push(r[d].id),o.push(r[d].text);else{var s=n.tree("getSelected");s&&(i.push(s.id),o.push(s.text))}u(e).combo("setText",o.join(a.separator)).combo("setValues",a.multiple||i.length?i:[""])}function a(e,t){var a=u.data(e,"combotree"),n=a.options,i=a.tree,o=i.tree("options"),r=o.onCheck,d=o.onSelect;o.onCheck=o.onSelect=function(){},i.find("span.tree-checkbox").addClass("tree-checkbox0").removeClass("tree-checkbox1 tree-checkbox2"),u.isArray(t)||(t=t.split(n.separator));var s=u.map(t,function(e){return String(e)}),l=[];if(u.map(s,function(e){var t=i.tree("find",e);t?(i.tree("check",t.target).tree("select",t.target),l.push(t.text)):l.push(e)}),n.multiple){var c=i.tree("getChecked");u.map(c,function(e){var t=String(e.id);-1==u.inArray(t,s)&&(s.push(t),l.push(e.text))})}o.onCheck=r,o.onSelect=d,u(e).combo("setText",l.join(n.separator)).combo("setValues",n.multiple||s.length?s:[""])}u.fn.combotree=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=u.data(this,"combotree");e?u.extend(e.options,t):u.data(this,"combotree",{options:u.extend({},u.fn.combotree.defaults,u.fn.combotree.parseOptions(this),t)}),function(r){var e=u.data(r,"combotree"),d=e.options,s=e.tree;u(r).addClass("combotree-f"),u(r).combo(d);var t=u(r).combo("panel");s||(s=u("<ul></ul>").appendTo(t),u.data(r,"combotree").tree=s),s.tree(u.extend({},d,{checkbox:d.checkbox,onLoadSuccess:function(e,t){var a=u(r).combotree("getValues");if(d.multiple)for(var n=s.tree("getChecked"),i=0;i<n.length;i++){var o=n[i].id;!function(){for(var e=0;e<a.length;e++)if(o==a[e])return;a.push(o)}()}u(r).combotree("setValues",a),d.onLoadSuccess.call(this,e,t)},onClick:function(e){d.checked?u(this).tree(e.checked?"uncheck":"check",e.target):u(r).combo("hidePanel"),n(r),d.onClick.call(this,e)},onCheck:function(e,t){n(r),d.onCheck.call(this,e,t)}}))}(this)});var a=u.fn.combotree.methods[t];return a?a(this,e):this.combo(t,e)},u.fn.combotree.methods={options:function(e){var t=e.combo("options");return u.extend(u.data(e[0],"combotree").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly,checkbox:t.checkbox})},clone:function(e,t){var a=e.combo("clone",t);return a.data("combotree",{options:u.extend(!0,{},e.combotree("options")),tree:e.combotree("tree")}),a},tree:function(e){return u.data(e[0],"combotree").tree},loadData:function(e,t){return e.each(function(){u.data(this,"combotree").options.data=t,u.data(this,"combotree").tree.tree("loadData",t)})},reload:function(e,a){return e.each(function(){var e=u.data(this,"combotree").options,t=u.data(this,"combotree").tree;a&&(e.url=a),t.tree({url:e.url})})},setValues:function(e,t){return e.each(function(){a(this,t)})},setValue:function(e,t){return e.each(function(){a(this,[t])})},clear:function(e){return e.each(function(){var e=u.data(this,"combotree").tree;e.find("div.tree-node-selected").removeClass("tree-node-selected");for(var t=e.tree("getChecked"),a=0;a<t.length;a++)e.tree("uncheck",t[a].target);u(this).combo("clear")})},reset:function(e){return e.each(function(){var e=u(this).combotree("options");e.multiple?u(this).combotree("setValues",e.originalValue):u(this).combotree("setValue",e.originalValue)})}},u.fn.combotree.parseOptions=function(e){return u.extend({},u.fn.combo.parseOptions(e),u.fn.tree.parseOptions(e))},u.fn.combotree.defaults=u.extend({},u.fn.combo.defaults,u.fn.tree.defaults,{editable:!1})}(jQuery),function(_){function n(n){var i=_.data(n,"combogrid"),r=i.options,t=i.grid;_(n).addClass("combogrid-f").combo(_.extend({},r,{onShowPanel:function(){var e=_(this).combogrid("panel"),t=e.outerHeight()-e.height(),a=e._size("minHeight"),n=e._size("maxHeight"),i=_(this).combogrid("grid");i.datagrid("resize",{width:"100%",height:isNaN(parseInt(r.panel_height))?"auto":"100%",minHeight:a?a-t:"",maxHeight:n?n-t:""});var o=i.datagrid("getSelected");o&&i.datagrid("scrollTo",i.datagrid("getRowIndex",o)),r.onShowPanel.call(this)}}));var e=_(n).combo("panel");function a(){var e=_.map(t.datagrid("getSelections"),function(e){return e[r.idField]});e=e.concat(r.unselectedValues),r.multiple||(e=e.length?[e[0]]:[""]),d(n,e,i.remainText)}t||(t=_("<table></table>").appendTo(e),i.grid=t),t.datagrid(_.extend({},r,{border:!1,singleSelect:!r.multiple,onLoadSuccess:function(e){var t=_(n).combo("getValues"),a=r.onSelect;r.onSelect=function(){},d(n,t,i.remainText),r.onSelect=a,r.onLoadSuccess.apply(n,arguments)},onClickRow:function(e,t){i.remainText=!1,a(),r.multiple||_(n).combo("hidePanel");r.onClickRow.call(this,e,t)},onSelect:function(e,t){a(),r.onSelect.call(this,e,t)},onUnselect:function(e,t){a(),r.onUnselect.call(this,e,t)},onSelectAll:function(e){a(),r.onSelectAll.call(this,e)},onUnselectAll:function(e){r.multiple&&a(),r.onUnselectAll.call(this,e)}}))}function t(e,t){var a=_.data(e,"combogrid"),n=a.options,i=a.grid,o=i.datagrid("getRows").length;if(o){var r=n.finder.getTr(i[0],null,"highlight");if(r.length||(r=n.finder.getTr(i[0],null,"selected")),r.length){var d=parseInt(r.attr("datagrid-row-index"));(d+="next"==t?1:-1)<0&&(d=o-1),o<=d&&(d=0)}else d="next"==t?0:o-1;i.datagrid("highlightRow",d),n.selectOnNavigation&&(a.remainText=!1,i.datagrid("selectRow",d))}}function d(e,t,a){var n=_.data(e,"combogrid"),i=n.options,o=n.grid,r=_(e).combo("getValues"),d=_(e).combo("options"),s=d.onChange;d.onChange=function(){};var l=o.datagrid("options"),c=l.onSelect,u=l.onUnselectAll;l.onSelect=l.onUnselectAll=function(){},_.isArray(t)||(t=t.split(i.separator));var f=[];_.map(o.datagrid("getSelections"),function(e){0<=_.inArray(e[i.idField],t)&&f.push(e)}),o.datagrid("clearSelections"),o.data("datagrid").selectedRows=f;for(var h=[],p=0;p<t.length;p++){var g=t[p],b=o.datagrid("getRowIndex",g);0<=b&&o.datagrid("selectRow",b),h.push(x(g,o.datagrid("getRows"))||x(g,o.datagrid("getSelections"))||x(g,i.mappingRows)||g)}i.unselectedValues=[];var v=_.map(f,function(e){return e[i.idField]});if(_.map(t,function(e){-1==_.inArray(e,v)&&i.unselectedValues.push(e)}),_(e).combo("setValues",r),d.onChange=s,l.onSelect=c,l.onUnselectAll=u,!a){var m=h.join(i.separator);_(e).combo("getText")!=m&&_(e).combo("setText",m)}function x(e,t){for(var a=0;a<t.length;a++)if(e==t[a][i.idField])return t[a][i.textField]}_(e).combo("setValues",t)}_.fn.combogrid=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=_.data(this,"combogrid");e?_.extend(e.options,t):e=_.data(this,"combogrid",{options:_.extend({},_.fn.combogrid.defaults,_.fn.combogrid.parseOptions(this),t)}),n(this)});var a=_.fn.combogrid.methods[t];return a?a(this,e):this.combo(t,e)},_.fn.combogrid.methods={options:function(e){var t=e.combo("options");return _.extend(_.data(e[0],"combogrid").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},grid:function(e){return _.data(e[0],"combogrid").grid},setValues:function(e,t){return e.each(function(){var n=_(this).combogrid("options");_.isArray(t)&&(t=_.map(t,function(t){if("object"!=typeof t)return t;var a=t[n.idField];return function(){for(var e=0;e<n.mappingRows.length;e++)if(a==n.mappingRows[e][n.idField])return;n.mappingRows.push(t)}(),a})),d(this,t)})},setValue:function(e,t){return e.each(function(){_(this).combogrid("setValues",[t])})},clear:function(e){return e.each(function(){_(this).combogrid("grid").datagrid("clearSelections"),_(this).combo("clear")})},reset:function(e){return e.each(function(){var e=_(this).combogrid("options");e.multiple?_(this).combogrid("setValues",e.originalValue):_(this).combogrid("setValue",e.originalValue)})}},_.fn.combogrid.parseOptions=function(e){_(e);return _.extend({},_.fn.combo.parseOptions(e),_.fn.datagrid.parseOptions(e),_.parser.parseOptions(e,["idField","textField","mode"]))},_.fn.combogrid.defaults=_.extend({},_.fn.combo.defaults,_.fn.datagrid.defaults,{height:22,loadMsg:null,idField:null,textField:null,unselectedValues:[],mappingRows:[],mode:"local",keyHandler:{up:function(e){t(this,"prev"),e.preventDefault()},down:function(e){t(this,"next"),e.preventDefault()},left:function(e){},right:function(e){},enter:function(e){!function(e){var t=_.data(e,"combogrid"),a=t.options,n=t.grid,i=a.finder.getTr(n[0],null,"highlight");if(t.remainText=!1,i.length){var o=parseInt(i.attr("datagrid-row-index"));a.multiple&&i.hasClass("datagrid-row-selected")?n.datagrid("unselectRow",o):n.datagrid("selectRow",o)}var r=[];_.map(n.datagrid("getSelections"),function(e){r.push(e[a.idField])}),_(e).combogrid("setValues",r),a.multiple||_(e).combogrid("hidePanel")}(this)},query:function(e,t){!function(n,e){var t=_.data(n,"combogrid"),i=t.options,o=t.grid;if(t.remainText=!0,i.multiple&&!e?d(n,[],!0):d(n,[e],!0),"remote"==i.mode)o.datagrid("clearSelections"),o.datagrid("load",_.extend({},i.queryParams,{q:e}));else{if(!e)return;o.datagrid("clearSelections").datagrid("highlightRow",-1);var r=o.datagrid("getRows"),a=i.multiple?e.split(i.separator):[e];_.map(a,function(a){(a=_.trim(a))&&_.map(r,function(e,t){a==e[i.textField]?o.datagrid("selectRow",t):i.filter.call(n,a,e)&&o.datagrid("highlightRow",t)})})}}(this,e)}},filter:function(e,t){return 0<=(t[_(this).combogrid("options").textField]||"").toLowerCase().indexOf(e.toLowerCase())}})}(jQuery),function(c){function r(e,t){var a=c(e).next(),n=t?c(t):a.find(".tagbox-label");if(n.length){var i=c(e).tagbox("textbox"),o=c(n[0]),r=o.outerHeight(!0)-o.outerHeight(),d=i.outerHeight()-2*r;n.css({height:d+"px",lineHeight:d+"px"}),a.find(".textbox-addon").css("height","100%").find(".textbox-icon").css("height","100%"),a.find(".textbox-button").linkbutton("resize",{height:"100%"})}}function d(e){var t=c(e).tagbox("options"),a=c(e).tagbox("textbox"),n=c(e).next(),i=c("<span></span>").appendTo("body");i.attr("style",a.attr("style")),i.css({position:"absolute",top:-9999,left:-9999,width:"auto",fontFamily:a.css("fontFamily"),fontSize:a.css("fontSize"),fontWeight:a.css("fontWeight"),whiteSpace:"nowrap"});var o=s(a.val()),r=s(t.prompt||"");i.remove();var d=Math.min(Math.max(o,r)+20,n.width());function s(e){var t=e.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");return i.html(t),i.outerWidth()}a._outerWidth(d),n.find(".textbox-button").linkbutton("resize",{height:"100%"})}c.fn.tagbox=function(n,e){if("string"!=typeof n)return n=n||{},this.each(function(){var s,l,e,o,t=c.data(this,"tagbox");function a(){c(s).next().find(".tagbox-label").remove();var d=c(s).tagbox("textbox");c.map(c(s).tagbox("getValues"),function(e,t){var a=l.finder.getRow(s,e),n=l.tagFormatter.call(s,e,a),i={},o=l.tagStyler.call(s,e,a)||"";i="string"==typeof o?{s:o}:{c:o.class||"",s:o.style||""};var r=c('<span class="tagbox-label"></span>').insertBefore(d).html(n);r.attr("tagbox-index",t),r.attr("style",i.s).addClass(i.c),c('<a href="javascript:;" class="tagbox-remove"></a>').appendTo(r)}),r(s),c(s).combobox("setText","")}t?c.extend(t.options,n):c.data(this,"tagbox",{options:c.extend({},c.fn.tagbox.defaults,c.fn.tagbox.parseOptions(this),n)}),s=this,l=c.data(s,"tagbox").options,e=["tagbox"],l.hasDownArrow&&e.push("tagbox-padding-right"),c(s).addClass("tagbox-f").combobox(c.extend({},l,{cls:e.join(" "),reversed:!0,onChange:function(e,t){a(),l.onChange.call(s,e,t)},onResizing:function(e,t){var a=c(this).combobox("textbox"),n=c(this).data("textbox").textbox,i=n.outerWidth();n.css({height:"",paddingLeft:a.css("marginLeft"),paddingRight:a.css("marginRight")}),a.css("margin",0),n._outerWidth(i),d(s),r(this),l.onResizing.call(s,e,t)},onLoadSuccess:function(e){a(),l.onLoadSuccess.call(s,e)}})),a(),d(s),c(o=this).next().unbind(".tagbox").bind("click.tagbox",function(e){var t=c(o).tagbox("options");if(!t.disabled&&!t.readonly){if(c(e.target).hasClass("tagbox-remove")){var a=parseInt(c(e.target).parent().attr("tagbox-index")),n=c(o).tagbox("getValues");if(0==t.onBeforeRemoveTag.call(o,n[a]))return;t.onRemoveTag.call(o,n[a]),n.splice(a,1),c(o).tagbox("setValues",n)}else{var i=c(e.target).closest(".tagbox-label");if(i.length){a=parseInt(i.attr("tagbox-index")),n=c(o).tagbox("getValues");t.onClickTag.call(o,n[a])}}c(this).find(".textbox-text").focus()}}).bind("keyup.tagbox",function(e){d(o)}).bind("mouseover.tagbox",function(e){c(e.target).closest(".textbox-button,.textbox-addon,.tagbox-label").length?c(this).triggerHandler("mouseleave"):c(this).find(".textbox-text").triggerHandler("mouseenter")}).bind("mouseleave.tagbox",function(e){c(this).find(".textbox-text").triggerHandler("mouseleave")})});var t=c.fn.tagbox.methods[n];return t?t(this,e):this.combobox(n,e)},c.fn.tagbox.methods={options:function(e){var t=e.combobox("options");return c.extend(c.data(e[0],"tagbox").options,{width:t.width,height:t.height,minHeight:t.minHeight,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},setValues:function(e,a){return e.each(function(){var e,t;t=a,c(e=this).combobox("setText",""),d(e),c(e).combobox("setValues",t),c(e).combobox("setText",""),c(e).tagbox("validate")})},reset:function(e){return e.each(function(){c(this).combobox("reset").combobox("setText","")})}},c.fn.tagbox.parseOptions=function(e){return c.extend({},c.fn.combobox.parseOptions(e),c.parser.parseOptions(e,[]))},c.fn.tagbox.defaults=c.extend({},c.fn.combobox.defaults,{hasDownArrow:!1,multiple:!0,reversed:!0,selectOnNavigation:!1,tipOptions:c.extend({},c.fn.textbox.defaults.tipOptions,{showDelay:200}),val:function(e){var t=c(e).parent().prev().tagbox("getValues");return c(e).is(":focus")&&t.push(c(e).val()),t.join(",")},inputEvents:c.extend({},c.fn.combo.defaults.inputEvents,{blur:function(e){var t=e.data.target;c(t).tagbox("options").limitToList}}),keyHandler:c.extend({},c.fn.combobox.defaults.keyHandler,{enter:function(e){!function(t){var e=c(t),a=e.tagbox("options"),n=e.tagbox("panel").children("div.combobox-item-hover");if(n.length){n.removeClass("combobox-item-hover");var i=a.finder.getRow(t,n)[a.valueField];n.hasClass("combobox-item-selected")||c(t).tagbox("select",i)}else if(!a.limitToList){var o=c.trim(c(t).tagbox("getText")),r=c(t).tagbox("getValues");""!==o&&c.inArray(o,r)<0&&(a.appendToDB.allow?(a.appendToDB.param.editor="tagbox",c.ajax({type:"POST",url:StrackPHP.commonAddItem,data:JSON.stringify({param:a.appendToDB.param,value:o}),dataType:"json",contentType:"application/json",success:function(e){200===parseInt(e.status)&&(c(t).tagbox("appendNewItem",e.data),r.push(e.data.id),c(t).tagbox("setValues",r))}})):(r.push(o),c(t).tagbox("setValues",r)))}}(this)},query:function(e,t){var a=c(this).tagbox("options");a.limitToList||a.allowInput?c.fn.combobox.defaults.keyHandler.query.call(this,e,t):c(this).combobox("hidePanel")}}),tagFormatter:function(e,t){var a=c(this).tagbox("options");return t?t[a.textField]:e},tagStyler:function(e,t){return""},onClickTag:function(e){},onBeforeRemoveTag:function(e){},onRemoveTag:function(e){}})}(jQuery),function(d){function n(e){var i=d.data(e,"datebox"),r=i.options;if(d(e).addClass("datebox-f").combo(d.extend({},r,{onShowPanel:function(){var a,n;n=d(a=this).datebox("options"),d(a).combo("panel").unbind(".datebox").bind("click.datebox",function(e){if(d(e.target).hasClass("datebox-button-a")){var t=parseInt(d(e.target).attr("datebox-button-index"));n.buttons[t].handler.call(e.target,a)}}),function(e){var t=d(e).combo("panel");if(t.children("div.datebox-button").length)return;for(var a=d('<div class="datebox-button"><table cellspacing="0" cellpadding="0" style="width:100%"><tr></tr></table></div>').appendTo(t).find("tr"),n=0;n<r.buttons.length;n++){var i=d("<td></td>").appendTo(a),o=r.buttons[n];d('<a class="datebox-button-a" href="javascript:void(0)"></a>').html(d.isFunction(o.text)?o.text(e):o.text).appendTo(i).attr("datebox-button-index",n)}a.find("td").css("width",100/r.buttons.length+"%")}(this),function(e){var t=d(e).combo("panel"),a=t.children("div.datebox-calendar-inner");if(t.children()._outerWidth(t.width()),i.calendar.appendTo(a),i.calendar[0].target=e,"auto"!=r.panel_height){var n=t.height();t.children().not(a).each(function(){n-=d(this).outerHeight()}),a._outerHeight(n)}i.calendar.calendar("resize")}(this),o(this,d(this).datebox("getText"),!0),r.onShowPanel.call(this)}})),!i.calendar){var t=d(e).combo("panel").css("overflow","hidden");t.panel("options").onBeforeDestroy=function(){var e=d(this).find(".calendar-shared");e.length&&e.insertBefore(e[0].pholder)};var a=d('<div class="datebox-calendar-inner"></div>').prependTo(t);if(r.sharedCalendar){var n=d(r.sharedCalendar);n[0].pholder||(n[0].pholder=d('<div class="calendar-pholder" style="display:none"></div>').insertAfter(n)),n.addClass("calendar-shared").appendTo(a),n.hasClass("calendar")||n.calendar(),i.calendar=n}else i.calendar=d("<div></div>").appendTo(a).calendar();d.extend(i.calendar.calendar("options"),{fit:!0,border:!1,onSelect:function(t){var e=this.target,a=d(e).datebox("options");o(e,a.formatter.call(e,t)),d(e).combo("hidePanel"),a.start_limit&&d("#"+a.start_limit).datebox("calendar").calendar({validator:function(e){return e<=t}}),a.end_limit&&d("#"+a.end_limit).datebox("calendar").calendar({validator:function(e){return t<=e}}),a.onSelect.call(e,t)}})}d(e).combo("textbox").parent().addClass("datebox"),d(e).datebox("initValue",r.value)}function a(e){var t=d.data(e,"datebox"),a=t.options,n=t.calendar.calendar("options").current;n&&(o(e,a.formatter.call(e,n)),d(e).combo("hidePanel"))}function o(e,t,a){var n=d.data(e,"datebox"),i=n.options,o=n.calendar;o.calendar("moveTo",i.parser.call(e,t)),a?d(e).combo("setValue",t):(t=t&&i.formatter.call(e,o.calendar("options").current),d(e).combo("setText",t).combo("setValue",t))}d.fn.datebox=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=d.data(this,"datebox");e?d.extend(e.options,t):d.data(this,"datebox",{options:d.extend({},d.fn.datebox.defaults,d.fn.datebox.parseOptions(this),t)}),n(this)});var a=d.fn.datebox.methods[t];return a?a(this,e):this.combo(t,e)},d.fn.datebox.methods={options:function(e){var t=e.combo("options");return d.extend(d.data(e[0],"datebox").options,{width:t.width,height:t.height,originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},cloneFrom:function(e,t){return e.each(function(){d(this).combo("cloneFrom",t),d.data(this,"datebox",{options:d.extend(!0,{},d(t).datebox("options")),calendar:d(t).datebox("calendar")}),d(this).addClass("datebox-f")})},calendar:function(e){return d.data(e[0],"datebox").calendar},initValue:function(e,t){return e.each(function(){var e=d(this).datebox("options"),t=e.value;t=t&&e.formatter.call(this,e.parser.call(this,t)),d(this).combo("initValue",t).combo("setText",t)})},setValue:function(e,t){return e.each(function(){o(this,t)})},reset:function(e){return e.each(function(){var e=d(this).datebox("options");d(this).datebox("setValue",e.originalValue)})}},d.fn.datebox.parseOptions=function(e){return d.extend({},d.fn.combo.parseOptions(e),d.parser.parseOptions(e,["sharedCalendar"]))},d.fn.datebox.defaults=d.extend({},d.fn.combo.defaults,{panelWidth:210,panel_height:"auto",sharedCalendar:null,start_limit:!1,end_limit:!1,keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){a(this)},query:function(e,t){o(this,e,!0)}},currentText:"Today",closeText:"Close",okText:"Ok",buttons:[{text:function(e){return d(e).datebox("options").currentText},handler:function(e){var t=new Date;d(e).datebox("calendar").calendar({year:t.getFullYear(),month:t.getMonth()+1,current:new Date(t.getFullYear(),t.getMonth(),t.getDate())}),a(e)}},{text:function(e){return d(e).datebox("options").closeText},handler:function(e){d(this).closest("div.combo-panel").panel("close")}}],formatter:function(e){var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return(a<10?"0"+a:a)+"/"+(n<10?"0"+n:n)+"/"+t},parser:function(e){if(!e)return new Date;var t=e.split("/"),a=parseInt(t[0],10),n=parseInt(t[1],10),i=parseInt(t[2],10);return isNaN(i)||isNaN(a)||isNaN(n)?new Date:new Date(i,a-1,n)},onSelect:function(e){}})}(jQuery),function(s){function t(e){var t,a,n,i,o=s.data(e,"datetimebox").options,r=(a=s(t=e).datetimebox("calendar"),n=s(t).datetimebox("spinner"),i=a.calendar("options").current,new Date(i.getFullYear(),i.getMonth(),i.getDate(),n.timespinner("getHours"),n.timespinner("getMinutes"),n.timespinner("getSeconds")));d(e,o.formatter.call(e,r)),s(e).combo("hidePanel")}function d(n,e,t){var i=s.data(n,"datetimebox").options;if(s(n).combo("setValue",e),!t)if(e){var a=i.parser.call(n,e);s(n).combo("setText",i.formatter.call(n,a)),s(n).combo("setValue",i.formatter.call(n,a))}else s(n).combo("setText",e);a=i.parser.call(n,e);s(n).datetimebox("calendar").calendar("moveTo",a),s(n).datetimebox("spinner").timespinner("setValue",function(e){function t(e){return(e<10?"0":"")+e}var a=[t(e.getHours()),t(e.getMinutes())];i.showSeconds&&a.push(t(e.getSeconds()));return a.join(s(n).datetimebox("spinner").timespinner("options").separator)}(a))}s.fn.datetimebox=function(t,e){if("string"!=typeof t)return t=t||{},this.each(function(){var e=s.data(this,"datetimebox");e?s.extend(e.options,t):s.data(this,"datetimebox",{options:s.extend({},s.fn.datetimebox.defaults,s.fn.datetimebox.parseOptions(this),t)}),function(e){var t=s.data(e,"datetimebox"),a=t.options;if(s(e).datebox(s.extend({},a,{onShowPanel:function(){d(this,s(this).datetimebox("getValue"),!0),a.onShowPanel.call(this)},formatter:s.fn.datebox.defaults.formatter,parser:s.fn.datebox.defaults.parser})),s(e).removeClass("datebox-f").addClass("datetimebox-f"),s(e).datebox("calendar").calendar({onSelect:function(t){a.start_limit&&s("#"+a.start_limit).datebox("calendar").calendar({validator:function(e){return e<=t}}),a.end_limit&&s("#"+a.end_limit).datebox("calendar").calendar({validator:function(e){return t<=e}}),a.onSelect.call(this.target,t)}}),!t.spinner){var n=s(e).datebox("panel"),i=s('<div style="padding:2px"><input></div>').insertAfter(n.children("div.datebox-calendar-inner"));t.spinner=i.children("input")}t.spinner.timespinner({width:a.spinnerWidth,showSeconds:a.showSeconds,separator:a.timeSeparator}),s(e).datetimebox("initValue",a.value)}(this)});var a=s.fn.datetimebox.methods[t];return a?a(this,e):this.datebox(t,e)},s.fn.datetimebox.methods={options:function(e){var t=e.datebox("options");return s.extend(s.data(e[0],"datetimebox").options,{originalValue:t.originalValue,disabled:t.disabled,readonly:t.readonly})},cloneFrom:function(e,t){return e.each(function(){s(this).datebox("cloneFrom",t),s.data(this,"datetimebox",{options:s.extend(!0,{},s(t).datetimebox("options")),spinner:s(t).datetimebox("spinner")}),s(this).removeClass("datebox-f").addClass("datetimebox-f")})},spinner:function(e){return s.data(e[0],"datetimebox").spinner},initValue:function(e,t){return e.each(function(){var e=s(this).datetimebox("options"),t=e.value;t=t&&e.formatter.call(this,e.parser.call(this,t)),s(this).combo("initValue",t).combo("setText",t)})},setValue:function(e,t){return e.each(function(){d(this,t)})},reset:function(e){return e.each(function(){var e=s(this).datetimebox("options");s(this).datetimebox("setValue",e.originalValue)})}},s.fn.datetimebox.parseOptions=function(e){s(e);return s.extend({},s.fn.datebox.parseOptions(e),s.parser.parseOptions(e,["timeSeparator","spinnerWidth",{showSeconds:"boolean"}]))},s.fn.datetimebox.defaults=s.extend({},s.fn.datebox.defaults,{spinnerWidth:"100%",showSeconds:!0,timeSeparator:":",start_limit:!1,end_limit:!1,keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){t(this)},query:function(e,t){d(this,e,!0)}},buttons:[{text:function(e){return s(e).datetimebox("options").currentText},handler:function(e){d(e,s(e).datetimebox("options").formatter.call(e,new Date)),s(e).datetimebox("hidePanel")}},{text:function(e){return s(e).datetimebox("options").okText},handler:function(e){t(e)}},{text:function(e){return s(e).datetimebox("options").closeText},handler:function(e){s(e).datetimebox("hidePanel")}}],formatter:function(e){var t=e.getHours(),a=e.getMinutes(),n=e.getSeconds();function i(e){return(e<10?"0":"")+e}var o=s(this).datetimebox("spinner").timespinner("options").separator,r=s.fn.datebox.defaults.formatter(e)+" "+i(t)+o+i(a);return s(this).datetimebox("options").showSeconds&&(r+=o+i(n)),r},parser:function(e){if(""==s.trim(e))return new Date;var t=e.split(" "),a=s.fn.datebox.defaults.parser(t[0]);if(t.length<2)return a;var n=s(this).datetimebox("spinner").timespinner("options").separator,i=t[1].split(n),o=parseInt(i[0],10)||0,r=parseInt(i[1],10)||0,d=parseInt(i[2],10)||0;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),o,r,d)}})}(jQuery),function($){function init(a){var e=$('<div class="slider"><div class="slider-inner"><a href="javascript:void(0)" class="slider-handle"></a><span class="slider-tip"></span></div><div class="slider-rule"></div><div class="slider-rulelabel"></div><div style="clear:both"></div><input type="hidden" class="slider-value"></div>').insertAfter(a),t=$(a);t.addClass("slider-f").hide();var n=t.attr("name");return n&&(e.find("input.slider-value").attr("name",n),t.removeAttr("name").attr("sliderName",n)),e.bind("_resize",function(e,t){return($(this).hasClass("easyui-fluid")||t)&&_a90(a),!1}),e}function _a90(e,t){var a=$.data(e,"slider"),n=a.options,i=a.slider;t&&(t.width&&(n.width=t.width),t.height&&(n.height=t.height)),i._size(n),"h"==n.mode?(i.css("height",""),i.children("div").css("height","")):(i.css("width",""),i.children("div").css("width",""),i.children("div.slider-rule,div.slider-rulelabel,div.slider-inner")._outerHeight(i._outerHeight())),_a95(e)}function _a96(e){var t=$.data(e,"slider"),r=t.options,d=t.slider,a="h"==r.mode?r.rule:r.rule.slice(0).reverse();r.reversed&&(a=a.slice(0).reverse()),function(e){var t=d.find("div.slider-rule"),a=d.find("div.slider-rulelabel");t.empty(),a.empty();for(var n=0;n<e.length;n++){var i=100*n/(e.length-1)+"%",o=$("<span></span>").appendTo(t);o.css("h"==r.mode?"left":"top",i),"|"!=e[n]&&((o=$("<span></span>").appendTo(a)).html(e[n]),"h"==r.mode?o.css({left:i,marginLeft:-Math.round(o.outerWidth()/2)}):o.css({top:i,marginTop:-Math.round(o.outerHeight()/2)}))}}(a)}function _a9d(s){var a=$.data(s,"slider"),l=a.options,n=a.slider;n.removeClass("slider-h slider-v slider-disabled"),n.addClass("h"==l.mode?"slider-h":"slider-v"),n.addClass(l.disabled?"slider-disabled":"");var e=n.find(".slider-inner");function i(e,t){var a=_aa6(s,e),n=Math.abs(a%l.step);if(n<l.step/2?a-=n:a=a-n+l.step,l.range){var i=l.value[0],o=l.value[1],r=parseFloat((i+o)/2);if(t){var d=0<$(t).nextAll(".slider-handle").length;a<=o&&d?i=a:i<=a&&!d&&(o=a)}else a<i||!(o<a)&&a<r?i=a:o=a;$(s).slider("setValues",[i,o])}else $(s).slider("setValue",a)}e.html('<a href="javascript:void(0)" class="slider-handle"></a><span class="slider-tip"></span>'),l.range&&e.append('<a href="javascript:void(0)" class="slider-handle"></a><span class="slider-tip"></span>'),e.append('<div class="slider-range"></div>'),n.find("a.slider-handle").draggable({axis:l.mode,cursor:"pointer",disabled:l.disabled,onDrag:function(e){var t=e.data.left,a=n.width();return"h"!=l.mode&&(t=e.data.top,a=n.height()),t<0||a<t||i(t,this),!1},onStartDrag:function(){a.isDragging=!0,l.onSlideStart.call(s,l.value)},onStopDrag:function(e){i("h"==l.mode?e.data.left:e.data.top,this),l.onSlideEnd.call(s,l.value),l.onComplete.call(s,l.value),a.isDragging=!1}}),n.find("div.slider-inner").unbind(".slider").bind("mousedown.slider",function(e){if(!a.isDragging&&!l.disabled){var t=$(this).offset();i("h"==l.mode?e.pageX-t.left:e.pageY-t.top),l.onComplete.call(s,l.value)}})}function _aa8(e,t){var a=$.data(e,"slider"),n=a.options,i=a.slider,o=$.isArray(n.value)?n.value:[n.value],r=[];$.isArray(t)||(t=$.map(String(t).split(n.separator),function(e){return parseFloat(e)})),i.find(".slider-value").remove();for(var d=$(e).attr("sliderName")||"",s=0;s<t.length;s++){var l=t[s];l<n.min&&(l=n.min),l>n.max&&(l=n.max);var c=$('<input type="hidden" class="slider-value">').appendTo(i);c.attr("name",d),c.val(l),r.push(l);var u=i.find(".slider-handle:eq("+s+")"),f=u.next(),h=_ab2(e,l);if(n.showTip?(f.show(),f.html(n.tipFormatter.call(e,l))):f.hide(),"h"==n.mode){var p="left:"+h+"px;";n.progressbar&&$(".slider-range").css("width",h),u.attr("style",p),f.attr("style",p+"margin-left:"+-Math.round(f.outerWidth()/2)+"px")}else{p="top:"+h+"px;";u.attr("style",p),f.attr("style",p+"margin-left:"+-Math.round(f.outerWidth())+"px")}}n.value=n.range?r:r[0],$(e).val(n.range?r.join(n.separator):r[0]),o.join(",")!=r.join(",")&&n.onChange.call(e,n.value,n.range?o:o[0])}function _a95(e){var t=$.data(e,"slider").options,a=t.onChange;t.onChange=function(){},_aa8(e,t.value),t.onChange=a}function _ab2(e,t){var a=$.data(e,"slider"),n=a.options,i=a.slider,o="h"==n.mode?i.width():i.height(),r=n.converter.toPosition.call(e,t,o);return"v"==n.mode&&(r=i.height()-r),n.reversed&&(r=o-r),r.toFixed(0)}function _aa6(e,t){var a=$.data(e,"slider"),n=a.options,i=a.slider,o="h"==n.mode?i.width():i.height();t="h"==n.mode?n.reversed?o-t:t:n.reversed?t:o-t;return n.converter.toValue.call(e,t,o).toFixed(0)}$.fn.slider=function(a,e){return"string"==typeof a?$.fn.slider.methods[a](this,e):(a=a||{},this.each(function(){var e=$.data(this,"slider");e?$.extend(e.options,a):(e=$.data(this,"slider",{options:$.extend({},$.fn.slider.defaults,$.fn.slider.parseOptions(this),a),slider:init(this)}),$(this).removeAttr("disabled"));var t=e.options;t.min=parseFloat(t.min),t.max=parseFloat(t.max),t.range?($.isArray(t.value)||(t.value=$.map(String(t.value).split(t.separator),function(e){return parseFloat(e)})),t.value.length<2&&t.value.push(t.max)):t.value=parseFloat(t.value),t.step=parseFloat(t.step),t.originalValue=t.value,_a9d(this),_a96(this),_a90(this)}))},$.fn.slider.methods={options:function(e){return $.data(e[0],"slider").options},setOptions:function(t,a){$.each(a,function(e){t.slider("options")[e]=a[e]})},destroy:function(e){return e.each(function(){$.data(this,"slider").slider.remove(),$(this).remove()})},resize:function(e,t){return e.each(function(){_a90(this,t)})},getValue:function(e){return e.slider("options").value},getValues:function(e){return e.slider("options").value},setValue:function(e,t){return e.each(function(){_aa8(this,[t])})},setValues:function(e,t){return e.each(function(){_aa8(this,t)})},clear:function(e){return e.each(function(){var e=$(this).slider("options");_aa8(this,e.range?[e.min,e.max]:[e.min])})},reset:function(e){return e.each(function(){var e=$(this).slider("options");$(this).slider(e.range?"setValues":"setValue",e.originalValue)})},enable:function(e){return e.each(function(){$.data(this,"slider").options.disabled=!1,_a9d(this)})},disable:function(e){return e.each(function(){$.data(this,"slider").options.disabled=!0,_a9d(this)})}},$.fn.slider.parseOptions=function(_ac3){var t=$(_ac3);return $.extend({},$.parser.parseOptions(_ac3,["width","height","mode",{reversed:"boolean",showTip:"boolean",range:"boolean",min:"number",max:"number",step:"number"}]),{value:t.val()||void 0,disabled:!!t.attr("disabled")||void 0,rule:t.attr("rule")?eval(t.attr("rule")):void 0})},$.fn.slider.defaults={width:"auto",height:"auto",mode:"h",reversed:!1,showTip:!1,disabled:!1,range:!1,progressbar:!1,value:0,separator:",",min:0,max:100,step:1,rule:[],tipFormatter:function(e){return e},converter:{toPosition:function(e,t){var a=$(this).slider("options");return(e-a.min)/(a.max-a.min)*t},toValue:function(e,t){var a=$(this).slider("options");return a.min+(a.max-a.min)*(e/t)}},onChange:function(e,t){},onSlideStart:function(e){},onSlideEnd:function(e){},onComplete:function(e){}}}(jQuery);